{
  "run_id": "39eb4060",
  "timestamp": "20250723_164200",
  "commit_id": "1c4fbccaf5b544265c5cf977f7eff9c0dc8b5648",
  "trace_count": 11,
  "traces": [
    {
      "id": "b7bc2e59-60b0-4f84-9410-459bb192681d",
      "name": "RunnableLambda",
      "run_type": "chain",
      "start_time": "2025-07-23T14:41:08.965685",
      "end_time": "2025-07-23T14:41:08.966134",
      "status": "success",
      "inputs": {
        "input": {
          "content": "{\"issues\":[]}",
          "additional_kwargs": {
            "parsed": {
              "issues": []
            },
            "refusal": null
          },
          "response_metadata": {
            "token_usage": {
              "completion_tokens": 1563,
              "prompt_tokens": 23122,
              "total_tokens": 24685,
              "completion_tokens_details": {
                "accepted_prediction_tokens": 0,
                "audio_tokens": 0,
                "reasoning_tokens": 1536,
                "rejected_prediction_tokens": 0
              },
              "prompt_tokens_details": {
                "audio_tokens": 0,
                "cached_tokens": 0
              }
            },
            "model_name": "o4-mini-2025-04-16",
            "system_fingerprint": null,
            "id": "chatcmpl-BwUw5tzlctzk5NFcqLebQoozEnQ62",
            "service_tier": "default",
            "finish_reason": "stop",
            "logprobs": null
          },
          "type": "ai",
          "id": "run--cfa4d1ce-6d61-401a-b86a-a6bc9cfe5580-0",
          "example": false,
          "tool_calls": [],
          "invalid_tool_calls": [],
          "usage_metadata": {
            "input_tokens": 23122,
            "output_tokens": 1563,
            "total_tokens": 24685,
            "input_token_details": {
              "audio": 0,
              "cache_read": 0
            },
            "output_token_details": {
              "audio": 0,
              "reasoning": 1536
            }
          }
        }
      },
      "outputs": {
        "output": {
          "issues": []
        }
      },
      "tags": [
        "seq:step:4"
      ],
      "parent_run_id": "b24c9117-122d-41e4-abe8-975026ccf3a1",
      "trace_id": "2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "dotted_order": "20250723T144040524034Z2102d036-0bf8-4863-879f-f17bd2b1b9ca.20250723T144040588355Z426ee021-0ec1-40e6-bda0-4be115f42a34.20250723T144040592707Zb24c9117-122d-41e4-abe8-975026ccf3a1.20250723T144108965685Zb7bc2e59-60b0-4f84-9410-459bb192681d",
      "session_id": "9165a489-2e1b-4cfc-a139-82686a2268ba",
      "extra": {
        "inputs_is_truthy": true,
        "runtime": {
          "sdk": "langsmith-py",
          "sdk_version": "0.3.42",
          "library": "langsmith",
          "platform": "macOS-15.3-arm64-arm-64bit-Mach-O",
          "runtime": "python",
          "py_implementation": "CPython",
          "runtime_version": "3.13.5",
          "langchain_version": "0.3.25",
          "langchain_core_version": "0.3.59"
        },
        "metadata": {
          "LANGSMITH_TRACING": "true",
          "LANGCHAIN_RUN_ID": "39eb4060",
          "revision_id": "v1.1.0-48-g1c4fbcca-dirty",
          "ls_run_depth": 3
        }
      },
      "events": [
        {
          "name": "start",
          "time": "2025-07-23T14:41:08.965685+00:00"
        },
        {
          "name": "end",
          "time": "2025-07-23T14:41:08.966134+00:00"
        }
      ]
    },
    {
      "id": "579b1fd4-89bf-471e-90fe-d6b623c0f6b1",
      "name": "ChatOpenAI",
      "run_type": "llm",
      "start_time": "2025-07-23T14:40:40.619965",
      "end_time": null,
      "status": "pending",
      "inputs": {
        "messages": [
          [
            {
              "lc": 1,
              "type": "constructor",
              "id": [
                "langchain",
                "schema",
                "messages",
                "HumanMessage"
              ],
              "kwargs": {
                "content": "\n===== Problem Statement =====\n--------------------------------------------------------------------------------\nproblem_statement.md:\n--------------------------------------------------------------------------------\n  1 | # REST Architectural Style\n  2 | \n  3 | The university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n  4 | \n  5 | This exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n  6 | \n  7 | ## Application Structure\n  8 | \n  9 | The following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n 10 | <br>\n 11 | #### Client-Side:\n 12 | - The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n 13 | - The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n 14 | - The `Network Layer` contains the functionality to send REST requests to the server.\n 15 | \n 16 | #### Server-Side:\n 17 | - The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n 18 | - The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n 19 | \n 20 | ### Layered Architecture\n 21 | @startuml\n 22 | \n 23 | namespace Client {\n 24 |     namespace NetworkLayer {}\n 25 |     \n 26 |     namespace PresentationLayer {}\n 27 |     \n 28 |     namespace ApplicationLayer {}\n 29 | }\n 30 | \n 31 | namespace Server {\n 32 |     namespace NetworkLayer {}\n 33 |     \n 34 |     namespace BusinessLayer {}\n 35 | }\n 36 | \n 37 | Client.PresentationLayer --> Client.ApplicationLayer\n 38 | Client.ApplicationLayer --> Client.NetworkLayer\n 39 | Client.NetworkLayer <---> Server.NetworkLayer\n 40 | Server.NetworkLayer --> Server.BusinessLayer\n 41 | Server.NetworkLayer -[hidden]> Client.NetworkLayer\n 42 | \n 43 | \n 44 | hide empty fields\n 45 | hide empty methods\n 46 | hide circle\n 47 | @enduml\n 48 | \n 49 | On the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n 50 | ### MVC Component Diagram\n 51 | @startuml\n 52 | \n 53 | namespace Common {\n 54 |     namespace Model {\n 55 |         class Common.Model.Note {\n 56 |             \n 57 |         }\n 58 |         class Common.Model.Person {\n 59 |             \n 60 |         }\n 61 |     }\n 62 | }\n 63 | \n 64 | namespace Client {\n 65 |     namespace Controller {\n 66 |         class Client.Controller.NoteController {\n 67 |             \n 68 |         }\n 69 |         class Client.Controller.PersonController {\n 70 |             \n 71 |         }\n 72 |     }\n 73 |     namespace View {\n 74 |         class Client.View.NoteScene {\n 75 |             \n 76 |         }\n 77 |         class Client.View.PersonScene {\n 78 |             \n 79 |         }\n 80 |     }\n 81 | }\n 82 | \n 83 | Client.Controller.NoteController <-- Client.View.NoteScene\n 84 | Client.Controller.PersonController <-- Client.View.PersonScene\n 85 | Common.Model.Note \"*\" --o Client.Controller.NoteController\n 86 | Common.Model.Person \"*\" --o Client.Controller.PersonController\n 87 | \n 88 | \n 89 | \n 90 | hide empty fields\n 91 | hide empty methods\n 92 | hide circle\n 93 | @enduml\n 94 | \n 95 | <br />\n 96 | \n 97 | ***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n 98 | \n 99 | \n100 | ## Application Functionality\n101 | This system has 2 sides.\n102 | - Client-side\n103 | - Server-side\n104 | \n105 | \n106 | The server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\n107 | The client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n108 | \n109 | The endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n110 | - `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n111 | - `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n112 | - `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n113 | - `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n114 | \n115 | *Note: There are TODOs in the code giving helpful hints*\n116 | \n117 | ***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n118 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n119 | *`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n120 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n121 | *Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n122 | <br/>\n123 | <br/>\n124 | ##Part 1\n125 | In the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\n126 | You have to forward each action to the `PersonService` and add any additional checks before that.\n127 | \n128 | 1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n129 |     Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n130 | 2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n131 |     Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n132 | 3. [task][Endpoint to delete a person](Delete existing person (Server))\n133 |     Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n134 | 4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n135 |     Last but not the least, implement the method `getAllPersons`, which returns all persons.\n136 | \n137 | *Note: Feel free to get inspired by `NoteResource` for additional help.*\n138 | \n139 | \n140 | \n141 | ##Part 2\n142 | In the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\n143 | The Controller should work like this:\n144 | - There is a single `WebClient` instance that is used for all requests\n145 | - Each method should only send a single HTTP request\n146 | - The HTTP requests need to happen asynchronously\n147 | - It has an internal list of all persons\n148 |     - If a person is created, updated or deleted this has to be updated in the list\n149 |     - If all persons are retrieved from the server the list has to be updated accordingly\n150 | - Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n151 |     - This consumer takes the internal list of persons as a parameter\n152 | \n153 | ### UML Diagram\n154 | @startuml\n155 | \n156 | namespace Client {\n157 |     namespace Controller {\n158 |         class PersonController {\n159 |             - webClient: WebClient\n160 |             + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n161 |             + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n162 |             + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n163 |             + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n164 |         }\n165 |     }\n166 | }\n167 | \n168 | namespace Common {\n169 |     class Person {\n170 |         - id: UUID\n171 |         - firstName: String\n172 |         - lastName: String\n173 |         - birthday: LocalDate\n174 |     }\n175 | }\n176 | \n177 | Client.Controller.PersonController o-- \"*\" Common.Person : persons\n178 | \n179 | \n180 | hide empty fields\n181 | hide empty methods\n182 | hide circle\n183 | @enduml\n184 | \n185 | <br />\n186 | \n187 | 1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n188 |     Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n189 | 2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n190 |     Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n191 | 3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n192 |     Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n193 | 4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n194 |     Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n195 | \n196 | *Note: Don't forget the constructor of `PersonController`*\n197 | \n198 | ##Part 3\n199 | It has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n200 | \n201 | It is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\n202 | Some additional notes:\n203 | - The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n204 | - The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n205 | \n206 | [task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\n207 | Implement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\n208 | Then update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n209 | \n210 | *Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*\n\n\n===== Template Repository =====\ntemplate_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import java.util.List;\n 6 | import java.util.function.Consumer;\n 7 | \n 8 | public class PersonController {\n 9 | \n10 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n11 |         // TODO Part 2: Make an http post request to the server\n12 |     }\n13 | \n14 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n15 |         // TODO Part 2: Make an http put request to the server\n16 |     }\n17 | \n18 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n19 |         // TODO Part 2: Make an http delete request to the server\n20 |     }\n21 | \n22 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n23 |         // TODO Part 2: Make an https get request to the server\n24 |     }\n25 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.service.PersonService;\n 4 | import org.springframework.http.MediaType;\n 5 | import org.springframework.web.bind.annotation.RequestMapping;\n 6 | import org.springframework.web.bind.annotation.RestController;\n 7 | \n 8 | @RestController\n 9 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n10 | public class PersonResource {\n11 | \n12 |     private final PersonService personService;\n13 | \n14 |     public PersonResource(PersonService personService) {\n15 |         this.personService = personService;\n16 |     }\n17 | \n18 |     // TODO Part 1: Implement the specified endpoints here\n19 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class PersonService {\n11 |   \t// do not change this\n12 |     private final List<Person> persons;\n13 | \n14 |     public PersonService() {\n15 |         this.persons = new ArrayList<>();\n16 |     }\n17 | \n18 |     public Person savePerson(Person person) {\n19 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n20 |         if (optionalPerson.isEmpty()) {\n21 |             person.setId(UUID.randomUUID());\n22 |             persons.add(person);\n23 |             return person;\n24 |         } else {\n25 |             var existingPerson = optionalPerson.get();\n26 |             existingPerson.setFirstName(person.getFirstName());\n27 |             existingPerson.setLastName(person.getLastName());\n28 |             existingPerson.setBirthday(person.getBirthday());\n29 |             return existingPerson;\n30 |         }\n31 |     }\n32 | \n33 |     public void deletePerson(UUID personId) {\n34 |         this.persons.removeIf(person -> person.getId().equals(personId));\n35 |     }\n36 | \n37 |     public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n38 |         // TODO Part 3: Add sorting here\n39 |         return new ArrayList<>(this.persons);\n40 |     }\n41 | }\n\n\n===== Solution Repository =====\nsolution_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.core.ParameterizedTypeReference;\n 6 | import org.springframework.http.HttpHeaders;\n 7 | import org.springframework.http.MediaType;\n 8 | import org.springframework.web.reactive.function.client.WebClient;\n 9 | \n10 | import java.util.ArrayList;\n11 | import java.util.List;\n12 | import java.util.function.Consumer;\n13 | \n14 | public class PersonController {\n15 |     private final WebClient webClient;\n16 |     private final List<Person> persons;\n17 | \n18 |     public PersonController() {\n19 |         this.webClient = WebClient.builder()\n20 |                 .baseUrl(\"http://localhost:8080/\")\n21 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n23 |                 .build();\n24 |         this.persons = new ArrayList<>();\n25 |     }\n26 | \n27 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n28 |         webClient.post()\n29 |                 .uri(\"persons\")\n30 |                 .bodyValue(person)\n31 |                 .retrieve()\n32 |                 .bodyToMono(Person.class)\n33 |                 .onErrorStop()\n34 |                 .subscribe(newPerson -> {\n35 |                     persons.add(newPerson);\n36 |                     personsConsumer.accept(persons);\n37 |                 });\n38 |     }\n39 | \n40 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n41 |         webClient.put()\n42 |                 .uri(\"persons/\" + person.getId())\n43 |                 .bodyValue(person)\n44 |                 .retrieve()\n45 |                 .bodyToMono(Person.class)\n46 |                 .onErrorStop()\n47 |                 .subscribe(newPerson -> {\n48 |                     persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n49 |                     personsConsumer.accept(persons);\n50 |                 });\n51 |     }\n52 | \n53 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n54 |         webClient.delete()\n55 |                 .uri(\"persons/\" + person.getId())\n56 |                 .retrieve()\n57 |                 .toBodilessEntity()\n58 |                 .onErrorStop()\n59 |                 .subscribe(v -> {\n60 |                     persons.remove(person);\n61 |                     personsConsumer.accept(persons);\n62 |                 });\n63 |     }\n64 | \n65 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n66 |         webClient.get()\n67 |                 .uri(uriBuilder -> uriBuilder\n68 |                         .path(\"persons\")\n69 |                         .queryParam(\"sortField\", sortingOptions.getSortField())\n70 |                         .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n71 |                         .build())\n72 |                 .retrieve()\n73 |                 .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n74 |                 .onErrorStop()\n75 |                 .subscribe(newPersons -> {\n76 |                     persons.clear();\n77 |                     persons.addAll(newPersons);\n78 |                     personsConsumer.accept(persons);\n79 |                 });\n80 |     }\n81 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.service.PersonService;\n 5 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.http.ResponseEntity;\n 8 | import org.springframework.web.bind.annotation.*;\n 9 | \n10 | import java.util.List;\n11 | import java.util.UUID;\n12 | \n13 | @RestController\n14 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n15 | public class PersonResource {\n16 | \n17 |     private final PersonService personService;\n18 | \n19 |     public PersonResource(PersonService personService) {\n20 |         this.personService = personService;\n21 |     }\n22 | \n23 |     @GetMapping(\"persons\")\n24 |     public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n25 |                                                       @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n26 |         return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n27 |     }\n28 | \n29 |     @PostMapping(\"persons\")\n30 |     public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n31 |         if (person.getId() != null) {\n32 |             return ResponseEntity.badRequest().build();\n33 |         }\n34 |         return ResponseEntity.ok(personService.savePerson(person));\n35 |     }\n36 | \n37 |     @PutMapping(\"persons/{personId}\")\n38 |     public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n39 |         if (!updatedPerson.getId().equals(personId)) {\n40 |             return ResponseEntity.badRequest().build();\n41 |         }\n42 |         return ResponseEntity.ok(personService.savePerson(updatedPerson));\n43 |     }\n44 | \n45 |     @DeleteMapping(\"persons/{personId}\")\n46 |     public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n47 |         personService.deletePerson(personId);\n48 |         return ResponseEntity.noContent().build();\n49 |     }\n50 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | import static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n10 | \n11 | @Service\n12 | public class PersonService {\n13 |   \t// do not change this\n14 |     private final List<Person> persons;\n15 | \n16 |     public PersonService() {\n17 |         this.persons = new ArrayList<>();\n18 |     }\n19 | \n20 |     public Person savePerson(Person person) {\n21 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n22 |         if (optionalPerson.isEmpty()) {\n23 |             person.setId(UUID.randomUUID());\n24 |             persons.add(person);\n25 |             return person;\n26 |         } else {\n27 |             var existingPerson = optionalPerson.get();\n28 |             existingPerson.setFirstName(person.getFirstName());\n29 |             existingPerson.setLastName(person.getLastName());\n30 |             existingPerson.setBirthday(person.getBirthday());\n31 |             return existingPerson;\n32 |         }\n33 |     }\n34 | \n35 |     public void deletePerson(UUID personId) {\n36 |         this.persons.removeIf(person -> person.getId().equals(personId));\n37 |     }\n38 | \n39 |     public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n40 |         if (sortingOptions == null) {\n41 |             return this.persons.stream();\n42 |         }\n43 |         Stream<Person> sortedStream = this.persons.stream();\n44 |         sortedList.sort((p1, p2) -> {\n45 |             Person person1;\n46 |             Person person2;\n47 |             if (sortingOptions.getSortingOrder() == ASCENDING) {\n48 |                 person1 = p1;\n49 |                 person2 = p2;\n50 |             } else {\n51 |                 person1 = p2;\n52 |                 person2 = p1;\n53 |             }\n54 | \n55 |             return switch (sortingOptions.getSortField()) {\n56 |                 case ID -> person1.getId().compareTo(person2.getId());\n57 |                 case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n58 |                 case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n59 |                 case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n60 |             };\n61 |         });\n62 |         return sortedList;\n63 |     }\n64 | }\n\n# MISSION\nYou are a Structural Consistency Validator for programming exercises. Your task: detect UNINTENDED structural inconsistencies that would confuse students or prevent them from implementing the intended design. Focus on ensuring coherence between what the problem statement describes, what the template code provides, and what the solution demonstrates.\n\n# ARTIFACTS AVAILABLE\nYou will analyze consistency across these artifacts:\n- **Problem Statement**: The exercise description and requirements\n- **Template Repository**: Starter code that students begin with (incomplete implementation)\n- **Solution Repository**: Complete reference implementation showing the intended final state\n\n# CORE PRINCIPLE\n**ONLY flag unintentional structural inconsistencies that create student confusion or implementation barriers.**\n**DO NOT flag intentional pedagogical gaps (missing method bodies, incomplete implementations, etc.)**\n\nThis includes:\n- **Cross-artifact inconsistencies**: Problem statement describes one structure, template/solution implements another\n- **Inner-artifact inconsistencies**: Contradictions within the problem statement, template, or solution itself\n- **Design implementation barriers**: Template structure prevents students from following the specified design\n- **Template-Solution conflicts**: Template structure is incompatible with the solution structure\n\n# PEDAGOGICAL VS. STRUCTURAL UNDERSTANDING\n\n## PEDAGOGICAL GAPS (DO NOT FLAG):\n- Missing method bodies in template classes (students implement these)\n- Incomplete constructor implementations\n- Abstract methods without implementation (by design)\n- Missing private helper methods students should write\n- Incomplete exception handling in method stubs\n- Missing validation logic in setter methods\n- Empty method stubs with TODO comments\n\n## STRUCTURAL INCONSISTENCIES (FLAG THESE):\n- **Cross-artifact conflicts**: Problem describes inheritance, template has standalone classes\n- **Design contradictions**: Problem states interface implementation, template has conflicting signatures\n- **Missing structural foundation**: Problem references classes/enums that don't exist in template\n- **Inner-artifact contradictions**: Problem statement describes same element differently in multiple places\n- **Template self-contradictions**: Template code has conflicting declarations or imports\n- **Type/signature mismatches**: Return types, parameters, or visibility that prevent intended design\n- **Template-Solution structural conflicts**: Template structure incompatible with solution design\n- **Solution contradicts specification**: Solution implements different structure than problem describes\n\n# ANALYSIS FRAMEWORK\n\n## STEP 1: Educational Context Analysis\nBefore identifying issues, determine:\n- What design is the problem statement trying to teach?\n- Does the template structure support this design or contradict it?\n- Does the solution structure align with both problem and template?\n- Are missing elements intentional learning gaps or structural oversights?\n- Would students be confused by conflicting information between artifacts?\n\n## STEP 2: Consistency Validation\nCheck for these specific inconsistencies:\n\n**METHOD_RETURN_TYPE_MISMATCH**: Method return type conflicts between problem description, template, and/or solution\n- Example: Problem describes `getArea()` returns `double`, template declares `int getArea()`\n- Example: Template has `int getArea()`, solution has `double getArea()`\n- Not flagged: Missing method body in template method\n\n**METHOD_PARAMETER_MISMATCH**: Method parameter conflicts between specification, template, and/or solution\n- Example: Problem requires `setDimensions(int width, int height)`, template has `setDimensions(int size)`\n- Example: Template has `setDimensions(int size)`, solution has `setDimensions(int width, int height)`\n- Not flagged: Empty method body with correct signature\n\n**CONSTRUCTOR_PARAMETER_MISMATCH**: Constructor parameter conflicts between specification, template, and/or solution\n- Example: Problem requires `Person(String name, int age)`, template only has `Person(String name)`\n- Example: Template has `Person(String name)`, solution has `Person(String name, int age)`\n- Not flagged: Empty constructor body with correct parameters\n\n**ATTRIBUTE_TYPE_MISMATCH**: Attribute data type inconsistencies across artifacts\n- Example: Problem states `List<String> names`, template declares `String[] names`\n- Example: Template has `String[] names`, solution has `List<String> names`\n- Example: Problem statement describes same field as both `int` and `String` in different sections\n- Not flagged: Uninitialized fields in template\n\n**VISIBILITY_MISMATCH**: Method/attribute visibility conflicts between specification, template, and/or solution\n- Example: Problem describes `public getBalance()`, template declares `private getBalance()`\n- Example: Template has `private getBalance()`, solution has `public getBalance()`\n- Example: Problem UML shows public method, template implementation is private\n- Not flagged: Missing access modifier implementation details\n\n## STEP 3: Self-Verification\nFor each potential issue, ask:\n1. Is this a structural inconsistency or intentional pedagogical design?\n2. Would this confuse students about what they're supposed to implement?\n3. Does this prevent students from following the intended design pattern?\n4. Is this an unintentional oversight rather than a learning exercise?\n\nOnly flag issues where students would be genuinely confused or blocked from implementing the intended solution.\n\n# EXAMPLES\n\n## ❌ FALSE POSITIVE (DO NOT FLAG):\n```\nProblem: \"Implement the calculateGrade() method in Student class\"\nTemplate: public void calculateGrade() { /* TODO: Implement */ }\nAnalysis: This is intentional - students should implement the method body\n```\n\n## ✅ TRUE POSITIVE (FLAG THIS):\n```\nProblem: \"calculateGrade() method returns double representing grade percentage\"\nTemplate: public int calculateGrade() { /* TODO: Implement */ }\nAnalysis: Return type mismatch - students cannot return double from int method\n```\n\n## ✅ INNER-ARTIFACT INCONSISTENCY (FLAG THIS):\n```\nProblem statement: \"Vehicle has method getSpeed() returning int\" ... later \"getSpeed() returns double\"\nAnalysis: Problem contradicts itself about return type\n```\n\n# SEVERITY GUIDELINES\n- **HIGH**: Creates major confusion or makes core design impossible to implement\n- **MEDIUM**: Creates significant confusion or requires workarounds to implement intended design\n- **LOW**: Minor inconsistencies that might cause brief confusion but are easily resolved\n\n# OUTPUT FORMAT\n```json\n{\n  \"issues\": [\n    {\n      \"description\": \"Precise explanation of the inconsistency and how it affects student understanding/implementation\",\n      \"severity\": \"HIGH\" | \"MEDIUM\" | \"LOW\",\n      \"category\": \"METHOD_RETURN_TYPE_MISMATCH\" | \"METHOD_PARAMETER_MISMATCH\" | \"CONSTRUCTOR_PARAMETER_MISMATCH\" | \"ATTRIBUTE_TYPE_MISMATCH\" | \"VISIBILITY_MISMATCH\",\n      \"related_locations\": [{\n        \"type\": \"PROBLEM_STATEMENT\" | \"TEMPLATE_REPOSITORY\" | \"SOLUTION_REPOSITORY\",\n        \"file_path\": \"exact/path/to/file.java\",\n        \"start_line\": 1,\n        \"end_line\": 10\n      },\n      {\n        \"type\": \"PROBLEM_STATEMENT\" | \"TEMPLATE_REPOSITORY\" | \"SOLUTION_REPOSITORY\",\n        \"file_path\": \"related/file/path.java\",\n        \"start_line\": 5,\n        \"end_line\": 8\n      }],\n      \"suggested_fix\": \"Specific correction that resolves the inconsistency while preserving educational intent\"\n    }\n  ]\n}\n```\n\n# EXECUTION\nAnalyze the provided artifacts for structural inconsistencies that would confuse students or prevent them from implementing the intended design. Focus on cross-artifact contradictions (problem vs template vs solution) and inner-artifact contradictions (within problem statement, template, or solution). Apply the pedagogical vs. structural distinction rigorously. Return only genuine inconsistencies that are unintentional and would hinder student success.",
                "type": "human"
              }
            }
          ]
        ]
      },
      "outputs": null,
      "tags": [
        "seq:step:3"
      ],
      "parent_run_id": "be3c3142-4584-4897-9450-5d9ae5c0fafc",
      "trace_id": "2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "dotted_order": "20250723T144040524034Z2102d036-0bf8-4863-879f-f17bd2b1b9ca.20250723T144040588355Z426ee021-0ec1-40e6-bda0-4be115f42a34.20250723T144040598179Zbe3c3142-4584-4897-9450-5d9ae5c0fafc.20250723T144040619965Z579b1fd4-89bf-471e-90fe-d6b623c0f6b1",
      "session_id": "9165a489-2e1b-4cfc-a139-82686a2268ba",
      "extra": {
        "invocation_params": {
          "model": "o4-mini",
          "model_name": "o4-mini",
          "stream": false,
          "_type": "openai-chat",
          "stop": null,
          "response_format": "<class 'app.creation_steps.step8_review_and_refine.consistency_check.checker.structural.StructuralConsistencyResult'>"
        },
        "options": {
          "stop": null,
          "ls_structured_output_format": {
            "kwargs": {
              "method": "json_schema",
              "strict": null
            },
            "schema": {
              "title": "StructuralConsistencyResult",
              "description": "Result of structural consistency check.",
              "properties": {
                "issues": {
                  "description": "List of structural consistency issues found",
                  "items": {
                    "description": "A structural consistency issue found between problem statement and template.",
                    "properties": {
                      "description": {
                        "description": "Clear explanation of the consistency issue",
                        "type": "string"
                      },
                      "severity": {
                        "description": "Severity levels for consistency issues.",
                        "enum": [
                          "LOW",
                          "MEDIUM",
                          "HIGH"
                        ],
                        "type": "string"
                      },
                      "category": {
                        "description": "Structural consistency issue sub-categories",
                        "enum": [
                          "METHOD_RETURN_TYPE_MISMATCH",
                          "METHOD_PARAMETER_MISMATCH",
                          "CONSTRUCTOR_PARAMETER_MISMATCH",
                          "ATTRIBUTE_TYPE_MISMATCH",
                          "VISIBILITY_MISMATCH"
                        ],
                        "type": "string"
                      },
                      "related_locations": {
                        "description": "Related locations across artifacts",
                        "items": {
                          "description": "Location information for artifacts.",
                          "properties": {
                            "type": {
                              "description": "Artifact type enumeration.",
                              "enum": [
                                "PROBLEM_STATEMENT",
                                "TEMPLATE_REPOSITORY",
                                "SOLUTION_REPOSITORY"
                              ],
                              "type": "string"
                            },
                            "file_path": {
                              "description": "Path to file, empty or problem_statement.md for problem statement",
                              "type": "string"
                            },
                            "start_line": {
                              "description": "Start line number (1-based)",
                              "type": "integer"
                            },
                            "end_line": {
                              "description": "End line number (1-based)",
                              "type": "integer"
                            }
                          },
                          "required": [
                            "type",
                            "file_path",
                            "start_line",
                            "end_line"
                          ],
                          "type": "object"
                        },
                        "type": "array"
                      },
                      "suggested_fix": {
                        "description": "Actionable correction to resolve the issue",
                        "type": "string"
                      }
                    },
                    "required": [
                      "description",
                      "severity",
                      "category",
                      "related_locations",
                      "suggested_fix"
                    ],
                    "type": "object"
                  },
                  "type": "array"
                }
              },
              "required": [
                "issues"
              ],
              "type": "object"
            }
          }
        },
        "batch_size": 1,
        "metadata": {
          "ls_provider": "openai",
          "ls_model_name": "o4-mini",
          "ls_model_type": "chat",
          "ls_temperature": null,
          "LANGSMITH_TRACING": "true",
          "LANGCHAIN_RUN_ID": "39eb4060",
          "revision_id": "v1.1.0-48-g1c4fbcca-dirty",
          "ls_run_depth": 3
        },
        "runtime": {
          "sdk": "langsmith-py",
          "sdk_version": "0.3.42",
          "library": "langchain-core",
          "platform": "macOS-15.3-arm64-arm-64bit-Mach-O",
          "runtime": "python",
          "py_implementation": "CPython",
          "runtime_version": "3.13.5",
          "langchain_version": "0.3.25",
          "langchain_core_version": "0.3.59",
          "library_version": "0.3.59"
        }
      },
      "events": [
        {
          "name": "start",
          "time": "2025-07-23T14:40:40.619965+00:00"
        }
      ]
    },
    {
      "id": "8cfecff3-5f06-432c-a964-9bcfee5ba948",
      "name": "ChatPromptTemplate",
      "run_type": "prompt",
      "start_time": "2025-07-23T14:40:40.618847",
      "end_time": "2025-07-23T14:40:40.619253",
      "status": "success",
      "inputs": {
        "rendered_context": "\n===== Problem Statement =====\n--------------------------------------------------------------------------------\nproblem_statement.md:\n--------------------------------------------------------------------------------\n  1 | # REST Architectural Style\n  2 | \n  3 | The university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n  4 | \n  5 | This exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n  6 | \n  7 | ## Application Structure\n  8 | \n  9 | The following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n 10 | <br>\n 11 | #### Client-Side:\n 12 | - The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n 13 | - The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n 14 | - The `Network Layer` contains the functionality to send REST requests to the server.\n 15 | \n 16 | #### Server-Side:\n 17 | - The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n 18 | - The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n 19 | \n 20 | ### Layered Architecture\n 21 | @startuml\n 22 | \n 23 | namespace Client {\n 24 |     namespace NetworkLayer {}\n 25 |     \n 26 |     namespace PresentationLayer {}\n 27 |     \n 28 |     namespace ApplicationLayer {}\n 29 | }\n 30 | \n 31 | namespace Server {\n 32 |     namespace NetworkLayer {}\n 33 |     \n 34 |     namespace BusinessLayer {}\n 35 | }\n 36 | \n 37 | Client.PresentationLayer --> Client.ApplicationLayer\n 38 | Client.ApplicationLayer --> Client.NetworkLayer\n 39 | Client.NetworkLayer <---> Server.NetworkLayer\n 40 | Server.NetworkLayer --> Server.BusinessLayer\n 41 | Server.NetworkLayer -[hidden]> Client.NetworkLayer\n 42 | \n 43 | \n 44 | hide empty fields\n 45 | hide empty methods\n 46 | hide circle\n 47 | @enduml\n 48 | \n 49 | On the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n 50 | ### MVC Component Diagram\n 51 | @startuml\n 52 | \n 53 | namespace Common {\n 54 |     namespace Model {\n 55 |         class Common.Model.Note {\n 56 |             \n 57 |         }\n 58 |         class Common.Model.Person {\n 59 |             \n 60 |         }\n 61 |     }\n 62 | }\n 63 | \n 64 | namespace Client {\n 65 |     namespace Controller {\n 66 |         class Client.Controller.NoteController {\n 67 |             \n 68 |         }\n 69 |         class Client.Controller.PersonController {\n 70 |             \n 71 |         }\n 72 |     }\n 73 |     namespace View {\n 74 |         class Client.View.NoteScene {\n 75 |             \n 76 |         }\n 77 |         class Client.View.PersonScene {\n 78 |             \n 79 |         }\n 80 |     }\n 81 | }\n 82 | \n 83 | Client.Controller.NoteController <-- Client.View.NoteScene\n 84 | Client.Controller.PersonController <-- Client.View.PersonScene\n 85 | Common.Model.Note \"*\" --o Client.Controller.NoteController\n 86 | Common.Model.Person \"*\" --o Client.Controller.PersonController\n 87 | \n 88 | \n 89 | \n 90 | hide empty fields\n 91 | hide empty methods\n 92 | hide circle\n 93 | @enduml\n 94 | \n 95 | <br />\n 96 | \n 97 | ***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n 98 | \n 99 | \n100 | ## Application Functionality\n101 | This system has 2 sides.\n102 | - Client-side\n103 | - Server-side\n104 | \n105 | \n106 | The server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\n107 | The client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n108 | \n109 | The endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n110 | - `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n111 | - `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n112 | - `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n113 | - `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n114 | \n115 | *Note: There are TODOs in the code giving helpful hints*\n116 | \n117 | ***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n118 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n119 | *`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n120 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n121 | *Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n122 | <br/>\n123 | <br/>\n124 | ##Part 1\n125 | In the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\n126 | You have to forward each action to the `PersonService` and add any additional checks before that.\n127 | \n128 | 1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n129 |     Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n130 | 2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n131 |     Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n132 | 3. [task][Endpoint to delete a person](Delete existing person (Server))\n133 |     Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n134 | 4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n135 |     Last but not the least, implement the method `getAllPersons`, which returns all persons.\n136 | \n137 | *Note: Feel free to get inspired by `NoteResource` for additional help.*\n138 | \n139 | \n140 | \n141 | ##Part 2\n142 | In the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\n143 | The Controller should work like this:\n144 | - There is a single `WebClient` instance that is used for all requests\n145 | - Each method should only send a single HTTP request\n146 | - The HTTP requests need to happen asynchronously\n147 | - It has an internal list of all persons\n148 |     - If a person is created, updated or deleted this has to be updated in the list\n149 |     - If all persons are retrieved from the server the list has to be updated accordingly\n150 | - Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n151 |     - This consumer takes the internal list of persons as a parameter\n152 | \n153 | ### UML Diagram\n154 | @startuml\n155 | \n156 | namespace Client {\n157 |     namespace Controller {\n158 |         class PersonController {\n159 |             - webClient: WebClient\n160 |             + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n161 |             + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n162 |             + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n163 |             + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n164 |         }\n165 |     }\n166 | }\n167 | \n168 | namespace Common {\n169 |     class Person {\n170 |         - id: UUID\n171 |         - firstName: String\n172 |         - lastName: String\n173 |         - birthday: LocalDate\n174 |     }\n175 | }\n176 | \n177 | Client.Controller.PersonController o-- \"*\" Common.Person : persons\n178 | \n179 | \n180 | hide empty fields\n181 | hide empty methods\n182 | hide circle\n183 | @enduml\n184 | \n185 | <br />\n186 | \n187 | 1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n188 |     Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n189 | 2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n190 |     Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n191 | 3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n192 |     Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n193 | 4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n194 |     Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n195 | \n196 | *Note: Don't forget the constructor of `PersonController`*\n197 | \n198 | ##Part 3\n199 | It has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n200 | \n201 | It is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\n202 | Some additional notes:\n203 | - The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n204 | - The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n205 | \n206 | [task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\n207 | Implement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\n208 | Then update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n209 | \n210 | *Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*\n\n\n===== Template Repository =====\ntemplate_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import java.util.List;\n 6 | import java.util.function.Consumer;\n 7 | \n 8 | public class PersonController {\n 9 | \n10 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n11 |         // TODO Part 2: Make an http post request to the server\n12 |     }\n13 | \n14 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n15 |         // TODO Part 2: Make an http put request to the server\n16 |     }\n17 | \n18 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n19 |         // TODO Part 2: Make an http delete request to the server\n20 |     }\n21 | \n22 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n23 |         // TODO Part 2: Make an https get request to the server\n24 |     }\n25 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.service.PersonService;\n 4 | import org.springframework.http.MediaType;\n 5 | import org.springframework.web.bind.annotation.RequestMapping;\n 6 | import org.springframework.web.bind.annotation.RestController;\n 7 | \n 8 | @RestController\n 9 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n10 | public class PersonResource {\n11 | \n12 |     private final PersonService personService;\n13 | \n14 |     public PersonResource(PersonService personService) {\n15 |         this.personService = personService;\n16 |     }\n17 | \n18 |     // TODO Part 1: Implement the specified endpoints here\n19 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class PersonService {\n11 |   \t// do not change this\n12 |     private final List<Person> persons;\n13 | \n14 |     public PersonService() {\n15 |         this.persons = new ArrayList<>();\n16 |     }\n17 | \n18 |     public Person savePerson(Person person) {\n19 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n20 |         if (optionalPerson.isEmpty()) {\n21 |             person.setId(UUID.randomUUID());\n22 |             persons.add(person);\n23 |             return person;\n24 |         } else {\n25 |             var existingPerson = optionalPerson.get();\n26 |             existingPerson.setFirstName(person.getFirstName());\n27 |             existingPerson.setLastName(person.getLastName());\n28 |             existingPerson.setBirthday(person.getBirthday());\n29 |             return existingPerson;\n30 |         }\n31 |     }\n32 | \n33 |     public void deletePerson(UUID personId) {\n34 |         this.persons.removeIf(person -> person.getId().equals(personId));\n35 |     }\n36 | \n37 |     public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n38 |         // TODO Part 3: Add sorting here\n39 |         return new ArrayList<>(this.persons);\n40 |     }\n41 | }\n\n\n===== Solution Repository =====\nsolution_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.core.ParameterizedTypeReference;\n 6 | import org.springframework.http.HttpHeaders;\n 7 | import org.springframework.http.MediaType;\n 8 | import org.springframework.web.reactive.function.client.WebClient;\n 9 | \n10 | import java.util.ArrayList;\n11 | import java.util.List;\n12 | import java.util.function.Consumer;\n13 | \n14 | public class PersonController {\n15 |     private final WebClient webClient;\n16 |     private final List<Person> persons;\n17 | \n18 |     public PersonController() {\n19 |         this.webClient = WebClient.builder()\n20 |                 .baseUrl(\"http://localhost:8080/\")\n21 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n23 |                 .build();\n24 |         this.persons = new ArrayList<>();\n25 |     }\n26 | \n27 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n28 |         webClient.post()\n29 |                 .uri(\"persons\")\n30 |                 .bodyValue(person)\n31 |                 .retrieve()\n32 |                 .bodyToMono(Person.class)\n33 |                 .onErrorStop()\n34 |                 .subscribe(newPerson -> {\n35 |                     persons.add(newPerson);\n36 |                     personsConsumer.accept(persons);\n37 |                 });\n38 |     }\n39 | \n40 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n41 |         webClient.put()\n42 |                 .uri(\"persons/\" + person.getId())\n43 |                 .bodyValue(person)\n44 |                 .retrieve()\n45 |                 .bodyToMono(Person.class)\n46 |                 .onErrorStop()\n47 |                 .subscribe(newPerson -> {\n48 |                     persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n49 |                     personsConsumer.accept(persons);\n50 |                 });\n51 |     }\n52 | \n53 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n54 |         webClient.delete()\n55 |                 .uri(\"persons/\" + person.getId())\n56 |                 .retrieve()\n57 |                 .toBodilessEntity()\n58 |                 .onErrorStop()\n59 |                 .subscribe(v -> {\n60 |                     persons.remove(person);\n61 |                     personsConsumer.accept(persons);\n62 |                 });\n63 |     }\n64 | \n65 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n66 |         webClient.get()\n67 |                 .uri(uriBuilder -> uriBuilder\n68 |                         .path(\"persons\")\n69 |                         .queryParam(\"sortField\", sortingOptions.getSortField())\n70 |                         .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n71 |                         .build())\n72 |                 .retrieve()\n73 |                 .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n74 |                 .onErrorStop()\n75 |                 .subscribe(newPersons -> {\n76 |                     persons.clear();\n77 |                     persons.addAll(newPersons);\n78 |                     personsConsumer.accept(persons);\n79 |                 });\n80 |     }\n81 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.service.PersonService;\n 5 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.http.ResponseEntity;\n 8 | import org.springframework.web.bind.annotation.*;\n 9 | \n10 | import java.util.List;\n11 | import java.util.UUID;\n12 | \n13 | @RestController\n14 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n15 | public class PersonResource {\n16 | \n17 |     private final PersonService personService;\n18 | \n19 |     public PersonResource(PersonService personService) {\n20 |         this.personService = personService;\n21 |     }\n22 | \n23 |     @GetMapping(\"persons\")\n24 |     public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n25 |                                                       @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n26 |         return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n27 |     }\n28 | \n29 |     @PostMapping(\"persons\")\n30 |     public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n31 |         if (person.getId() != null) {\n32 |             return ResponseEntity.badRequest().build();\n33 |         }\n34 |         return ResponseEntity.ok(personService.savePerson(person));\n35 |     }\n36 | \n37 |     @PutMapping(\"persons/{personId}\")\n38 |     public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n39 |         if (!updatedPerson.getId().equals(personId)) {\n40 |             return ResponseEntity.badRequest().build();\n41 |         }\n42 |         return ResponseEntity.ok(personService.savePerson(updatedPerson));\n43 |     }\n44 | \n45 |     @DeleteMapping(\"persons/{personId}\")\n46 |     public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n47 |         personService.deletePerson(personId);\n48 |         return ResponseEntity.noContent().build();\n49 |     }\n50 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | import static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n10 | \n11 | @Service\n12 | public class PersonService {\n13 |   \t// do not change this\n14 |     private final List<Person> persons;\n15 | \n16 |     public PersonService() {\n17 |         this.persons = new ArrayList<>();\n18 |     }\n19 | \n20 |     public Person savePerson(Person person) {\n21 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n22 |         if (optionalPerson.isEmpty()) {\n23 |             person.setId(UUID.randomUUID());\n24 |             persons.add(person);\n25 |             return person;\n26 |         } else {\n27 |             var existingPerson = optionalPerson.get();\n28 |             existingPerson.setFirstName(person.getFirstName());\n29 |             existingPerson.setLastName(person.getLastName());\n30 |             existingPerson.setBirthday(person.getBirthday());\n31 |             return existingPerson;\n32 |         }\n33 |     }\n34 | \n35 |     public void deletePerson(UUID personId) {\n36 |         this.persons.removeIf(person -> person.getId().equals(personId));\n37 |     }\n38 | \n39 |     public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n40 |         if (sortingOptions == null) {\n41 |             return this.persons.stream();\n42 |         }\n43 |         Stream<Person> sortedStream = this.persons.stream();\n44 |         sortedList.sort((p1, p2) -> {\n45 |             Person person1;\n46 |             Person person2;\n47 |             if (sortingOptions.getSortingOrder() == ASCENDING) {\n48 |                 person1 = p1;\n49 |                 person2 = p2;\n50 |             } else {\n51 |                 person1 = p2;\n52 |                 person2 = p1;\n53 |             }\n54 | \n55 |             return switch (sortingOptions.getSortField()) {\n56 |                 case ID -> person1.getId().compareTo(person2.getId());\n57 |                 case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n58 |                 case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n59 |                 case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n60 |             };\n61 |         });\n62 |         return sortedList;\n63 |     }\n64 | }"
      },
      "outputs": {
        "output": {
          "messages": [
            {
              "content": "\n===== Problem Statement =====\n--------------------------------------------------------------------------------\nproblem_statement.md:\n--------------------------------------------------------------------------------\n  1 | # REST Architectural Style\n  2 | \n  3 | The university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n  4 | \n  5 | This exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n  6 | \n  7 | ## Application Structure\n  8 | \n  9 | The following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n 10 | <br>\n 11 | #### Client-Side:\n 12 | - The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n 13 | - The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n 14 | - The `Network Layer` contains the functionality to send REST requests to the server.\n 15 | \n 16 | #### Server-Side:\n 17 | - The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n 18 | - The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n 19 | \n 20 | ### Layered Architecture\n 21 | @startuml\n 22 | \n 23 | namespace Client {\n 24 |     namespace NetworkLayer {}\n 25 |     \n 26 |     namespace PresentationLayer {}\n 27 |     \n 28 |     namespace ApplicationLayer {}\n 29 | }\n 30 | \n 31 | namespace Server {\n 32 |     namespace NetworkLayer {}\n 33 |     \n 34 |     namespace BusinessLayer {}\n 35 | }\n 36 | \n 37 | Client.PresentationLayer --> Client.ApplicationLayer\n 38 | Client.ApplicationLayer --> Client.NetworkLayer\n 39 | Client.NetworkLayer <---> Server.NetworkLayer\n 40 | Server.NetworkLayer --> Server.BusinessLayer\n 41 | Server.NetworkLayer -[hidden]> Client.NetworkLayer\n 42 | \n 43 | \n 44 | hide empty fields\n 45 | hide empty methods\n 46 | hide circle\n 47 | @enduml\n 48 | \n 49 | On the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n 50 | ### MVC Component Diagram\n 51 | @startuml\n 52 | \n 53 | namespace Common {\n 54 |     namespace Model {\n 55 |         class Common.Model.Note {\n 56 |             \n 57 |         }\n 58 |         class Common.Model.Person {\n 59 |             \n 60 |         }\n 61 |     }\n 62 | }\n 63 | \n 64 | namespace Client {\n 65 |     namespace Controller {\n 66 |         class Client.Controller.NoteController {\n 67 |             \n 68 |         }\n 69 |         class Client.Controller.PersonController {\n 70 |             \n 71 |         }\n 72 |     }\n 73 |     namespace View {\n 74 |         class Client.View.NoteScene {\n 75 |             \n 76 |         }\n 77 |         class Client.View.PersonScene {\n 78 |             \n 79 |         }\n 80 |     }\n 81 | }\n 82 | \n 83 | Client.Controller.NoteController <-- Client.View.NoteScene\n 84 | Client.Controller.PersonController <-- Client.View.PersonScene\n 85 | Common.Model.Note \"*\" --o Client.Controller.NoteController\n 86 | Common.Model.Person \"*\" --o Client.Controller.PersonController\n 87 | \n 88 | \n 89 | \n 90 | hide empty fields\n 91 | hide empty methods\n 92 | hide circle\n 93 | @enduml\n 94 | \n 95 | <br />\n 96 | \n 97 | ***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n 98 | \n 99 | \n100 | ## Application Functionality\n101 | This system has 2 sides.\n102 | - Client-side\n103 | - Server-side\n104 | \n105 | \n106 | The server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\n107 | The client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n108 | \n109 | The endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n110 | - `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n111 | - `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n112 | - `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n113 | - `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n114 | \n115 | *Note: There are TODOs in the code giving helpful hints*\n116 | \n117 | ***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n118 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n119 | *`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n120 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n121 | *Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n122 | <br/>\n123 | <br/>\n124 | ##Part 1\n125 | In the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\n126 | You have to forward each action to the `PersonService` and add any additional checks before that.\n127 | \n128 | 1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n129 |     Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n130 | 2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n131 |     Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n132 | 3. [task][Endpoint to delete a person](Delete existing person (Server))\n133 |     Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n134 | 4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n135 |     Last but not the least, implement the method `getAllPersons`, which returns all persons.\n136 | \n137 | *Note: Feel free to get inspired by `NoteResource` for additional help.*\n138 | \n139 | \n140 | \n141 | ##Part 2\n142 | In the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\n143 | The Controller should work like this:\n144 | - There is a single `WebClient` instance that is used for all requests\n145 | - Each method should only send a single HTTP request\n146 | - The HTTP requests need to happen asynchronously\n147 | - It has an internal list of all persons\n148 |     - If a person is created, updated or deleted this has to be updated in the list\n149 |     - If all persons are retrieved from the server the list has to be updated accordingly\n150 | - Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n151 |     - This consumer takes the internal list of persons as a parameter\n152 | \n153 | ### UML Diagram\n154 | @startuml\n155 | \n156 | namespace Client {\n157 |     namespace Controller {\n158 |         class PersonController {\n159 |             - webClient: WebClient\n160 |             + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n161 |             + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n162 |             + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n163 |             + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n164 |         }\n165 |     }\n166 | }\n167 | \n168 | namespace Common {\n169 |     class Person {\n170 |         - id: UUID\n171 |         - firstName: String\n172 |         - lastName: String\n173 |         - birthday: LocalDate\n174 |     }\n175 | }\n176 | \n177 | Client.Controller.PersonController o-- \"*\" Common.Person : persons\n178 | \n179 | \n180 | hide empty fields\n181 | hide empty methods\n182 | hide circle\n183 | @enduml\n184 | \n185 | <br />\n186 | \n187 | 1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n188 |     Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n189 | 2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n190 |     Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n191 | 3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n192 |     Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n193 | 4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n194 |     Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n195 | \n196 | *Note: Don't forget the constructor of `PersonController`*\n197 | \n198 | ##Part 3\n199 | It has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n200 | \n201 | It is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\n202 | Some additional notes:\n203 | - The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n204 | - The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n205 | \n206 | [task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\n207 | Implement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\n208 | Then update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n209 | \n210 | *Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*\n\n\n===== Template Repository =====\ntemplate_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import java.util.List;\n 6 | import java.util.function.Consumer;\n 7 | \n 8 | public class PersonController {\n 9 | \n10 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n11 |         // TODO Part 2: Make an http post request to the server\n12 |     }\n13 | \n14 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n15 |         // TODO Part 2: Make an http put request to the server\n16 |     }\n17 | \n18 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n19 |         // TODO Part 2: Make an http delete request to the server\n20 |     }\n21 | \n22 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n23 |         // TODO Part 2: Make an https get request to the server\n24 |     }\n25 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.service.PersonService;\n 4 | import org.springframework.http.MediaType;\n 5 | import org.springframework.web.bind.annotation.RequestMapping;\n 6 | import org.springframework.web.bind.annotation.RestController;\n 7 | \n 8 | @RestController\n 9 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n10 | public class PersonResource {\n11 | \n12 |     private final PersonService personService;\n13 | \n14 |     public PersonResource(PersonService personService) {\n15 |         this.personService = personService;\n16 |     }\n17 | \n18 |     // TODO Part 1: Implement the specified endpoints here\n19 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class PersonService {\n11 |   \t// do not change this\n12 |     private final List<Person> persons;\n13 | \n14 |     public PersonService() {\n15 |         this.persons = new ArrayList<>();\n16 |     }\n17 | \n18 |     public Person savePerson(Person person) {\n19 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n20 |         if (optionalPerson.isEmpty()) {\n21 |             person.setId(UUID.randomUUID());\n22 |             persons.add(person);\n23 |             return person;\n24 |         } else {\n25 |             var existingPerson = optionalPerson.get();\n26 |             existingPerson.setFirstName(person.getFirstName());\n27 |             existingPerson.setLastName(person.getLastName());\n28 |             existingPerson.setBirthday(person.getBirthday());\n29 |             return existingPerson;\n30 |         }\n31 |     }\n32 | \n33 |     public void deletePerson(UUID personId) {\n34 |         this.persons.removeIf(person -> person.getId().equals(personId));\n35 |     }\n36 | \n37 |     public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n38 |         // TODO Part 3: Add sorting here\n39 |         return new ArrayList<>(this.persons);\n40 |     }\n41 | }\n\n\n===== Solution Repository =====\nsolution_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.core.ParameterizedTypeReference;\n 6 | import org.springframework.http.HttpHeaders;\n 7 | import org.springframework.http.MediaType;\n 8 | import org.springframework.web.reactive.function.client.WebClient;\n 9 | \n10 | import java.util.ArrayList;\n11 | import java.util.List;\n12 | import java.util.function.Consumer;\n13 | \n14 | public class PersonController {\n15 |     private final WebClient webClient;\n16 |     private final List<Person> persons;\n17 | \n18 |     public PersonController() {\n19 |         this.webClient = WebClient.builder()\n20 |                 .baseUrl(\"http://localhost:8080/\")\n21 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n23 |                 .build();\n24 |         this.persons = new ArrayList<>();\n25 |     }\n26 | \n27 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n28 |         webClient.post()\n29 |                 .uri(\"persons\")\n30 |                 .bodyValue(person)\n31 |                 .retrieve()\n32 |                 .bodyToMono(Person.class)\n33 |                 .onErrorStop()\n34 |                 .subscribe(newPerson -> {\n35 |                     persons.add(newPerson);\n36 |                     personsConsumer.accept(persons);\n37 |                 });\n38 |     }\n39 | \n40 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n41 |         webClient.put()\n42 |                 .uri(\"persons/\" + person.getId())\n43 |                 .bodyValue(person)\n44 |                 .retrieve()\n45 |                 .bodyToMono(Person.class)\n46 |                 .onErrorStop()\n47 |                 .subscribe(newPerson -> {\n48 |                     persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n49 |                     personsConsumer.accept(persons);\n50 |                 });\n51 |     }\n52 | \n53 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n54 |         webClient.delete()\n55 |                 .uri(\"persons/\" + person.getId())\n56 |                 .retrieve()\n57 |                 .toBodilessEntity()\n58 |                 .onErrorStop()\n59 |                 .subscribe(v -> {\n60 |                     persons.remove(person);\n61 |                     personsConsumer.accept(persons);\n62 |                 });\n63 |     }\n64 | \n65 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n66 |         webClient.get()\n67 |                 .uri(uriBuilder -> uriBuilder\n68 |                         .path(\"persons\")\n69 |                         .queryParam(\"sortField\", sortingOptions.getSortField())\n70 |                         .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n71 |                         .build())\n72 |                 .retrieve()\n73 |                 .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n74 |                 .onErrorStop()\n75 |                 .subscribe(newPersons -> {\n76 |                     persons.clear();\n77 |                     persons.addAll(newPersons);\n78 |                     personsConsumer.accept(persons);\n79 |                 });\n80 |     }\n81 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.service.PersonService;\n 5 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.http.ResponseEntity;\n 8 | import org.springframework.web.bind.annotation.*;\n 9 | \n10 | import java.util.List;\n11 | import java.util.UUID;\n12 | \n13 | @RestController\n14 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n15 | public class PersonResource {\n16 | \n17 |     private final PersonService personService;\n18 | \n19 |     public PersonResource(PersonService personService) {\n20 |         this.personService = personService;\n21 |     }\n22 | \n23 |     @GetMapping(\"persons\")\n24 |     public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n25 |                                                       @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n26 |         return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n27 |     }\n28 | \n29 |     @PostMapping(\"persons\")\n30 |     public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n31 |         if (person.getId() != null) {\n32 |             return ResponseEntity.badRequest().build();\n33 |         }\n34 |         return ResponseEntity.ok(personService.savePerson(person));\n35 |     }\n36 | \n37 |     @PutMapping(\"persons/{personId}\")\n38 |     public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n39 |         if (!updatedPerson.getId().equals(personId)) {\n40 |             return ResponseEntity.badRequest().build();\n41 |         }\n42 |         return ResponseEntity.ok(personService.savePerson(updatedPerson));\n43 |     }\n44 | \n45 |     @DeleteMapping(\"persons/{personId}\")\n46 |     public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n47 |         personService.deletePerson(personId);\n48 |         return ResponseEntity.noContent().build();\n49 |     }\n50 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | import static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n10 | \n11 | @Service\n12 | public class PersonService {\n13 |   \t// do not change this\n14 |     private final List<Person> persons;\n15 | \n16 |     public PersonService() {\n17 |         this.persons = new ArrayList<>();\n18 |     }\n19 | \n20 |     public Person savePerson(Person person) {\n21 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n22 |         if (optionalPerson.isEmpty()) {\n23 |             person.setId(UUID.randomUUID());\n24 |             persons.add(person);\n25 |             return person;\n26 |         } else {\n27 |             var existingPerson = optionalPerson.get();\n28 |             existingPerson.setFirstName(person.getFirstName());\n29 |             existingPerson.setLastName(person.getLastName());\n30 |             existingPerson.setBirthday(person.getBirthday());\n31 |             return existingPerson;\n32 |         }\n33 |     }\n34 | \n35 |     public void deletePerson(UUID personId) {\n36 |         this.persons.removeIf(person -> person.getId().equals(personId));\n37 |     }\n38 | \n39 |     public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n40 |         if (sortingOptions == null) {\n41 |             return this.persons.stream();\n42 |         }\n43 |         Stream<Person> sortedStream = this.persons.stream();\n44 |         sortedList.sort((p1, p2) -> {\n45 |             Person person1;\n46 |             Person person2;\n47 |             if (sortingOptions.getSortingOrder() == ASCENDING) {\n48 |                 person1 = p1;\n49 |                 person2 = p2;\n50 |             } else {\n51 |                 person1 = p2;\n52 |                 person2 = p1;\n53 |             }\n54 | \n55 |             return switch (sortingOptions.getSortField()) {\n56 |                 case ID -> person1.getId().compareTo(person2.getId());\n57 |                 case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n58 |                 case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n59 |                 case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n60 |             };\n61 |         });\n62 |         return sortedList;\n63 |     }\n64 | }\n\n# MISSION\nYou are a Structural Consistency Validator for programming exercises. Your task: detect UNINTENDED structural inconsistencies that would confuse students or prevent them from implementing the intended design. Focus on ensuring coherence between what the problem statement describes, what the template code provides, and what the solution demonstrates.\n\n# ARTIFACTS AVAILABLE\nYou will analyze consistency across these artifacts:\n- **Problem Statement**: The exercise description and requirements\n- **Template Repository**: Starter code that students begin with (incomplete implementation)\n- **Solution Repository**: Complete reference implementation showing the intended final state\n\n# CORE PRINCIPLE\n**ONLY flag unintentional structural inconsistencies that create student confusion or implementation barriers.**\n**DO NOT flag intentional pedagogical gaps (missing method bodies, incomplete implementations, etc.)**\n\nThis includes:\n- **Cross-artifact inconsistencies**: Problem statement describes one structure, template/solution implements another\n- **Inner-artifact inconsistencies**: Contradictions within the problem statement, template, or solution itself\n- **Design implementation barriers**: Template structure prevents students from following the specified design\n- **Template-Solution conflicts**: Template structure is incompatible with the solution structure\n\n# PEDAGOGICAL VS. STRUCTURAL UNDERSTANDING\n\n## PEDAGOGICAL GAPS (DO NOT FLAG):\n- Missing method bodies in template classes (students implement these)\n- Incomplete constructor implementations\n- Abstract methods without implementation (by design)\n- Missing private helper methods students should write\n- Incomplete exception handling in method stubs\n- Missing validation logic in setter methods\n- Empty method stubs with TODO comments\n\n## STRUCTURAL INCONSISTENCIES (FLAG THESE):\n- **Cross-artifact conflicts**: Problem describes inheritance, template has standalone classes\n- **Design contradictions**: Problem states interface implementation, template has conflicting signatures\n- **Missing structural foundation**: Problem references classes/enums that don't exist in template\n- **Inner-artifact contradictions**: Problem statement describes same element differently in multiple places\n- **Template self-contradictions**: Template code has conflicting declarations or imports\n- **Type/signature mismatches**: Return types, parameters, or visibility that prevent intended design\n- **Template-Solution structural conflicts**: Template structure incompatible with solution design\n- **Solution contradicts specification**: Solution implements different structure than problem describes\n\n# ANALYSIS FRAMEWORK\n\n## STEP 1: Educational Context Analysis\nBefore identifying issues, determine:\n- What design is the problem statement trying to teach?\n- Does the template structure support this design or contradict it?\n- Does the solution structure align with both problem and template?\n- Are missing elements intentional learning gaps or structural oversights?\n- Would students be confused by conflicting information between artifacts?\n\n## STEP 2: Consistency Validation\nCheck for these specific inconsistencies:\n\n**METHOD_RETURN_TYPE_MISMATCH**: Method return type conflicts between problem description, template, and/or solution\n- Example: Problem describes `getArea()` returns `double`, template declares `int getArea()`\n- Example: Template has `int getArea()`, solution has `double getArea()`\n- Not flagged: Missing method body in template method\n\n**METHOD_PARAMETER_MISMATCH**: Method parameter conflicts between specification, template, and/or solution\n- Example: Problem requires `setDimensions(int width, int height)`, template has `setDimensions(int size)`\n- Example: Template has `setDimensions(int size)`, solution has `setDimensions(int width, int height)`\n- Not flagged: Empty method body with correct signature\n\n**CONSTRUCTOR_PARAMETER_MISMATCH**: Constructor parameter conflicts between specification, template, and/or solution\n- Example: Problem requires `Person(String name, int age)`, template only has `Person(String name)`\n- Example: Template has `Person(String name)`, solution has `Person(String name, int age)`\n- Not flagged: Empty constructor body with correct parameters\n\n**ATTRIBUTE_TYPE_MISMATCH**: Attribute data type inconsistencies across artifacts\n- Example: Problem states `List<String> names`, template declares `String[] names`\n- Example: Template has `String[] names`, solution has `List<String> names`\n- Example: Problem statement describes same field as both `int` and `String` in different sections\n- Not flagged: Uninitialized fields in template\n\n**VISIBILITY_MISMATCH**: Method/attribute visibility conflicts between specification, template, and/or solution\n- Example: Problem describes `public getBalance()`, template declares `private getBalance()`\n- Example: Template has `private getBalance()`, solution has `public getBalance()`\n- Example: Problem UML shows public method, template implementation is private\n- Not flagged: Missing access modifier implementation details\n\n## STEP 3: Self-Verification\nFor each potential issue, ask:\n1. Is this a structural inconsistency or intentional pedagogical design?\n2. Would this confuse students about what they're supposed to implement?\n3. Does this prevent students from following the intended design pattern?\n4. Is this an unintentional oversight rather than a learning exercise?\n\nOnly flag issues where students would be genuinely confused or blocked from implementing the intended solution.\n\n# EXAMPLES\n\n## ❌ FALSE POSITIVE (DO NOT FLAG):\n```\nProblem: \"Implement the calculateGrade() method in Student class\"\nTemplate: public void calculateGrade() { /* TODO: Implement */ }\nAnalysis: This is intentional - students should implement the method body\n```\n\n## ✅ TRUE POSITIVE (FLAG THIS):\n```\nProblem: \"calculateGrade() method returns double representing grade percentage\"\nTemplate: public int calculateGrade() { /* TODO: Implement */ }\nAnalysis: Return type mismatch - students cannot return double from int method\n```\n\n## ✅ INNER-ARTIFACT INCONSISTENCY (FLAG THIS):\n```\nProblem statement: \"Vehicle has method getSpeed() returning int\" ... later \"getSpeed() returns double\"\nAnalysis: Problem contradicts itself about return type\n```\n\n# SEVERITY GUIDELINES\n- **HIGH**: Creates major confusion or makes core design impossible to implement\n- **MEDIUM**: Creates significant confusion or requires workarounds to implement intended design\n- **LOW**: Minor inconsistencies that might cause brief confusion but are easily resolved\n\n# OUTPUT FORMAT\n```json\n{\n  \"issues\": [\n    {\n      \"description\": \"Precise explanation of the inconsistency and how it affects student understanding/implementation\",\n      \"severity\": \"HIGH\" | \"MEDIUM\" | \"LOW\",\n      \"category\": \"METHOD_RETURN_TYPE_MISMATCH\" | \"METHOD_PARAMETER_MISMATCH\" | \"CONSTRUCTOR_PARAMETER_MISMATCH\" | \"ATTRIBUTE_TYPE_MISMATCH\" | \"VISIBILITY_MISMATCH\",\n      \"related_locations\": [{\n        \"type\": \"PROBLEM_STATEMENT\" | \"TEMPLATE_REPOSITORY\" | \"SOLUTION_REPOSITORY\",\n        \"file_path\": \"exact/path/to/file.java\",\n        \"start_line\": 1,\n        \"end_line\": 10\n      },\n      {\n        \"type\": \"PROBLEM_STATEMENT\" | \"TEMPLATE_REPOSITORY\" | \"SOLUTION_REPOSITORY\",\n        \"file_path\": \"related/file/path.java\",\n        \"start_line\": 5,\n        \"end_line\": 8\n      }],\n      \"suggested_fix\": \"Specific correction that resolves the inconsistency while preserving educational intent\"\n    }\n  ]\n}\n```\n\n# EXECUTION\nAnalyze the provided artifacts for structural inconsistencies that would confuse students or prevent them from implementing the intended design. Focus on cross-artifact contradictions (problem vs template vs solution) and inner-artifact contradictions (within problem statement, template, or solution). Apply the pedagogical vs. structural distinction rigorously. Return only genuine inconsistencies that are unintentional and would hinder student success.",
              "additional_kwargs": {},
              "response_metadata": {},
              "type": "human"
            }
          ]
        }
      },
      "tags": [
        "seq:step:2"
      ],
      "parent_run_id": "be3c3142-4584-4897-9450-5d9ae5c0fafc",
      "trace_id": "2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "dotted_order": "20250723T144040524034Z2102d036-0bf8-4863-879f-f17bd2b1b9ca.20250723T144040588355Z426ee021-0ec1-40e6-bda0-4be115f42a34.20250723T144040598179Zbe3c3142-4584-4897-9450-5d9ae5c0fafc.20250723T144040618847Z8cfecff3-5f06-432c-a964-9bcfee5ba948",
      "session_id": "9165a489-2e1b-4cfc-a139-82686a2268ba",
      "extra": {
        "inputs_is_truthy": true,
        "runtime": {
          "sdk": "langsmith-py",
          "sdk_version": "0.3.42",
          "library": "langsmith",
          "platform": "macOS-15.3-arm64-arm-64bit-Mach-O",
          "runtime": "python",
          "py_implementation": "CPython",
          "runtime_version": "3.13.5",
          "langchain_version": "0.3.25",
          "langchain_core_version": "0.3.59"
        },
        "metadata": {
          "LANGSMITH_TRACING": "true",
          "LANGCHAIN_RUN_ID": "39eb4060",
          "revision_id": "v1.1.0-48-g1c4fbcca-dirty",
          "ls_run_depth": 3
        }
      },
      "events": [
        {
          "name": "start",
          "time": "2025-07-23T14:40:40.618847+00:00"
        },
        {
          "name": "end",
          "time": "2025-07-23T14:40:40.619253+00:00"
        }
      ]
    },
    {
      "id": "cfa4d1ce-6d61-401a-b86a-a6bc9cfe5580",
      "name": "ChatOpenAI",
      "run_type": "llm",
      "start_time": "2025-07-23T14:40:40.601879",
      "end_time": "2025-07-23T14:41:08.964891",
      "status": "success",
      "inputs": {
        "messages": [
          [
            {
              "lc": 1,
              "type": "constructor",
              "id": [
                "langchain",
                "schema",
                "messages",
                "HumanMessage"
              ],
              "kwargs": {
                "content": "\n===== Problem Statement =====\n--------------------------------------------------------------------------------\nproblem_statement.md:\n--------------------------------------------------------------------------------\n  1 | # REST Architectural Style\n  2 | \n  3 | The university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n  4 | \n  5 | This exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n  6 | \n  7 | ## Application Structure\n  8 | \n  9 | The following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n 10 | <br>\n 11 | #### Client-Side:\n 12 | - The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n 13 | - The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n 14 | - The `Network Layer` contains the functionality to send REST requests to the server.\n 15 | \n 16 | #### Server-Side:\n 17 | - The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n 18 | - The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n 19 | \n 20 | ### Layered Architecture\n 21 | @startuml\n 22 | \n 23 | namespace Client {\n 24 |     namespace NetworkLayer {}\n 25 |     \n 26 |     namespace PresentationLayer {}\n 27 |     \n 28 |     namespace ApplicationLayer {}\n 29 | }\n 30 | \n 31 | namespace Server {\n 32 |     namespace NetworkLayer {}\n 33 |     \n 34 |     namespace BusinessLayer {}\n 35 | }\n 36 | \n 37 | Client.PresentationLayer --> Client.ApplicationLayer\n 38 | Client.ApplicationLayer --> Client.NetworkLayer\n 39 | Client.NetworkLayer <---> Server.NetworkLayer\n 40 | Server.NetworkLayer --> Server.BusinessLayer\n 41 | Server.NetworkLayer -[hidden]> Client.NetworkLayer\n 42 | \n 43 | \n 44 | hide empty fields\n 45 | hide empty methods\n 46 | hide circle\n 47 | @enduml\n 48 | \n 49 | On the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n 50 | ### MVC Component Diagram\n 51 | @startuml\n 52 | \n 53 | namespace Common {\n 54 |     namespace Model {\n 55 |         class Common.Model.Note {\n 56 |             \n 57 |         }\n 58 |         class Common.Model.Person {\n 59 |             \n 60 |         }\n 61 |     }\n 62 | }\n 63 | \n 64 | namespace Client {\n 65 |     namespace Controller {\n 66 |         class Client.Controller.NoteController {\n 67 |             \n 68 |         }\n 69 |         class Client.Controller.PersonController {\n 70 |             \n 71 |         }\n 72 |     }\n 73 |     namespace View {\n 74 |         class Client.View.NoteScene {\n 75 |             \n 76 |         }\n 77 |         class Client.View.PersonScene {\n 78 |             \n 79 |         }\n 80 |     }\n 81 | }\n 82 | \n 83 | Client.Controller.NoteController <-- Client.View.NoteScene\n 84 | Client.Controller.PersonController <-- Client.View.PersonScene\n 85 | Common.Model.Note \"*\" --o Client.Controller.NoteController\n 86 | Common.Model.Person \"*\" --o Client.Controller.PersonController\n 87 | \n 88 | \n 89 | \n 90 | hide empty fields\n 91 | hide empty methods\n 92 | hide circle\n 93 | @enduml\n 94 | \n 95 | <br />\n 96 | \n 97 | ***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n 98 | \n 99 | \n100 | ## Application Functionality\n101 | This system has 2 sides.\n102 | - Client-side\n103 | - Server-side\n104 | \n105 | \n106 | The server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\n107 | The client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n108 | \n109 | The endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n110 | - `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n111 | - `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n112 | - `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n113 | - `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n114 | \n115 | *Note: There are TODOs in the code giving helpful hints*\n116 | \n117 | ***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n118 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n119 | *`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n120 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n121 | *Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n122 | <br/>\n123 | <br/>\n124 | ##Part 1\n125 | In the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\n126 | You have to forward each action to the `PersonService` and add any additional checks before that.\n127 | \n128 | 1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n129 |     Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n130 | 2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n131 |     Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n132 | 3. [task][Endpoint to delete a person](Delete existing person (Server))\n133 |     Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n134 | 4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n135 |     Last but not the least, implement the method `getAllPersons`, which returns all persons.\n136 | \n137 | *Note: Feel free to get inspired by `NoteResource` for additional help.*\n138 | \n139 | \n140 | \n141 | ##Part 2\n142 | In the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\n143 | The Controller should work like this:\n144 | - There is a single `WebClient` instance that is used for all requests\n145 | - Each method should only send a single HTTP request\n146 | - The HTTP requests need to happen asynchronously\n147 | - It has an internal list of all persons\n148 |     - If a person is created, updated or deleted this has to be updated in the list\n149 |     - If all persons are retrieved from the server the list has to be updated accordingly\n150 | - Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n151 |     - This consumer takes the internal list of persons as a parameter\n152 | \n153 | ### UML Diagram\n154 | @startuml\n155 | \n156 | namespace Client {\n157 |     namespace Controller {\n158 |         class PersonController {\n159 |             - webClient: WebClient\n160 |             + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n161 |             + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n162 |             + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n163 |             + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n164 |         }\n165 |     }\n166 | }\n167 | \n168 | namespace Common {\n169 |     class Person {\n170 |         - id: UUID\n171 |         - firstName: String\n172 |         - lastName: String\n173 |         - birthday: LocalDate\n174 |     }\n175 | }\n176 | \n177 | Client.Controller.PersonController o-- \"*\" Common.Person : persons\n178 | \n179 | \n180 | hide empty fields\n181 | hide empty methods\n182 | hide circle\n183 | @enduml\n184 | \n185 | <br />\n186 | \n187 | 1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n188 |     Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n189 | 2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n190 |     Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n191 | 3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n192 |     Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n193 | 4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n194 |     Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n195 | \n196 | *Note: Don't forget the constructor of `PersonController`*\n197 | \n198 | ##Part 3\n199 | It has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n200 | \n201 | It is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\n202 | Some additional notes:\n203 | - The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n204 | - The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n205 | \n206 | [task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\n207 | Implement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\n208 | Then update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n209 | \n210 | *Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*\n\n\n===== Template Repository =====\ntemplate_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import java.util.List;\n 6 | import java.util.function.Consumer;\n 7 | \n 8 | public class PersonController {\n 9 | \n10 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n11 |         // TODO Part 2: Make an http post request to the server\n12 |     }\n13 | \n14 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n15 |         // TODO Part 2: Make an http put request to the server\n16 |     }\n17 | \n18 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n19 |         // TODO Part 2: Make an http delete request to the server\n20 |     }\n21 | \n22 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n23 |         // TODO Part 2: Make an https get request to the server\n24 |     }\n25 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.service.PersonService;\n 4 | import org.springframework.http.MediaType;\n 5 | import org.springframework.web.bind.annotation.RequestMapping;\n 6 | import org.springframework.web.bind.annotation.RestController;\n 7 | \n 8 | @RestController\n 9 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n10 | public class PersonResource {\n11 | \n12 |     private final PersonService personService;\n13 | \n14 |     public PersonResource(PersonService personService) {\n15 |         this.personService = personService;\n16 |     }\n17 | \n18 |     // TODO Part 1: Implement the specified endpoints here\n19 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class PersonService {\n11 |   \t// do not change this\n12 |     private final List<Person> persons;\n13 | \n14 |     public PersonService() {\n15 |         this.persons = new ArrayList<>();\n16 |     }\n17 | \n18 |     public Person savePerson(Person person) {\n19 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n20 |         if (optionalPerson.isEmpty()) {\n21 |             person.setId(UUID.randomUUID());\n22 |             persons.add(person);\n23 |             return person;\n24 |         } else {\n25 |             var existingPerson = optionalPerson.get();\n26 |             existingPerson.setFirstName(person.getFirstName());\n27 |             existingPerson.setLastName(person.getLastName());\n28 |             existingPerson.setBirthday(person.getBirthday());\n29 |             return existingPerson;\n30 |         }\n31 |     }\n32 | \n33 |     public void deletePerson(UUID personId) {\n34 |         this.persons.removeIf(person -> person.getId().equals(personId));\n35 |     }\n36 | \n37 |     public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n38 |         // TODO Part 3: Add sorting here\n39 |         return new ArrayList<>(this.persons);\n40 |     }\n41 | }\n\n\n===== Solution Repository =====\nsolution_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.core.ParameterizedTypeReference;\n 6 | import org.springframework.http.HttpHeaders;\n 7 | import org.springframework.http.MediaType;\n 8 | import org.springframework.web.reactive.function.client.WebClient;\n 9 | \n10 | import java.util.ArrayList;\n11 | import java.util.List;\n12 | import java.util.function.Consumer;\n13 | \n14 | public class PersonController {\n15 |     private final WebClient webClient;\n16 |     private final List<Person> persons;\n17 | \n18 |     public PersonController() {\n19 |         this.webClient = WebClient.builder()\n20 |                 .baseUrl(\"http://localhost:8080/\")\n21 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n23 |                 .build();\n24 |         this.persons = new ArrayList<>();\n25 |     }\n26 | \n27 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n28 |         webClient.post()\n29 |                 .uri(\"persons\")\n30 |                 .bodyValue(person)\n31 |                 .retrieve()\n32 |                 .bodyToMono(Person.class)\n33 |                 .onErrorStop()\n34 |                 .subscribe(newPerson -> {\n35 |                     persons.add(newPerson);\n36 |                     personsConsumer.accept(persons);\n37 |                 });\n38 |     }\n39 | \n40 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n41 |         webClient.put()\n42 |                 .uri(\"persons/\" + person.getId())\n43 |                 .bodyValue(person)\n44 |                 .retrieve()\n45 |                 .bodyToMono(Person.class)\n46 |                 .onErrorStop()\n47 |                 .subscribe(newPerson -> {\n48 |                     persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n49 |                     personsConsumer.accept(persons);\n50 |                 });\n51 |     }\n52 | \n53 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n54 |         webClient.delete()\n55 |                 .uri(\"persons/\" + person.getId())\n56 |                 .retrieve()\n57 |                 .toBodilessEntity()\n58 |                 .onErrorStop()\n59 |                 .subscribe(v -> {\n60 |                     persons.remove(person);\n61 |                     personsConsumer.accept(persons);\n62 |                 });\n63 |     }\n64 | \n65 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n66 |         webClient.get()\n67 |                 .uri(uriBuilder -> uriBuilder\n68 |                         .path(\"persons\")\n69 |                         .queryParam(\"sortField\", sortingOptions.getSortField())\n70 |                         .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n71 |                         .build())\n72 |                 .retrieve()\n73 |                 .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n74 |                 .onErrorStop()\n75 |                 .subscribe(newPersons -> {\n76 |                     persons.clear();\n77 |                     persons.addAll(newPersons);\n78 |                     personsConsumer.accept(persons);\n79 |                 });\n80 |     }\n81 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.service.PersonService;\n 5 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.http.ResponseEntity;\n 8 | import org.springframework.web.bind.annotation.*;\n 9 | \n10 | import java.util.List;\n11 | import java.util.UUID;\n12 | \n13 | @RestController\n14 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n15 | public class PersonResource {\n16 | \n17 |     private final PersonService personService;\n18 | \n19 |     public PersonResource(PersonService personService) {\n20 |         this.personService = personService;\n21 |     }\n22 | \n23 |     @GetMapping(\"persons\")\n24 |     public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n25 |                                                       @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n26 |         return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n27 |     }\n28 | \n29 |     @PostMapping(\"persons\")\n30 |     public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n31 |         if (person.getId() != null) {\n32 |             return ResponseEntity.badRequest().build();\n33 |         }\n34 |         return ResponseEntity.ok(personService.savePerson(person));\n35 |     }\n36 | \n37 |     @PutMapping(\"persons/{personId}\")\n38 |     public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n39 |         if (!updatedPerson.getId().equals(personId)) {\n40 |             return ResponseEntity.badRequest().build();\n41 |         }\n42 |         return ResponseEntity.ok(personService.savePerson(updatedPerson));\n43 |     }\n44 | \n45 |     @DeleteMapping(\"persons/{personId}\")\n46 |     public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n47 |         personService.deletePerson(personId);\n48 |         return ResponseEntity.noContent().build();\n49 |     }\n50 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | import static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n10 | \n11 | @Service\n12 | public class PersonService {\n13 |   \t// do not change this\n14 |     private final List<Person> persons;\n15 | \n16 |     public PersonService() {\n17 |         this.persons = new ArrayList<>();\n18 |     }\n19 | \n20 |     public Person savePerson(Person person) {\n21 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n22 |         if (optionalPerson.isEmpty()) {\n23 |             person.setId(UUID.randomUUID());\n24 |             persons.add(person);\n25 |             return person;\n26 |         } else {\n27 |             var existingPerson = optionalPerson.get();\n28 |             existingPerson.setFirstName(person.getFirstName());\n29 |             existingPerson.setLastName(person.getLastName());\n30 |             existingPerson.setBirthday(person.getBirthday());\n31 |             return existingPerson;\n32 |         }\n33 |     }\n34 | \n35 |     public void deletePerson(UUID personId) {\n36 |         this.persons.removeIf(person -> person.getId().equals(personId));\n37 |     }\n38 | \n39 |     public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n40 |         if (sortingOptions == null) {\n41 |             return this.persons.stream();\n42 |         }\n43 |         Stream<Person> sortedStream = this.persons.stream();\n44 |         sortedList.sort((p1, p2) -> {\n45 |             Person person1;\n46 |             Person person2;\n47 |             if (sortingOptions.getSortingOrder() == ASCENDING) {\n48 |                 person1 = p1;\n49 |                 person2 = p2;\n50 |             } else {\n51 |                 person1 = p2;\n52 |                 person2 = p1;\n53 |             }\n54 | \n55 |             return switch (sortingOptions.getSortField()) {\n56 |                 case ID -> person1.getId().compareTo(person2.getId());\n57 |                 case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n58 |                 case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n59 |                 case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n60 |             };\n61 |         });\n62 |         return sortedList;\n63 |     }\n64 | }\n\n# MISSION\nYou are a Semantic Consistency Validator for programming exercises. Your task: detect UNINTENDED semantic inconsistencies where the same conceptual entity is referenced with different names across artifacts, creating cognitive mapping barriers for students.\n\n# ARTIFACTS AVAILABLE\nYou will analyze consistency across these artifacts:\n- **Problem Statement**: The exercise description and requirements\n- **Template Repository**: Starter code that students begin with (incomplete implementation)\n- **Solution Repository**: Complete reference implementation showing the intended final state\n\n# CORE PRINCIPLE\n**ONLY flag unintended identifier naming inconsistencies that create conceptual mapping confusion.**\n**DO NOT flag intentional pedagogical variations, abstraction levels, or synonymous terminology.**\n\nFocus specifically on **IDENTIFIER_NAMING_INCONSISTENCY**: Same conceptual entity referenced with different identifiers (class names, method names, attribute names, parameter names) across problem statement, template code, and solution code.\n\n# CONCEPTUAL MAPPING UNDERSTANDING\n\n## SEMANTIC INCONSISTENCIES (FLAG THESE):\n- **Cross-artifact naming conflicts**: Problem describes `calculateTotal()`, template has `getPrice()` for same concept\n- **Entity reference mismatches**: Problem refers to `StudentRecord`, template has `Student` class for same entity\n- **Parameter naming conflicts**: Problem shows `setDimensions(width, height)`, template has `setDimensions(w, h)`\n- **Attribute naming divergence**: Problem describes `name` field, template declares `studentName` for same concept\n- **Method naming inconsistency**: Problem specifies `isValid()`, template implements `checkValidity()` for same logic\n- **Template-Solution misalignment**: Template uses `calculateScore()`, solution uses `computeGrade()` for same method\n- **Problem-Solution conflicts**: Problem describes `Customer` class, solution implements `ClientRecord` class\n\n## INTENTIONAL VARIATIONS (DO NOT FLAG):\n- **Abstraction level differences**: Problem uses \"student\" (concept), template uses \"StudentRecord\" (implementation)\n- **Domain vs. technical terminology**: Problem uses \"grade\", template uses \"score\" (synonymous in context)\n- **Pedagogical progressive disclosure**: Problem introduces simplified names, template shows full technical names\n- **Convention-based variations**: Problem uses camelCase description, template follows established naming conventions\n- **Getter/setter variations**: Problem describes \"name\", template has `getName()`/`setName()` (standard convention)\n- **Implementation detail naming**: Template has helper methods not mentioned in problem (internal implementation)\n- **Template incompleteness**: Template has method stubs, solution has full implementation (pedagogical by design)\n\n# ANALYSIS FRAMEWORK\n\n## STEP 1: Conceptual Entity Identification\nFor each entity mentioned in the problem statement:\n1. **What is the core concept being described?**\n   - Identify the fundamental educational or domain concept\n   - Distinguish between concept description and implementation details\n   - Determine if this is a student-facing requirement or internal implementation\n\n2. **How is this concept represented in the template and solution?**\n   - Find corresponding elements in template code\n   - Check if the mapping is clear and unambiguous from problem to template\n   - Verify that solution implementation aligns with both problem and template naming\n   - Assess if students can easily connect problem requirements to template elements and final solution\n\n3. **Is the naming relationship clear for students across all artifacts?**\n   - Would a student understand that these refer to the same concept across problem, template, and solution?\n   - Are the naming differences creating unnecessary cognitive load?\n   - Do the differences interfere with requirement-to-implementation mapping?\n   - Does the solution provide a consistent naming target that students should aim for?\n\n## STEP 2: Cognitive Mapping Assessment\nApply cognitive load theory to assess naming consistency:\n\n**INTRINSIC LOAD (Learning Goals)**: Names should support the core learning objectives\n- Does inconsistent naming distract from the primary learning goals?\n- Do students need to learn both problem domain AND resolve naming conflicts?\n\n**EXTRANEOUS LOAD (Unnecessary Burden)**: Inconsistent naming creates additional mental effort\n- Must students maintain multiple mental mappings for the same concept?\n- Does naming inconsistency require cognitive resources that could be used for learning?\n\n**GERMANE LOAD (Schema Building)**: Names should help build coherent mental models\n- Do inconsistent names prevent students from building clear conceptual schemas?\n- Does naming confusion interfere with understanding relationships between concepts?\n\n## STEP 3: Contextual Validation\nFor each potential naming inconsistency:\n\n**Educational Context Analysis**:\n- Is this a CS education best practice (e.g., getter/setter naming)?\n- Would students in this course level understand the naming relationship?\n- Does the naming difference serve a pedagogical purpose?\n\n**Implementation Necessity Check**:\n- Is the template naming required by Java conventions or frameworks?\n- Does the naming difference reflect necessary technical implementation details?\n- Are both names referring to exactly the same conceptual entity?\n\n**Student Impact Assessment**:\n- Would students waste time searching for non-existent methods/classes?\n- Could students implement incorrect solution due to naming confusion?\n- Does the inconsistency create ambiguity about requirements?\n\n## STEP 4: Inconsistency Classification\nOnly flag as **IDENTIFIER_NAMING_INCONSISTENCY** when:\n\n✅ **Same conceptual entity** referenced differently across artifacts\n✅ **Clear mapping confusion** likely for target student population\n✅ **Unintentional oversight** rather than pedagogical design choice\n✅ **Creates cognitive burden** beyond intended learning objectives\n✅ **No technical necessity** for the naming difference\n\n# REASONING CHAIN FOR ASSESSMENT\n\nFor each potential issue, follow this reasoning chain:\n\n1. **Concept Identification**: \"What exact concept does each name represent?\"\n2. **Mapping Clarity**: \"Can students clearly map problem requirements to template elements?\"\n3. **Cognitive Load Assessment**: \"Does this naming difference add extraneous cognitive load?\"\n4. **Intentionality Check**: \"Is this likely intentional pedagogical design or oversight?\"\n5. **Student Impact Evaluation**: \"Would this genuinely confuse or mislead students?\"\n6. **Educational Value Assessment**: \"Does maintaining both names serve educational goals?\"\n\nOnly proceed to flag if ALL checks indicate genuine inconsistency.\n\n# EXAMPLES\n\n## ❌ FALSE POSITIVE (DO NOT FLAG):\n```\nProblem: \"Calculate the student's final grade\"\nTemplate: public double calculateScore() { ... }\nAnalysis: \"grade\" and \"score\" are synonymous in educational context - clear conceptual mapping\n```\n\n## ❌ FALSE POSITIVE (DO NOT FLAG):\n```\nProblem: \"Student has a name property\"\nTemplate: private String studentName; public String getName() { ... }\nAnalysis: Standard getter convention - students should understand this mapping\n```\n\n## ✅ TRUE POSITIVE (FLAG THIS):\n```\nProblem: \"Implement calculateTotal() method to sum all prices\"\nTemplate: public double getPrice() { /* TODO: Implement total calculation */ }\nAnalysis: Same concept (total calculation) with completely different names - creates mapping confusion\n```\n\n## ✅ TRUE POSITIVE (FLAG THIS):\n```\nProblem: \"Use the Customer class to store customer information\"\nTemplate: public class ClientRecord { ... }\nAnalysis: Same entity with different names - students cannot map requirements to implementation\n```\n\n# SEVERITY GUIDELINES\n- **HIGH**: Completely different names for same concept, making requirement mapping impossible\n- **MEDIUM**: Similar but inconsistent names that require cognitive effort to map\n- **LOW**: Minor naming variations that might cause brief confusion but are resolvable\n\n# OUTPUT FORMAT\n```json\n{\n  \"issues\": [\n    {\n      \"description\": \"Precise explanation of the naming inconsistency and how it affects student conceptual mapping\",\n      \"severity\": \"HIGH\" | \"MEDIUM\" | \"LOW\",\n      \"category\": \"IDENTIFIER_NAMING_INCONSISTENCY\",\n      \"related_locations\": [{\n        \"type\": \"PROBLEM_STATEMENT\" | \"TEMPLATE_REPOSITORY\" | \"SOLUTION_REPOSITORY\",\n        \"file_path\": \"exact/path/to/file.java\",\n        \"start_line\": 1,\n        \"end_line\": 10\n      },\n      {\n        \"type\": \"PROBLEM_STATEMENT\" | \"TEMPLATE_REPOSITORY\" | \"SOLUTION_REPOSITORY\",\n        \"file_path\": \"related/file/path.java\",\n        \"start_line\": 5,\n        \"end_line\": 8\n      }],\n      \"suggested_fix\": \"Specific naming correction that aligns conceptual entities while preserving educational intent\"\n    }\n  ]\n}\n```\n\n# EXECUTION\nAnalyze the provided artifacts for semantic naming inconsistencies that would create cognitive mapping barriers for students. Apply the conceptual entity identification and cognitive load assessment framework systematically. Use the reasoning chain to validate each potential issue. Return only genuine naming inconsistencies that are unintentional and would create extraneous cognitive load for students trying to map problem requirements to template implementation and final solution.",
                "type": "human"
              }
            }
          ]
        ]
      },
      "outputs": {
        "generations": [
          [
            {
              "text": "{\"issues\":[]}",
              "generation_info": {
                "finish_reason": "stop",
                "logprobs": null
              },
              "type": "ChatGeneration",
              "message": {
                "lc": 1,
                "type": "constructor",
                "id": [
                  "langchain",
                  "schema",
                  "messages",
                  "AIMessage"
                ],
                "kwargs": {
                  "content": "{\"issues\":[]}",
                  "additional_kwargs": {
                    "parsed": {
                      "lc": 1,
                      "type": "not_implemented",
                      "id": [
                        "app",
                        "creation_steps",
                        "step8_review_and_refine",
                        "consistency_check",
                        "checker",
                        "semantic",
                        "SemanticConsistencyResult"
                      ],
                      "repr": "SemanticConsistencyResult(issues=[])"
                    },
                    "refusal": null
                  },
                  "response_metadata": {
                    "token_usage": {
                      "completion_tokens": 1563,
                      "prompt_tokens": 23122,
                      "total_tokens": 24685,
                      "completion_tokens_details": {
                        "accepted_prediction_tokens": 0,
                        "audio_tokens": 0,
                        "reasoning_tokens": 1536,
                        "rejected_prediction_tokens": 0
                      },
                      "prompt_tokens_details": {
                        "audio_tokens": 0,
                        "cached_tokens": 0
                      }
                    },
                    "model_name": "o4-mini-2025-04-16",
                    "system_fingerprint": null,
                    "id": "chatcmpl-BwUw5tzlctzk5NFcqLebQoozEnQ62",
                    "service_tier": "default",
                    "finish_reason": "stop",
                    "logprobs": null
                  },
                  "type": "ai",
                  "id": "run--cfa4d1ce-6d61-401a-b86a-a6bc9cfe5580-0",
                  "usage_metadata": {
                    "input_tokens": 23122,
                    "output_tokens": 1563,
                    "total_tokens": 24685,
                    "input_token_details": {
                      "audio": 0,
                      "cache_read": 0
                    },
                    "output_token_details": {
                      "audio": 0,
                      "reasoning": 1536
                    }
                  },
                  "tool_calls": [],
                  "invalid_tool_calls": []
                }
              }
            }
          ]
        ],
        "llm_output": {
          "token_usage": {
            "completion_tokens": 1563,
            "prompt_tokens": 23122,
            "total_tokens": 24685,
            "completion_tokens_details": {
              "accepted_prediction_tokens": 0,
              "audio_tokens": 0,
              "reasoning_tokens": 1536,
              "rejected_prediction_tokens": 0
            },
            "prompt_tokens_details": {
              "audio_tokens": 0,
              "cached_tokens": 0
            }
          },
          "model_name": "o4-mini-2025-04-16",
          "system_fingerprint": null,
          "id": "chatcmpl-BwUw5tzlctzk5NFcqLebQoozEnQ62",
          "service_tier": "default"
        },
        "run": null,
        "type": "LLMResult"
      },
      "tags": [
        "seq:step:3"
      ],
      "parent_run_id": "b24c9117-122d-41e4-abe8-975026ccf3a1",
      "trace_id": "2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "dotted_order": "20250723T144040524034Z2102d036-0bf8-4863-879f-f17bd2b1b9ca.20250723T144040588355Z426ee021-0ec1-40e6-bda0-4be115f42a34.20250723T144040592707Zb24c9117-122d-41e4-abe8-975026ccf3a1.20250723T144040601879Zcfa4d1ce-6d61-401a-b86a-a6bc9cfe5580",
      "session_id": "9165a489-2e1b-4cfc-a139-82686a2268ba",
      "extra": {
        "invocation_params": {
          "model": "o4-mini",
          "model_name": "o4-mini",
          "stream": false,
          "_type": "openai-chat",
          "stop": null,
          "response_format": "<class 'app.creation_steps.step8_review_and_refine.consistency_check.checker.semantic.SemanticConsistencyResult'>"
        },
        "options": {
          "stop": null,
          "ls_structured_output_format": {
            "kwargs": {
              "method": "json_schema",
              "strict": null
            },
            "schema": {
              "title": "SemanticConsistencyResult",
              "description": "Result of semantic consistency check.",
              "properties": {
                "issues": {
                  "description": "List of semantic consistency issues found",
                  "items": {
                    "description": "A semantic consistency issue found between problem statement and template.",
                    "properties": {
                      "description": {
                        "description": "Clear explanation of the consistency issue",
                        "type": "string"
                      },
                      "severity": {
                        "description": "Severity levels for consistency issues.",
                        "enum": [
                          "LOW",
                          "MEDIUM",
                          "HIGH"
                        ],
                        "type": "string"
                      },
                      "category": {
                        "description": "Semantic consistency issue sub-categories",
                        "enum": [
                          "IDENTIFIER_NAMING_INCONSISTENCY"
                        ],
                        "type": "string"
                      },
                      "related_locations": {
                        "description": "Related locations across artifacts",
                        "items": {
                          "description": "Location information for artifacts.",
                          "properties": {
                            "type": {
                              "description": "Artifact type enumeration.",
                              "enum": [
                                "PROBLEM_STATEMENT",
                                "TEMPLATE_REPOSITORY",
                                "SOLUTION_REPOSITORY"
                              ],
                              "type": "string"
                            },
                            "file_path": {
                              "description": "Path to file, empty or problem_statement.md for problem statement",
                              "type": "string"
                            },
                            "start_line": {
                              "description": "Start line number (1-based)",
                              "type": "integer"
                            },
                            "end_line": {
                              "description": "End line number (1-based)",
                              "type": "integer"
                            }
                          },
                          "required": [
                            "type",
                            "file_path",
                            "start_line",
                            "end_line"
                          ],
                          "type": "object"
                        },
                        "type": "array"
                      },
                      "suggested_fix": {
                        "description": "Actionable correction to resolve the issue",
                        "type": "string"
                      }
                    },
                    "required": [
                      "description",
                      "severity",
                      "category",
                      "related_locations",
                      "suggested_fix"
                    ],
                    "type": "object"
                  },
                  "type": "array"
                }
              },
              "required": [
                "issues"
              ],
              "type": "object"
            }
          }
        },
        "batch_size": 1,
        "metadata": {
          "ls_provider": "openai",
          "ls_model_name": "o4-mini",
          "ls_model_type": "chat",
          "ls_temperature": null,
          "LANGSMITH_TRACING": "true",
          "LANGCHAIN_RUN_ID": "39eb4060",
          "revision_id": "v1.1.0-48-g1c4fbcca-dirty",
          "ls_run_depth": 3
        },
        "runtime": {
          "sdk": "langsmith-py",
          "sdk_version": "0.3.42",
          "library": "langchain-core",
          "platform": "macOS-15.3-arm64-arm-64bit-Mach-O",
          "runtime": "python",
          "py_implementation": "CPython",
          "runtime_version": "3.13.5",
          "langchain_version": "0.3.25",
          "langchain_core_version": "0.3.59",
          "library_version": "0.3.59"
        }
      },
      "events": [
        {
          "name": "start",
          "time": "2025-07-23T14:40:40.601879+00:00"
        },
        {
          "name": "end",
          "time": "2025-07-23T14:41:08.964891+00:00"
        }
      ]
    },
    {
      "id": "8af3d264-eb78-4e63-b026-56a4ce522d83",
      "name": "ChatPromptTemplate",
      "run_type": "prompt",
      "start_time": "2025-07-23T14:40:40.600422",
      "end_time": "2025-07-23T14:40:40.600997",
      "status": "success",
      "inputs": {
        "rendered_context": "\n===== Problem Statement =====\n--------------------------------------------------------------------------------\nproblem_statement.md:\n--------------------------------------------------------------------------------\n  1 | # REST Architectural Style\n  2 | \n  3 | The university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n  4 | \n  5 | This exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n  6 | \n  7 | ## Application Structure\n  8 | \n  9 | The following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n 10 | <br>\n 11 | #### Client-Side:\n 12 | - The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n 13 | - The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n 14 | - The `Network Layer` contains the functionality to send REST requests to the server.\n 15 | \n 16 | #### Server-Side:\n 17 | - The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n 18 | - The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n 19 | \n 20 | ### Layered Architecture\n 21 | @startuml\n 22 | \n 23 | namespace Client {\n 24 |     namespace NetworkLayer {}\n 25 |     \n 26 |     namespace PresentationLayer {}\n 27 |     \n 28 |     namespace ApplicationLayer {}\n 29 | }\n 30 | \n 31 | namespace Server {\n 32 |     namespace NetworkLayer {}\n 33 |     \n 34 |     namespace BusinessLayer {}\n 35 | }\n 36 | \n 37 | Client.PresentationLayer --> Client.ApplicationLayer\n 38 | Client.ApplicationLayer --> Client.NetworkLayer\n 39 | Client.NetworkLayer <---> Server.NetworkLayer\n 40 | Server.NetworkLayer --> Server.BusinessLayer\n 41 | Server.NetworkLayer -[hidden]> Client.NetworkLayer\n 42 | \n 43 | \n 44 | hide empty fields\n 45 | hide empty methods\n 46 | hide circle\n 47 | @enduml\n 48 | \n 49 | On the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n 50 | ### MVC Component Diagram\n 51 | @startuml\n 52 | \n 53 | namespace Common {\n 54 |     namespace Model {\n 55 |         class Common.Model.Note {\n 56 |             \n 57 |         }\n 58 |         class Common.Model.Person {\n 59 |             \n 60 |         }\n 61 |     }\n 62 | }\n 63 | \n 64 | namespace Client {\n 65 |     namespace Controller {\n 66 |         class Client.Controller.NoteController {\n 67 |             \n 68 |         }\n 69 |         class Client.Controller.PersonController {\n 70 |             \n 71 |         }\n 72 |     }\n 73 |     namespace View {\n 74 |         class Client.View.NoteScene {\n 75 |             \n 76 |         }\n 77 |         class Client.View.PersonScene {\n 78 |             \n 79 |         }\n 80 |     }\n 81 | }\n 82 | \n 83 | Client.Controller.NoteController <-- Client.View.NoteScene\n 84 | Client.Controller.PersonController <-- Client.View.PersonScene\n 85 | Common.Model.Note \"*\" --o Client.Controller.NoteController\n 86 | Common.Model.Person \"*\" --o Client.Controller.PersonController\n 87 | \n 88 | \n 89 | \n 90 | hide empty fields\n 91 | hide empty methods\n 92 | hide circle\n 93 | @enduml\n 94 | \n 95 | <br />\n 96 | \n 97 | ***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n 98 | \n 99 | \n100 | ## Application Functionality\n101 | This system has 2 sides.\n102 | - Client-side\n103 | - Server-side\n104 | \n105 | \n106 | The server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\n107 | The client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n108 | \n109 | The endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n110 | - `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n111 | - `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n112 | - `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n113 | - `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n114 | \n115 | *Note: There are TODOs in the code giving helpful hints*\n116 | \n117 | ***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n118 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n119 | *`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n120 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n121 | *Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n122 | <br/>\n123 | <br/>\n124 | ##Part 1\n125 | In the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\n126 | You have to forward each action to the `PersonService` and add any additional checks before that.\n127 | \n128 | 1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n129 |     Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n130 | 2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n131 |     Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n132 | 3. [task][Endpoint to delete a person](Delete existing person (Server))\n133 |     Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n134 | 4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n135 |     Last but not the least, implement the method `getAllPersons`, which returns all persons.\n136 | \n137 | *Note: Feel free to get inspired by `NoteResource` for additional help.*\n138 | \n139 | \n140 | \n141 | ##Part 2\n142 | In the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\n143 | The Controller should work like this:\n144 | - There is a single `WebClient` instance that is used for all requests\n145 | - Each method should only send a single HTTP request\n146 | - The HTTP requests need to happen asynchronously\n147 | - It has an internal list of all persons\n148 |     - If a person is created, updated or deleted this has to be updated in the list\n149 |     - If all persons are retrieved from the server the list has to be updated accordingly\n150 | - Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n151 |     - This consumer takes the internal list of persons as a parameter\n152 | \n153 | ### UML Diagram\n154 | @startuml\n155 | \n156 | namespace Client {\n157 |     namespace Controller {\n158 |         class PersonController {\n159 |             - webClient: WebClient\n160 |             + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n161 |             + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n162 |             + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n163 |             + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n164 |         }\n165 |     }\n166 | }\n167 | \n168 | namespace Common {\n169 |     class Person {\n170 |         - id: UUID\n171 |         - firstName: String\n172 |         - lastName: String\n173 |         - birthday: LocalDate\n174 |     }\n175 | }\n176 | \n177 | Client.Controller.PersonController o-- \"*\" Common.Person : persons\n178 | \n179 | \n180 | hide empty fields\n181 | hide empty methods\n182 | hide circle\n183 | @enduml\n184 | \n185 | <br />\n186 | \n187 | 1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n188 |     Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n189 | 2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n190 |     Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n191 | 3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n192 |     Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n193 | 4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n194 |     Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n195 | \n196 | *Note: Don't forget the constructor of `PersonController`*\n197 | \n198 | ##Part 3\n199 | It has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n200 | \n201 | It is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\n202 | Some additional notes:\n203 | - The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n204 | - The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n205 | \n206 | [task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\n207 | Implement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\n208 | Then update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n209 | \n210 | *Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*\n\n\n===== Template Repository =====\ntemplate_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import java.util.List;\n 6 | import java.util.function.Consumer;\n 7 | \n 8 | public class PersonController {\n 9 | \n10 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n11 |         // TODO Part 2: Make an http post request to the server\n12 |     }\n13 | \n14 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n15 |         // TODO Part 2: Make an http put request to the server\n16 |     }\n17 | \n18 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n19 |         // TODO Part 2: Make an http delete request to the server\n20 |     }\n21 | \n22 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n23 |         // TODO Part 2: Make an https get request to the server\n24 |     }\n25 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.service.PersonService;\n 4 | import org.springframework.http.MediaType;\n 5 | import org.springframework.web.bind.annotation.RequestMapping;\n 6 | import org.springframework.web.bind.annotation.RestController;\n 7 | \n 8 | @RestController\n 9 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n10 | public class PersonResource {\n11 | \n12 |     private final PersonService personService;\n13 | \n14 |     public PersonResource(PersonService personService) {\n15 |         this.personService = personService;\n16 |     }\n17 | \n18 |     // TODO Part 1: Implement the specified endpoints here\n19 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class PersonService {\n11 |   \t// do not change this\n12 |     private final List<Person> persons;\n13 | \n14 |     public PersonService() {\n15 |         this.persons = new ArrayList<>();\n16 |     }\n17 | \n18 |     public Person savePerson(Person person) {\n19 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n20 |         if (optionalPerson.isEmpty()) {\n21 |             person.setId(UUID.randomUUID());\n22 |             persons.add(person);\n23 |             return person;\n24 |         } else {\n25 |             var existingPerson = optionalPerson.get();\n26 |             existingPerson.setFirstName(person.getFirstName());\n27 |             existingPerson.setLastName(person.getLastName());\n28 |             existingPerson.setBirthday(person.getBirthday());\n29 |             return existingPerson;\n30 |         }\n31 |     }\n32 | \n33 |     public void deletePerson(UUID personId) {\n34 |         this.persons.removeIf(person -> person.getId().equals(personId));\n35 |     }\n36 | \n37 |     public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n38 |         // TODO Part 3: Add sorting here\n39 |         return new ArrayList<>(this.persons);\n40 |     }\n41 | }\n\n\n===== Solution Repository =====\nsolution_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.core.ParameterizedTypeReference;\n 6 | import org.springframework.http.HttpHeaders;\n 7 | import org.springframework.http.MediaType;\n 8 | import org.springframework.web.reactive.function.client.WebClient;\n 9 | \n10 | import java.util.ArrayList;\n11 | import java.util.List;\n12 | import java.util.function.Consumer;\n13 | \n14 | public class PersonController {\n15 |     private final WebClient webClient;\n16 |     private final List<Person> persons;\n17 | \n18 |     public PersonController() {\n19 |         this.webClient = WebClient.builder()\n20 |                 .baseUrl(\"http://localhost:8080/\")\n21 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n23 |                 .build();\n24 |         this.persons = new ArrayList<>();\n25 |     }\n26 | \n27 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n28 |         webClient.post()\n29 |                 .uri(\"persons\")\n30 |                 .bodyValue(person)\n31 |                 .retrieve()\n32 |                 .bodyToMono(Person.class)\n33 |                 .onErrorStop()\n34 |                 .subscribe(newPerson -> {\n35 |                     persons.add(newPerson);\n36 |                     personsConsumer.accept(persons);\n37 |                 });\n38 |     }\n39 | \n40 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n41 |         webClient.put()\n42 |                 .uri(\"persons/\" + person.getId())\n43 |                 .bodyValue(person)\n44 |                 .retrieve()\n45 |                 .bodyToMono(Person.class)\n46 |                 .onErrorStop()\n47 |                 .subscribe(newPerson -> {\n48 |                     persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n49 |                     personsConsumer.accept(persons);\n50 |                 });\n51 |     }\n52 | \n53 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n54 |         webClient.delete()\n55 |                 .uri(\"persons/\" + person.getId())\n56 |                 .retrieve()\n57 |                 .toBodilessEntity()\n58 |                 .onErrorStop()\n59 |                 .subscribe(v -> {\n60 |                     persons.remove(person);\n61 |                     personsConsumer.accept(persons);\n62 |                 });\n63 |     }\n64 | \n65 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n66 |         webClient.get()\n67 |                 .uri(uriBuilder -> uriBuilder\n68 |                         .path(\"persons\")\n69 |                         .queryParam(\"sortField\", sortingOptions.getSortField())\n70 |                         .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n71 |                         .build())\n72 |                 .retrieve()\n73 |                 .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n74 |                 .onErrorStop()\n75 |                 .subscribe(newPersons -> {\n76 |                     persons.clear();\n77 |                     persons.addAll(newPersons);\n78 |                     personsConsumer.accept(persons);\n79 |                 });\n80 |     }\n81 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.service.PersonService;\n 5 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.http.ResponseEntity;\n 8 | import org.springframework.web.bind.annotation.*;\n 9 | \n10 | import java.util.List;\n11 | import java.util.UUID;\n12 | \n13 | @RestController\n14 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n15 | public class PersonResource {\n16 | \n17 |     private final PersonService personService;\n18 | \n19 |     public PersonResource(PersonService personService) {\n20 |         this.personService = personService;\n21 |     }\n22 | \n23 |     @GetMapping(\"persons\")\n24 |     public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n25 |                                                       @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n26 |         return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n27 |     }\n28 | \n29 |     @PostMapping(\"persons\")\n30 |     public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n31 |         if (person.getId() != null) {\n32 |             return ResponseEntity.badRequest().build();\n33 |         }\n34 |         return ResponseEntity.ok(personService.savePerson(person));\n35 |     }\n36 | \n37 |     @PutMapping(\"persons/{personId}\")\n38 |     public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n39 |         if (!updatedPerson.getId().equals(personId)) {\n40 |             return ResponseEntity.badRequest().build();\n41 |         }\n42 |         return ResponseEntity.ok(personService.savePerson(updatedPerson));\n43 |     }\n44 | \n45 |     @DeleteMapping(\"persons/{personId}\")\n46 |     public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n47 |         personService.deletePerson(personId);\n48 |         return ResponseEntity.noContent().build();\n49 |     }\n50 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | import static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n10 | \n11 | @Service\n12 | public class PersonService {\n13 |   \t// do not change this\n14 |     private final List<Person> persons;\n15 | \n16 |     public PersonService() {\n17 |         this.persons = new ArrayList<>();\n18 |     }\n19 | \n20 |     public Person savePerson(Person person) {\n21 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n22 |         if (optionalPerson.isEmpty()) {\n23 |             person.setId(UUID.randomUUID());\n24 |             persons.add(person);\n25 |             return person;\n26 |         } else {\n27 |             var existingPerson = optionalPerson.get();\n28 |             existingPerson.setFirstName(person.getFirstName());\n29 |             existingPerson.setLastName(person.getLastName());\n30 |             existingPerson.setBirthday(person.getBirthday());\n31 |             return existingPerson;\n32 |         }\n33 |     }\n34 | \n35 |     public void deletePerson(UUID personId) {\n36 |         this.persons.removeIf(person -> person.getId().equals(personId));\n37 |     }\n38 | \n39 |     public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n40 |         if (sortingOptions == null) {\n41 |             return this.persons.stream();\n42 |         }\n43 |         Stream<Person> sortedStream = this.persons.stream();\n44 |         sortedList.sort((p1, p2) -> {\n45 |             Person person1;\n46 |             Person person2;\n47 |             if (sortingOptions.getSortingOrder() == ASCENDING) {\n48 |                 person1 = p1;\n49 |                 person2 = p2;\n50 |             } else {\n51 |                 person1 = p2;\n52 |                 person2 = p1;\n53 |             }\n54 | \n55 |             return switch (sortingOptions.getSortField()) {\n56 |                 case ID -> person1.getId().compareTo(person2.getId());\n57 |                 case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n58 |                 case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n59 |                 case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n60 |             };\n61 |         });\n62 |         return sortedList;\n63 |     }\n64 | }"
      },
      "outputs": {
        "output": {
          "messages": [
            {
              "content": "\n===== Problem Statement =====\n--------------------------------------------------------------------------------\nproblem_statement.md:\n--------------------------------------------------------------------------------\n  1 | # REST Architectural Style\n  2 | \n  3 | The university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n  4 | \n  5 | This exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n  6 | \n  7 | ## Application Structure\n  8 | \n  9 | The following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n 10 | <br>\n 11 | #### Client-Side:\n 12 | - The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n 13 | - The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n 14 | - The `Network Layer` contains the functionality to send REST requests to the server.\n 15 | \n 16 | #### Server-Side:\n 17 | - The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n 18 | - The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n 19 | \n 20 | ### Layered Architecture\n 21 | @startuml\n 22 | \n 23 | namespace Client {\n 24 |     namespace NetworkLayer {}\n 25 |     \n 26 |     namespace PresentationLayer {}\n 27 |     \n 28 |     namespace ApplicationLayer {}\n 29 | }\n 30 | \n 31 | namespace Server {\n 32 |     namespace NetworkLayer {}\n 33 |     \n 34 |     namespace BusinessLayer {}\n 35 | }\n 36 | \n 37 | Client.PresentationLayer --> Client.ApplicationLayer\n 38 | Client.ApplicationLayer --> Client.NetworkLayer\n 39 | Client.NetworkLayer <---> Server.NetworkLayer\n 40 | Server.NetworkLayer --> Server.BusinessLayer\n 41 | Server.NetworkLayer -[hidden]> Client.NetworkLayer\n 42 | \n 43 | \n 44 | hide empty fields\n 45 | hide empty methods\n 46 | hide circle\n 47 | @enduml\n 48 | \n 49 | On the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n 50 | ### MVC Component Diagram\n 51 | @startuml\n 52 | \n 53 | namespace Common {\n 54 |     namespace Model {\n 55 |         class Common.Model.Note {\n 56 |             \n 57 |         }\n 58 |         class Common.Model.Person {\n 59 |             \n 60 |         }\n 61 |     }\n 62 | }\n 63 | \n 64 | namespace Client {\n 65 |     namespace Controller {\n 66 |         class Client.Controller.NoteController {\n 67 |             \n 68 |         }\n 69 |         class Client.Controller.PersonController {\n 70 |             \n 71 |         }\n 72 |     }\n 73 |     namespace View {\n 74 |         class Client.View.NoteScene {\n 75 |             \n 76 |         }\n 77 |         class Client.View.PersonScene {\n 78 |             \n 79 |         }\n 80 |     }\n 81 | }\n 82 | \n 83 | Client.Controller.NoteController <-- Client.View.NoteScene\n 84 | Client.Controller.PersonController <-- Client.View.PersonScene\n 85 | Common.Model.Note \"*\" --o Client.Controller.NoteController\n 86 | Common.Model.Person \"*\" --o Client.Controller.PersonController\n 87 | \n 88 | \n 89 | \n 90 | hide empty fields\n 91 | hide empty methods\n 92 | hide circle\n 93 | @enduml\n 94 | \n 95 | <br />\n 96 | \n 97 | ***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n 98 | \n 99 | \n100 | ## Application Functionality\n101 | This system has 2 sides.\n102 | - Client-side\n103 | - Server-side\n104 | \n105 | \n106 | The server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\n107 | The client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n108 | \n109 | The endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n110 | - `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n111 | - `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n112 | - `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n113 | - `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n114 | \n115 | *Note: There are TODOs in the code giving helpful hints*\n116 | \n117 | ***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n118 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n119 | *`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n120 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n121 | *Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n122 | <br/>\n123 | <br/>\n124 | ##Part 1\n125 | In the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\n126 | You have to forward each action to the `PersonService` and add any additional checks before that.\n127 | \n128 | 1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n129 |     Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n130 | 2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n131 |     Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n132 | 3. [task][Endpoint to delete a person](Delete existing person (Server))\n133 |     Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n134 | 4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n135 |     Last but not the least, implement the method `getAllPersons`, which returns all persons.\n136 | \n137 | *Note: Feel free to get inspired by `NoteResource` for additional help.*\n138 | \n139 | \n140 | \n141 | ##Part 2\n142 | In the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\n143 | The Controller should work like this:\n144 | - There is a single `WebClient` instance that is used for all requests\n145 | - Each method should only send a single HTTP request\n146 | - The HTTP requests need to happen asynchronously\n147 | - It has an internal list of all persons\n148 |     - If a person is created, updated or deleted this has to be updated in the list\n149 |     - If all persons are retrieved from the server the list has to be updated accordingly\n150 | - Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n151 |     - This consumer takes the internal list of persons as a parameter\n152 | \n153 | ### UML Diagram\n154 | @startuml\n155 | \n156 | namespace Client {\n157 |     namespace Controller {\n158 |         class PersonController {\n159 |             - webClient: WebClient\n160 |             + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n161 |             + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n162 |             + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n163 |             + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n164 |         }\n165 |     }\n166 | }\n167 | \n168 | namespace Common {\n169 |     class Person {\n170 |         - id: UUID\n171 |         - firstName: String\n172 |         - lastName: String\n173 |         - birthday: LocalDate\n174 |     }\n175 | }\n176 | \n177 | Client.Controller.PersonController o-- \"*\" Common.Person : persons\n178 | \n179 | \n180 | hide empty fields\n181 | hide empty methods\n182 | hide circle\n183 | @enduml\n184 | \n185 | <br />\n186 | \n187 | 1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n188 |     Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n189 | 2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n190 |     Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n191 | 3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n192 |     Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n193 | 4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n194 |     Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n195 | \n196 | *Note: Don't forget the constructor of `PersonController`*\n197 | \n198 | ##Part 3\n199 | It has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n200 | \n201 | It is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\n202 | Some additional notes:\n203 | - The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n204 | - The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n205 | \n206 | [task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\n207 | Implement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\n208 | Then update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n209 | \n210 | *Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*\n\n\n===== Template Repository =====\ntemplate_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import java.util.List;\n 6 | import java.util.function.Consumer;\n 7 | \n 8 | public class PersonController {\n 9 | \n10 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n11 |         // TODO Part 2: Make an http post request to the server\n12 |     }\n13 | \n14 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n15 |         // TODO Part 2: Make an http put request to the server\n16 |     }\n17 | \n18 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n19 |         // TODO Part 2: Make an http delete request to the server\n20 |     }\n21 | \n22 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n23 |         // TODO Part 2: Make an https get request to the server\n24 |     }\n25 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.service.PersonService;\n 4 | import org.springframework.http.MediaType;\n 5 | import org.springframework.web.bind.annotation.RequestMapping;\n 6 | import org.springframework.web.bind.annotation.RestController;\n 7 | \n 8 | @RestController\n 9 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n10 | public class PersonResource {\n11 | \n12 |     private final PersonService personService;\n13 | \n14 |     public PersonResource(PersonService personService) {\n15 |         this.personService = personService;\n16 |     }\n17 | \n18 |     // TODO Part 1: Implement the specified endpoints here\n19 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class PersonService {\n11 |   \t// do not change this\n12 |     private final List<Person> persons;\n13 | \n14 |     public PersonService() {\n15 |         this.persons = new ArrayList<>();\n16 |     }\n17 | \n18 |     public Person savePerson(Person person) {\n19 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n20 |         if (optionalPerson.isEmpty()) {\n21 |             person.setId(UUID.randomUUID());\n22 |             persons.add(person);\n23 |             return person;\n24 |         } else {\n25 |             var existingPerson = optionalPerson.get();\n26 |             existingPerson.setFirstName(person.getFirstName());\n27 |             existingPerson.setLastName(person.getLastName());\n28 |             existingPerson.setBirthday(person.getBirthday());\n29 |             return existingPerson;\n30 |         }\n31 |     }\n32 | \n33 |     public void deletePerson(UUID personId) {\n34 |         this.persons.removeIf(person -> person.getId().equals(personId));\n35 |     }\n36 | \n37 |     public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n38 |         // TODO Part 3: Add sorting here\n39 |         return new ArrayList<>(this.persons);\n40 |     }\n41 | }\n\n\n===== Solution Repository =====\nsolution_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.core.ParameterizedTypeReference;\n 6 | import org.springframework.http.HttpHeaders;\n 7 | import org.springframework.http.MediaType;\n 8 | import org.springframework.web.reactive.function.client.WebClient;\n 9 | \n10 | import java.util.ArrayList;\n11 | import java.util.List;\n12 | import java.util.function.Consumer;\n13 | \n14 | public class PersonController {\n15 |     private final WebClient webClient;\n16 |     private final List<Person> persons;\n17 | \n18 |     public PersonController() {\n19 |         this.webClient = WebClient.builder()\n20 |                 .baseUrl(\"http://localhost:8080/\")\n21 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n23 |                 .build();\n24 |         this.persons = new ArrayList<>();\n25 |     }\n26 | \n27 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n28 |         webClient.post()\n29 |                 .uri(\"persons\")\n30 |                 .bodyValue(person)\n31 |                 .retrieve()\n32 |                 .bodyToMono(Person.class)\n33 |                 .onErrorStop()\n34 |                 .subscribe(newPerson -> {\n35 |                     persons.add(newPerson);\n36 |                     personsConsumer.accept(persons);\n37 |                 });\n38 |     }\n39 | \n40 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n41 |         webClient.put()\n42 |                 .uri(\"persons/\" + person.getId())\n43 |                 .bodyValue(person)\n44 |                 .retrieve()\n45 |                 .bodyToMono(Person.class)\n46 |                 .onErrorStop()\n47 |                 .subscribe(newPerson -> {\n48 |                     persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n49 |                     personsConsumer.accept(persons);\n50 |                 });\n51 |     }\n52 | \n53 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n54 |         webClient.delete()\n55 |                 .uri(\"persons/\" + person.getId())\n56 |                 .retrieve()\n57 |                 .toBodilessEntity()\n58 |                 .onErrorStop()\n59 |                 .subscribe(v -> {\n60 |                     persons.remove(person);\n61 |                     personsConsumer.accept(persons);\n62 |                 });\n63 |     }\n64 | \n65 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n66 |         webClient.get()\n67 |                 .uri(uriBuilder -> uriBuilder\n68 |                         .path(\"persons\")\n69 |                         .queryParam(\"sortField\", sortingOptions.getSortField())\n70 |                         .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n71 |                         .build())\n72 |                 .retrieve()\n73 |                 .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n74 |                 .onErrorStop()\n75 |                 .subscribe(newPersons -> {\n76 |                     persons.clear();\n77 |                     persons.addAll(newPersons);\n78 |                     personsConsumer.accept(persons);\n79 |                 });\n80 |     }\n81 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.service.PersonService;\n 5 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.http.ResponseEntity;\n 8 | import org.springframework.web.bind.annotation.*;\n 9 | \n10 | import java.util.List;\n11 | import java.util.UUID;\n12 | \n13 | @RestController\n14 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n15 | public class PersonResource {\n16 | \n17 |     private final PersonService personService;\n18 | \n19 |     public PersonResource(PersonService personService) {\n20 |         this.personService = personService;\n21 |     }\n22 | \n23 |     @GetMapping(\"persons\")\n24 |     public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n25 |                                                       @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n26 |         return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n27 |     }\n28 | \n29 |     @PostMapping(\"persons\")\n30 |     public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n31 |         if (person.getId() != null) {\n32 |             return ResponseEntity.badRequest().build();\n33 |         }\n34 |         return ResponseEntity.ok(personService.savePerson(person));\n35 |     }\n36 | \n37 |     @PutMapping(\"persons/{personId}\")\n38 |     public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n39 |         if (!updatedPerson.getId().equals(personId)) {\n40 |             return ResponseEntity.badRequest().build();\n41 |         }\n42 |         return ResponseEntity.ok(personService.savePerson(updatedPerson));\n43 |     }\n44 | \n45 |     @DeleteMapping(\"persons/{personId}\")\n46 |     public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n47 |         personService.deletePerson(personId);\n48 |         return ResponseEntity.noContent().build();\n49 |     }\n50 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | import static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n10 | \n11 | @Service\n12 | public class PersonService {\n13 |   \t// do not change this\n14 |     private final List<Person> persons;\n15 | \n16 |     public PersonService() {\n17 |         this.persons = new ArrayList<>();\n18 |     }\n19 | \n20 |     public Person savePerson(Person person) {\n21 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n22 |         if (optionalPerson.isEmpty()) {\n23 |             person.setId(UUID.randomUUID());\n24 |             persons.add(person);\n25 |             return person;\n26 |         } else {\n27 |             var existingPerson = optionalPerson.get();\n28 |             existingPerson.setFirstName(person.getFirstName());\n29 |             existingPerson.setLastName(person.getLastName());\n30 |             existingPerson.setBirthday(person.getBirthday());\n31 |             return existingPerson;\n32 |         }\n33 |     }\n34 | \n35 |     public void deletePerson(UUID personId) {\n36 |         this.persons.removeIf(person -> person.getId().equals(personId));\n37 |     }\n38 | \n39 |     public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n40 |         if (sortingOptions == null) {\n41 |             return this.persons.stream();\n42 |         }\n43 |         Stream<Person> sortedStream = this.persons.stream();\n44 |         sortedList.sort((p1, p2) -> {\n45 |             Person person1;\n46 |             Person person2;\n47 |             if (sortingOptions.getSortingOrder() == ASCENDING) {\n48 |                 person1 = p1;\n49 |                 person2 = p2;\n50 |             } else {\n51 |                 person1 = p2;\n52 |                 person2 = p1;\n53 |             }\n54 | \n55 |             return switch (sortingOptions.getSortField()) {\n56 |                 case ID -> person1.getId().compareTo(person2.getId());\n57 |                 case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n58 |                 case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n59 |                 case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n60 |             };\n61 |         });\n62 |         return sortedList;\n63 |     }\n64 | }\n\n# MISSION\nYou are a Semantic Consistency Validator for programming exercises. Your task: detect UNINTENDED semantic inconsistencies where the same conceptual entity is referenced with different names across artifacts, creating cognitive mapping barriers for students.\n\n# ARTIFACTS AVAILABLE\nYou will analyze consistency across these artifacts:\n- **Problem Statement**: The exercise description and requirements\n- **Template Repository**: Starter code that students begin with (incomplete implementation)\n- **Solution Repository**: Complete reference implementation showing the intended final state\n\n# CORE PRINCIPLE\n**ONLY flag unintended identifier naming inconsistencies that create conceptual mapping confusion.**\n**DO NOT flag intentional pedagogical variations, abstraction levels, or synonymous terminology.**\n\nFocus specifically on **IDENTIFIER_NAMING_INCONSISTENCY**: Same conceptual entity referenced with different identifiers (class names, method names, attribute names, parameter names) across problem statement, template code, and solution code.\n\n# CONCEPTUAL MAPPING UNDERSTANDING\n\n## SEMANTIC INCONSISTENCIES (FLAG THESE):\n- **Cross-artifact naming conflicts**: Problem describes `calculateTotal()`, template has `getPrice()` for same concept\n- **Entity reference mismatches**: Problem refers to `StudentRecord`, template has `Student` class for same entity\n- **Parameter naming conflicts**: Problem shows `setDimensions(width, height)`, template has `setDimensions(w, h)`\n- **Attribute naming divergence**: Problem describes `name` field, template declares `studentName` for same concept\n- **Method naming inconsistency**: Problem specifies `isValid()`, template implements `checkValidity()` for same logic\n- **Template-Solution misalignment**: Template uses `calculateScore()`, solution uses `computeGrade()` for same method\n- **Problem-Solution conflicts**: Problem describes `Customer` class, solution implements `ClientRecord` class\n\n## INTENTIONAL VARIATIONS (DO NOT FLAG):\n- **Abstraction level differences**: Problem uses \"student\" (concept), template uses \"StudentRecord\" (implementation)\n- **Domain vs. technical terminology**: Problem uses \"grade\", template uses \"score\" (synonymous in context)\n- **Pedagogical progressive disclosure**: Problem introduces simplified names, template shows full technical names\n- **Convention-based variations**: Problem uses camelCase description, template follows established naming conventions\n- **Getter/setter variations**: Problem describes \"name\", template has `getName()`/`setName()` (standard convention)\n- **Implementation detail naming**: Template has helper methods not mentioned in problem (internal implementation)\n- **Template incompleteness**: Template has method stubs, solution has full implementation (pedagogical by design)\n\n# ANALYSIS FRAMEWORK\n\n## STEP 1: Conceptual Entity Identification\nFor each entity mentioned in the problem statement:\n1. **What is the core concept being described?**\n   - Identify the fundamental educational or domain concept\n   - Distinguish between concept description and implementation details\n   - Determine if this is a student-facing requirement or internal implementation\n\n2. **How is this concept represented in the template and solution?**\n   - Find corresponding elements in template code\n   - Check if the mapping is clear and unambiguous from problem to template\n   - Verify that solution implementation aligns with both problem and template naming\n   - Assess if students can easily connect problem requirements to template elements and final solution\n\n3. **Is the naming relationship clear for students across all artifacts?**\n   - Would a student understand that these refer to the same concept across problem, template, and solution?\n   - Are the naming differences creating unnecessary cognitive load?\n   - Do the differences interfere with requirement-to-implementation mapping?\n   - Does the solution provide a consistent naming target that students should aim for?\n\n## STEP 2: Cognitive Mapping Assessment\nApply cognitive load theory to assess naming consistency:\n\n**INTRINSIC LOAD (Learning Goals)**: Names should support the core learning objectives\n- Does inconsistent naming distract from the primary learning goals?\n- Do students need to learn both problem domain AND resolve naming conflicts?\n\n**EXTRANEOUS LOAD (Unnecessary Burden)**: Inconsistent naming creates additional mental effort\n- Must students maintain multiple mental mappings for the same concept?\n- Does naming inconsistency require cognitive resources that could be used for learning?\n\n**GERMANE LOAD (Schema Building)**: Names should help build coherent mental models\n- Do inconsistent names prevent students from building clear conceptual schemas?\n- Does naming confusion interfere with understanding relationships between concepts?\n\n## STEP 3: Contextual Validation\nFor each potential naming inconsistency:\n\n**Educational Context Analysis**:\n- Is this a CS education best practice (e.g., getter/setter naming)?\n- Would students in this course level understand the naming relationship?\n- Does the naming difference serve a pedagogical purpose?\n\n**Implementation Necessity Check**:\n- Is the template naming required by Java conventions or frameworks?\n- Does the naming difference reflect necessary technical implementation details?\n- Are both names referring to exactly the same conceptual entity?\n\n**Student Impact Assessment**:\n- Would students waste time searching for non-existent methods/classes?\n- Could students implement incorrect solution due to naming confusion?\n- Does the inconsistency create ambiguity about requirements?\n\n## STEP 4: Inconsistency Classification\nOnly flag as **IDENTIFIER_NAMING_INCONSISTENCY** when:\n\n✅ **Same conceptual entity** referenced differently across artifacts\n✅ **Clear mapping confusion** likely for target student population\n✅ **Unintentional oversight** rather than pedagogical design choice\n✅ **Creates cognitive burden** beyond intended learning objectives\n✅ **No technical necessity** for the naming difference\n\n# REASONING CHAIN FOR ASSESSMENT\n\nFor each potential issue, follow this reasoning chain:\n\n1. **Concept Identification**: \"What exact concept does each name represent?\"\n2. **Mapping Clarity**: \"Can students clearly map problem requirements to template elements?\"\n3. **Cognitive Load Assessment**: \"Does this naming difference add extraneous cognitive load?\"\n4. **Intentionality Check**: \"Is this likely intentional pedagogical design or oversight?\"\n5. **Student Impact Evaluation**: \"Would this genuinely confuse or mislead students?\"\n6. **Educational Value Assessment**: \"Does maintaining both names serve educational goals?\"\n\nOnly proceed to flag if ALL checks indicate genuine inconsistency.\n\n# EXAMPLES\n\n## ❌ FALSE POSITIVE (DO NOT FLAG):\n```\nProblem: \"Calculate the student's final grade\"\nTemplate: public double calculateScore() { ... }\nAnalysis: \"grade\" and \"score\" are synonymous in educational context - clear conceptual mapping\n```\n\n## ❌ FALSE POSITIVE (DO NOT FLAG):\n```\nProblem: \"Student has a name property\"\nTemplate: private String studentName; public String getName() { ... }\nAnalysis: Standard getter convention - students should understand this mapping\n```\n\n## ✅ TRUE POSITIVE (FLAG THIS):\n```\nProblem: \"Implement calculateTotal() method to sum all prices\"\nTemplate: public double getPrice() { /* TODO: Implement total calculation */ }\nAnalysis: Same concept (total calculation) with completely different names - creates mapping confusion\n```\n\n## ✅ TRUE POSITIVE (FLAG THIS):\n```\nProblem: \"Use the Customer class to store customer information\"\nTemplate: public class ClientRecord { ... }\nAnalysis: Same entity with different names - students cannot map requirements to implementation\n```\n\n# SEVERITY GUIDELINES\n- **HIGH**: Completely different names for same concept, making requirement mapping impossible\n- **MEDIUM**: Similar but inconsistent names that require cognitive effort to map\n- **LOW**: Minor naming variations that might cause brief confusion but are resolvable\n\n# OUTPUT FORMAT\n```json\n{\n  \"issues\": [\n    {\n      \"description\": \"Precise explanation of the naming inconsistency and how it affects student conceptual mapping\",\n      \"severity\": \"HIGH\" | \"MEDIUM\" | \"LOW\",\n      \"category\": \"IDENTIFIER_NAMING_INCONSISTENCY\",\n      \"related_locations\": [{\n        \"type\": \"PROBLEM_STATEMENT\" | \"TEMPLATE_REPOSITORY\" | \"SOLUTION_REPOSITORY\",\n        \"file_path\": \"exact/path/to/file.java\",\n        \"start_line\": 1,\n        \"end_line\": 10\n      },\n      {\n        \"type\": \"PROBLEM_STATEMENT\" | \"TEMPLATE_REPOSITORY\" | \"SOLUTION_REPOSITORY\",\n        \"file_path\": \"related/file/path.java\",\n        \"start_line\": 5,\n        \"end_line\": 8\n      }],\n      \"suggested_fix\": \"Specific naming correction that aligns conceptual entities while preserving educational intent\"\n    }\n  ]\n}\n```\n\n# EXECUTION\nAnalyze the provided artifacts for semantic naming inconsistencies that would create cognitive mapping barriers for students. Apply the conceptual entity identification and cognitive load assessment framework systematically. Use the reasoning chain to validate each potential issue. Return only genuine naming inconsistencies that are unintentional and would create extraneous cognitive load for students trying to map problem requirements to template implementation and final solution.",
              "additional_kwargs": {},
              "response_metadata": {},
              "type": "human"
            }
          ]
        }
      },
      "tags": [
        "seq:step:2"
      ],
      "parent_run_id": "b24c9117-122d-41e4-abe8-975026ccf3a1",
      "trace_id": "2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "dotted_order": "20250723T144040524034Z2102d036-0bf8-4863-879f-f17bd2b1b9ca.20250723T144040588355Z426ee021-0ec1-40e6-bda0-4be115f42a34.20250723T144040592707Zb24c9117-122d-41e4-abe8-975026ccf3a1.20250723T144040600422Z8af3d264-eb78-4e63-b026-56a4ce522d83",
      "session_id": "9165a489-2e1b-4cfc-a139-82686a2268ba",
      "extra": {
        "inputs_is_truthy": true,
        "runtime": {
          "sdk": "langsmith-py",
          "sdk_version": "0.3.42",
          "library": "langsmith",
          "platform": "macOS-15.3-arm64-arm-64bit-Mach-O",
          "runtime": "python",
          "py_implementation": "CPython",
          "runtime_version": "3.13.5",
          "langchain_version": "0.3.25",
          "langchain_core_version": "0.3.59"
        },
        "metadata": {
          "LANGSMITH_TRACING": "true",
          "LANGCHAIN_RUN_ID": "39eb4060",
          "revision_id": "v1.1.0-48-g1c4fbcca-dirty",
          "ls_run_depth": 3
        }
      },
      "events": [
        {
          "name": "start",
          "time": "2025-07-23T14:40:40.600422+00:00"
        },
        {
          "name": "end",
          "time": "2025-07-23T14:40:40.600997+00:00"
        }
      ]
    },
    {
      "id": "4e086385-a503-428d-810f-a1fa4afb1689",
      "name": "context_renderer",
      "run_type": "chain",
      "start_time": "2025-07-23T14:40:40.598576",
      "end_time": "2025-07-23T14:40:40.618323",
      "status": "success",
      "inputs": {
        "problem_statement": "# REST Architectural Style\n\nThe university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n\nThis exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n\n## Application Structure\n\nThe following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n<br>\n#### Client-Side:\n- The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n- The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n- The `Network Layer` contains the functionality to send REST requests to the server.\n\n#### Server-Side:\n- The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n- The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n\n### Layered Architecture\n@startuml\n\nnamespace Client {\n    namespace NetworkLayer {}\n    \n    namespace PresentationLayer {}\n    \n    namespace ApplicationLayer {}\n}\n\nnamespace Server {\n    namespace NetworkLayer {}\n    \n    namespace BusinessLayer {}\n}\n\nClient.PresentationLayer --> Client.ApplicationLayer\nClient.ApplicationLayer --> Client.NetworkLayer\nClient.NetworkLayer <---> Server.NetworkLayer\nServer.NetworkLayer --> Server.BusinessLayer\nServer.NetworkLayer -[hidden]> Client.NetworkLayer\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\nOn the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n### MVC Component Diagram\n@startuml\n\nnamespace Common {\n    namespace Model {\n        class Common.Model.Note {\n            \n        }\n        class Common.Model.Person {\n            \n        }\n    }\n}\n\nnamespace Client {\n    namespace Controller {\n        class Client.Controller.NoteController {\n            \n        }\n        class Client.Controller.PersonController {\n            \n        }\n    }\n    namespace View {\n        class Client.View.NoteScene {\n            \n        }\n        class Client.View.PersonScene {\n            \n        }\n    }\n}\n\nClient.Controller.NoteController <-- Client.View.NoteScene\nClient.Controller.PersonController <-- Client.View.PersonScene\nCommon.Model.Note \"*\" --o Client.Controller.NoteController\nCommon.Model.Person \"*\" --o Client.Controller.PersonController\n\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\n<br />\n\n***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n\n\n## Application Functionality\nThis system has 2 sides.\n- Client-side\n- Server-side\n\n\nThe server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\nThe client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n\nThe endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n- `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n- `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n- `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n- `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n\n*Note: There are TODOs in the code giving helpful hints*\n\n***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n*`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n*`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n*`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n*Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n<br/>\n<br/>\n##Part 1\nIn the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\nYou have to forward each action to the `PersonService` and add any additional checks before that.\n\n1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n    Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n    Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n3. [task][Endpoint to delete a person](Delete existing person (Server))\n    Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n    Last but not the least, implement the method `getAllPersons`, which returns all persons.\n\n*Note: Feel free to get inspired by `NoteResource` for additional help.*\n\n\n\n##Part 2\nIn the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\nThe Controller should work like this:\n- There is a single `WebClient` instance that is used for all requests\n- Each method should only send a single HTTP request\n- The HTTP requests need to happen asynchronously\n- It has an internal list of all persons\n    - If a person is created, updated or deleted this has to be updated in the list\n    - If all persons are retrieved from the server the list has to be updated accordingly\n- Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n    - This consumer takes the internal list of persons as a parameter\n\n### UML Diagram\n@startuml\n\nnamespace Client {\n    namespace Controller {\n        class PersonController {\n            - webClient: WebClient\n            + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n            + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n            + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n            + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n        }\n    }\n}\n\nnamespace Common {\n    class Person {\n        - id: UUID\n        - firstName: String\n        - lastName: String\n        - birthday: LocalDate\n    }\n}\n\nClient.Controller.PersonController o-- \"*\" Common.Person : persons\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\n<br />\n\n1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n    Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n    Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n    Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n    Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n\n*Note: Don't forget the constructor of `PersonController`*\n\n##Part 3\nIt has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n\nIt is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\nSome additional notes:\n- The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n- The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n\n[task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\nImplement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\nThen update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n\n*Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*",
        "programming_language": "java",
        "template_repository": [
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\ngroup = 'de.tum.in.ase.eist'\nversion = '1.0.0'\nsourceCompatibility = 17\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web'\n\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\nsourceSets {\n    common {\n        java {\n            srcDir 'src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'src/server/java'\n        }\n        resources {\n            srcDir 'src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'src/client/java'\n        }\n        resources {\n            srcDir 'src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n}\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Spring-Exercise'\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.view.HomeScene;\nimport de.tum.in.ase.eist.view.NoteScene;\nimport de.tum.in.ase.eist.view.PersonScene;\nimport javafx.application.Application;\nimport javafx.stage.Stage;\n\npublic class H05E01ClientApplication extends Application {\n    private final NoteController noteController = new NoteController();\n    private final PersonController personController = new PersonController();\n    private Stage stage;\n\n    @Override\n    public void start(Stage primaryStage) {\n        this.stage = primaryStage;\n\n        primaryStage.setScene(new HomeScene(this));\n        primaryStage.show();\n    }\n\n    public void showHomeScene() {\n        stage.setScene(new HomeScene(this));\n    }\n\n    public void showNoteScene() {\n        stage.setScene(new NoteScene(noteController, this));\n    }\n\n    public void showPersonScene() {\n        stage.setScene(new PersonScene(personController, this));\n    }\n\n    public Stage getStage() {\n        return stage;\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/Starter.java",
            "content": "package de.tum.in.ase.eist;\n\nimport javafx.application.Application;\n\npublic class Starter {\n    public static void main(String[] args) {\n        Application.launch(H05E01ClientApplication.class);\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/NoteController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class NoteController {\n    private final WebClient webClient;\n    private final List<Note> notes;\n\n    public NoteController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.notes = new ArrayList<>();\n    }\n\n    public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.post()\n                .uri(\"notes\")\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.add(newNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.put()\n                .uri(\"notes/\" + note.getId())\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.delete()\n                .uri(\"notes/\" + note.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    notes.remove(note);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"notes\")\n                        .queryParam(\"secret\", \"SecretKey\")\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n                .onErrorStop()\n                .subscribe(newNotes -> {\n                    notes.clear();\n                    notes.addAll(newNotes);\n                    notesConsumer.accept(notes);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/PersonController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class PersonController {\n\n    public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http post request to the server\n    }\n\n    public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http put request to the server\n    }\n\n    public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http delete request to the server\n    }\n\n    public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an https get request to the server\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/PersonScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\nimport javafx.application.Platform;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Popup;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic class PersonScene extends Scene {\n    private final PersonController personController;\n    private final H05E01ClientApplication application;\n    private final PersonSortingOptions sortingOptions;\n    private final ObservableList<Person> personList;\n    private final TableView<Person> table;\n\n    public PersonScene(PersonController personController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.personController = personController;\n        this.application = application;\n        this.sortingOptions = new PersonSortingOptions();\n        this.personList = FXCollections.observableArrayList();\n\n        table = new TableView<>(personList);\n        table.setOnMousePressed(event -> {\n            if (event.isPrimaryButtonDown()) {\n                showPopup(table.getSelectionModel().getSelectedItem());\n            }\n        });\n\n        var idColumn = new TableColumn<Person, String>(\"ID\");\n        idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n        idColumn.setSortable(false);\n        idColumn.setPrefWidth(620 / 4D);\n        var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n        firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n        firstNameColumn.setSortable(false);\n        firstNameColumn.setPrefWidth(620 / 4D);\n        var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n        lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n        lastNameColumn.setSortable(false);\n        lastNameColumn.setPrefWidth(620 / 4D);\n        var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n        birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n        birthdayColumn.setSortable(false);\n        birthdayColumn.setPrefWidth(620 / 4D);\n        //noinspection unchecked\n        table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n\n        var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n\n        personController.getAllPersons(sortingOptions, this::setPeople);\n    }\n\n    private HBox createSortOptionBox() {\n        var sortFieldChoiceBox = new ChoiceBox<SortField>();\n        sortFieldChoiceBox.getItems().addAll(SortField.values());\n        sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n        sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortField(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n        sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n        sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n        sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortingOrder(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n        hBox.setAlignment(Pos.CENTER);\n        return hBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Person\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Person person) {\n        var popup = new Popup();\n        var firstNameTextField = new TextField();\n        firstNameTextField.setPromptText(\"First Name\");\n        firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n\n        var lastNameTextField = new TextField();\n        lastNameTextField.setPromptText(\"Last Name\");\n        lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n\n        var birthdayPicker = new DatePicker();\n        birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newPerson = person != null ? person : new Person();\n            newPerson.setFirstName(firstNameTextField.getText());\n            newPerson.setLastName(lastNameTextField.getText());\n            newPerson.setBirthday(birthdayPicker.getValue());\n            if (person == null) {\n                personController.addPerson(newPerson, this::setPeople);\n            } else {\n                personController.updatePerson(newPerson, this::setPeople);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            personController.deletePerson(person, this::setPeople);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (person != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(150);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n\n    private void setPeople(List<Person> people) {\n        Platform.runLater(() -> personList.setAll(people));\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/NoteScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.model.Note;\nimport javafx.application.Platform;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\nimport javafx.stage.Popup;\n\nimport java.util.List;\n\npublic class NoteScene extends Scene {\n    private final NoteController noteController;\n    private final H05E01ClientApplication application;\n    private final FlowPane flowPane;\n\n    public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.noteController = noteController;\n        this.application = application;\n\n        flowPane = new FlowPane(10, 10);\n        var scrollPane = new ScrollPane(flowPane);\n        scrollPane.setPrefHeight(450);\n        scrollPane.setFitToWidth(true);\n\n        var vBox = new VBox(10, scrollPane, createButtonBox());\n\n        noteController.getAllNotes(this::setNotes);\n        this.setRoot(vBox);\n    }\n\n    public void setNotes(List<Note> notes) {\n        Platform.runLater(() -> {\n            var children = flowPane.getChildren();\n            children.setAll(notes.stream().map(this::createNoteView).toList());\n        });\n    }\n\n    private Node createNoteView(Note note) {\n        var name = new Text(note.getName());\n        name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n\n        var spacer = new Region();\n        HBox.setHgrow(spacer, Priority.ALWAYS);\n\n        var deleteButton = new Button(\"E\");\n        deleteButton.setTextFill(Color.ORANGE);\n        deleteButton.setOnAction(event -> showPopup(note));\n\n        var titleBox = new HBox(name, spacer, deleteButton);\n\n        var content = new Text(note.getContent());\n        var contentScrollPane = new ScrollPane(content);\n        contentScrollPane.setFitToWidth(true);\n        contentScrollPane.setFitToHeight(true);\n        contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n        contentScrollPane.getStyleClass().clear();\n        content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n\n        var vBox = new VBox(10, titleBox, contentScrollPane);\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setStyle(\"-fx-background-color:white;\");\n        vBox.setPadding(new Insets(5));\n        return vBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Note\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Note note) {\n        var popup = new Popup();\n        var nameTextField = new TextField();\n        nameTextField.setPromptText(\"Name\");\n        nameTextField.setText(note == null ? \"\" : note.getName());\n\n        var contentTextArea = new TextArea();\n        contentTextArea.setPromptText(\"Content\");\n        contentTextArea.setText(note == null ? \"\" : note.getContent());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newNote = note != null ? note : new Note();\n            newNote.setName(nameTextField.getText());\n            newNote.setContent(contentTextArea.getText());\n            if (note == null) {\n                noteController.addNote(newNote, this::setNotes);\n            } else {\n                noteController.editNote(newNote, this::setNotes);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            noteController.deleteNote(note, this::setNotes);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (note != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/HomeScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.VBox;\n\npublic class HomeScene extends Scene {\n    public HomeScene(H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n\n        var noteButton = new Button(\"Notes\");\n        noteButton.setOnAction(event -> application.showNoteScene());\n\n        var personButton = new Button(\"Persons\");\n        personButton.setOnAction(event -> application.showPersonScene());\n\n        var vBox = new VBox(10, noteButton, personButton);\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java",
            "content": "package de.tum.in.ase.eist.util;\n\npublic class PersonSortingOptions {\n    private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n    private SortField sortField = SortField.ID;\n\n    public PersonSortingOptions() {}\n\n    public PersonSortingOptions(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n        this.sortingOrder = sortingOrder;\n        this.sortField = sortField;\n    }\n\n    public SortingOrder getSortingOrder() {\n        return sortingOrder;\n    }\n\n    public void setSortingOrder(SortingOrder sortingOrder) {\n        this.sortingOrder = sortingOrder;\n    }\n\n    public SortField getSortField() {\n        return sortField;\n    }\n\n    public void setSortField(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public enum SortingOrder {\n        ASCENDING, DESCENDING\n    }\n\n    public enum SortField {\n        ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n    }\n}"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Note.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.Instant;\nimport java.util.UUID;\n\npublic class Note {\n    private UUID id;\n    private String name;\n    private String content;\n    private Instant creationDate;\n\n    public Note() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    public Instant getCreationDate() {\n        return creationDate;\n    }\n\n    public void setCreationDate(Instant creationDate) {\n        this.creationDate = creationDate;\n    }\n\n    @Override\n    public String toString() {\n        return \"Note{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", content='\" + content + '\\'' +\n                \", creationDate=\" + creationDate +\n                '}';\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Person.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic class Person {\n    private UUID id;\n    private String firstName;\n    private String lastName;\n    private LocalDate birthday;\n\n    public Person() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public LocalDate getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(LocalDate birthday) {\n        this.birthday = birthday;\n    }\n}\n"
          },
          {
            "path": "src/server/resources/application.properties",
            "content": "logging.level.ROOT=DEBUG\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class H05E01ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(H05E01ServerApplication.class, args);\n    }\n\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/PersonService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.stereotype.Service;\n\nimport java.util.*;\n\n@Service\npublic class PersonService {\n  \t// do not change this\n    private final List<Person> persons;\n\n    public PersonService() {\n        this.persons = new ArrayList<>();\n    }\n\n    public Person savePerson(Person person) {\n        var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n        if (optionalPerson.isEmpty()) {\n            person.setId(UUID.randomUUID());\n            persons.add(person);\n            return person;\n        } else {\n            var existingPerson = optionalPerson.get();\n            existingPerson.setFirstName(person.getFirstName());\n            existingPerson.setLastName(person.getLastName());\n            existingPerson.setBirthday(person.getBirthday());\n            return existingPerson;\n        }\n    }\n\n    public void deletePerson(UUID personId) {\n        this.persons.removeIf(person -> person.getId().equals(personId));\n    }\n\n    public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n        // TODO Part 3: Add sorting here\n        return new ArrayList<>(this.persons);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/NoteService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.stereotype.Service;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Service\npublic class NoteService {\n    private final List<Note> notes;\n\n    public NoteService() {\n        this.notes = new ArrayList<>();\n    }\n\n    public Note saveNote(Note note) {\n        var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n        if (optionalNote.isEmpty()) {\n            note.setId(UUID.randomUUID());\n            note.setCreationDate(Instant.now());\n            notes.add(note);\n            return note;\n        } else {\n            var existingNote = optionalNote.get();\n            existingNote.setName(note.getName());\n            existingNote.setContent(note.getContent());\n            return existingNote;\n        }\n    }\n\n    public void deleteNote(UUID noteId) {\n        this.notes.removeIf(note -> note.getId().equals(noteId));\n    }\n\n    public List<Note> getAllNotes() {\n        return Collections.unmodifiableList(this.notes);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/PersonResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.service.PersonService;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class PersonResource {\n\n    private final PersonService personService;\n\n    public PersonResource(PersonService personService) {\n        this.personService = personService;\n    }\n\n    // TODO Part 1: Implement the specified endpoints here\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/NoteResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Note;\nimport de.tum.in.ase.eist.service.NoteService;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class NoteResource {\n\n    private final NoteService noteService;\n\n    public NoteResource(NoteService noteService) {\n        this.noteService = noteService;\n    }\n\n    @GetMapping(\"notes\")\n    public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n        if (!\"SecretKey\".equals(secret)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.getAllNotes());\n    }\n\n    @PostMapping(\"notes\")\n    public ResponseEntity<Note> createNote(@RequestBody Note note) {\n        if (note.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(note));\n    }\n\n    @PutMapping(\"notes/{noteId}\")\n    public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n        if (!updatedNote.getId().equals(noteId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(updatedNote));\n    }\n\n    @DeleteMapping(\"notes/{noteId}\")\n    public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n        noteService.deleteNote(noteId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          }
        ],
        "solution_repository": [
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\ngroup = 'de.tum.in.ase.eist'\nversion = '1.0.0'\nsourceCompatibility = 17\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web'\n\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\nsourceSets {\n    common {\n        java {\n            srcDir 'src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'src/server/java'\n        }\n        resources {\n            srcDir 'src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'src/client/java'\n        }\n        resources {\n            srcDir 'src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n}\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Solution'\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.view.HomeScene;\nimport de.tum.in.ase.eist.view.NoteScene;\nimport de.tum.in.ase.eist.view.PersonScene;\nimport javafx.application.Application;\nimport javafx.stage.Stage;\n\npublic class H05E01ClientApplication extends Application {\n    private final NoteController noteController = new NoteController();\n    private final PersonController personController = new PersonController();\n    private Stage stage;\n\n    @Override\n    public void start(Stage primaryStage) {\n        this.stage = primaryStage;\n\n        primaryStage.setScene(new HomeScene(this));\n        primaryStage.show();\n    }\n\n    public void showHomeScene() {\n        stage.setScene(new HomeScene(this));\n    }\n\n    public void showNoteScene() {\n        stage.setScene(new NoteScene(noteController, this));\n    }\n\n    public void showPersonScene() {\n        stage.setScene(new PersonScene(personController, this));\n    }\n\n    public Stage getStage() {\n        return stage;\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/Starter.java",
            "content": "package de.tum.in.ase.eist;\n\nimport javafx.application.Application;\n\npublic class Starter {\n    public static void main(String[] args) {\n        Application.launch(H05E01ClientApplication.class);\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/NoteController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class NoteController {\n    private final WebClient webClient;\n    private final List<Note> notes;\n\n    public NoteController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.notes = new ArrayList<>();\n    }\n\n    public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.post()\n                .uri(\"notes\")\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.add(newNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.put()\n                .uri(\"notes/\" + note.getId())\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.delete()\n                .uri(\"notes/\" + note.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    notes.remove(note);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"notes\")\n                        .queryParam(\"secret\", \"SecretKey\")\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n                .onErrorStop()\n                .subscribe(newNotes -> {\n                    notes.clear();\n                    notes.addAll(newNotes);\n                    notesConsumer.accept(notes);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/PersonController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class PersonController {\n    private final WebClient webClient;\n    private final List<Person> persons;\n\n    public PersonController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.persons = new ArrayList<>();\n    }\n\n    public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.post()\n                .uri(\"persons\")\n                .bodyValue(person)\n                .retrieve()\n                .bodyToMono(Person.class)\n                .onErrorStop()\n                .subscribe(newPerson -> {\n                    persons.add(newPerson);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.put()\n                .uri(\"persons/\" + person.getId())\n                .bodyValue(person)\n                .retrieve()\n                .bodyToMono(Person.class)\n                .onErrorStop()\n                .subscribe(newPerson -> {\n                    persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.delete()\n                .uri(\"persons/\" + person.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    persons.remove(person);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"persons\")\n                        .queryParam(\"sortField\", sortingOptions.getSortField())\n                        .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n                .onErrorStop()\n                .subscribe(newPersons -> {\n                    persons.clear();\n                    persons.addAll(newPersons);\n                    personsConsumer.accept(persons);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/PersonScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\nimport javafx.application.Platform;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Popup;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic class PersonScene extends Scene {\n    private final PersonController personController;\n    private final H05E01ClientApplication application;\n    private final PersonSortingOptions sortingOptions;\n    private final ObservableList<Person> personList;\n    private final TableView<Person> table;\n\n    public PersonScene(PersonController personController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.personController = personController;\n        this.application = application;\n        this.sortingOptions = new PersonSortingOptions();\n        this.personList = FXCollections.observableArrayList();\n\n        table = new TableView<>(personList);\n        table.setOnMousePressed(event -> {\n            if (event.isPrimaryButtonDown()) {\n                showPopup(table.getSelectionModel().getSelectedItem());\n            }\n        });\n\n        var idColumn = new TableColumn<Person, String>(\"ID\");\n        idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n        idColumn.setSortable(false);\n        idColumn.setPrefWidth(620 / 4D);\n        var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n        firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n        firstNameColumn.setSortable(false);\n        firstNameColumn.setPrefWidth(620 / 4D);\n        var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n        lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n        lastNameColumn.setSortable(false);\n        lastNameColumn.setPrefWidth(620 / 4D);\n        var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n        birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n        birthdayColumn.setSortable(false);\n        birthdayColumn.setPrefWidth(620 / 4D);\n        //noinspection unchecked\n        table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n\n        var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n\n        personController.getAllPersons(sortingOptions, this::setPeople);\n    }\n\n    private HBox createSortOptionBox() {\n        var sortFieldChoiceBox = new ChoiceBox<SortField>();\n        sortFieldChoiceBox.getItems().addAll(SortField.values());\n        sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n        sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortField(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n        sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n        sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n        sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortingOrder(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n        hBox.setAlignment(Pos.CENTER);\n        return hBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Person\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Person person) {\n        var popup = new Popup();\n        var firstNameTextField = new TextField();\n        firstNameTextField.setPromptText(\"First Name\");\n        firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n\n        var lastNameTextField = new TextField();\n        lastNameTextField.setPromptText(\"Last Name\");\n        lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n\n        var birthdayPicker = new DatePicker();\n        birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newPerson = person != null ? person : new Person();\n            newPerson.setFirstName(firstNameTextField.getText());\n            newPerson.setLastName(lastNameTextField.getText());\n            newPerson.setBirthday(birthdayPicker.getValue());\n            if (person == null) {\n                personController.addPerson(newPerson, this::setPeople);\n            } else {\n                personController.updatePerson(newPerson, this::setPeople);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            personController.deletePerson(person, this::setPeople);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (person != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(150);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n\n    private void setPeople(List<Person> people) {\n        Platform.runLater(() -> personList.setAll(people));\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/NoteScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.model.Note;\nimport javafx.application.Platform;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\nimport javafx.stage.Popup;\n\nimport java.util.List;\n\npublic class NoteScene extends Scene {\n    private final NoteController noteController;\n    private final H05E01ClientApplication application;\n    private final FlowPane flowPane;\n\n    public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.noteController = noteController;\n        this.application = application;\n\n        flowPane = new FlowPane(10, 10);\n        var scrollPane = new ScrollPane(flowPane);\n        scrollPane.setPrefHeight(450);\n        scrollPane.setFitToWidth(true);\n\n        var vBox = new VBox(10, scrollPane, createButtonBox());\n\n        noteController.getAllNotes(this::setNotes);\n        this.setRoot(vBox);\n    }\n\n    public void setNotes(List<Note> notes) {\n        Platform.runLater(() -> {\n            var children = flowPane.getChildren();\n            children.setAll(notes.stream().map(this::createNoteView).toList());\n        });\n    }\n\n    private Node createNoteView(Note note) {\n        var name = new Text(note.getName());\n        name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n\n        var spacer = new Region();\n        HBox.setHgrow(spacer, Priority.ALWAYS);\n\n        var deleteButton = new Button(\"E\");\n        deleteButton.setTextFill(Color.ORANGE);\n        deleteButton.setOnAction(event -> showPopup(note));\n\n        var titleBox = new HBox(name, spacer, deleteButton);\n\n        var content = new Text(note.getContent());\n        var contentScrollPane = new ScrollPane(content);\n        contentScrollPane.setFitToWidth(true);\n        contentScrollPane.setFitToHeight(true);\n        contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n        contentScrollPane.getStyleClass().clear();\n        content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n\n        var vBox = new VBox(10, titleBox, contentScrollPane);\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setStyle(\"-fx-background-color:white;\");\n        vBox.setPadding(new Insets(5));\n        return vBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Note\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Note note) {\n        var popup = new Popup();\n        var nameTextField = new TextField();\n        nameTextField.setPromptText(\"Name\");\n        nameTextField.setText(note == null ? \"\" : note.getName());\n\n        var contentTextArea = new TextArea();\n        contentTextArea.setPromptText(\"Content\");\n        contentTextArea.setText(note == null ? \"\" : note.getContent());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newNote = note != null ? note : new Note();\n            newNote.setName(nameTextField.getText());\n            newNote.setContent(contentTextArea.getText());\n            if (note == null) {\n                noteController.addNote(newNote, this::setNotes);\n            } else {\n                noteController.editNote(newNote, this::setNotes);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            noteController.deleteNote(note, this::setNotes);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (note != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/HomeScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.VBox;\n\npublic class HomeScene extends Scene {\n    public HomeScene(H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n\n        var noteButton = new Button(\"Notes\");\n        noteButton.setOnAction(event -> application.showNoteScene());\n\n        var personButton = new Button(\"Persons\");\n        personButton.setOnAction(event -> application.showPersonScene());\n\n        var vBox = new VBox(10, noteButton, personButton);\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java",
            "content": "package de.tum.in.ase.eist.util;\n\npublic class PersonSortingOptions {\n    private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n    private SortField sortField = SortField.ID;\n\n    public PersonSortingOptions() {}\n\n    public PersonSortingOptions(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n        this.sortingOrder = sortingOrder;\n        this.sortField = sortField;\n    }\n\n    public SortingOrder getSortingOrder() {\n        return sortingOrder;\n    }\n\n    public void setSortingOrder(SortingOrder sortingOrder) {\n        this.sortingOrder = sortingOrder;\n    }\n\n    public SortField getSortField() {\n        return sortField;\n    }\n\n    public void setSortField(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public enum SortingOrder {\n        ASCENDING, DESCENDING\n    }\n\n    public enum SortField {\n        ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n    }\n}"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Note.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.Instant;\nimport java.util.UUID;\n\npublic class Note {\n    private UUID id;\n    private String name;\n    private String content;\n    private Instant creationDate;\n\n    public Note() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    public Instant getCreationDate() {\n        return creationDate;\n    }\n\n    public void setCreationDate(Instant creationDate) {\n        this.creationDate = creationDate;\n    }\n\n    @Override\n    public String toString() {\n        return \"Note{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", content='\" + content + '\\'' +\n                \", creationDate=\" + creationDate +\n                '}';\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Person.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic class Person {\n    private UUID id;\n    private String firstName;\n    private String lastName;\n    private LocalDate birthday;\n\n    public Person() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public LocalDate getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(LocalDate birthday) {\n        this.birthday = birthday;\n    }\n}\n"
          },
          {
            "path": "src/server/resources/application.properties",
            "content": "logging.level.ROOT=DEBUG\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class H05E01ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(H05E01ServerApplication.class, args);\n    }\n\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/PersonService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.stereotype.Service;\n\nimport java.util.*;\n\nimport static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n\n@Service\npublic class PersonService {\n  \t// do not change this\n    private final List<Person> persons;\n\n    public PersonService() {\n        this.persons = new ArrayList<>();\n    }\n\n    public Person savePerson(Person person) {\n        var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n        if (optionalPerson.isEmpty()) {\n            person.setId(UUID.randomUUID());\n            persons.add(person);\n            return person;\n        } else {\n            var existingPerson = optionalPerson.get();\n            existingPerson.setFirstName(person.getFirstName());\n            existingPerson.setLastName(person.getLastName());\n            existingPerson.setBirthday(person.getBirthday());\n            return existingPerson;\n        }\n    }\n\n    public void deletePerson(UUID personId) {\n        this.persons.removeIf(person -> person.getId().equals(personId));\n    }\n\n    public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n        if (sortingOptions == null) {\n            return this.persons.stream();\n        }\n        Stream<Person> sortedStream = this.persons.stream();\n        sortedList.sort((p1, p2) -> {\n            Person person1;\n            Person person2;\n            if (sortingOptions.getSortingOrder() == ASCENDING) {\n                person1 = p1;\n                person2 = p2;\n            } else {\n                person1 = p2;\n                person2 = p1;\n            }\n\n            return switch (sortingOptions.getSortField()) {\n                case ID -> person1.getId().compareTo(person2.getId());\n                case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n                case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n                case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n            };\n        });\n        return sortedList;\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/NoteService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.stereotype.Service;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Service\npublic class NoteService {\n    private final List<Note> notes;\n\n    public NoteService() {\n        this.notes = new ArrayList<>();\n    }\n\n    public Note saveNote(Note note) {\n        var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n        if (optionalNote.isEmpty()) {\n            note.setId(UUID.randomUUID());\n            note.setCreationDate(Instant.now());\n            notes.add(note);\n            return note;\n        } else {\n            var existingNote = optionalNote.get();\n            existingNote.setName(note.getName());\n            existingNote.setContent(note.getContent());\n            return existingNote;\n        }\n    }\n\n    public void deleteNote(UUID noteId) {\n        this.notes.removeIf(note -> note.getId().equals(noteId));\n    }\n\n    public List<Note> getAllNotes() {\n        return Collections.unmodifiableList(this.notes);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/PersonResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.service.PersonService;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class PersonResource {\n\n    private final PersonService personService;\n\n    public PersonResource(PersonService personService) {\n        this.personService = personService;\n    }\n\n    @GetMapping(\"persons\")\n    public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n                                                      @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n        return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n    }\n\n    @PostMapping(\"persons\")\n    public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n        if (person.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(personService.savePerson(person));\n    }\n\n    @PutMapping(\"persons/{personId}\")\n    public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n        if (!updatedPerson.getId().equals(personId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(personService.savePerson(updatedPerson));\n    }\n\n    @DeleteMapping(\"persons/{personId}\")\n    public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n        personService.deletePerson(personId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/NoteResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Note;\nimport de.tum.in.ase.eist.service.NoteService;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class NoteResource {\n\n    private final NoteService noteService;\n\n    public NoteResource(NoteService noteService) {\n        this.noteService = noteService;\n    }\n\n    @GetMapping(\"notes\")\n    public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n        if (!\"SecretKey\".equals(secret)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.getAllNotes());\n    }\n\n    @PostMapping(\"notes\")\n    public ResponseEntity<Note> createNote(@RequestBody Note note) {\n        if (note.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(note));\n    }\n\n    @PutMapping(\"notes/{noteId}\")\n    public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n        if (!updatedNote.getId().equals(noteId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(updatedNote));\n    }\n\n    @DeleteMapping(\"notes/{noteId}\")\n    public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n        noteService.deleteNote(noteId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          }
        ],
        "test_repository": [
          {
            "path": "readme.md",
            "content": "## Test Repository instructions\n\n#### Test tool & command\nTests will be run using the command `./gradlew clean test`.\n\n#### Project structure\nMake sure that the package structure of your test classes is equivalent to the package structure of your base and solution repository.\nOtherwise during the test run Gradle will not be able to find the imported classes in your test files.\n\nIn order to use classes from the template or solution repository in a test case, you have to add the respective repository\nfiles as a dependency to the test project. Follow this description for IntelliJ:\n\n1. Open the Test-Project first\n2. Select `File` -> `New` -> `Module from Existing Source`. Then choose the template project\nroot folder. Select the option `Import module from external model` and `Gradle` and press `Finish`.\n3. Repeat the previous step for the Solution-Project.\n4. Add the following line to `settings.gradle` inside the Test-Project:\n`includeBuild '<template-project-root-path'>` or `includeBuild '<solution-project-root-path>'` depending on which project you\nwant to use the source files for executing the test cases.\n5. Inside the `plugin`-block in the `build.gradle` inside the Test-Project, add the following line:\n`testImplementation(':H05E01-Layered-Architecture-Spring-Exercise')` or\n`testImplementation(':H05E01-Layered-Architecture-Spring-Solution')` depending on which project you want to use the source files for executing\nthe test cases.\n\n**Note**: Changes made in step 4 and step 5 must not be pushed to the remote repository as it can only be used\nfor editing all three projects in the local IDE.\n\n#### Sequential test runs\nIf you have decided to use the sequential test runs feature for this exercise, read the following instructions:\nWe use the folder structure of the test repository to differentiate structural and behavior tests:\n1. Structural test files must be placed in the folder \"structural\"\n2. Behavior test files must be placed in the folder \"behavior\"\n\nFiles in other folders will not be executed!\n\n#### Static Code Analysis\nThe build.gradle contains dependencies for the execution of static code analysis, if the option is active for this programming exercise.\n"
          },
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'checkstyle'\n    id 'pmd'\n    id 'com.github.spotbugs' version '5.0.6'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id \"com.teamscale\" version \"23.0.0\"\n}\n\napply plugin: 'java'\ngroup = 'de.tum.in.ase.eist'\nsourceCompatibility = 17\nversion = '1.0.0'\ncompileJava.options.encoding = 'UTF-8'\ncompileTestJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    testImplementation 'de.tum.in.ase:artemis-java-test-sandbox:1.9.2'\n    testImplementation 'com.squareup.okhttp3:okhttp:4.10.0-RC1'\n    testImplementation 'com.squareup.okhttp3:mockwebserver:4.10.0-RC1'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test:2.6.7'\n\n    testImplementation 'com.fasterxml.jackson.core:jackson-databind:2.13.2.2'\n    testImplementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.13.2'\n\n    testImplementation 'org.springframework.boot:spring-boot-starter-web:2.6.7'\n    testImplementation 'org.springframework.boot:spring-boot-starter-webflux:2.6.7'\n\n    testImplementation 'org.mockito:mockito-core:4.5.1'\n    testImplementation 'net.bytebuddy:byte-buddy:1.12.10'\n\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web:2.6.7'\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux:2.6.7'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\ndef studentOutputDir = sourceSets.main.java.destinationDirectory.get()\ndef scaConfigDirectory = \"$projectDir/staticCodeAnalysisConfig\"\n\nsourceSets {\n    common {\n        java {\n            srcDir 'assignment/src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'assignment/src/server/java'\n        }\n        resources {\n            srcDir 'assignment/src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'assignment/src/client/java'\n        }\n        resources {\n            srcDir 'assignment/src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n\n    test {\n        java {\n            srcDir 'test'\n        }\n        resources {\n            srcDir 'test'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n        compileClasspath += server.output\n        runtimeClasspath += server.output\n        compileClasspath += client.output\n        runtimeClasspath += client.output\n    }\n}\n\ntest {\n    defaultCharacterEncoding = 'UTF-8'\n    useJUnitPlatform()\n}\n\n\ncheckstyle {\n    configFile = file(\"$scaConfigDirectory/checkstyle-configuration.xml\")\n    ignoreFailures = true\n    // exclude the test files\n    checkstyleTest.enabled = false\n    checkstyleServer.reports {\n        xml {\n            enabled = true\n            outputLocation = file('target/checkstyle-result.xml')\n        }\n        html.enabled = false\n    }\n}\n\nspotbugs {\n    excludeFilter = file(\"$scaConfigDirectory/spotbugs-exclusions.xml\")\n    ignoreFailures = true\n    // exclude the test files\n    spotbugsTest.enabled = false\n    spotbugsClient.reports {\n        add(spotbugsServer)\n        add(spotbugsCommon)\n        xml {\n            enabled = true\n            outputLocation = file('target/spotbugsXml.xml')\n        }\n        html.enabled = false\n    }\n}\n\npmd {\n    ruleSets = [\"$scaConfigDirectory/pmd-configuration.xml\"]\n    rulesMinimumPriority = 5\n    ignoreFailures = true\n    // exclude the test files\n    pmdTest.enabled = false\n    pmdServer.reports {\n        xml {\n            enabled = true\n            outputLocation = file('target/pmd.xml')\n        }\n    }\n}\n\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n\ntasks.register('tiaTests', com.teamscale.TestImpacted) {\n    systemProperty \"ares.security.trustedpackages\", \"okhttp3,com.teamscale,retrofit2,shadow,com.squareup,okio\"\n    useJUnitPlatform()\n    filter {\n        excludeTestsMatching \"AttributeTest\"\n        excludeTestsMatching \"ConstructorTest\"\n        excludeTestsMatching \"ClassTest\"\n        excludeTestsMatching \"MethodTest\"\n    }\n    jacoco {\n        includes = [\"de.tum.in.ase.eist.*\"]\n    }\n}\n\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Spring-Tests'\n"
          },
          {
            "path": "staticCodeAnalysisConfig/spotbugs-exclusions.xml",
            "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<FindBugsFilter>\n    <!--\n    Spotbugs uses filter files to configure the reporting of bugs. Add the path of the filter file to the configuration\n    of the Spotbugs Maven plugin in the Project Object Model (POM).\n    Use <includeFilterFile>/<excludeFilterFile> to include/exclude all bugs matching the criteria defined in such a file.\n    For more information about filters consult the official Spotbugs documentation https://spotbugs.readthedocs.io/en/stable/filter.html#.\n    The examples below show some filter options.\n    -->\n\n    <!-- In case of using Records from Java 16, the equals check should get disabled for that record\n    <Match>\n        <Class name=\"Package.NameOfRecord\" />\n        <Bug code=\"EQ_UNUSUAL\" />\n    </Match> -->\n\n    <!-- Matches a whole class\n    <Match>\n        <Class name=\"com.foobar.ClassNotToBeAnalyzed\" />\n    </Match> -->\n\n    <!-- Matches specific rules in a class\n    <Match>\n        <Class name=\"com.foobar.ClassWithSomeBugsMatched\" />\n        <Bug code=\"DE,UrF,SIC\" />\n    </Match> -->\n\n    <!-- Match all XYZ violations\n    <Match>\n        <Bug code=\"XYZ\" />\n    </Match>  -->\n\n    <!-- Match a method with a dead local store false positive (medium priority)\n    <Match>\n        <Class name=\"com.foobar.MyClass\" />\n        <Method name=\"someMethod\" />\n        <Bug pattern=\"DLS_DEAD_LOCAL_STORE\" />\n        <Priority value=\"2\" />\n    </Match> -->\n\n    <!-- All bugs in test classes, except for JUnit-specific bugs\n    <Match>\n        <Class name=\"~.*\\.*Test\" />\n        <Not>\n            <Bug code=\"IJU\" />\n        </Not>\n    </Match> -->\n    <Match>\n        <Bug code=\"EI\"/>\n    </Match>\n    <Match>\n        <Bug code=\"EI2\"/>\n    </Match>\n</FindBugsFilter>\n"
          },
          {
            "path": "staticCodeAnalysisConfig/pmd-configuration.xml",
            "content": "<ruleset name=\"Custom Rules\"\n         xmlns=\"http://pmd.sourceforge.net/ruleset/2.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd\">\n\n    <description>\n        Default PMD configuration for Artemis programming exercises based on the default PMD Maven configuration.\n        Consult https://pmd.github.io/latest/pmd_userdocs_making_rulesets.html for more information.\n    </description>\n\n    <!-- Use patterns to exclude/include files for this ruleset\n    <exclude-pattern>.*/some/package/.*</exclude-pattern>\n    <include-pattern>.*/some/package/ButNotThisClass.*</include-pattern>\n    -->\n\n    <!-- Bulk adding all rules of all categories. Does not add deprecated rules. Single rule exclusions are possible.\n    <rule ref=\"category/java/documentation.xml\">\n        <exclude name=\"RuleName\"/>\n    </rule> -->\n\n    <!-- Best Practices -->\n    <rule ref=\"category/java/bestpractices.xml/AvoidUsingHardCodedIP\"/>\n    <rule ref=\"category/java/bestpractices.xml/CheckResultSet\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedImports\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedFormalParameter\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedLocalVariable\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedPrivateField\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedPrivateMethod\"/>\n\n    <!-- Code Style -->\n    <rule ref=\"category/java/codestyle.xml/DontImportJavaLang\"/>\n    <rule ref=\"category/java/codestyle.xml/DuplicateImports\"/>\n    <rule ref=\"category/java/codestyle.xml/ExtendsObject\"/>\n    <rule ref=\"category/java/codestyle.xml/ForLoopShouldBeWhileLoop\"/>\n    <rule ref=\"category/java/codestyle.xml/TooManyStaticImports\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryFullyQualifiedName\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryModifier\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryReturn\"/>\n    <rule ref=\"category/java/codestyle.xml/UselessParentheses\"/>\n    <rule ref=\"category/java/codestyle.xml/UselessQualifiedThis\"/>\n\n    <!-- Design -->\n    <rule ref=\"category/java/design.xml/CollapsibleIfStatements\"/>\n    <rule ref=\"category/java/design.xml/SimplifiedTernary\"/>\n    <rule ref=\"category/java/design.xml/UselessOverridingMethod\"/>\n\n    <!-- Error Prone -->\n    <rule ref=\"category/java/errorprone.xml/AvoidBranchingStatementAsLastInLoop\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidDecimalLiteralsInBigDecimalConstructor\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidMultipleUnaryOperators\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidUsingOctalValues\"/>\n    <rule ref=\"category/java/errorprone.xml/BrokenNullCheck\"/>\n    <rule ref=\"category/java/errorprone.xml/CheckSkipResult\"/>\n    <rule ref=\"category/java/errorprone.xml/ClassCastExceptionWithToArray\"/>\n    <rule ref=\"category/java/errorprone.xml/DontUseFloatTypeForLoopIndices\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyCatchBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyFinallyBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyIfStmt\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyInitializer\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyStatementBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyStatementNotInLoop\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptySwitchStatements\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptySynchronizedBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyTryBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyWhileStmt\"/>\n    <rule ref=\"category/java/errorprone.xml/ImportFromSamePackage\"/>\n    <rule ref=\"category/java/errorprone.xml/JumbledIncrementer\"/>\n    <rule ref=\"category/java/errorprone.xml/MisplacedNullCheck\"/>\n    <rule ref=\"category/java/errorprone.xml/OverrideBothEqualsAndHashcode\"/>\n    <rule ref=\"category/java/errorprone.xml/ReturnFromFinallyBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/UnconditionalIfStatement\"/>\n    <rule ref=\"category/java/errorprone.xml/UnnecessaryConversionTemporary\"/>\n    <rule ref=\"category/java/errorprone.xml/UnusedNullCheckInEquals\"/>\n    <rule ref=\"category/java/errorprone.xml/UselessOperationOnImmutable\"/>\n\n    <!-- Multi Threading -->\n    <rule ref=\"category/java/multithreading.xml/AvoidThreadGroup\"/>\n    <rule ref=\"category/java/multithreading.xml/DontCallThreadRun\"/>\n    <rule ref=\"category/java/multithreading.xml/DoubleCheckedLocking\"/>\n\n    <!-- Performance -->\n    <rule ref=\"category/java/performance.xml/BigIntegerInstantiation\"/>\n    <rule ref=\"category/java/performance.xml/BooleanInstantiation\"/>\n\n    <!-- Security -->\n    <rule ref=\"category/java/security.xml\"/>\n\n    <!-- Documentation, already checked by CheckStyle -->\n\n\n</ruleset>\n"
          },
          {
            "path": "staticCodeAnalysisConfig/checkstyle-configuration.xml",
            "content": "<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n    \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n    \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n\n<!--\n  Artemis default Checkstyle configuration based on the sun coding conventions from:\n    - the Java Language Specification at\n      https://docs.oracle.com/javase/specs/jls/se11/html/index.html\n    - the Sun Code Conventions at https://www.oracle.com/java/technologies/javase/codeconventions-contents.html\n    - the Javadoc guidelines at\n      https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html\n    - the JDK Api documentation https://docs.oracle.com/en/java/javase/11/\n    - some best practices\n  Most Checks are configurable, be sure to consult the documentation.\n  To completely disable a check, just comment it out or delete it from the file.\n  Consult the docs for more information https://checkstyle.org.\n-->\n\n<module name=\"Checker\">\n    <property name=\"severity\" value=\"error\"/>\n\n    <property name=\"fileExtensions\" value=\"java, properties, xml\"/>\n\n    <!-- Excludes all 'module-info.java' files              -->\n    <!-- See https://checkstyle.org/config_filefilters.html -->\n    <module name=\"BeforeExecutionExclusionFileFilter\">\n        <property name=\"fileNamePattern\" value=\"module\\-info\\.java$\"/>\n    </module>\n\n    <!-- Checks that a package-info.java file exists for each package.     -->\n    <!-- See https://checkstyle.org/config_javadoc.html#JavadocPackage -->\n    <!-- <module name=\"JavadocPackage\"/> -->\n\n    <!-- Checks whether files end with a new line.                        -->\n    <!-- See https://checkstyle.org/config_misc.html#NewlineAtEndOfFile -->\n    <module name=\"NewlineAtEndOfFile\"/>\n\n    <!-- Checks that property files contain the same keys.         -->\n    <!-- See https://checkstyle.org/config_misc.html#Translation -->\n    <module name=\"Translation\"/>\n\n    <!-- Checks for Size Violations.                    -->\n    <!-- See https://checkstyle.org/config_sizes.html -->\n    <module name=\"FileLength\"/>\n    <module name=\"LineLength\">\n        <property name=\"fileExtensions\" value=\"java\"/>\n        <property name=\"max\" value=\"150\"/>\n        <property name=\"ignorePattern\" value=\"^package.*|^import.*|a href|href|http://|https://|ftp://\"/>\n    </module>\n\n    <!-- Miscellaneous other checks.                   -->\n    <!-- See https://checkstyle.org/config_misc.html -->\n    <module name=\"RegexpSingleline\">\n        <property name=\"format\" value=\"\\s+$\"/>\n        <property name=\"minimum\" value=\"0\"/>\n        <property name=\"maximum\" value=\"0\"/>\n        <property name=\"message\" value=\"Line has trailing spaces.\"/>\n    </module>\n\n    <!-- Checks for Headers                                -->\n    <!-- See https://checkstyle.org/config_header.html   -->\n    <!-- <module name=\"Header\"> -->\n    <!--   <property name=\"headerFile\" value=\"${checkstyle.header.file}\"/> -->\n    <!--   <property name=\"fileExtensions\" value=\"java\"/> -->\n    <!-- </module> -->\n\n    <module name=\"TreeWalker\">\n\n        <!-- Checks for Javadoc comments.                     -->\n        <!-- See https://checkstyle.org/config_javadoc.html -->\n        <module name=\"InvalidJavadocPosition\"/>\n        <module name=\"JavadocMethod\"/>\n        <module name=\"JavadocType\"/>\n        <!--<module name=\"JavadocVariable\"/> -->\n        <module name=\"JavadocStyle\"/>\n        <module name=\"MissingJavadocMethod\">\n            <property name=\"allowMissingPropertyJavadoc\" value=\"true\"/>\n            <property name=\"allowedAnnotations\" value=\"Override,Test\"/>\n            <property name=\"tokens\" value=\"METHOD_DEF,ANNOTATION_FIELD_DEF,COMPACT_CTOR_DEF\"/>\n        </module>\n\n        <!-- Checks for Naming Conventions.                  -->\n        <!-- See https://checkstyle.org/config_naming.html -->\n        <module name=\"ConstantName\"/>\n        <module name=\"LocalFinalVariableName\"/>\n        <module name=\"LocalVariableName\"/>\n        <module name=\"MemberName\"/>\n        <module name=\"MethodName\"/>\n        <!-- <module name=\"PackageName\"/> -->\n        <module name=\"ParameterName\"/>\n        <module name=\"StaticVariableName\"/>\n        <module name=\"TypeName\"/>\n\n        <!-- Checks for imports                              -->\n        <!-- See https://checkstyle.org/config_imports.html -->\n        <!-- <module name=\"AvoidStarImport\"/> -->\n        <module name=\"IllegalImport\"/> <!-- defaults to sun.* packages -->\n        <module name=\"RedundantImport\"/>\n        <module name=\"UnusedImports\">\n            <property name=\"processJavadoc\" value=\"false\"/>\n        </module>\n\n        <!-- Checks for Size Violations.                    -->\n        <!-- See https://checkstyle.org/config_sizes.html -->\n        <module name=\"MethodLength\"/>\n        <module name=\"ParameterNumber\"/>\n\n        <!-- Checks for whitespace                               -->\n        <!-- See https://checkstyle.org/config_whitespace.html -->\n        <module name=\"EmptyForIteratorPad\"/>\n        <module name=\"GenericWhitespace\"/>\n        <module name=\"MethodParamPad\"/>\n        <module name=\"NoWhitespaceAfter\"/>\n        <module name=\"NoWhitespaceBefore\"/>\n        <module name=\"OperatorWrap\"/>\n        <module name=\"ParenPad\"/>\n        <module name=\"TypecastParenPad\"/>\n        <module name=\"WhitespaceAfter\"/>\n        <module name=\"WhitespaceAround\"/>\n\n        <!-- Modifier Checks                                    -->\n        <!-- See https://checkstyle.org/config_modifiers.html -->\n        <module name=\"ModifierOrder\"/>\n        <module name=\"RedundantModifier\"/>\n\n        <!-- Checks for blocks. You know, those {}'s         -->\n        <!-- See https://checkstyle.org/config_blocks.html -->\n        <module name=\"AvoidNestedBlocks\"/>\n        <module name=\"EmptyBlock\"/>\n        <!-- <module name=\"LeftCurly\"/> -->\n        <module name=\"NeedBraces\"/>\n        <!-- <module name=\"RightCurly\"/> -->\n\n        <!-- Checks for common coding problems               -->\n        <!-- See https://checkstyle.org/config_coding.html -->\n        <module name=\"EmptyStatement\"/>\n        <module name=\"EqualsHashCode\"/>\n        <module name=\"HiddenField\">\n            <property name=\"ignoreConstructorParameter\" value=\"true\"/>\n            <property name=\"ignoreSetter\" value=\"true\"/>\n            <property name=\"setterCanReturnItsClass\" value=\"true\"/>\n        </module>\n        <module name=\"IllegalInstantiation\"/>\n        <module name=\"InnerAssignment\"/>\n        <module name=\"MagicNumber\"/>\n        <module name=\"MissingSwitchDefault\"/>\n        <module name=\"MultipleVariableDeclarations\"/>\n        <module name=\"SimplifyBooleanExpression\"/>\n        <module name=\"SimplifyBooleanReturn\"/>\n\n        <!-- Checks for class design                         -->\n        <!-- See https://checkstyle.org/config_design.html -->\n        <!--<module name=\"DesignForExtension\"/> -->\n        <module name=\"FinalClass\"/>\n        <module name=\"InterfaceIsType\"/>\n        <module name=\"VisibilityModifier\"/>\n\n        <!-- Miscellaneous other checks.                   -->\n        <!-- See https://checkstyle.org/config_misc.html -->\n        <module name=\"ArrayTypeStyle\"/>\n        <!-- <module name=\"FinalParameters\"/> -->\n        <!-- <module name=\"TodoComment\"/> -->\n        <module name=\"UpperEll\"/>\n\n    </module>\n\n</module>\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/PersonControllerTest.java",
            "content": "package de.tum.in.ase.eist;\n\nimport static de.tum.in.ase.eist.H05E01Client.*;\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport okhttp3.mockwebserver.MockResponse;\nimport okhttp3.mockwebserver.MockWebServer;\nimport okhttp3.mockwebserver.RecordedRequest;\nimport org.junit.jupiter.api.*;\nimport org.mockito.ArgumentCaptor;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\nimport java.util.function.Consumer;\nimport java.util.concurrent.TimeUnit;\n\n@H05E01\npublic class PersonControllerTest {\n\n    private static MockWebServer mockWebServer;\n    private static ObjectMapper objectMapper;\n\n    private Object personController;\n    private Person person1;\n    private Person person2;\n\n    @BeforeAll\n    static void setUp() {\n        objectMapper = new ObjectMapper();\n        objectMapper.findAndRegisterModules();\n    }\n\n    @BeforeEach\n    void initialize() throws Exception {\n        // restarting the server for every test is required because otherwise tests interfere with each other\n        mockWebServer = new MockWebServer();\n        mockWebServer.start(8080);\n        personController = createPersonController();\n\n        person1 = new Person();\n        var uuid1 = UUID.randomUUID();\n        person1.setId(uuid1);\n        person1.setFirstName(\"Max\");\n        person1.setLastName(\"Musterfrau\");\n        person1.setBirthday(LocalDate.ofYearDay(2000, 125));\n\n        person2 = new Person();\n        var uuid2 = UUID.randomUUID();\n        person2.setId(uuid2);\n        person2.setFirstName(\"Erika\");\n        person2.setLastName(\"Mustermann\");\n        person2.setBirthday(LocalDate.ofYearDay(1999, 80));\n    }\n\n    @AfterEach\n    void afterEach() throws Exception {\n        mockWebServer.shutdown();\n    }\n\n    @Test\n    @DisplayName(\"Add single valid persons (Client)\")\n    public void testAddSingleValidPerson() throws Exception {\n        testAddPerson(200, person1, List.of(person1));\n    }\n\n    @Test\n    @DisplayName(\"Add multiple valid persons (Client)\")\n    public void testAddMultipleValidPersons() throws Exception {\n        testAddPerson(200, person1, new ArrayList<>(List.of(person1)));\n        testAddPerson(200, person2, new ArrayList<>(List.of(person1, person2)));\n    }\n\n    @Test\n    @DisplayName(\"Add single invalid person (Client)\")\n    public void testAddInvalidPerson() throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(400)\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n\n        invokeAddPerson(personController, person1, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n        Thread.sleep(350);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::createPerson did not send a request.\");\n        }\n\n        verify(consumer, never()).accept(any());\n    }\n\n    @Test\n    @DisplayName(\"Edit single person (Client)\")\n    public void testEditSinglePerson() throws Exception {\n        Person updatedPerson = new Person();\n        updatedPerson.setId(person1.getId());\n        updatedPerson.setFirstName(person1.getFirstName());\n        updatedPerson.setLastName(\"Updated Last Name\");\n        updatedPerson.setBirthday(person1.getBirthday());\n\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1)));\n\n        testUpdatePerson(200, updatedPerson, List.of(updatedPerson));\n    }\n\n    @Test\n    @DisplayName(\"Edit single person for multiple existing persons (Client)\")\n    public void testEditSinglePersonForMultipleExistingPersons() throws Exception {\n        Person updatedPerson = new Person();\n        updatedPerson.setId(person1.getId());\n        updatedPerson.setFirstName(person1.getFirstName());\n        updatedPerson.setLastName(\"Updated Last Name\");\n        updatedPerson.setBirthday(person1.getBirthday());\n\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        testUpdatePerson(200, updatedPerson, List.of(updatedPerson, person2));\n    }\n\n    @Test\n    @DisplayName(\"Edit invalid person (Client)\")\n    public void testEditInvalidPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(400)\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n\n        invokeUpdatePerson(personController, person1, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n        Thread.sleep(350);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::updatePerson did not send a request.\");\n        }\n        verify(consumer, times(0));\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person 1 (Client)\")\n    public void testDeleteOnlyExistingPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1)));\n\n        testDeletePerson(200, person1, List.of());\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person 2 (Client)\")\n    public void testDeletePerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        testDeletePerson(200, person1, List.of(person2));\n    }\n\n    @Test\n    @DisplayName(\"Retrieve all persons 1 (Client)\")\n    public void testGetAllPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        var sortingOptions = new PersonSortingOptions();\n        sortingOptions.setSortField(PersonSortingOptions.SortField.ID);\n        sortingOptions.setSortingOrder(PersonSortingOptions.SortingOrder.ASCENDING);\n\n        testGetAllPersons(200, sortingOptions, List.of(person2, person1));\n    }\n\n    @Test\n    @DisplayName(\"Retrieve all persons 2 (Client)\")\n    public void testGetAllPersonsResetsSavedResult() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        var sortingOptions = new PersonSortingOptions();\n\n        sortingOptions.setSortField(PersonSortingOptions.SortField.ID);\n        sortingOptions.setSortingOrder(PersonSortingOptions.SortingOrder.ASCENDING);\n\n        testGetAllPersons(200, sortingOptions, List.of());\n    }\n\n    @Test\n    @DisplayName(\"Sort options for retrieving all persons (Client)\")\n    public void testSortingOptions() throws Exception {\n        for (var sortField : PersonSortingOptions.SortField.values()) {\n            for (var sortOrder: PersonSortingOptions.SortingOrder.values()) {\n                // this should not be required but leaving out may break some student's submission while this is the\n                // real-life behavior\n                mockWebServer.enqueue(new MockResponse()\n                        .setResponseCode(200)\n                        .setBody(objectMapper.writeValueAsString(List.of()))\n                        .setHeader(\"Content-Type\", \"application/json\"));\n\n                var sortOptions = new PersonSortingOptions();\n                sortOptions.setSortField(sortField);\n                sortOptions.setSortingOrder(sortOrder);\n                invokeGetAllPersons(personController, sortOptions, (res) -> {});\n\n\t            RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n\t            if(mockWebServer.getRequestCount() == 0) {\n                    fail(\"PersonController::createPerson did not send a request.\");\n                }\n\n\t\t\t\tThread.sleep(350);\n                assertGetAllPersonRequest(recordedRequest, sortOptions);\n            }\n        }\n    }\n\n    private void testAddPerson(int mockResponseCode, Person person, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(person))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeAddPerson(personController, person, consumer);\n\n        RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::createPerson did not send a request.\");\n        }\n        Thread.sleep(350);\n\n        verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"addPerson\");\n\n        assertEquals(\"POST\", recordedRequest.getMethod(), \"PersonController::createPerson did not send a message with the correct request type\");\n        assertEquals(\"/persons\", recordedRequest.getPath(), \"PersonController::createPerson send a message to the wrong correct endpoint path.\");\n        assertEquals(objectMapper.writeValueAsString(person), recordedRequest.getBody().readUtf8(), \"PersonController::createPerson send a message with the wrong response body.\");\n    }\n\n    private void testUpdatePerson(int mockResponseCode, Person updatedPerson, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(updatedPerson))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeUpdatePerson(personController, updatedPerson, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::updatePerson did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t    verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"updatePerson\");\n\n\n        assertEquals(\"PUT\", recordedRequest.getMethod(), \"PersonController::updatePerson did not send a message with the correct request type.\");\n        assertEquals(\"/persons/\" + updatedPerson.getId(), recordedRequest.getPath(),\"PersonController::updatePerson send a message to the wrong correct endpoint path.\");\n        assertEquals(objectMapper.writeValueAsString(updatedPerson), recordedRequest.getBody().readUtf8(), \"PersonController::createPerson send a message with the wrong response body.\");\n    }\n\n    private void testDeletePerson(int mockResponseCode, Person deletedPerson, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(deletedPerson))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeDeletePerson(personController, deletedPerson, consumer);\n\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::deletePerson did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t    verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"deletePerson\");\n\n        assertEquals(\"DELETE\", recordedRequest.getMethod(), \"PersonController::deletePerson did not send a message with the correct request type.\");\n        assertEquals(\"/persons/\" + deletedPerson.getId(), recordedRequest.getPath(),\"PersonController::deletePerson send a message to the wrong correct endpoint path.\");\n        assertEquals(\"\", recordedRequest.getBody().readUtf8(), \"PersonController::deletePerson send a message with the wrong response body.\");\n    }\n\n    private void testGetAllPersons(int mockResponseCode, PersonSortingOptions sortingOptions, List<Person> allPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(allPersons))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeGetAllPersons(personController, sortingOptions, consumer);\n\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::getAllPersons did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t\tverify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(allPersons, argument.getValue(), \"getAllPersons\");\n\n        assertGetAllPersonRequest(recordedRequest, null);\n    }\n\n    private void assertGetAllPersonRequest(RecordedRequest recordedRequest, PersonSortingOptions sortingOptions) {\n        assertEquals(\"GET\", recordedRequest.getMethod(), \"PersonController::getAllPersons did not send a message with the correct request type.\");\n        if (sortingOptions == null) {\n            if (!recordedRequest.getPath().startsWith(\"/persons\")) {\n                fail(\"PersonController::getAllPersons send a message to the wrong correct endpoint path.\");\n            }\n        } else {\n            if (!recordedRequest.getPath().startsWith(\"/persons\")) {\n                fail(\"PersonController::getAllPersons send a message to the wrong correct endpoint path.\");\n            }\n            if (recordedRequest.getRequestUrl().queryParameterNames().size() != 2 || !recordedRequest.getRequestUrl().queryParameterNames().containsAll(List.of(\"sortField\", \"sortingOrder\"))) {\n                fail(\"PersonController::getAllPersons send a message without the correct sorting options.\");\n            }\n        }\n        assertEquals(\"\", recordedRequest.getBody().readUtf8(), \"PersonController::getAllPersons send a message with the wrong response body.\");\n    }\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/H05E01.java",
            "content": "package de.tum.in.ase.eist;\n\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\n\nimport de.tum.in.test.api.*;\nimport de.tum.in.test.api.jupiter.JupiterIOExtension;\nimport de.tum.in.test.api.jupiter.JupiterStrictTimeoutExtension;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\n@ExtendWith(JupiterIOExtension.class)\n@ExtendWith(JupiterStrictTimeoutExtension.class)\n@StrictTimeout(6)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface H05E01 {\n    // marker\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/H05E01Client.java",
            "content": "package de.tum.in.ase.eist;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.assertj.core.api.Assertions.assertThat;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.test.api.util.ReflectionTestUtils;\n\nimport java.lang.reflect.Field;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.function.Consumer;\n\npublic class H05E01Client {\n\n    private static final String PERSON_CONTROLLER_FULL_NAME = \"de.tum.in.ase.eist.controller.PersonController\";\n\n    public static Object createPersonController() {\n        return ReflectionTestUtils.newInstance(ReflectionTestUtils.getConstructor(ReflectionTestUtils.getClazz(PERSON_CONTROLLER_FULL_NAME)));\n    }\n\n    public static void invokeAddPerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"addPerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeUpdatePerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"updatePerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeDeletePerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"deletePerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeGetAllPersons(Object personController, PersonSortingOptions sortingOptions, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"getAllPersons\", PersonSortingOptions.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, sortingOptions, personConsumer);\n    }\n\n    public static void assertPersonListEquals(List<Person> expectedList, List<Person> actualList, String methodName) {\n        assertNotNull(actualList, \"The resulting list of persons was null after invoking PersonController::\" + methodName + \".\");\n        assertEquals(expectedList.size(), actualList.size(), \"The resulting list of persons does not have the correct size after invoking PersonController::\" + methodName + \".\");\n\n        boolean wrongOrder = false;\n\n        for (int i=0; i<expectedList.size(); i++) {\n            if(!checkIfPersonEqual(expectedList.get(i), actualList.get(i), false)) {\n                wrongOrder = true;\n                break;\n            }\n        }\n\n        if(!wrongOrder) return;\n\n        var sortedExpectedList = expectedList.stream().sorted((a, b) -> {\n            if (a.getFirstName() == null) {\n                return -1;\n            } else if (b.getFirstName() == null) {\n                return 1;\n            } else {\n                return a.getFirstName().compareTo(b.getFirstName());\n            }\n        }).toList();\n\n        var sortedActualList = expectedList.stream().sorted((a, b) -> {\n            if (a.getFirstName() == null) {\n                return -1;\n            } else if (b.getFirstName() == null) {\n                return 1;\n            } else {\n                return a.getFirstName().compareTo(b.getFirstName());\n            }\n        }).toList();\n\n        for (int i = 0; i < sortedExpectedList.size(); i++) {\n            if(checkIfPersonEqual(sortedExpectedList.get(i), sortedActualList.get(i), false)) {\n                fail(\"The resulting list of persons is not sorted correctly after invoking PersonController::\" + methodName + \".\");\n            }\n        }\n\n        fail(\"The resulting list of persons does not contain the correct persons after invoking PersonController::\" + methodName + \".\");\n    }\n\n    public static void setPersonControllerPersons(Object personController, List<Person> personList) {\n        Field persons;\n        Object fieldValue;\n        List<Person> reflectedPersonList;\n        try {\n            persons = personController.getClass().getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            fieldValue = persons.get(personController);\n            assertThat(fieldValue).isInstanceOf(List.class);\n\n            reflectedPersonList = (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The implementation of the attribute 'persons' in class 'PersonController' is not correct.\");\n            return;\n        }\n        try {\n            reflectedPersonList.removeIf(p -> true);\n            reflectedPersonList.addAll(personList);\n        } catch (Exception e) {\n            fail(\"An unexpected error has occurred. Contact your tutor.\");\n        }\n    }\n\n    public static boolean checkIfPersonEqual(Person expectedPerson, Person actualPerson, boolean ignoreId) {\n        var res = ignoreId || Objects.equals(expectedPerson.getId(), actualPerson.getId());\n        return res && Objects.equals(expectedPerson.getFirstName(), actualPerson.getFirstName())\n                && Objects.equals(expectedPerson.getLastName(), actualPerson.getLastName())\n                && Objects.equals(expectedPerson.getBirthday(), actualPerson.getBirthday());\n    }\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/PersonResourceTest.java",
            "content": "package de.tum.in.ase.eist;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.rest.PersonResource;\nimport de.tum.in.ase.eist.service.PersonService;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.NoSuchBeanDefinitionException;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.test.annotation.DirtiesContext;\nimport org.springframework.test.web.servlet.MockMvc;\n\nimport java.lang.reflect.Field;\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\n\nimport static de.tum.in.ase.eist.H05E01Client.checkIfPersonEqual;\nimport static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.fail;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\n\n@H05E01\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\n// this is required to reset the persons saved in PersonService\n@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)\n@AutoConfigureMockMvc\npublic class PersonResourceTest {\n\n    @Autowired\n    private MockMvc mvc;\n\n    @Autowired\n    private ApplicationContext context;\n\n    private static ObjectMapper objectMapper;\n    private static Object personService;\n\n    private Person person1;\n    private Person person2;\n\n    @BeforeAll\n    static void setUp() {\n        objectMapper = new ObjectMapper();\n        objectMapper.findAndRegisterModules();\n    }\n\n    @BeforeEach\n    void initialize() {\n        try {\n            personService = context.getBean(PersonService.class);\n        } catch (NoSuchBeanDefinitionException e) {\n            fail(\"PersonService is not defined correctly as a Spring-Service.\");\n        }\n\n        try {\n            context.getBean(PersonResource.class);\n        } catch (NoSuchBeanDefinitionException e) {\n            fail(\"PersonResource is not defined correctly as a Spring-Controller.\");\n        }\n\n        person1 = new Person();\n        person1.setFirstName(\"Max\");\n        person1.setLastName(\"Musterfrau\");\n        person1.setBirthday(LocalDate.ofYearDay(2000, 125));\n\n        person2 = new Person();\n        person2.setFirstName(\"Erika\");\n        person2.setLastName(\"Mustermann\");\n        person2.setBirthday(LocalDate.ofYearDay(1999, 80));\n    }\n\n    @Test\n    @DisplayName(\"Create valid person (Server)\")\n    public void testAddSingleUser() throws Exception {\n        var response = this.mvc.perform(\n                post(\"/persons\")\n                        .content(objectMapper.writeValueAsString(person1))\n                        .contentType(\"application/json\")).andReturn().getResponse();\n\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint POST /persons has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::createPerson did not return the correct status code\");\n        assertEquals(\"application/json\", response.getContentType());\n\n        var personsInService = getAllPersonsByReflection();\n        if (personsInService == null || personsInService.size() != 1) {\n            fail(\"After calling PersonResource::createPerson, PersonResource::persons contain the wrong amount of persons.\");\n        }\n        var createdPerson = personsInService.get(0);\n\n        var responseEntity = objectMapper.readValue(response.getContentAsString(), Person.class);\n        if (!checkIfPersonEqual(createdPerson, responseEntity, true)) {\n            fail(\"PersonResource::createPerson did not return the correct person as response body.\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"Create invalid person (Server)\")\n    public void testAddInvalidPerson() throws Exception {\n        var uuid = UUID.randomUUID();\n        person1.setId(uuid);\n\n        var response = this.mvc.perform(\n                        post(\"/persons\")\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint POST /persons has not been implemented.\");\n        }\n        assertEquals(400, response.getStatus(), \"PersonResource::createPerson did not return the correct status code for an invalid request body.\");\n    }\n\n    @Test\n    @DisplayName(\"Update existing person (Server)\")\n    public void testUpdateExistingPerson() throws Exception {\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        person1.setFirstName(\"Changed\");\n        person1.setLastName(\"Name\");\n\n        var response = this.mvc.perform(\n                        put(\"/persons/\" + person1.getId())\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint PUT /persons/:personId has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::updatePerson did not return the correct status code.\");\n        assertEquals(\"application/json\", response.getContentType());\n\n        var personsInService = getAllPersonsByReflection();\n        if (personsInService == null || personsInService.size() != 1) {\n            fail(\"After calling PersonResource::updatePerson, PersonResource::persons contain the wrong amount of persons.\");\n        }\n        var updatedPerson = personsInService.get(0);\n\n        var responseEntity = objectMapper.readValue(response.getContentAsString(), Person.class);\n        if (!checkIfPersonEqual(updatedPerson, responseEntity, false)) {\n            fail(\"PersonResource::updatePerson did not return the correct person as response body.\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"Update person with mismatching IDs (Server)\")\n    public void testUpdatePersonWithIdMismatch() throws Exception {\n        var mismatchedId = UUID.randomUUID();\n\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        var response = this.mvc.perform(\n                        put(\"/persons/\" + mismatchedId)\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint PUT /persons/:personId has not been implemented.\");\n        }\n        assertEquals(400, response.getStatus(), \"PersonResource::updatePerson did not return the correct status code for an invalid response body.\");\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person (Server)\")\n    public void testDeleteExistingPerson() throws Exception {\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        var response = this.mvc.perform(\n                delete(\"/persons/\" + person1.getId())\n                        .content(objectMapper.writeValueAsString(person1))\n                        .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint DELETE /persons/:personId has not been implemented.\");\n        }\n        assertEquals(204, response.getStatus(), \"PersonResource::deletePerson did not return the correct status code.\");\n    }\n\n    @Test\n    @DisplayName(\"Get all persons with sorting options (Server)\")\n    public void testGetAllPersons() throws Exception {\n        var id1 = UUID.randomUUID();\n        var id2 = UUID.randomUUID();\n        person1.setId(id1);\n        person2.setId(id2);\n        setAllPersonsByReflection(List.of(person1, person2));\n\n        for (var fieldOption: PersonSortingOptions.SortField.values()) {\n            for (var orderOption: PersonSortingOptions.SortingOrder.values()) {\n                var sortedList = getSortedList(List.of(person1, person2), orderOption, fieldOption);\n                var response = this.mvc.perform(\n                                get(\"/persons\")\n                                        .param(\"sortField\", fieldOption.name())\n                                        .param(\"sortingOrder\", orderOption.name())\n                                        .contentType(\"application/json\")).andReturn().getResponse();\n\n                if (response.getStatus() == 404 || response.getStatus() == 405) {\n                    fail(\"The endpoint GET /persons has not been implemented.\");\n                }\n                assertEquals(200, response.getStatus(), \"PersonResource::getAllPersons did not return the correct status code.\");\n\n                var respondedPersons = objectMapper.readValue(response.getContentAsString(), Person[].class);\n                if (respondedPersons.length != 2) {\n                    fail(\"PersonResource::getAllPersons did not return the correct amount of persons.\");\n                }\n                for (int i = 0; i < respondedPersons.length; i++){\n                    if (!checkIfPersonEqual(sortedList.get(i), respondedPersons[i], false)) {\n                        fail(\"PersonResource::getAllPersons did not contain the correct person/correct order as response body for a request with sorting options.\");\n                    }\n                }\n            }\n        }\n    }\n\n    @Test\n    @DisplayName(\"Get all persons with default request parameters (Server)\")\n    public void testDefaultSortValues() throws Exception {\n        var id1 = UUID.randomUUID();\n        var id2 = UUID.randomUUID();\n        person1.setId(id1);\n        person2.setId(id2);\n        setAllPersonsByReflection(List.of(person1, person2));\n\n        var sortedList = getSortedList(List.of(person1, person2), ASCENDING, PersonSortingOptions.SortField.ID);\n        var response = this.mvc.perform(\n                        get(\"/persons\")\n                                .contentType(\"application/json\")).andReturn().getResponse();\n\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint GET /persons has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::getAllPersons did not return the correct status code.\");\n        var respondedPersons = objectMapper.readValue(response.getContentAsString(), Person[].class);\n        if (respondedPersons.length != 2) {\n            fail(\"PersonResource::getAllPersons did not return the correct amount of persons.\");\n        }\n\t    var sortedRespondedPersons = getSortedList(List.of(respondedPersons), ASCENDING, PersonSortingOptions.SortField.ID);\n\t    for (int i = 0; i < sortedRespondedPersons.size(); i++){\n            if (!checkIfPersonEqual(sortedList.get(i), sortedRespondedPersons.get(i), false)) {\n                fail(\"PersonResource::getAllPersons did not contain the correct person/correct order as response body when performing a request without sorting options.\");\n            }\n        }\n    }\n\n    private static List<Person> getSortedList(List<Person> persons, PersonSortingOptions.SortingOrder sortingOrder, PersonSortingOptions.SortField sortField) {\n        var sortedList = new ArrayList<>(persons);\n        sortedList.sort((p1, p2) -> {\n            Person person1;\n            Person person2;\n            if (sortingOrder == ASCENDING) {\n                person1 = p1;\n                person2 = p2;\n            } else {\n                person1 = p2;\n                person2 = p1;\n            }\n\n            return switch (sortField) {\n                case ID -> person1.getId().compareTo(person2.getId());\n                case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n                case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n                case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n            };\n        });\n\n        return sortedList;\n    }\n\n    public static void setAllPersonsByReflection(List<Person> personList) {\n        Field persons;\n        Object fieldValue;\n        List<Person> reflectedPersonList;\n        try {\n            persons = PersonService.class.getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            fieldValue = persons.get(personService);\n            if (!(fieldValue instanceof List)) {\n                fail(\"The attribute 'persons' in class 'PersonResource' has not the correct type.\");\n            }\n\n            reflectedPersonList = (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The attribute 'persons' in class 'PersonResource' has not been implemented as described.\");\n            return;\n        }\n        try {\n            reflectedPersonList.removeIf(p -> true);\n            reflectedPersonList.addAll(personList);\n        } catch (Exception e) {\n            fail(\"An unexpected error has occurred. Contact your tutor.\");\n        }\n    }\n\n    public static List<Person> getAllPersonsByReflection() {\n        try {\n            Field persons = PersonService.class.getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            Object fieldValue = persons.get(personService);\n\n            if (!(fieldValue instanceof List)) {\n                fail(\"The attribute 'persons' in class 'PersonService' has not the correct type.\");\n            }\n            return (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The attribute 'persons' in class 'PersonService' has not been implemented as described.\");\n            return null;\n        }\n    }\n}\n"
          }
        ]
      },
      "outputs": {
        "rendered_context": "\n===== Problem Statement =====\n--------------------------------------------------------------------------------\nproblem_statement.md:\n--------------------------------------------------------------------------------\n  1 | # REST Architectural Style\n  2 | \n  3 | The university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n  4 | \n  5 | This exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n  6 | \n  7 | ## Application Structure\n  8 | \n  9 | The following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n 10 | <br>\n 11 | #### Client-Side:\n 12 | - The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n 13 | - The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n 14 | - The `Network Layer` contains the functionality to send REST requests to the server.\n 15 | \n 16 | #### Server-Side:\n 17 | - The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n 18 | - The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n 19 | \n 20 | ### Layered Architecture\n 21 | @startuml\n 22 | \n 23 | namespace Client {\n 24 |     namespace NetworkLayer {}\n 25 |     \n 26 |     namespace PresentationLayer {}\n 27 |     \n 28 |     namespace ApplicationLayer {}\n 29 | }\n 30 | \n 31 | namespace Server {\n 32 |     namespace NetworkLayer {}\n 33 |     \n 34 |     namespace BusinessLayer {}\n 35 | }\n 36 | \n 37 | Client.PresentationLayer --> Client.ApplicationLayer\n 38 | Client.ApplicationLayer --> Client.NetworkLayer\n 39 | Client.NetworkLayer <---> Server.NetworkLayer\n 40 | Server.NetworkLayer --> Server.BusinessLayer\n 41 | Server.NetworkLayer -[hidden]> Client.NetworkLayer\n 42 | \n 43 | \n 44 | hide empty fields\n 45 | hide empty methods\n 46 | hide circle\n 47 | @enduml\n 48 | \n 49 | On the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n 50 | ### MVC Component Diagram\n 51 | @startuml\n 52 | \n 53 | namespace Common {\n 54 |     namespace Model {\n 55 |         class Common.Model.Note {\n 56 |             \n 57 |         }\n 58 |         class Common.Model.Person {\n 59 |             \n 60 |         }\n 61 |     }\n 62 | }\n 63 | \n 64 | namespace Client {\n 65 |     namespace Controller {\n 66 |         class Client.Controller.NoteController {\n 67 |             \n 68 |         }\n 69 |         class Client.Controller.PersonController {\n 70 |             \n 71 |         }\n 72 |     }\n 73 |     namespace View {\n 74 |         class Client.View.NoteScene {\n 75 |             \n 76 |         }\n 77 |         class Client.View.PersonScene {\n 78 |             \n 79 |         }\n 80 |     }\n 81 | }\n 82 | \n 83 | Client.Controller.NoteController <-- Client.View.NoteScene\n 84 | Client.Controller.PersonController <-- Client.View.PersonScene\n 85 | Common.Model.Note \"*\" --o Client.Controller.NoteController\n 86 | Common.Model.Person \"*\" --o Client.Controller.PersonController\n 87 | \n 88 | \n 89 | \n 90 | hide empty fields\n 91 | hide empty methods\n 92 | hide circle\n 93 | @enduml\n 94 | \n 95 | <br />\n 96 | \n 97 | ***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n 98 | \n 99 | \n100 | ## Application Functionality\n101 | This system has 2 sides.\n102 | - Client-side\n103 | - Server-side\n104 | \n105 | \n106 | The server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\n107 | The client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n108 | \n109 | The endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n110 | - `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n111 | - `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n112 | - `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n113 | - `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n114 | \n115 | *Note: There are TODOs in the code giving helpful hints*\n116 | \n117 | ***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n118 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n119 | *`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n120 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n121 | *Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n122 | <br/>\n123 | <br/>\n124 | ##Part 1\n125 | In the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\n126 | You have to forward each action to the `PersonService` and add any additional checks before that.\n127 | \n128 | 1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n129 |     Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n130 | 2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n131 |     Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n132 | 3. [task][Endpoint to delete a person](Delete existing person (Server))\n133 |     Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n134 | 4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n135 |     Last but not the least, implement the method `getAllPersons`, which returns all persons.\n136 | \n137 | *Note: Feel free to get inspired by `NoteResource` for additional help.*\n138 | \n139 | \n140 | \n141 | ##Part 2\n142 | In the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\n143 | The Controller should work like this:\n144 | - There is a single `WebClient` instance that is used for all requests\n145 | - Each method should only send a single HTTP request\n146 | - The HTTP requests need to happen asynchronously\n147 | - It has an internal list of all persons\n148 |     - If a person is created, updated or deleted this has to be updated in the list\n149 |     - If all persons are retrieved from the server the list has to be updated accordingly\n150 | - Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n151 |     - This consumer takes the internal list of persons as a parameter\n152 | \n153 | ### UML Diagram\n154 | @startuml\n155 | \n156 | namespace Client {\n157 |     namespace Controller {\n158 |         class PersonController {\n159 |             - webClient: WebClient\n160 |             + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n161 |             + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n162 |             + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n163 |             + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n164 |         }\n165 |     }\n166 | }\n167 | \n168 | namespace Common {\n169 |     class Person {\n170 |         - id: UUID\n171 |         - firstName: String\n172 |         - lastName: String\n173 |         - birthday: LocalDate\n174 |     }\n175 | }\n176 | \n177 | Client.Controller.PersonController o-- \"*\" Common.Person : persons\n178 | \n179 | \n180 | hide empty fields\n181 | hide empty methods\n182 | hide circle\n183 | @enduml\n184 | \n185 | <br />\n186 | \n187 | 1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n188 |     Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n189 | 2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n190 |     Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n191 | 3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n192 |     Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n193 | 4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n194 |     Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n195 | \n196 | *Note: Don't forget the constructor of `PersonController`*\n197 | \n198 | ##Part 3\n199 | It has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n200 | \n201 | It is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\n202 | Some additional notes:\n203 | - The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n204 | - The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n205 | \n206 | [task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\n207 | Implement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\n208 | Then update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n209 | \n210 | *Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*\n\n\n===== Template Repository =====\ntemplate_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import java.util.List;\n 6 | import java.util.function.Consumer;\n 7 | \n 8 | public class PersonController {\n 9 | \n10 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n11 |         // TODO Part 2: Make an http post request to the server\n12 |     }\n13 | \n14 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n15 |         // TODO Part 2: Make an http put request to the server\n16 |     }\n17 | \n18 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n19 |         // TODO Part 2: Make an http delete request to the server\n20 |     }\n21 | \n22 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n23 |         // TODO Part 2: Make an https get request to the server\n24 |     }\n25 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.service.PersonService;\n 4 | import org.springframework.http.MediaType;\n 5 | import org.springframework.web.bind.annotation.RequestMapping;\n 6 | import org.springframework.web.bind.annotation.RestController;\n 7 | \n 8 | @RestController\n 9 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n10 | public class PersonResource {\n11 | \n12 |     private final PersonService personService;\n13 | \n14 |     public PersonResource(PersonService personService) {\n15 |         this.personService = personService;\n16 |     }\n17 | \n18 |     // TODO Part 1: Implement the specified endpoints here\n19 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class PersonService {\n11 |   \t// do not change this\n12 |     private final List<Person> persons;\n13 | \n14 |     public PersonService() {\n15 |         this.persons = new ArrayList<>();\n16 |     }\n17 | \n18 |     public Person savePerson(Person person) {\n19 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n20 |         if (optionalPerson.isEmpty()) {\n21 |             person.setId(UUID.randomUUID());\n22 |             persons.add(person);\n23 |             return person;\n24 |         } else {\n25 |             var existingPerson = optionalPerson.get();\n26 |             existingPerson.setFirstName(person.getFirstName());\n27 |             existingPerson.setLastName(person.getLastName());\n28 |             existingPerson.setBirthday(person.getBirthday());\n29 |             return existingPerson;\n30 |         }\n31 |     }\n32 | \n33 |     public void deletePerson(UUID personId) {\n34 |         this.persons.removeIf(person -> person.getId().equals(personId));\n35 |     }\n36 | \n37 |     public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n38 |         // TODO Part 3: Add sorting here\n39 |         return new ArrayList<>(this.persons);\n40 |     }\n41 | }\n\n\n===== Solution Repository =====\nsolution_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.core.ParameterizedTypeReference;\n 6 | import org.springframework.http.HttpHeaders;\n 7 | import org.springframework.http.MediaType;\n 8 | import org.springframework.web.reactive.function.client.WebClient;\n 9 | \n10 | import java.util.ArrayList;\n11 | import java.util.List;\n12 | import java.util.function.Consumer;\n13 | \n14 | public class PersonController {\n15 |     private final WebClient webClient;\n16 |     private final List<Person> persons;\n17 | \n18 |     public PersonController() {\n19 |         this.webClient = WebClient.builder()\n20 |                 .baseUrl(\"http://localhost:8080/\")\n21 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n23 |                 .build();\n24 |         this.persons = new ArrayList<>();\n25 |     }\n26 | \n27 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n28 |         webClient.post()\n29 |                 .uri(\"persons\")\n30 |                 .bodyValue(person)\n31 |                 .retrieve()\n32 |                 .bodyToMono(Person.class)\n33 |                 .onErrorStop()\n34 |                 .subscribe(newPerson -> {\n35 |                     persons.add(newPerson);\n36 |                     personsConsumer.accept(persons);\n37 |                 });\n38 |     }\n39 | \n40 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n41 |         webClient.put()\n42 |                 .uri(\"persons/\" + person.getId())\n43 |                 .bodyValue(person)\n44 |                 .retrieve()\n45 |                 .bodyToMono(Person.class)\n46 |                 .onErrorStop()\n47 |                 .subscribe(newPerson -> {\n48 |                     persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n49 |                     personsConsumer.accept(persons);\n50 |                 });\n51 |     }\n52 | \n53 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n54 |         webClient.delete()\n55 |                 .uri(\"persons/\" + person.getId())\n56 |                 .retrieve()\n57 |                 .toBodilessEntity()\n58 |                 .onErrorStop()\n59 |                 .subscribe(v -> {\n60 |                     persons.remove(person);\n61 |                     personsConsumer.accept(persons);\n62 |                 });\n63 |     }\n64 | \n65 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n66 |         webClient.get()\n67 |                 .uri(uriBuilder -> uriBuilder\n68 |                         .path(\"persons\")\n69 |                         .queryParam(\"sortField\", sortingOptions.getSortField())\n70 |                         .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n71 |                         .build())\n72 |                 .retrieve()\n73 |                 .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n74 |                 .onErrorStop()\n75 |                 .subscribe(newPersons -> {\n76 |                     persons.clear();\n77 |                     persons.addAll(newPersons);\n78 |                     personsConsumer.accept(persons);\n79 |                 });\n80 |     }\n81 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.service.PersonService;\n 5 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.http.ResponseEntity;\n 8 | import org.springframework.web.bind.annotation.*;\n 9 | \n10 | import java.util.List;\n11 | import java.util.UUID;\n12 | \n13 | @RestController\n14 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n15 | public class PersonResource {\n16 | \n17 |     private final PersonService personService;\n18 | \n19 |     public PersonResource(PersonService personService) {\n20 |         this.personService = personService;\n21 |     }\n22 | \n23 |     @GetMapping(\"persons\")\n24 |     public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n25 |                                                       @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n26 |         return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n27 |     }\n28 | \n29 |     @PostMapping(\"persons\")\n30 |     public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n31 |         if (person.getId() != null) {\n32 |             return ResponseEntity.badRequest().build();\n33 |         }\n34 |         return ResponseEntity.ok(personService.savePerson(person));\n35 |     }\n36 | \n37 |     @PutMapping(\"persons/{personId}\")\n38 |     public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n39 |         if (!updatedPerson.getId().equals(personId)) {\n40 |             return ResponseEntity.badRequest().build();\n41 |         }\n42 |         return ResponseEntity.ok(personService.savePerson(updatedPerson));\n43 |     }\n44 | \n45 |     @DeleteMapping(\"persons/{personId}\")\n46 |     public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n47 |         personService.deletePerson(personId);\n48 |         return ResponseEntity.noContent().build();\n49 |     }\n50 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | import static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n10 | \n11 | @Service\n12 | public class PersonService {\n13 |   \t// do not change this\n14 |     private final List<Person> persons;\n15 | \n16 |     public PersonService() {\n17 |         this.persons = new ArrayList<>();\n18 |     }\n19 | \n20 |     public Person savePerson(Person person) {\n21 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n22 |         if (optionalPerson.isEmpty()) {\n23 |             person.setId(UUID.randomUUID());\n24 |             persons.add(person);\n25 |             return person;\n26 |         } else {\n27 |             var existingPerson = optionalPerson.get();\n28 |             existingPerson.setFirstName(person.getFirstName());\n29 |             existingPerson.setLastName(person.getLastName());\n30 |             existingPerson.setBirthday(person.getBirthday());\n31 |             return existingPerson;\n32 |         }\n33 |     }\n34 | \n35 |     public void deletePerson(UUID personId) {\n36 |         this.persons.removeIf(person -> person.getId().equals(personId));\n37 |     }\n38 | \n39 |     public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n40 |         if (sortingOptions == null) {\n41 |             return this.persons.stream();\n42 |         }\n43 |         Stream<Person> sortedStream = this.persons.stream();\n44 |         sortedList.sort((p1, p2) -> {\n45 |             Person person1;\n46 |             Person person2;\n47 |             if (sortingOptions.getSortingOrder() == ASCENDING) {\n48 |                 person1 = p1;\n49 |                 person2 = p2;\n50 |             } else {\n51 |                 person1 = p2;\n52 |                 person2 = p1;\n53 |             }\n54 | \n55 |             return switch (sortingOptions.getSortField()) {\n56 |                 case ID -> person1.getId().compareTo(person2.getId());\n57 |                 case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n58 |                 case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n59 |                 case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n60 |             };\n61 |         });\n62 |         return sortedList;\n63 |     }\n64 | }"
      },
      "tags": [
        "seq:step:1"
      ],
      "parent_run_id": "be3c3142-4584-4897-9450-5d9ae5c0fafc",
      "trace_id": "2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "dotted_order": "20250723T144040524034Z2102d036-0bf8-4863-879f-f17bd2b1b9ca.20250723T144040588355Z426ee021-0ec1-40e6-bda0-4be115f42a34.20250723T144040598179Zbe3c3142-4584-4897-9450-5d9ae5c0fafc.20250723T144040598576Z4e086385-a503-428d-810f-a1fa4afb1689",
      "session_id": "9165a489-2e1b-4cfc-a139-82686a2268ba",
      "extra": {
        "inputs_is_truthy": true,
        "runtime": {
          "sdk": "langsmith-py",
          "sdk_version": "0.3.42",
          "library": "langsmith",
          "platform": "macOS-15.3-arm64-arm-64bit-Mach-O",
          "runtime": "python",
          "py_implementation": "CPython",
          "runtime_version": "3.13.5",
          "langchain_version": "0.3.25",
          "langchain_core_version": "0.3.59"
        },
        "metadata": {
          "LANGSMITH_TRACING": "true",
          "LANGCHAIN_RUN_ID": "39eb4060",
          "revision_id": "v1.1.0-48-g1c4fbcca-dirty",
          "ls_run_depth": 3
        }
      },
      "events": [
        {
          "name": "start",
          "time": "2025-07-23T14:40:40.598576+00:00"
        },
        {
          "name": "end",
          "time": "2025-07-23T14:40:40.618323+00:00"
        }
      ]
    },
    {
      "id": "be3c3142-4584-4897-9450-5d9ae5c0fafc",
      "name": "RunnableSequence",
      "run_type": "chain",
      "start_time": "2025-07-23T14:40:40.598179",
      "end_time": null,
      "status": "pending",
      "inputs": {
        "problem_statement": "# REST Architectural Style\n\nThe university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n\nThis exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n\n## Application Structure\n\nThe following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n<br>\n#### Client-Side:\n- The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n- The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n- The `Network Layer` contains the functionality to send REST requests to the server.\n\n#### Server-Side:\n- The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n- The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n\n### Layered Architecture\n@startuml\n\nnamespace Client {\n    namespace NetworkLayer {}\n    \n    namespace PresentationLayer {}\n    \n    namespace ApplicationLayer {}\n}\n\nnamespace Server {\n    namespace NetworkLayer {}\n    \n    namespace BusinessLayer {}\n}\n\nClient.PresentationLayer --> Client.ApplicationLayer\nClient.ApplicationLayer --> Client.NetworkLayer\nClient.NetworkLayer <---> Server.NetworkLayer\nServer.NetworkLayer --> Server.BusinessLayer\nServer.NetworkLayer -[hidden]> Client.NetworkLayer\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\nOn the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n### MVC Component Diagram\n@startuml\n\nnamespace Common {\n    namespace Model {\n        class Common.Model.Note {\n            \n        }\n        class Common.Model.Person {\n            \n        }\n    }\n}\n\nnamespace Client {\n    namespace Controller {\n        class Client.Controller.NoteController {\n            \n        }\n        class Client.Controller.PersonController {\n            \n        }\n    }\n    namespace View {\n        class Client.View.NoteScene {\n            \n        }\n        class Client.View.PersonScene {\n            \n        }\n    }\n}\n\nClient.Controller.NoteController <-- Client.View.NoteScene\nClient.Controller.PersonController <-- Client.View.PersonScene\nCommon.Model.Note \"*\" --o Client.Controller.NoteController\nCommon.Model.Person \"*\" --o Client.Controller.PersonController\n\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\n<br />\n\n***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n\n\n## Application Functionality\nThis system has 2 sides.\n- Client-side\n- Server-side\n\n\nThe server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\nThe client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n\nThe endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n- `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n- `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n- `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n- `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n\n*Note: There are TODOs in the code giving helpful hints*\n\n***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n*`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n*`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n*`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n*Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n<br/>\n<br/>\n##Part 1\nIn the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\nYou have to forward each action to the `PersonService` and add any additional checks before that.\n\n1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n    Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n    Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n3. [task][Endpoint to delete a person](Delete existing person (Server))\n    Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n    Last but not the least, implement the method `getAllPersons`, which returns all persons.\n\n*Note: Feel free to get inspired by `NoteResource` for additional help.*\n\n\n\n##Part 2\nIn the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\nThe Controller should work like this:\n- There is a single `WebClient` instance that is used for all requests\n- Each method should only send a single HTTP request\n- The HTTP requests need to happen asynchronously\n- It has an internal list of all persons\n    - If a person is created, updated or deleted this has to be updated in the list\n    - If all persons are retrieved from the server the list has to be updated accordingly\n- Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n    - This consumer takes the internal list of persons as a parameter\n\n### UML Diagram\n@startuml\n\nnamespace Client {\n    namespace Controller {\n        class PersonController {\n            - webClient: WebClient\n            + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n            + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n            + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n            + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n        }\n    }\n}\n\nnamespace Common {\n    class Person {\n        - id: UUID\n        - firstName: String\n        - lastName: String\n        - birthday: LocalDate\n    }\n}\n\nClient.Controller.PersonController o-- \"*\" Common.Person : persons\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\n<br />\n\n1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n    Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n    Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n    Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n    Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n\n*Note: Don't forget the constructor of `PersonController`*\n\n##Part 3\nIt has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n\nIt is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\nSome additional notes:\n- The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n- The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n\n[task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\nImplement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\nThen update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n\n*Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*",
        "programming_language": "java",
        "template_repository": [
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\ngroup = 'de.tum.in.ase.eist'\nversion = '1.0.0'\nsourceCompatibility = 17\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web'\n\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\nsourceSets {\n    common {\n        java {\n            srcDir 'src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'src/server/java'\n        }\n        resources {\n            srcDir 'src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'src/client/java'\n        }\n        resources {\n            srcDir 'src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n}\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Spring-Exercise'\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.view.HomeScene;\nimport de.tum.in.ase.eist.view.NoteScene;\nimport de.tum.in.ase.eist.view.PersonScene;\nimport javafx.application.Application;\nimport javafx.stage.Stage;\n\npublic class H05E01ClientApplication extends Application {\n    private final NoteController noteController = new NoteController();\n    private final PersonController personController = new PersonController();\n    private Stage stage;\n\n    @Override\n    public void start(Stage primaryStage) {\n        this.stage = primaryStage;\n\n        primaryStage.setScene(new HomeScene(this));\n        primaryStage.show();\n    }\n\n    public void showHomeScene() {\n        stage.setScene(new HomeScene(this));\n    }\n\n    public void showNoteScene() {\n        stage.setScene(new NoteScene(noteController, this));\n    }\n\n    public void showPersonScene() {\n        stage.setScene(new PersonScene(personController, this));\n    }\n\n    public Stage getStage() {\n        return stage;\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/Starter.java",
            "content": "package de.tum.in.ase.eist;\n\nimport javafx.application.Application;\n\npublic class Starter {\n    public static void main(String[] args) {\n        Application.launch(H05E01ClientApplication.class);\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/NoteController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class NoteController {\n    private final WebClient webClient;\n    private final List<Note> notes;\n\n    public NoteController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.notes = new ArrayList<>();\n    }\n\n    public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.post()\n                .uri(\"notes\")\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.add(newNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.put()\n                .uri(\"notes/\" + note.getId())\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.delete()\n                .uri(\"notes/\" + note.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    notes.remove(note);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"notes\")\n                        .queryParam(\"secret\", \"SecretKey\")\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n                .onErrorStop()\n                .subscribe(newNotes -> {\n                    notes.clear();\n                    notes.addAll(newNotes);\n                    notesConsumer.accept(notes);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/PersonController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class PersonController {\n\n    public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http post request to the server\n    }\n\n    public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http put request to the server\n    }\n\n    public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http delete request to the server\n    }\n\n    public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an https get request to the server\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/PersonScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\nimport javafx.application.Platform;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Popup;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic class PersonScene extends Scene {\n    private final PersonController personController;\n    private final H05E01ClientApplication application;\n    private final PersonSortingOptions sortingOptions;\n    private final ObservableList<Person> personList;\n    private final TableView<Person> table;\n\n    public PersonScene(PersonController personController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.personController = personController;\n        this.application = application;\n        this.sortingOptions = new PersonSortingOptions();\n        this.personList = FXCollections.observableArrayList();\n\n        table = new TableView<>(personList);\n        table.setOnMousePressed(event -> {\n            if (event.isPrimaryButtonDown()) {\n                showPopup(table.getSelectionModel().getSelectedItem());\n            }\n        });\n\n        var idColumn = new TableColumn<Person, String>(\"ID\");\n        idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n        idColumn.setSortable(false);\n        idColumn.setPrefWidth(620 / 4D);\n        var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n        firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n        firstNameColumn.setSortable(false);\n        firstNameColumn.setPrefWidth(620 / 4D);\n        var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n        lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n        lastNameColumn.setSortable(false);\n        lastNameColumn.setPrefWidth(620 / 4D);\n        var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n        birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n        birthdayColumn.setSortable(false);\n        birthdayColumn.setPrefWidth(620 / 4D);\n        //noinspection unchecked\n        table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n\n        var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n\n        personController.getAllPersons(sortingOptions, this::setPeople);\n    }\n\n    private HBox createSortOptionBox() {\n        var sortFieldChoiceBox = new ChoiceBox<SortField>();\n        sortFieldChoiceBox.getItems().addAll(SortField.values());\n        sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n        sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortField(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n        sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n        sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n        sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortingOrder(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n        hBox.setAlignment(Pos.CENTER);\n        return hBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Person\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Person person) {\n        var popup = new Popup();\n        var firstNameTextField = new TextField();\n        firstNameTextField.setPromptText(\"First Name\");\n        firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n\n        var lastNameTextField = new TextField();\n        lastNameTextField.setPromptText(\"Last Name\");\n        lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n\n        var birthdayPicker = new DatePicker();\n        birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newPerson = person != null ? person : new Person();\n            newPerson.setFirstName(firstNameTextField.getText());\n            newPerson.setLastName(lastNameTextField.getText());\n            newPerson.setBirthday(birthdayPicker.getValue());\n            if (person == null) {\n                personController.addPerson(newPerson, this::setPeople);\n            } else {\n                personController.updatePerson(newPerson, this::setPeople);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            personController.deletePerson(person, this::setPeople);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (person != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(150);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n\n    private void setPeople(List<Person> people) {\n        Platform.runLater(() -> personList.setAll(people));\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/NoteScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.model.Note;\nimport javafx.application.Platform;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\nimport javafx.stage.Popup;\n\nimport java.util.List;\n\npublic class NoteScene extends Scene {\n    private final NoteController noteController;\n    private final H05E01ClientApplication application;\n    private final FlowPane flowPane;\n\n    public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.noteController = noteController;\n        this.application = application;\n\n        flowPane = new FlowPane(10, 10);\n        var scrollPane = new ScrollPane(flowPane);\n        scrollPane.setPrefHeight(450);\n        scrollPane.setFitToWidth(true);\n\n        var vBox = new VBox(10, scrollPane, createButtonBox());\n\n        noteController.getAllNotes(this::setNotes);\n        this.setRoot(vBox);\n    }\n\n    public void setNotes(List<Note> notes) {\n        Platform.runLater(() -> {\n            var children = flowPane.getChildren();\n            children.setAll(notes.stream().map(this::createNoteView).toList());\n        });\n    }\n\n    private Node createNoteView(Note note) {\n        var name = new Text(note.getName());\n        name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n\n        var spacer = new Region();\n        HBox.setHgrow(spacer, Priority.ALWAYS);\n\n        var deleteButton = new Button(\"E\");\n        deleteButton.setTextFill(Color.ORANGE);\n        deleteButton.setOnAction(event -> showPopup(note));\n\n        var titleBox = new HBox(name, spacer, deleteButton);\n\n        var content = new Text(note.getContent());\n        var contentScrollPane = new ScrollPane(content);\n        contentScrollPane.setFitToWidth(true);\n        contentScrollPane.setFitToHeight(true);\n        contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n        contentScrollPane.getStyleClass().clear();\n        content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n\n        var vBox = new VBox(10, titleBox, contentScrollPane);\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setStyle(\"-fx-background-color:white;\");\n        vBox.setPadding(new Insets(5));\n        return vBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Note\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Note note) {\n        var popup = new Popup();\n        var nameTextField = new TextField();\n        nameTextField.setPromptText(\"Name\");\n        nameTextField.setText(note == null ? \"\" : note.getName());\n\n        var contentTextArea = new TextArea();\n        contentTextArea.setPromptText(\"Content\");\n        contentTextArea.setText(note == null ? \"\" : note.getContent());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newNote = note != null ? note : new Note();\n            newNote.setName(nameTextField.getText());\n            newNote.setContent(contentTextArea.getText());\n            if (note == null) {\n                noteController.addNote(newNote, this::setNotes);\n            } else {\n                noteController.editNote(newNote, this::setNotes);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            noteController.deleteNote(note, this::setNotes);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (note != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/HomeScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.VBox;\n\npublic class HomeScene extends Scene {\n    public HomeScene(H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n\n        var noteButton = new Button(\"Notes\");\n        noteButton.setOnAction(event -> application.showNoteScene());\n\n        var personButton = new Button(\"Persons\");\n        personButton.setOnAction(event -> application.showPersonScene());\n\n        var vBox = new VBox(10, noteButton, personButton);\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java",
            "content": "package de.tum.in.ase.eist.util;\n\npublic class PersonSortingOptions {\n    private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n    private SortField sortField = SortField.ID;\n\n    public PersonSortingOptions() {}\n\n    public PersonSortingOptions(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n        this.sortingOrder = sortingOrder;\n        this.sortField = sortField;\n    }\n\n    public SortingOrder getSortingOrder() {\n        return sortingOrder;\n    }\n\n    public void setSortingOrder(SortingOrder sortingOrder) {\n        this.sortingOrder = sortingOrder;\n    }\n\n    public SortField getSortField() {\n        return sortField;\n    }\n\n    public void setSortField(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public enum SortingOrder {\n        ASCENDING, DESCENDING\n    }\n\n    public enum SortField {\n        ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n    }\n}"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Note.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.Instant;\nimport java.util.UUID;\n\npublic class Note {\n    private UUID id;\n    private String name;\n    private String content;\n    private Instant creationDate;\n\n    public Note() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    public Instant getCreationDate() {\n        return creationDate;\n    }\n\n    public void setCreationDate(Instant creationDate) {\n        this.creationDate = creationDate;\n    }\n\n    @Override\n    public String toString() {\n        return \"Note{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", content='\" + content + '\\'' +\n                \", creationDate=\" + creationDate +\n                '}';\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Person.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic class Person {\n    private UUID id;\n    private String firstName;\n    private String lastName;\n    private LocalDate birthday;\n\n    public Person() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public LocalDate getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(LocalDate birthday) {\n        this.birthday = birthday;\n    }\n}\n"
          },
          {
            "path": "src/server/resources/application.properties",
            "content": "logging.level.ROOT=DEBUG\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class H05E01ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(H05E01ServerApplication.class, args);\n    }\n\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/PersonService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.stereotype.Service;\n\nimport java.util.*;\n\n@Service\npublic class PersonService {\n  \t// do not change this\n    private final List<Person> persons;\n\n    public PersonService() {\n        this.persons = new ArrayList<>();\n    }\n\n    public Person savePerson(Person person) {\n        var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n        if (optionalPerson.isEmpty()) {\n            person.setId(UUID.randomUUID());\n            persons.add(person);\n            return person;\n        } else {\n            var existingPerson = optionalPerson.get();\n            existingPerson.setFirstName(person.getFirstName());\n            existingPerson.setLastName(person.getLastName());\n            existingPerson.setBirthday(person.getBirthday());\n            return existingPerson;\n        }\n    }\n\n    public void deletePerson(UUID personId) {\n        this.persons.removeIf(person -> person.getId().equals(personId));\n    }\n\n    public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n        // TODO Part 3: Add sorting here\n        return new ArrayList<>(this.persons);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/NoteService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.stereotype.Service;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Service\npublic class NoteService {\n    private final List<Note> notes;\n\n    public NoteService() {\n        this.notes = new ArrayList<>();\n    }\n\n    public Note saveNote(Note note) {\n        var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n        if (optionalNote.isEmpty()) {\n            note.setId(UUID.randomUUID());\n            note.setCreationDate(Instant.now());\n            notes.add(note);\n            return note;\n        } else {\n            var existingNote = optionalNote.get();\n            existingNote.setName(note.getName());\n            existingNote.setContent(note.getContent());\n            return existingNote;\n        }\n    }\n\n    public void deleteNote(UUID noteId) {\n        this.notes.removeIf(note -> note.getId().equals(noteId));\n    }\n\n    public List<Note> getAllNotes() {\n        return Collections.unmodifiableList(this.notes);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/PersonResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.service.PersonService;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class PersonResource {\n\n    private final PersonService personService;\n\n    public PersonResource(PersonService personService) {\n        this.personService = personService;\n    }\n\n    // TODO Part 1: Implement the specified endpoints here\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/NoteResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Note;\nimport de.tum.in.ase.eist.service.NoteService;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class NoteResource {\n\n    private final NoteService noteService;\n\n    public NoteResource(NoteService noteService) {\n        this.noteService = noteService;\n    }\n\n    @GetMapping(\"notes\")\n    public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n        if (!\"SecretKey\".equals(secret)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.getAllNotes());\n    }\n\n    @PostMapping(\"notes\")\n    public ResponseEntity<Note> createNote(@RequestBody Note note) {\n        if (note.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(note));\n    }\n\n    @PutMapping(\"notes/{noteId}\")\n    public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n        if (!updatedNote.getId().equals(noteId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(updatedNote));\n    }\n\n    @DeleteMapping(\"notes/{noteId}\")\n    public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n        noteService.deleteNote(noteId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          }
        ],
        "solution_repository": [
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\ngroup = 'de.tum.in.ase.eist'\nversion = '1.0.0'\nsourceCompatibility = 17\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web'\n\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\nsourceSets {\n    common {\n        java {\n            srcDir 'src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'src/server/java'\n        }\n        resources {\n            srcDir 'src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'src/client/java'\n        }\n        resources {\n            srcDir 'src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n}\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Solution'\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.view.HomeScene;\nimport de.tum.in.ase.eist.view.NoteScene;\nimport de.tum.in.ase.eist.view.PersonScene;\nimport javafx.application.Application;\nimport javafx.stage.Stage;\n\npublic class H05E01ClientApplication extends Application {\n    private final NoteController noteController = new NoteController();\n    private final PersonController personController = new PersonController();\n    private Stage stage;\n\n    @Override\n    public void start(Stage primaryStage) {\n        this.stage = primaryStage;\n\n        primaryStage.setScene(new HomeScene(this));\n        primaryStage.show();\n    }\n\n    public void showHomeScene() {\n        stage.setScene(new HomeScene(this));\n    }\n\n    public void showNoteScene() {\n        stage.setScene(new NoteScene(noteController, this));\n    }\n\n    public void showPersonScene() {\n        stage.setScene(new PersonScene(personController, this));\n    }\n\n    public Stage getStage() {\n        return stage;\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/Starter.java",
            "content": "package de.tum.in.ase.eist;\n\nimport javafx.application.Application;\n\npublic class Starter {\n    public static void main(String[] args) {\n        Application.launch(H05E01ClientApplication.class);\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/NoteController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class NoteController {\n    private final WebClient webClient;\n    private final List<Note> notes;\n\n    public NoteController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.notes = new ArrayList<>();\n    }\n\n    public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.post()\n                .uri(\"notes\")\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.add(newNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.put()\n                .uri(\"notes/\" + note.getId())\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.delete()\n                .uri(\"notes/\" + note.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    notes.remove(note);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"notes\")\n                        .queryParam(\"secret\", \"SecretKey\")\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n                .onErrorStop()\n                .subscribe(newNotes -> {\n                    notes.clear();\n                    notes.addAll(newNotes);\n                    notesConsumer.accept(notes);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/PersonController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class PersonController {\n    private final WebClient webClient;\n    private final List<Person> persons;\n\n    public PersonController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.persons = new ArrayList<>();\n    }\n\n    public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.post()\n                .uri(\"persons\")\n                .bodyValue(person)\n                .retrieve()\n                .bodyToMono(Person.class)\n                .onErrorStop()\n                .subscribe(newPerson -> {\n                    persons.add(newPerson);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.put()\n                .uri(\"persons/\" + person.getId())\n                .bodyValue(person)\n                .retrieve()\n                .bodyToMono(Person.class)\n                .onErrorStop()\n                .subscribe(newPerson -> {\n                    persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.delete()\n                .uri(\"persons/\" + person.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    persons.remove(person);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"persons\")\n                        .queryParam(\"sortField\", sortingOptions.getSortField())\n                        .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n                .onErrorStop()\n                .subscribe(newPersons -> {\n                    persons.clear();\n                    persons.addAll(newPersons);\n                    personsConsumer.accept(persons);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/PersonScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\nimport javafx.application.Platform;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Popup;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic class PersonScene extends Scene {\n    private final PersonController personController;\n    private final H05E01ClientApplication application;\n    private final PersonSortingOptions sortingOptions;\n    private final ObservableList<Person> personList;\n    private final TableView<Person> table;\n\n    public PersonScene(PersonController personController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.personController = personController;\n        this.application = application;\n        this.sortingOptions = new PersonSortingOptions();\n        this.personList = FXCollections.observableArrayList();\n\n        table = new TableView<>(personList);\n        table.setOnMousePressed(event -> {\n            if (event.isPrimaryButtonDown()) {\n                showPopup(table.getSelectionModel().getSelectedItem());\n            }\n        });\n\n        var idColumn = new TableColumn<Person, String>(\"ID\");\n        idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n        idColumn.setSortable(false);\n        idColumn.setPrefWidth(620 / 4D);\n        var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n        firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n        firstNameColumn.setSortable(false);\n        firstNameColumn.setPrefWidth(620 / 4D);\n        var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n        lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n        lastNameColumn.setSortable(false);\n        lastNameColumn.setPrefWidth(620 / 4D);\n        var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n        birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n        birthdayColumn.setSortable(false);\n        birthdayColumn.setPrefWidth(620 / 4D);\n        //noinspection unchecked\n        table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n\n        var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n\n        personController.getAllPersons(sortingOptions, this::setPeople);\n    }\n\n    private HBox createSortOptionBox() {\n        var sortFieldChoiceBox = new ChoiceBox<SortField>();\n        sortFieldChoiceBox.getItems().addAll(SortField.values());\n        sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n        sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortField(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n        sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n        sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n        sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortingOrder(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n        hBox.setAlignment(Pos.CENTER);\n        return hBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Person\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Person person) {\n        var popup = new Popup();\n        var firstNameTextField = new TextField();\n        firstNameTextField.setPromptText(\"First Name\");\n        firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n\n        var lastNameTextField = new TextField();\n        lastNameTextField.setPromptText(\"Last Name\");\n        lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n\n        var birthdayPicker = new DatePicker();\n        birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newPerson = person != null ? person : new Person();\n            newPerson.setFirstName(firstNameTextField.getText());\n            newPerson.setLastName(lastNameTextField.getText());\n            newPerson.setBirthday(birthdayPicker.getValue());\n            if (person == null) {\n                personController.addPerson(newPerson, this::setPeople);\n            } else {\n                personController.updatePerson(newPerson, this::setPeople);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            personController.deletePerson(person, this::setPeople);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (person != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(150);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n\n    private void setPeople(List<Person> people) {\n        Platform.runLater(() -> personList.setAll(people));\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/NoteScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.model.Note;\nimport javafx.application.Platform;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\nimport javafx.stage.Popup;\n\nimport java.util.List;\n\npublic class NoteScene extends Scene {\n    private final NoteController noteController;\n    private final H05E01ClientApplication application;\n    private final FlowPane flowPane;\n\n    public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.noteController = noteController;\n        this.application = application;\n\n        flowPane = new FlowPane(10, 10);\n        var scrollPane = new ScrollPane(flowPane);\n        scrollPane.setPrefHeight(450);\n        scrollPane.setFitToWidth(true);\n\n        var vBox = new VBox(10, scrollPane, createButtonBox());\n\n        noteController.getAllNotes(this::setNotes);\n        this.setRoot(vBox);\n    }\n\n    public void setNotes(List<Note> notes) {\n        Platform.runLater(() -> {\n            var children = flowPane.getChildren();\n            children.setAll(notes.stream().map(this::createNoteView).toList());\n        });\n    }\n\n    private Node createNoteView(Note note) {\n        var name = new Text(note.getName());\n        name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n\n        var spacer = new Region();\n        HBox.setHgrow(spacer, Priority.ALWAYS);\n\n        var deleteButton = new Button(\"E\");\n        deleteButton.setTextFill(Color.ORANGE);\n        deleteButton.setOnAction(event -> showPopup(note));\n\n        var titleBox = new HBox(name, spacer, deleteButton);\n\n        var content = new Text(note.getContent());\n        var contentScrollPane = new ScrollPane(content);\n        contentScrollPane.setFitToWidth(true);\n        contentScrollPane.setFitToHeight(true);\n        contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n        contentScrollPane.getStyleClass().clear();\n        content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n\n        var vBox = new VBox(10, titleBox, contentScrollPane);\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setStyle(\"-fx-background-color:white;\");\n        vBox.setPadding(new Insets(5));\n        return vBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Note\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Note note) {\n        var popup = new Popup();\n        var nameTextField = new TextField();\n        nameTextField.setPromptText(\"Name\");\n        nameTextField.setText(note == null ? \"\" : note.getName());\n\n        var contentTextArea = new TextArea();\n        contentTextArea.setPromptText(\"Content\");\n        contentTextArea.setText(note == null ? \"\" : note.getContent());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newNote = note != null ? note : new Note();\n            newNote.setName(nameTextField.getText());\n            newNote.setContent(contentTextArea.getText());\n            if (note == null) {\n                noteController.addNote(newNote, this::setNotes);\n            } else {\n                noteController.editNote(newNote, this::setNotes);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            noteController.deleteNote(note, this::setNotes);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (note != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/HomeScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.VBox;\n\npublic class HomeScene extends Scene {\n    public HomeScene(H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n\n        var noteButton = new Button(\"Notes\");\n        noteButton.setOnAction(event -> application.showNoteScene());\n\n        var personButton = new Button(\"Persons\");\n        personButton.setOnAction(event -> application.showPersonScene());\n\n        var vBox = new VBox(10, noteButton, personButton);\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java",
            "content": "package de.tum.in.ase.eist.util;\n\npublic class PersonSortingOptions {\n    private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n    private SortField sortField = SortField.ID;\n\n    public PersonSortingOptions() {}\n\n    public PersonSortingOptions(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n        this.sortingOrder = sortingOrder;\n        this.sortField = sortField;\n    }\n\n    public SortingOrder getSortingOrder() {\n        return sortingOrder;\n    }\n\n    public void setSortingOrder(SortingOrder sortingOrder) {\n        this.sortingOrder = sortingOrder;\n    }\n\n    public SortField getSortField() {\n        return sortField;\n    }\n\n    public void setSortField(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public enum SortingOrder {\n        ASCENDING, DESCENDING\n    }\n\n    public enum SortField {\n        ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n    }\n}"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Note.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.Instant;\nimport java.util.UUID;\n\npublic class Note {\n    private UUID id;\n    private String name;\n    private String content;\n    private Instant creationDate;\n\n    public Note() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    public Instant getCreationDate() {\n        return creationDate;\n    }\n\n    public void setCreationDate(Instant creationDate) {\n        this.creationDate = creationDate;\n    }\n\n    @Override\n    public String toString() {\n        return \"Note{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", content='\" + content + '\\'' +\n                \", creationDate=\" + creationDate +\n                '}';\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Person.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic class Person {\n    private UUID id;\n    private String firstName;\n    private String lastName;\n    private LocalDate birthday;\n\n    public Person() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public LocalDate getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(LocalDate birthday) {\n        this.birthday = birthday;\n    }\n}\n"
          },
          {
            "path": "src/server/resources/application.properties",
            "content": "logging.level.ROOT=DEBUG\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class H05E01ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(H05E01ServerApplication.class, args);\n    }\n\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/PersonService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.stereotype.Service;\n\nimport java.util.*;\n\nimport static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n\n@Service\npublic class PersonService {\n  \t// do not change this\n    private final List<Person> persons;\n\n    public PersonService() {\n        this.persons = new ArrayList<>();\n    }\n\n    public Person savePerson(Person person) {\n        var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n        if (optionalPerson.isEmpty()) {\n            person.setId(UUID.randomUUID());\n            persons.add(person);\n            return person;\n        } else {\n            var existingPerson = optionalPerson.get();\n            existingPerson.setFirstName(person.getFirstName());\n            existingPerson.setLastName(person.getLastName());\n            existingPerson.setBirthday(person.getBirthday());\n            return existingPerson;\n        }\n    }\n\n    public void deletePerson(UUID personId) {\n        this.persons.removeIf(person -> person.getId().equals(personId));\n    }\n\n    public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n        if (sortingOptions == null) {\n            return this.persons.stream();\n        }\n        Stream<Person> sortedStream = this.persons.stream();\n        sortedList.sort((p1, p2) -> {\n            Person person1;\n            Person person2;\n            if (sortingOptions.getSortingOrder() == ASCENDING) {\n                person1 = p1;\n                person2 = p2;\n            } else {\n                person1 = p2;\n                person2 = p1;\n            }\n\n            return switch (sortingOptions.getSortField()) {\n                case ID -> person1.getId().compareTo(person2.getId());\n                case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n                case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n                case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n            };\n        });\n        return sortedList;\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/NoteService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.stereotype.Service;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Service\npublic class NoteService {\n    private final List<Note> notes;\n\n    public NoteService() {\n        this.notes = new ArrayList<>();\n    }\n\n    public Note saveNote(Note note) {\n        var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n        if (optionalNote.isEmpty()) {\n            note.setId(UUID.randomUUID());\n            note.setCreationDate(Instant.now());\n            notes.add(note);\n            return note;\n        } else {\n            var existingNote = optionalNote.get();\n            existingNote.setName(note.getName());\n            existingNote.setContent(note.getContent());\n            return existingNote;\n        }\n    }\n\n    public void deleteNote(UUID noteId) {\n        this.notes.removeIf(note -> note.getId().equals(noteId));\n    }\n\n    public List<Note> getAllNotes() {\n        return Collections.unmodifiableList(this.notes);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/PersonResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.service.PersonService;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class PersonResource {\n\n    private final PersonService personService;\n\n    public PersonResource(PersonService personService) {\n        this.personService = personService;\n    }\n\n    @GetMapping(\"persons\")\n    public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n                                                      @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n        return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n    }\n\n    @PostMapping(\"persons\")\n    public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n        if (person.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(personService.savePerson(person));\n    }\n\n    @PutMapping(\"persons/{personId}\")\n    public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n        if (!updatedPerson.getId().equals(personId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(personService.savePerson(updatedPerson));\n    }\n\n    @DeleteMapping(\"persons/{personId}\")\n    public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n        personService.deletePerson(personId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/NoteResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Note;\nimport de.tum.in.ase.eist.service.NoteService;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class NoteResource {\n\n    private final NoteService noteService;\n\n    public NoteResource(NoteService noteService) {\n        this.noteService = noteService;\n    }\n\n    @GetMapping(\"notes\")\n    public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n        if (!\"SecretKey\".equals(secret)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.getAllNotes());\n    }\n\n    @PostMapping(\"notes\")\n    public ResponseEntity<Note> createNote(@RequestBody Note note) {\n        if (note.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(note));\n    }\n\n    @PutMapping(\"notes/{noteId}\")\n    public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n        if (!updatedNote.getId().equals(noteId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(updatedNote));\n    }\n\n    @DeleteMapping(\"notes/{noteId}\")\n    public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n        noteService.deleteNote(noteId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          }
        ],
        "test_repository": [
          {
            "path": "readme.md",
            "content": "## Test Repository instructions\n\n#### Test tool & command\nTests will be run using the command `./gradlew clean test`.\n\n#### Project structure\nMake sure that the package structure of your test classes is equivalent to the package structure of your base and solution repository.\nOtherwise during the test run Gradle will not be able to find the imported classes in your test files.\n\nIn order to use classes from the template or solution repository in a test case, you have to add the respective repository\nfiles as a dependency to the test project. Follow this description for IntelliJ:\n\n1. Open the Test-Project first\n2. Select `File` -> `New` -> `Module from Existing Source`. Then choose the template project\nroot folder. Select the option `Import module from external model` and `Gradle` and press `Finish`.\n3. Repeat the previous step for the Solution-Project.\n4. Add the following line to `settings.gradle` inside the Test-Project:\n`includeBuild '<template-project-root-path'>` or `includeBuild '<solution-project-root-path>'` depending on which project you\nwant to use the source files for executing the test cases.\n5. Inside the `plugin`-block in the `build.gradle` inside the Test-Project, add the following line:\n`testImplementation(':H05E01-Layered-Architecture-Spring-Exercise')` or\n`testImplementation(':H05E01-Layered-Architecture-Spring-Solution')` depending on which project you want to use the source files for executing\nthe test cases.\n\n**Note**: Changes made in step 4 and step 5 must not be pushed to the remote repository as it can only be used\nfor editing all three projects in the local IDE.\n\n#### Sequential test runs\nIf you have decided to use the sequential test runs feature for this exercise, read the following instructions:\nWe use the folder structure of the test repository to differentiate structural and behavior tests:\n1. Structural test files must be placed in the folder \"structural\"\n2. Behavior test files must be placed in the folder \"behavior\"\n\nFiles in other folders will not be executed!\n\n#### Static Code Analysis\nThe build.gradle contains dependencies for the execution of static code analysis, if the option is active for this programming exercise.\n"
          },
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'checkstyle'\n    id 'pmd'\n    id 'com.github.spotbugs' version '5.0.6'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id \"com.teamscale\" version \"23.0.0\"\n}\n\napply plugin: 'java'\ngroup = 'de.tum.in.ase.eist'\nsourceCompatibility = 17\nversion = '1.0.0'\ncompileJava.options.encoding = 'UTF-8'\ncompileTestJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    testImplementation 'de.tum.in.ase:artemis-java-test-sandbox:1.9.2'\n    testImplementation 'com.squareup.okhttp3:okhttp:4.10.0-RC1'\n    testImplementation 'com.squareup.okhttp3:mockwebserver:4.10.0-RC1'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test:2.6.7'\n\n    testImplementation 'com.fasterxml.jackson.core:jackson-databind:2.13.2.2'\n    testImplementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.13.2'\n\n    testImplementation 'org.springframework.boot:spring-boot-starter-web:2.6.7'\n    testImplementation 'org.springframework.boot:spring-boot-starter-webflux:2.6.7'\n\n    testImplementation 'org.mockito:mockito-core:4.5.1'\n    testImplementation 'net.bytebuddy:byte-buddy:1.12.10'\n\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web:2.6.7'\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux:2.6.7'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\ndef studentOutputDir = sourceSets.main.java.destinationDirectory.get()\ndef scaConfigDirectory = \"$projectDir/staticCodeAnalysisConfig\"\n\nsourceSets {\n    common {\n        java {\n            srcDir 'assignment/src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'assignment/src/server/java'\n        }\n        resources {\n            srcDir 'assignment/src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'assignment/src/client/java'\n        }\n        resources {\n            srcDir 'assignment/src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n\n    test {\n        java {\n            srcDir 'test'\n        }\n        resources {\n            srcDir 'test'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n        compileClasspath += server.output\n        runtimeClasspath += server.output\n        compileClasspath += client.output\n        runtimeClasspath += client.output\n    }\n}\n\ntest {\n    defaultCharacterEncoding = 'UTF-8'\n    useJUnitPlatform()\n}\n\n\ncheckstyle {\n    configFile = file(\"$scaConfigDirectory/checkstyle-configuration.xml\")\n    ignoreFailures = true\n    // exclude the test files\n    checkstyleTest.enabled = false\n    checkstyleServer.reports {\n        xml {\n            enabled = true\n            outputLocation = file('target/checkstyle-result.xml')\n        }\n        html.enabled = false\n    }\n}\n\nspotbugs {\n    excludeFilter = file(\"$scaConfigDirectory/spotbugs-exclusions.xml\")\n    ignoreFailures = true\n    // exclude the test files\n    spotbugsTest.enabled = false\n    spotbugsClient.reports {\n        add(spotbugsServer)\n        add(spotbugsCommon)\n        xml {\n            enabled = true\n            outputLocation = file('target/spotbugsXml.xml')\n        }\n        html.enabled = false\n    }\n}\n\npmd {\n    ruleSets = [\"$scaConfigDirectory/pmd-configuration.xml\"]\n    rulesMinimumPriority = 5\n    ignoreFailures = true\n    // exclude the test files\n    pmdTest.enabled = false\n    pmdServer.reports {\n        xml {\n            enabled = true\n            outputLocation = file('target/pmd.xml')\n        }\n    }\n}\n\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n\ntasks.register('tiaTests', com.teamscale.TestImpacted) {\n    systemProperty \"ares.security.trustedpackages\", \"okhttp3,com.teamscale,retrofit2,shadow,com.squareup,okio\"\n    useJUnitPlatform()\n    filter {\n        excludeTestsMatching \"AttributeTest\"\n        excludeTestsMatching \"ConstructorTest\"\n        excludeTestsMatching \"ClassTest\"\n        excludeTestsMatching \"MethodTest\"\n    }\n    jacoco {\n        includes = [\"de.tum.in.ase.eist.*\"]\n    }\n}\n\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Spring-Tests'\n"
          },
          {
            "path": "staticCodeAnalysisConfig/spotbugs-exclusions.xml",
            "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<FindBugsFilter>\n    <!--\n    Spotbugs uses filter files to configure the reporting of bugs. Add the path of the filter file to the configuration\n    of the Spotbugs Maven plugin in the Project Object Model (POM).\n    Use <includeFilterFile>/<excludeFilterFile> to include/exclude all bugs matching the criteria defined in such a file.\n    For more information about filters consult the official Spotbugs documentation https://spotbugs.readthedocs.io/en/stable/filter.html#.\n    The examples below show some filter options.\n    -->\n\n    <!-- In case of using Records from Java 16, the equals check should get disabled for that record\n    <Match>\n        <Class name=\"Package.NameOfRecord\" />\n        <Bug code=\"EQ_UNUSUAL\" />\n    </Match> -->\n\n    <!-- Matches a whole class\n    <Match>\n        <Class name=\"com.foobar.ClassNotToBeAnalyzed\" />\n    </Match> -->\n\n    <!-- Matches specific rules in a class\n    <Match>\n        <Class name=\"com.foobar.ClassWithSomeBugsMatched\" />\n        <Bug code=\"DE,UrF,SIC\" />\n    </Match> -->\n\n    <!-- Match all XYZ violations\n    <Match>\n        <Bug code=\"XYZ\" />\n    </Match>  -->\n\n    <!-- Match a method with a dead local store false positive (medium priority)\n    <Match>\n        <Class name=\"com.foobar.MyClass\" />\n        <Method name=\"someMethod\" />\n        <Bug pattern=\"DLS_DEAD_LOCAL_STORE\" />\n        <Priority value=\"2\" />\n    </Match> -->\n\n    <!-- All bugs in test classes, except for JUnit-specific bugs\n    <Match>\n        <Class name=\"~.*\\.*Test\" />\n        <Not>\n            <Bug code=\"IJU\" />\n        </Not>\n    </Match> -->\n    <Match>\n        <Bug code=\"EI\"/>\n    </Match>\n    <Match>\n        <Bug code=\"EI2\"/>\n    </Match>\n</FindBugsFilter>\n"
          },
          {
            "path": "staticCodeAnalysisConfig/pmd-configuration.xml",
            "content": "<ruleset name=\"Custom Rules\"\n         xmlns=\"http://pmd.sourceforge.net/ruleset/2.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd\">\n\n    <description>\n        Default PMD configuration for Artemis programming exercises based on the default PMD Maven configuration.\n        Consult https://pmd.github.io/latest/pmd_userdocs_making_rulesets.html for more information.\n    </description>\n\n    <!-- Use patterns to exclude/include files for this ruleset\n    <exclude-pattern>.*/some/package/.*</exclude-pattern>\n    <include-pattern>.*/some/package/ButNotThisClass.*</include-pattern>\n    -->\n\n    <!-- Bulk adding all rules of all categories. Does not add deprecated rules. Single rule exclusions are possible.\n    <rule ref=\"category/java/documentation.xml\">\n        <exclude name=\"RuleName\"/>\n    </rule> -->\n\n    <!-- Best Practices -->\n    <rule ref=\"category/java/bestpractices.xml/AvoidUsingHardCodedIP\"/>\n    <rule ref=\"category/java/bestpractices.xml/CheckResultSet\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedImports\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedFormalParameter\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedLocalVariable\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedPrivateField\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedPrivateMethod\"/>\n\n    <!-- Code Style -->\n    <rule ref=\"category/java/codestyle.xml/DontImportJavaLang\"/>\n    <rule ref=\"category/java/codestyle.xml/DuplicateImports\"/>\n    <rule ref=\"category/java/codestyle.xml/ExtendsObject\"/>\n    <rule ref=\"category/java/codestyle.xml/ForLoopShouldBeWhileLoop\"/>\n    <rule ref=\"category/java/codestyle.xml/TooManyStaticImports\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryFullyQualifiedName\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryModifier\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryReturn\"/>\n    <rule ref=\"category/java/codestyle.xml/UselessParentheses\"/>\n    <rule ref=\"category/java/codestyle.xml/UselessQualifiedThis\"/>\n\n    <!-- Design -->\n    <rule ref=\"category/java/design.xml/CollapsibleIfStatements\"/>\n    <rule ref=\"category/java/design.xml/SimplifiedTernary\"/>\n    <rule ref=\"category/java/design.xml/UselessOverridingMethod\"/>\n\n    <!-- Error Prone -->\n    <rule ref=\"category/java/errorprone.xml/AvoidBranchingStatementAsLastInLoop\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidDecimalLiteralsInBigDecimalConstructor\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidMultipleUnaryOperators\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidUsingOctalValues\"/>\n    <rule ref=\"category/java/errorprone.xml/BrokenNullCheck\"/>\n    <rule ref=\"category/java/errorprone.xml/CheckSkipResult\"/>\n    <rule ref=\"category/java/errorprone.xml/ClassCastExceptionWithToArray\"/>\n    <rule ref=\"category/java/errorprone.xml/DontUseFloatTypeForLoopIndices\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyCatchBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyFinallyBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyIfStmt\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyInitializer\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyStatementBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyStatementNotInLoop\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptySwitchStatements\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptySynchronizedBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyTryBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyWhileStmt\"/>\n    <rule ref=\"category/java/errorprone.xml/ImportFromSamePackage\"/>\n    <rule ref=\"category/java/errorprone.xml/JumbledIncrementer\"/>\n    <rule ref=\"category/java/errorprone.xml/MisplacedNullCheck\"/>\n    <rule ref=\"category/java/errorprone.xml/OverrideBothEqualsAndHashcode\"/>\n    <rule ref=\"category/java/errorprone.xml/ReturnFromFinallyBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/UnconditionalIfStatement\"/>\n    <rule ref=\"category/java/errorprone.xml/UnnecessaryConversionTemporary\"/>\n    <rule ref=\"category/java/errorprone.xml/UnusedNullCheckInEquals\"/>\n    <rule ref=\"category/java/errorprone.xml/UselessOperationOnImmutable\"/>\n\n    <!-- Multi Threading -->\n    <rule ref=\"category/java/multithreading.xml/AvoidThreadGroup\"/>\n    <rule ref=\"category/java/multithreading.xml/DontCallThreadRun\"/>\n    <rule ref=\"category/java/multithreading.xml/DoubleCheckedLocking\"/>\n\n    <!-- Performance -->\n    <rule ref=\"category/java/performance.xml/BigIntegerInstantiation\"/>\n    <rule ref=\"category/java/performance.xml/BooleanInstantiation\"/>\n\n    <!-- Security -->\n    <rule ref=\"category/java/security.xml\"/>\n\n    <!-- Documentation, already checked by CheckStyle -->\n\n\n</ruleset>\n"
          },
          {
            "path": "staticCodeAnalysisConfig/checkstyle-configuration.xml",
            "content": "<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n    \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n    \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n\n<!--\n  Artemis default Checkstyle configuration based on the sun coding conventions from:\n    - the Java Language Specification at\n      https://docs.oracle.com/javase/specs/jls/se11/html/index.html\n    - the Sun Code Conventions at https://www.oracle.com/java/technologies/javase/codeconventions-contents.html\n    - the Javadoc guidelines at\n      https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html\n    - the JDK Api documentation https://docs.oracle.com/en/java/javase/11/\n    - some best practices\n  Most Checks are configurable, be sure to consult the documentation.\n  To completely disable a check, just comment it out or delete it from the file.\n  Consult the docs for more information https://checkstyle.org.\n-->\n\n<module name=\"Checker\">\n    <property name=\"severity\" value=\"error\"/>\n\n    <property name=\"fileExtensions\" value=\"java, properties, xml\"/>\n\n    <!-- Excludes all 'module-info.java' files              -->\n    <!-- See https://checkstyle.org/config_filefilters.html -->\n    <module name=\"BeforeExecutionExclusionFileFilter\">\n        <property name=\"fileNamePattern\" value=\"module\\-info\\.java$\"/>\n    </module>\n\n    <!-- Checks that a package-info.java file exists for each package.     -->\n    <!-- See https://checkstyle.org/config_javadoc.html#JavadocPackage -->\n    <!-- <module name=\"JavadocPackage\"/> -->\n\n    <!-- Checks whether files end with a new line.                        -->\n    <!-- See https://checkstyle.org/config_misc.html#NewlineAtEndOfFile -->\n    <module name=\"NewlineAtEndOfFile\"/>\n\n    <!-- Checks that property files contain the same keys.         -->\n    <!-- See https://checkstyle.org/config_misc.html#Translation -->\n    <module name=\"Translation\"/>\n\n    <!-- Checks for Size Violations.                    -->\n    <!-- See https://checkstyle.org/config_sizes.html -->\n    <module name=\"FileLength\"/>\n    <module name=\"LineLength\">\n        <property name=\"fileExtensions\" value=\"java\"/>\n        <property name=\"max\" value=\"150\"/>\n        <property name=\"ignorePattern\" value=\"^package.*|^import.*|a href|href|http://|https://|ftp://\"/>\n    </module>\n\n    <!-- Miscellaneous other checks.                   -->\n    <!-- See https://checkstyle.org/config_misc.html -->\n    <module name=\"RegexpSingleline\">\n        <property name=\"format\" value=\"\\s+$\"/>\n        <property name=\"minimum\" value=\"0\"/>\n        <property name=\"maximum\" value=\"0\"/>\n        <property name=\"message\" value=\"Line has trailing spaces.\"/>\n    </module>\n\n    <!-- Checks for Headers                                -->\n    <!-- See https://checkstyle.org/config_header.html   -->\n    <!-- <module name=\"Header\"> -->\n    <!--   <property name=\"headerFile\" value=\"${checkstyle.header.file}\"/> -->\n    <!--   <property name=\"fileExtensions\" value=\"java\"/> -->\n    <!-- </module> -->\n\n    <module name=\"TreeWalker\">\n\n        <!-- Checks for Javadoc comments.                     -->\n        <!-- See https://checkstyle.org/config_javadoc.html -->\n        <module name=\"InvalidJavadocPosition\"/>\n        <module name=\"JavadocMethod\"/>\n        <module name=\"JavadocType\"/>\n        <!--<module name=\"JavadocVariable\"/> -->\n        <module name=\"JavadocStyle\"/>\n        <module name=\"MissingJavadocMethod\">\n            <property name=\"allowMissingPropertyJavadoc\" value=\"true\"/>\n            <property name=\"allowedAnnotations\" value=\"Override,Test\"/>\n            <property name=\"tokens\" value=\"METHOD_DEF,ANNOTATION_FIELD_DEF,COMPACT_CTOR_DEF\"/>\n        </module>\n\n        <!-- Checks for Naming Conventions.                  -->\n        <!-- See https://checkstyle.org/config_naming.html -->\n        <module name=\"ConstantName\"/>\n        <module name=\"LocalFinalVariableName\"/>\n        <module name=\"LocalVariableName\"/>\n        <module name=\"MemberName\"/>\n        <module name=\"MethodName\"/>\n        <!-- <module name=\"PackageName\"/> -->\n        <module name=\"ParameterName\"/>\n        <module name=\"StaticVariableName\"/>\n        <module name=\"TypeName\"/>\n\n        <!-- Checks for imports                              -->\n        <!-- See https://checkstyle.org/config_imports.html -->\n        <!-- <module name=\"AvoidStarImport\"/> -->\n        <module name=\"IllegalImport\"/> <!-- defaults to sun.* packages -->\n        <module name=\"RedundantImport\"/>\n        <module name=\"UnusedImports\">\n            <property name=\"processJavadoc\" value=\"false\"/>\n        </module>\n\n        <!-- Checks for Size Violations.                    -->\n        <!-- See https://checkstyle.org/config_sizes.html -->\n        <module name=\"MethodLength\"/>\n        <module name=\"ParameterNumber\"/>\n\n        <!-- Checks for whitespace                               -->\n        <!-- See https://checkstyle.org/config_whitespace.html -->\n        <module name=\"EmptyForIteratorPad\"/>\n        <module name=\"GenericWhitespace\"/>\n        <module name=\"MethodParamPad\"/>\n        <module name=\"NoWhitespaceAfter\"/>\n        <module name=\"NoWhitespaceBefore\"/>\n        <module name=\"OperatorWrap\"/>\n        <module name=\"ParenPad\"/>\n        <module name=\"TypecastParenPad\"/>\n        <module name=\"WhitespaceAfter\"/>\n        <module name=\"WhitespaceAround\"/>\n\n        <!-- Modifier Checks                                    -->\n        <!-- See https://checkstyle.org/config_modifiers.html -->\n        <module name=\"ModifierOrder\"/>\n        <module name=\"RedundantModifier\"/>\n\n        <!-- Checks for blocks. You know, those {}'s         -->\n        <!-- See https://checkstyle.org/config_blocks.html -->\n        <module name=\"AvoidNestedBlocks\"/>\n        <module name=\"EmptyBlock\"/>\n        <!-- <module name=\"LeftCurly\"/> -->\n        <module name=\"NeedBraces\"/>\n        <!-- <module name=\"RightCurly\"/> -->\n\n        <!-- Checks for common coding problems               -->\n        <!-- See https://checkstyle.org/config_coding.html -->\n        <module name=\"EmptyStatement\"/>\n        <module name=\"EqualsHashCode\"/>\n        <module name=\"HiddenField\">\n            <property name=\"ignoreConstructorParameter\" value=\"true\"/>\n            <property name=\"ignoreSetter\" value=\"true\"/>\n            <property name=\"setterCanReturnItsClass\" value=\"true\"/>\n        </module>\n        <module name=\"IllegalInstantiation\"/>\n        <module name=\"InnerAssignment\"/>\n        <module name=\"MagicNumber\"/>\n        <module name=\"MissingSwitchDefault\"/>\n        <module name=\"MultipleVariableDeclarations\"/>\n        <module name=\"SimplifyBooleanExpression\"/>\n        <module name=\"SimplifyBooleanReturn\"/>\n\n        <!-- Checks for class design                         -->\n        <!-- See https://checkstyle.org/config_design.html -->\n        <!--<module name=\"DesignForExtension\"/> -->\n        <module name=\"FinalClass\"/>\n        <module name=\"InterfaceIsType\"/>\n        <module name=\"VisibilityModifier\"/>\n\n        <!-- Miscellaneous other checks.                   -->\n        <!-- See https://checkstyle.org/config_misc.html -->\n        <module name=\"ArrayTypeStyle\"/>\n        <!-- <module name=\"FinalParameters\"/> -->\n        <!-- <module name=\"TodoComment\"/> -->\n        <module name=\"UpperEll\"/>\n\n    </module>\n\n</module>\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/PersonControllerTest.java",
            "content": "package de.tum.in.ase.eist;\n\nimport static de.tum.in.ase.eist.H05E01Client.*;\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport okhttp3.mockwebserver.MockResponse;\nimport okhttp3.mockwebserver.MockWebServer;\nimport okhttp3.mockwebserver.RecordedRequest;\nimport org.junit.jupiter.api.*;\nimport org.mockito.ArgumentCaptor;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\nimport java.util.function.Consumer;\nimport java.util.concurrent.TimeUnit;\n\n@H05E01\npublic class PersonControllerTest {\n\n    private static MockWebServer mockWebServer;\n    private static ObjectMapper objectMapper;\n\n    private Object personController;\n    private Person person1;\n    private Person person2;\n\n    @BeforeAll\n    static void setUp() {\n        objectMapper = new ObjectMapper();\n        objectMapper.findAndRegisterModules();\n    }\n\n    @BeforeEach\n    void initialize() throws Exception {\n        // restarting the server for every test is required because otherwise tests interfere with each other\n        mockWebServer = new MockWebServer();\n        mockWebServer.start(8080);\n        personController = createPersonController();\n\n        person1 = new Person();\n        var uuid1 = UUID.randomUUID();\n        person1.setId(uuid1);\n        person1.setFirstName(\"Max\");\n        person1.setLastName(\"Musterfrau\");\n        person1.setBirthday(LocalDate.ofYearDay(2000, 125));\n\n        person2 = new Person();\n        var uuid2 = UUID.randomUUID();\n        person2.setId(uuid2);\n        person2.setFirstName(\"Erika\");\n        person2.setLastName(\"Mustermann\");\n        person2.setBirthday(LocalDate.ofYearDay(1999, 80));\n    }\n\n    @AfterEach\n    void afterEach() throws Exception {\n        mockWebServer.shutdown();\n    }\n\n    @Test\n    @DisplayName(\"Add single valid persons (Client)\")\n    public void testAddSingleValidPerson() throws Exception {\n        testAddPerson(200, person1, List.of(person1));\n    }\n\n    @Test\n    @DisplayName(\"Add multiple valid persons (Client)\")\n    public void testAddMultipleValidPersons() throws Exception {\n        testAddPerson(200, person1, new ArrayList<>(List.of(person1)));\n        testAddPerson(200, person2, new ArrayList<>(List.of(person1, person2)));\n    }\n\n    @Test\n    @DisplayName(\"Add single invalid person (Client)\")\n    public void testAddInvalidPerson() throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(400)\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n\n        invokeAddPerson(personController, person1, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n        Thread.sleep(350);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::createPerson did not send a request.\");\n        }\n\n        verify(consumer, never()).accept(any());\n    }\n\n    @Test\n    @DisplayName(\"Edit single person (Client)\")\n    public void testEditSinglePerson() throws Exception {\n        Person updatedPerson = new Person();\n        updatedPerson.setId(person1.getId());\n        updatedPerson.setFirstName(person1.getFirstName());\n        updatedPerson.setLastName(\"Updated Last Name\");\n        updatedPerson.setBirthday(person1.getBirthday());\n\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1)));\n\n        testUpdatePerson(200, updatedPerson, List.of(updatedPerson));\n    }\n\n    @Test\n    @DisplayName(\"Edit single person for multiple existing persons (Client)\")\n    public void testEditSinglePersonForMultipleExistingPersons() throws Exception {\n        Person updatedPerson = new Person();\n        updatedPerson.setId(person1.getId());\n        updatedPerson.setFirstName(person1.getFirstName());\n        updatedPerson.setLastName(\"Updated Last Name\");\n        updatedPerson.setBirthday(person1.getBirthday());\n\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        testUpdatePerson(200, updatedPerson, List.of(updatedPerson, person2));\n    }\n\n    @Test\n    @DisplayName(\"Edit invalid person (Client)\")\n    public void testEditInvalidPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(400)\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n\n        invokeUpdatePerson(personController, person1, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n        Thread.sleep(350);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::updatePerson did not send a request.\");\n        }\n        verify(consumer, times(0));\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person 1 (Client)\")\n    public void testDeleteOnlyExistingPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1)));\n\n        testDeletePerson(200, person1, List.of());\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person 2 (Client)\")\n    public void testDeletePerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        testDeletePerson(200, person1, List.of(person2));\n    }\n\n    @Test\n    @DisplayName(\"Retrieve all persons 1 (Client)\")\n    public void testGetAllPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        var sortingOptions = new PersonSortingOptions();\n        sortingOptions.setSortField(PersonSortingOptions.SortField.ID);\n        sortingOptions.setSortingOrder(PersonSortingOptions.SortingOrder.ASCENDING);\n\n        testGetAllPersons(200, sortingOptions, List.of(person2, person1));\n    }\n\n    @Test\n    @DisplayName(\"Retrieve all persons 2 (Client)\")\n    public void testGetAllPersonsResetsSavedResult() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        var sortingOptions = new PersonSortingOptions();\n\n        sortingOptions.setSortField(PersonSortingOptions.SortField.ID);\n        sortingOptions.setSortingOrder(PersonSortingOptions.SortingOrder.ASCENDING);\n\n        testGetAllPersons(200, sortingOptions, List.of());\n    }\n\n    @Test\n    @DisplayName(\"Sort options for retrieving all persons (Client)\")\n    public void testSortingOptions() throws Exception {\n        for (var sortField : PersonSortingOptions.SortField.values()) {\n            for (var sortOrder: PersonSortingOptions.SortingOrder.values()) {\n                // this should not be required but leaving out may break some student's submission while this is the\n                // real-life behavior\n                mockWebServer.enqueue(new MockResponse()\n                        .setResponseCode(200)\n                        .setBody(objectMapper.writeValueAsString(List.of()))\n                        .setHeader(\"Content-Type\", \"application/json\"));\n\n                var sortOptions = new PersonSortingOptions();\n                sortOptions.setSortField(sortField);\n                sortOptions.setSortingOrder(sortOrder);\n                invokeGetAllPersons(personController, sortOptions, (res) -> {});\n\n\t            RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n\t            if(mockWebServer.getRequestCount() == 0) {\n                    fail(\"PersonController::createPerson did not send a request.\");\n                }\n\n\t\t\t\tThread.sleep(350);\n                assertGetAllPersonRequest(recordedRequest, sortOptions);\n            }\n        }\n    }\n\n    private void testAddPerson(int mockResponseCode, Person person, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(person))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeAddPerson(personController, person, consumer);\n\n        RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::createPerson did not send a request.\");\n        }\n        Thread.sleep(350);\n\n        verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"addPerson\");\n\n        assertEquals(\"POST\", recordedRequest.getMethod(), \"PersonController::createPerson did not send a message with the correct request type\");\n        assertEquals(\"/persons\", recordedRequest.getPath(), \"PersonController::createPerson send a message to the wrong correct endpoint path.\");\n        assertEquals(objectMapper.writeValueAsString(person), recordedRequest.getBody().readUtf8(), \"PersonController::createPerson send a message with the wrong response body.\");\n    }\n\n    private void testUpdatePerson(int mockResponseCode, Person updatedPerson, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(updatedPerson))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeUpdatePerson(personController, updatedPerson, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::updatePerson did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t    verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"updatePerson\");\n\n\n        assertEquals(\"PUT\", recordedRequest.getMethod(), \"PersonController::updatePerson did not send a message with the correct request type.\");\n        assertEquals(\"/persons/\" + updatedPerson.getId(), recordedRequest.getPath(),\"PersonController::updatePerson send a message to the wrong correct endpoint path.\");\n        assertEquals(objectMapper.writeValueAsString(updatedPerson), recordedRequest.getBody().readUtf8(), \"PersonController::createPerson send a message with the wrong response body.\");\n    }\n\n    private void testDeletePerson(int mockResponseCode, Person deletedPerson, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(deletedPerson))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeDeletePerson(personController, deletedPerson, consumer);\n\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::deletePerson did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t    verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"deletePerson\");\n\n        assertEquals(\"DELETE\", recordedRequest.getMethod(), \"PersonController::deletePerson did not send a message with the correct request type.\");\n        assertEquals(\"/persons/\" + deletedPerson.getId(), recordedRequest.getPath(),\"PersonController::deletePerson send a message to the wrong correct endpoint path.\");\n        assertEquals(\"\", recordedRequest.getBody().readUtf8(), \"PersonController::deletePerson send a message with the wrong response body.\");\n    }\n\n    private void testGetAllPersons(int mockResponseCode, PersonSortingOptions sortingOptions, List<Person> allPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(allPersons))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeGetAllPersons(personController, sortingOptions, consumer);\n\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::getAllPersons did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t\tverify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(allPersons, argument.getValue(), \"getAllPersons\");\n\n        assertGetAllPersonRequest(recordedRequest, null);\n    }\n\n    private void assertGetAllPersonRequest(RecordedRequest recordedRequest, PersonSortingOptions sortingOptions) {\n        assertEquals(\"GET\", recordedRequest.getMethod(), \"PersonController::getAllPersons did not send a message with the correct request type.\");\n        if (sortingOptions == null) {\n            if (!recordedRequest.getPath().startsWith(\"/persons\")) {\n                fail(\"PersonController::getAllPersons send a message to the wrong correct endpoint path.\");\n            }\n        } else {\n            if (!recordedRequest.getPath().startsWith(\"/persons\")) {\n                fail(\"PersonController::getAllPersons send a message to the wrong correct endpoint path.\");\n            }\n            if (recordedRequest.getRequestUrl().queryParameterNames().size() != 2 || !recordedRequest.getRequestUrl().queryParameterNames().containsAll(List.of(\"sortField\", \"sortingOrder\"))) {\n                fail(\"PersonController::getAllPersons send a message without the correct sorting options.\");\n            }\n        }\n        assertEquals(\"\", recordedRequest.getBody().readUtf8(), \"PersonController::getAllPersons send a message with the wrong response body.\");\n    }\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/H05E01.java",
            "content": "package de.tum.in.ase.eist;\n\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\n\nimport de.tum.in.test.api.*;\nimport de.tum.in.test.api.jupiter.JupiterIOExtension;\nimport de.tum.in.test.api.jupiter.JupiterStrictTimeoutExtension;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\n@ExtendWith(JupiterIOExtension.class)\n@ExtendWith(JupiterStrictTimeoutExtension.class)\n@StrictTimeout(6)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface H05E01 {\n    // marker\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/H05E01Client.java",
            "content": "package de.tum.in.ase.eist;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.assertj.core.api.Assertions.assertThat;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.test.api.util.ReflectionTestUtils;\n\nimport java.lang.reflect.Field;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.function.Consumer;\n\npublic class H05E01Client {\n\n    private static final String PERSON_CONTROLLER_FULL_NAME = \"de.tum.in.ase.eist.controller.PersonController\";\n\n    public static Object createPersonController() {\n        return ReflectionTestUtils.newInstance(ReflectionTestUtils.getConstructor(ReflectionTestUtils.getClazz(PERSON_CONTROLLER_FULL_NAME)));\n    }\n\n    public static void invokeAddPerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"addPerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeUpdatePerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"updatePerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeDeletePerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"deletePerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeGetAllPersons(Object personController, PersonSortingOptions sortingOptions, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"getAllPersons\", PersonSortingOptions.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, sortingOptions, personConsumer);\n    }\n\n    public static void assertPersonListEquals(List<Person> expectedList, List<Person> actualList, String methodName) {\n        assertNotNull(actualList, \"The resulting list of persons was null after invoking PersonController::\" + methodName + \".\");\n        assertEquals(expectedList.size(), actualList.size(), \"The resulting list of persons does not have the correct size after invoking PersonController::\" + methodName + \".\");\n\n        boolean wrongOrder = false;\n\n        for (int i=0; i<expectedList.size(); i++) {\n            if(!checkIfPersonEqual(expectedList.get(i), actualList.get(i), false)) {\n                wrongOrder = true;\n                break;\n            }\n        }\n\n        if(!wrongOrder) return;\n\n        var sortedExpectedList = expectedList.stream().sorted((a, b) -> {\n            if (a.getFirstName() == null) {\n                return -1;\n            } else if (b.getFirstName() == null) {\n                return 1;\n            } else {\n                return a.getFirstName().compareTo(b.getFirstName());\n            }\n        }).toList();\n\n        var sortedActualList = expectedList.stream().sorted((a, b) -> {\n            if (a.getFirstName() == null) {\n                return -1;\n            } else if (b.getFirstName() == null) {\n                return 1;\n            } else {\n                return a.getFirstName().compareTo(b.getFirstName());\n            }\n        }).toList();\n\n        for (int i = 0; i < sortedExpectedList.size(); i++) {\n            if(checkIfPersonEqual(sortedExpectedList.get(i), sortedActualList.get(i), false)) {\n                fail(\"The resulting list of persons is not sorted correctly after invoking PersonController::\" + methodName + \".\");\n            }\n        }\n\n        fail(\"The resulting list of persons does not contain the correct persons after invoking PersonController::\" + methodName + \".\");\n    }\n\n    public static void setPersonControllerPersons(Object personController, List<Person> personList) {\n        Field persons;\n        Object fieldValue;\n        List<Person> reflectedPersonList;\n        try {\n            persons = personController.getClass().getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            fieldValue = persons.get(personController);\n            assertThat(fieldValue).isInstanceOf(List.class);\n\n            reflectedPersonList = (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The implementation of the attribute 'persons' in class 'PersonController' is not correct.\");\n            return;\n        }\n        try {\n            reflectedPersonList.removeIf(p -> true);\n            reflectedPersonList.addAll(personList);\n        } catch (Exception e) {\n            fail(\"An unexpected error has occurred. Contact your tutor.\");\n        }\n    }\n\n    public static boolean checkIfPersonEqual(Person expectedPerson, Person actualPerson, boolean ignoreId) {\n        var res = ignoreId || Objects.equals(expectedPerson.getId(), actualPerson.getId());\n        return res && Objects.equals(expectedPerson.getFirstName(), actualPerson.getFirstName())\n                && Objects.equals(expectedPerson.getLastName(), actualPerson.getLastName())\n                && Objects.equals(expectedPerson.getBirthday(), actualPerson.getBirthday());\n    }\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/PersonResourceTest.java",
            "content": "package de.tum.in.ase.eist;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.rest.PersonResource;\nimport de.tum.in.ase.eist.service.PersonService;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.NoSuchBeanDefinitionException;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.test.annotation.DirtiesContext;\nimport org.springframework.test.web.servlet.MockMvc;\n\nimport java.lang.reflect.Field;\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\n\nimport static de.tum.in.ase.eist.H05E01Client.checkIfPersonEqual;\nimport static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.fail;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\n\n@H05E01\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\n// this is required to reset the persons saved in PersonService\n@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)\n@AutoConfigureMockMvc\npublic class PersonResourceTest {\n\n    @Autowired\n    private MockMvc mvc;\n\n    @Autowired\n    private ApplicationContext context;\n\n    private static ObjectMapper objectMapper;\n    private static Object personService;\n\n    private Person person1;\n    private Person person2;\n\n    @BeforeAll\n    static void setUp() {\n        objectMapper = new ObjectMapper();\n        objectMapper.findAndRegisterModules();\n    }\n\n    @BeforeEach\n    void initialize() {\n        try {\n            personService = context.getBean(PersonService.class);\n        } catch (NoSuchBeanDefinitionException e) {\n            fail(\"PersonService is not defined correctly as a Spring-Service.\");\n        }\n\n        try {\n            context.getBean(PersonResource.class);\n        } catch (NoSuchBeanDefinitionException e) {\n            fail(\"PersonResource is not defined correctly as a Spring-Controller.\");\n        }\n\n        person1 = new Person();\n        person1.setFirstName(\"Max\");\n        person1.setLastName(\"Musterfrau\");\n        person1.setBirthday(LocalDate.ofYearDay(2000, 125));\n\n        person2 = new Person();\n        person2.setFirstName(\"Erika\");\n        person2.setLastName(\"Mustermann\");\n        person2.setBirthday(LocalDate.ofYearDay(1999, 80));\n    }\n\n    @Test\n    @DisplayName(\"Create valid person (Server)\")\n    public void testAddSingleUser() throws Exception {\n        var response = this.mvc.perform(\n                post(\"/persons\")\n                        .content(objectMapper.writeValueAsString(person1))\n                        .contentType(\"application/json\")).andReturn().getResponse();\n\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint POST /persons has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::createPerson did not return the correct status code\");\n        assertEquals(\"application/json\", response.getContentType());\n\n        var personsInService = getAllPersonsByReflection();\n        if (personsInService == null || personsInService.size() != 1) {\n            fail(\"After calling PersonResource::createPerson, PersonResource::persons contain the wrong amount of persons.\");\n        }\n        var createdPerson = personsInService.get(0);\n\n        var responseEntity = objectMapper.readValue(response.getContentAsString(), Person.class);\n        if (!checkIfPersonEqual(createdPerson, responseEntity, true)) {\n            fail(\"PersonResource::createPerson did not return the correct person as response body.\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"Create invalid person (Server)\")\n    public void testAddInvalidPerson() throws Exception {\n        var uuid = UUID.randomUUID();\n        person1.setId(uuid);\n\n        var response = this.mvc.perform(\n                        post(\"/persons\")\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint POST /persons has not been implemented.\");\n        }\n        assertEquals(400, response.getStatus(), \"PersonResource::createPerson did not return the correct status code for an invalid request body.\");\n    }\n\n    @Test\n    @DisplayName(\"Update existing person (Server)\")\n    public void testUpdateExistingPerson() throws Exception {\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        person1.setFirstName(\"Changed\");\n        person1.setLastName(\"Name\");\n\n        var response = this.mvc.perform(\n                        put(\"/persons/\" + person1.getId())\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint PUT /persons/:personId has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::updatePerson did not return the correct status code.\");\n        assertEquals(\"application/json\", response.getContentType());\n\n        var personsInService = getAllPersonsByReflection();\n        if (personsInService == null || personsInService.size() != 1) {\n            fail(\"After calling PersonResource::updatePerson, PersonResource::persons contain the wrong amount of persons.\");\n        }\n        var updatedPerson = personsInService.get(0);\n\n        var responseEntity = objectMapper.readValue(response.getContentAsString(), Person.class);\n        if (!checkIfPersonEqual(updatedPerson, responseEntity, false)) {\n            fail(\"PersonResource::updatePerson did not return the correct person as response body.\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"Update person with mismatching IDs (Server)\")\n    public void testUpdatePersonWithIdMismatch() throws Exception {\n        var mismatchedId = UUID.randomUUID();\n\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        var response = this.mvc.perform(\n                        put(\"/persons/\" + mismatchedId)\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint PUT /persons/:personId has not been implemented.\");\n        }\n        assertEquals(400, response.getStatus(), \"PersonResource::updatePerson did not return the correct status code for an invalid response body.\");\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person (Server)\")\n    public void testDeleteExistingPerson() throws Exception {\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        var response = this.mvc.perform(\n                delete(\"/persons/\" + person1.getId())\n                        .content(objectMapper.writeValueAsString(person1))\n                        .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint DELETE /persons/:personId has not been implemented.\");\n        }\n        assertEquals(204, response.getStatus(), \"PersonResource::deletePerson did not return the correct status code.\");\n    }\n\n    @Test\n    @DisplayName(\"Get all persons with sorting options (Server)\")\n    public void testGetAllPersons() throws Exception {\n        var id1 = UUID.randomUUID();\n        var id2 = UUID.randomUUID();\n        person1.setId(id1);\n        person2.setId(id2);\n        setAllPersonsByReflection(List.of(person1, person2));\n\n        for (var fieldOption: PersonSortingOptions.SortField.values()) {\n            for (var orderOption: PersonSortingOptions.SortingOrder.values()) {\n                var sortedList = getSortedList(List.of(person1, person2), orderOption, fieldOption);\n                var response = this.mvc.perform(\n                                get(\"/persons\")\n                                        .param(\"sortField\", fieldOption.name())\n                                        .param(\"sortingOrder\", orderOption.name())\n                                        .contentType(\"application/json\")).andReturn().getResponse();\n\n                if (response.getStatus() == 404 || response.getStatus() == 405) {\n                    fail(\"The endpoint GET /persons has not been implemented.\");\n                }\n                assertEquals(200, response.getStatus(), \"PersonResource::getAllPersons did not return the correct status code.\");\n\n                var respondedPersons = objectMapper.readValue(response.getContentAsString(), Person[].class);\n                if (respondedPersons.length != 2) {\n                    fail(\"PersonResource::getAllPersons did not return the correct amount of persons.\");\n                }\n                for (int i = 0; i < respondedPersons.length; i++){\n                    if (!checkIfPersonEqual(sortedList.get(i), respondedPersons[i], false)) {\n                        fail(\"PersonResource::getAllPersons did not contain the correct person/correct order as response body for a request with sorting options.\");\n                    }\n                }\n            }\n        }\n    }\n\n    @Test\n    @DisplayName(\"Get all persons with default request parameters (Server)\")\n    public void testDefaultSortValues() throws Exception {\n        var id1 = UUID.randomUUID();\n        var id2 = UUID.randomUUID();\n        person1.setId(id1);\n        person2.setId(id2);\n        setAllPersonsByReflection(List.of(person1, person2));\n\n        var sortedList = getSortedList(List.of(person1, person2), ASCENDING, PersonSortingOptions.SortField.ID);\n        var response = this.mvc.perform(\n                        get(\"/persons\")\n                                .contentType(\"application/json\")).andReturn().getResponse();\n\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint GET /persons has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::getAllPersons did not return the correct status code.\");\n        var respondedPersons = objectMapper.readValue(response.getContentAsString(), Person[].class);\n        if (respondedPersons.length != 2) {\n            fail(\"PersonResource::getAllPersons did not return the correct amount of persons.\");\n        }\n\t    var sortedRespondedPersons = getSortedList(List.of(respondedPersons), ASCENDING, PersonSortingOptions.SortField.ID);\n\t    for (int i = 0; i < sortedRespondedPersons.size(); i++){\n            if (!checkIfPersonEqual(sortedList.get(i), sortedRespondedPersons.get(i), false)) {\n                fail(\"PersonResource::getAllPersons did not contain the correct person/correct order as response body when performing a request without sorting options.\");\n            }\n        }\n    }\n\n    private static List<Person> getSortedList(List<Person> persons, PersonSortingOptions.SortingOrder sortingOrder, PersonSortingOptions.SortField sortField) {\n        var sortedList = new ArrayList<>(persons);\n        sortedList.sort((p1, p2) -> {\n            Person person1;\n            Person person2;\n            if (sortingOrder == ASCENDING) {\n                person1 = p1;\n                person2 = p2;\n            } else {\n                person1 = p2;\n                person2 = p1;\n            }\n\n            return switch (sortField) {\n                case ID -> person1.getId().compareTo(person2.getId());\n                case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n                case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n                case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n            };\n        });\n\n        return sortedList;\n    }\n\n    public static void setAllPersonsByReflection(List<Person> personList) {\n        Field persons;\n        Object fieldValue;\n        List<Person> reflectedPersonList;\n        try {\n            persons = PersonService.class.getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            fieldValue = persons.get(personService);\n            if (!(fieldValue instanceof List)) {\n                fail(\"The attribute 'persons' in class 'PersonResource' has not the correct type.\");\n            }\n\n            reflectedPersonList = (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The attribute 'persons' in class 'PersonResource' has not been implemented as described.\");\n            return;\n        }\n        try {\n            reflectedPersonList.removeIf(p -> true);\n            reflectedPersonList.addAll(personList);\n        } catch (Exception e) {\n            fail(\"An unexpected error has occurred. Contact your tutor.\");\n        }\n    }\n\n    public static List<Person> getAllPersonsByReflection() {\n        try {\n            Field persons = PersonService.class.getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            Object fieldValue = persons.get(personService);\n\n            if (!(fieldValue instanceof List)) {\n                fail(\"The attribute 'persons' in class 'PersonService' has not the correct type.\");\n            }\n            return (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The attribute 'persons' in class 'PersonService' has not been implemented as described.\");\n            return null;\n        }\n    }\n}\n"
          }
        ]
      },
      "outputs": null,
      "tags": [
        "map:key:structural"
      ],
      "parent_run_id": "426ee021-0ec1-40e6-bda0-4be115f42a34",
      "trace_id": "2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "dotted_order": "20250723T144040524034Z2102d036-0bf8-4863-879f-f17bd2b1b9ca.20250723T144040588355Z426ee021-0ec1-40e6-bda0-4be115f42a34.20250723T144040598179Zbe3c3142-4584-4897-9450-5d9ae5c0fafc",
      "session_id": "9165a489-2e1b-4cfc-a139-82686a2268ba",
      "extra": {
        "runtime": {
          "sdk": "langsmith-py",
          "sdk_version": "0.3.42",
          "library": "langchain-core",
          "platform": "macOS-15.3-arm64-arm-64bit-Mach-O",
          "runtime": "python",
          "py_implementation": "CPython",
          "runtime_version": "3.13.5",
          "langchain_version": "0.3.25",
          "langchain_core_version": "0.3.59",
          "library_version": "0.3.59"
        },
        "metadata": {
          "LANGSMITH_TRACING": "true",
          "LANGCHAIN_RUN_ID": "39eb4060",
          "revision_id": "v1.1.0-48-g1c4fbcca-dirty",
          "ls_run_depth": 2
        }
      },
      "events": [
        {
          "name": "start",
          "time": "2025-07-23T14:40:40.598179+00:00"
        }
      ]
    },
    {
      "id": "8099bfbe-4aaa-45ce-977b-76004723f318",
      "name": "context_renderer",
      "run_type": "chain",
      "start_time": "2025-07-23T14:40:40.596892",
      "end_time": "2025-07-23T14:40:40.599671",
      "status": "success",
      "inputs": {
        "problem_statement": "# REST Architectural Style\n\nThe university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n\nThis exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n\n## Application Structure\n\nThe following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n<br>\n#### Client-Side:\n- The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n- The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n- The `Network Layer` contains the functionality to send REST requests to the server.\n\n#### Server-Side:\n- The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n- The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n\n### Layered Architecture\n@startuml\n\nnamespace Client {\n    namespace NetworkLayer {}\n    \n    namespace PresentationLayer {}\n    \n    namespace ApplicationLayer {}\n}\n\nnamespace Server {\n    namespace NetworkLayer {}\n    \n    namespace BusinessLayer {}\n}\n\nClient.PresentationLayer --> Client.ApplicationLayer\nClient.ApplicationLayer --> Client.NetworkLayer\nClient.NetworkLayer <---> Server.NetworkLayer\nServer.NetworkLayer --> Server.BusinessLayer\nServer.NetworkLayer -[hidden]> Client.NetworkLayer\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\nOn the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n### MVC Component Diagram\n@startuml\n\nnamespace Common {\n    namespace Model {\n        class Common.Model.Note {\n            \n        }\n        class Common.Model.Person {\n            \n        }\n    }\n}\n\nnamespace Client {\n    namespace Controller {\n        class Client.Controller.NoteController {\n            \n        }\n        class Client.Controller.PersonController {\n            \n        }\n    }\n    namespace View {\n        class Client.View.NoteScene {\n            \n        }\n        class Client.View.PersonScene {\n            \n        }\n    }\n}\n\nClient.Controller.NoteController <-- Client.View.NoteScene\nClient.Controller.PersonController <-- Client.View.PersonScene\nCommon.Model.Note \"*\" --o Client.Controller.NoteController\nCommon.Model.Person \"*\" --o Client.Controller.PersonController\n\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\n<br />\n\n***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n\n\n## Application Functionality\nThis system has 2 sides.\n- Client-side\n- Server-side\n\n\nThe server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\nThe client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n\nThe endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n- `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n- `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n- `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n- `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n\n*Note: There are TODOs in the code giving helpful hints*\n\n***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n*`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n*`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n*`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n*Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n<br/>\n<br/>\n##Part 1\nIn the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\nYou have to forward each action to the `PersonService` and add any additional checks before that.\n\n1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n    Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n    Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n3. [task][Endpoint to delete a person](Delete existing person (Server))\n    Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n    Last but not the least, implement the method `getAllPersons`, which returns all persons.\n\n*Note: Feel free to get inspired by `NoteResource` for additional help.*\n\n\n\n##Part 2\nIn the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\nThe Controller should work like this:\n- There is a single `WebClient` instance that is used for all requests\n- Each method should only send a single HTTP request\n- The HTTP requests need to happen asynchronously\n- It has an internal list of all persons\n    - If a person is created, updated or deleted this has to be updated in the list\n    - If all persons are retrieved from the server the list has to be updated accordingly\n- Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n    - This consumer takes the internal list of persons as a parameter\n\n### UML Diagram\n@startuml\n\nnamespace Client {\n    namespace Controller {\n        class PersonController {\n            - webClient: WebClient\n            + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n            + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n            + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n            + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n        }\n    }\n}\n\nnamespace Common {\n    class Person {\n        - id: UUID\n        - firstName: String\n        - lastName: String\n        - birthday: LocalDate\n    }\n}\n\nClient.Controller.PersonController o-- \"*\" Common.Person : persons\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\n<br />\n\n1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n    Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n    Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n    Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n    Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n\n*Note: Don't forget the constructor of `PersonController`*\n\n##Part 3\nIt has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n\nIt is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\nSome additional notes:\n- The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n- The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n\n[task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\nImplement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\nThen update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n\n*Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*",
        "programming_language": "java",
        "template_repository": [
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\ngroup = 'de.tum.in.ase.eist'\nversion = '1.0.0'\nsourceCompatibility = 17\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web'\n\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\nsourceSets {\n    common {\n        java {\n            srcDir 'src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'src/server/java'\n        }\n        resources {\n            srcDir 'src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'src/client/java'\n        }\n        resources {\n            srcDir 'src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n}\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Spring-Exercise'\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.view.HomeScene;\nimport de.tum.in.ase.eist.view.NoteScene;\nimport de.tum.in.ase.eist.view.PersonScene;\nimport javafx.application.Application;\nimport javafx.stage.Stage;\n\npublic class H05E01ClientApplication extends Application {\n    private final NoteController noteController = new NoteController();\n    private final PersonController personController = new PersonController();\n    private Stage stage;\n\n    @Override\n    public void start(Stage primaryStage) {\n        this.stage = primaryStage;\n\n        primaryStage.setScene(new HomeScene(this));\n        primaryStage.show();\n    }\n\n    public void showHomeScene() {\n        stage.setScene(new HomeScene(this));\n    }\n\n    public void showNoteScene() {\n        stage.setScene(new NoteScene(noteController, this));\n    }\n\n    public void showPersonScene() {\n        stage.setScene(new PersonScene(personController, this));\n    }\n\n    public Stage getStage() {\n        return stage;\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/Starter.java",
            "content": "package de.tum.in.ase.eist;\n\nimport javafx.application.Application;\n\npublic class Starter {\n    public static void main(String[] args) {\n        Application.launch(H05E01ClientApplication.class);\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/NoteController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class NoteController {\n    private final WebClient webClient;\n    private final List<Note> notes;\n\n    public NoteController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.notes = new ArrayList<>();\n    }\n\n    public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.post()\n                .uri(\"notes\")\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.add(newNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.put()\n                .uri(\"notes/\" + note.getId())\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.delete()\n                .uri(\"notes/\" + note.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    notes.remove(note);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"notes\")\n                        .queryParam(\"secret\", \"SecretKey\")\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n                .onErrorStop()\n                .subscribe(newNotes -> {\n                    notes.clear();\n                    notes.addAll(newNotes);\n                    notesConsumer.accept(notes);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/PersonController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class PersonController {\n\n    public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http post request to the server\n    }\n\n    public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http put request to the server\n    }\n\n    public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http delete request to the server\n    }\n\n    public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an https get request to the server\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/PersonScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\nimport javafx.application.Platform;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Popup;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic class PersonScene extends Scene {\n    private final PersonController personController;\n    private final H05E01ClientApplication application;\n    private final PersonSortingOptions sortingOptions;\n    private final ObservableList<Person> personList;\n    private final TableView<Person> table;\n\n    public PersonScene(PersonController personController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.personController = personController;\n        this.application = application;\n        this.sortingOptions = new PersonSortingOptions();\n        this.personList = FXCollections.observableArrayList();\n\n        table = new TableView<>(personList);\n        table.setOnMousePressed(event -> {\n            if (event.isPrimaryButtonDown()) {\n                showPopup(table.getSelectionModel().getSelectedItem());\n            }\n        });\n\n        var idColumn = new TableColumn<Person, String>(\"ID\");\n        idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n        idColumn.setSortable(false);\n        idColumn.setPrefWidth(620 / 4D);\n        var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n        firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n        firstNameColumn.setSortable(false);\n        firstNameColumn.setPrefWidth(620 / 4D);\n        var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n        lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n        lastNameColumn.setSortable(false);\n        lastNameColumn.setPrefWidth(620 / 4D);\n        var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n        birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n        birthdayColumn.setSortable(false);\n        birthdayColumn.setPrefWidth(620 / 4D);\n        //noinspection unchecked\n        table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n\n        var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n\n        personController.getAllPersons(sortingOptions, this::setPeople);\n    }\n\n    private HBox createSortOptionBox() {\n        var sortFieldChoiceBox = new ChoiceBox<SortField>();\n        sortFieldChoiceBox.getItems().addAll(SortField.values());\n        sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n        sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortField(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n        sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n        sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n        sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortingOrder(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n        hBox.setAlignment(Pos.CENTER);\n        return hBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Person\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Person person) {\n        var popup = new Popup();\n        var firstNameTextField = new TextField();\n        firstNameTextField.setPromptText(\"First Name\");\n        firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n\n        var lastNameTextField = new TextField();\n        lastNameTextField.setPromptText(\"Last Name\");\n        lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n\n        var birthdayPicker = new DatePicker();\n        birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newPerson = person != null ? person : new Person();\n            newPerson.setFirstName(firstNameTextField.getText());\n            newPerson.setLastName(lastNameTextField.getText());\n            newPerson.setBirthday(birthdayPicker.getValue());\n            if (person == null) {\n                personController.addPerson(newPerson, this::setPeople);\n            } else {\n                personController.updatePerson(newPerson, this::setPeople);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            personController.deletePerson(person, this::setPeople);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (person != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(150);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n\n    private void setPeople(List<Person> people) {\n        Platform.runLater(() -> personList.setAll(people));\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/NoteScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.model.Note;\nimport javafx.application.Platform;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\nimport javafx.stage.Popup;\n\nimport java.util.List;\n\npublic class NoteScene extends Scene {\n    private final NoteController noteController;\n    private final H05E01ClientApplication application;\n    private final FlowPane flowPane;\n\n    public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.noteController = noteController;\n        this.application = application;\n\n        flowPane = new FlowPane(10, 10);\n        var scrollPane = new ScrollPane(flowPane);\n        scrollPane.setPrefHeight(450);\n        scrollPane.setFitToWidth(true);\n\n        var vBox = new VBox(10, scrollPane, createButtonBox());\n\n        noteController.getAllNotes(this::setNotes);\n        this.setRoot(vBox);\n    }\n\n    public void setNotes(List<Note> notes) {\n        Platform.runLater(() -> {\n            var children = flowPane.getChildren();\n            children.setAll(notes.stream().map(this::createNoteView).toList());\n        });\n    }\n\n    private Node createNoteView(Note note) {\n        var name = new Text(note.getName());\n        name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n\n        var spacer = new Region();\n        HBox.setHgrow(spacer, Priority.ALWAYS);\n\n        var deleteButton = new Button(\"E\");\n        deleteButton.setTextFill(Color.ORANGE);\n        deleteButton.setOnAction(event -> showPopup(note));\n\n        var titleBox = new HBox(name, spacer, deleteButton);\n\n        var content = new Text(note.getContent());\n        var contentScrollPane = new ScrollPane(content);\n        contentScrollPane.setFitToWidth(true);\n        contentScrollPane.setFitToHeight(true);\n        contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n        contentScrollPane.getStyleClass().clear();\n        content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n\n        var vBox = new VBox(10, titleBox, contentScrollPane);\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setStyle(\"-fx-background-color:white;\");\n        vBox.setPadding(new Insets(5));\n        return vBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Note\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Note note) {\n        var popup = new Popup();\n        var nameTextField = new TextField();\n        nameTextField.setPromptText(\"Name\");\n        nameTextField.setText(note == null ? \"\" : note.getName());\n\n        var contentTextArea = new TextArea();\n        contentTextArea.setPromptText(\"Content\");\n        contentTextArea.setText(note == null ? \"\" : note.getContent());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newNote = note != null ? note : new Note();\n            newNote.setName(nameTextField.getText());\n            newNote.setContent(contentTextArea.getText());\n            if (note == null) {\n                noteController.addNote(newNote, this::setNotes);\n            } else {\n                noteController.editNote(newNote, this::setNotes);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            noteController.deleteNote(note, this::setNotes);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (note != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/HomeScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.VBox;\n\npublic class HomeScene extends Scene {\n    public HomeScene(H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n\n        var noteButton = new Button(\"Notes\");\n        noteButton.setOnAction(event -> application.showNoteScene());\n\n        var personButton = new Button(\"Persons\");\n        personButton.setOnAction(event -> application.showPersonScene());\n\n        var vBox = new VBox(10, noteButton, personButton);\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java",
            "content": "package de.tum.in.ase.eist.util;\n\npublic class PersonSortingOptions {\n    private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n    private SortField sortField = SortField.ID;\n\n    public PersonSortingOptions() {}\n\n    public PersonSortingOptions(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n        this.sortingOrder = sortingOrder;\n        this.sortField = sortField;\n    }\n\n    public SortingOrder getSortingOrder() {\n        return sortingOrder;\n    }\n\n    public void setSortingOrder(SortingOrder sortingOrder) {\n        this.sortingOrder = sortingOrder;\n    }\n\n    public SortField getSortField() {\n        return sortField;\n    }\n\n    public void setSortField(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public enum SortingOrder {\n        ASCENDING, DESCENDING\n    }\n\n    public enum SortField {\n        ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n    }\n}"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Note.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.Instant;\nimport java.util.UUID;\n\npublic class Note {\n    private UUID id;\n    private String name;\n    private String content;\n    private Instant creationDate;\n\n    public Note() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    public Instant getCreationDate() {\n        return creationDate;\n    }\n\n    public void setCreationDate(Instant creationDate) {\n        this.creationDate = creationDate;\n    }\n\n    @Override\n    public String toString() {\n        return \"Note{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", content='\" + content + '\\'' +\n                \", creationDate=\" + creationDate +\n                '}';\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Person.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic class Person {\n    private UUID id;\n    private String firstName;\n    private String lastName;\n    private LocalDate birthday;\n\n    public Person() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public LocalDate getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(LocalDate birthday) {\n        this.birthday = birthday;\n    }\n}\n"
          },
          {
            "path": "src/server/resources/application.properties",
            "content": "logging.level.ROOT=DEBUG\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class H05E01ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(H05E01ServerApplication.class, args);\n    }\n\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/PersonService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.stereotype.Service;\n\nimport java.util.*;\n\n@Service\npublic class PersonService {\n  \t// do not change this\n    private final List<Person> persons;\n\n    public PersonService() {\n        this.persons = new ArrayList<>();\n    }\n\n    public Person savePerson(Person person) {\n        var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n        if (optionalPerson.isEmpty()) {\n            person.setId(UUID.randomUUID());\n            persons.add(person);\n            return person;\n        } else {\n            var existingPerson = optionalPerson.get();\n            existingPerson.setFirstName(person.getFirstName());\n            existingPerson.setLastName(person.getLastName());\n            existingPerson.setBirthday(person.getBirthday());\n            return existingPerson;\n        }\n    }\n\n    public void deletePerson(UUID personId) {\n        this.persons.removeIf(person -> person.getId().equals(personId));\n    }\n\n    public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n        // TODO Part 3: Add sorting here\n        return new ArrayList<>(this.persons);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/NoteService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.stereotype.Service;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Service\npublic class NoteService {\n    private final List<Note> notes;\n\n    public NoteService() {\n        this.notes = new ArrayList<>();\n    }\n\n    public Note saveNote(Note note) {\n        var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n        if (optionalNote.isEmpty()) {\n            note.setId(UUID.randomUUID());\n            note.setCreationDate(Instant.now());\n            notes.add(note);\n            return note;\n        } else {\n            var existingNote = optionalNote.get();\n            existingNote.setName(note.getName());\n            existingNote.setContent(note.getContent());\n            return existingNote;\n        }\n    }\n\n    public void deleteNote(UUID noteId) {\n        this.notes.removeIf(note -> note.getId().equals(noteId));\n    }\n\n    public List<Note> getAllNotes() {\n        return Collections.unmodifiableList(this.notes);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/PersonResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.service.PersonService;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class PersonResource {\n\n    private final PersonService personService;\n\n    public PersonResource(PersonService personService) {\n        this.personService = personService;\n    }\n\n    // TODO Part 1: Implement the specified endpoints here\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/NoteResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Note;\nimport de.tum.in.ase.eist.service.NoteService;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class NoteResource {\n\n    private final NoteService noteService;\n\n    public NoteResource(NoteService noteService) {\n        this.noteService = noteService;\n    }\n\n    @GetMapping(\"notes\")\n    public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n        if (!\"SecretKey\".equals(secret)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.getAllNotes());\n    }\n\n    @PostMapping(\"notes\")\n    public ResponseEntity<Note> createNote(@RequestBody Note note) {\n        if (note.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(note));\n    }\n\n    @PutMapping(\"notes/{noteId}\")\n    public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n        if (!updatedNote.getId().equals(noteId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(updatedNote));\n    }\n\n    @DeleteMapping(\"notes/{noteId}\")\n    public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n        noteService.deleteNote(noteId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          }
        ],
        "solution_repository": [
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\ngroup = 'de.tum.in.ase.eist'\nversion = '1.0.0'\nsourceCompatibility = 17\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web'\n\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\nsourceSets {\n    common {\n        java {\n            srcDir 'src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'src/server/java'\n        }\n        resources {\n            srcDir 'src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'src/client/java'\n        }\n        resources {\n            srcDir 'src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n}\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Solution'\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.view.HomeScene;\nimport de.tum.in.ase.eist.view.NoteScene;\nimport de.tum.in.ase.eist.view.PersonScene;\nimport javafx.application.Application;\nimport javafx.stage.Stage;\n\npublic class H05E01ClientApplication extends Application {\n    private final NoteController noteController = new NoteController();\n    private final PersonController personController = new PersonController();\n    private Stage stage;\n\n    @Override\n    public void start(Stage primaryStage) {\n        this.stage = primaryStage;\n\n        primaryStage.setScene(new HomeScene(this));\n        primaryStage.show();\n    }\n\n    public void showHomeScene() {\n        stage.setScene(new HomeScene(this));\n    }\n\n    public void showNoteScene() {\n        stage.setScene(new NoteScene(noteController, this));\n    }\n\n    public void showPersonScene() {\n        stage.setScene(new PersonScene(personController, this));\n    }\n\n    public Stage getStage() {\n        return stage;\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/Starter.java",
            "content": "package de.tum.in.ase.eist;\n\nimport javafx.application.Application;\n\npublic class Starter {\n    public static void main(String[] args) {\n        Application.launch(H05E01ClientApplication.class);\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/NoteController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class NoteController {\n    private final WebClient webClient;\n    private final List<Note> notes;\n\n    public NoteController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.notes = new ArrayList<>();\n    }\n\n    public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.post()\n                .uri(\"notes\")\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.add(newNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.put()\n                .uri(\"notes/\" + note.getId())\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.delete()\n                .uri(\"notes/\" + note.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    notes.remove(note);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"notes\")\n                        .queryParam(\"secret\", \"SecretKey\")\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n                .onErrorStop()\n                .subscribe(newNotes -> {\n                    notes.clear();\n                    notes.addAll(newNotes);\n                    notesConsumer.accept(notes);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/PersonController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class PersonController {\n    private final WebClient webClient;\n    private final List<Person> persons;\n\n    public PersonController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.persons = new ArrayList<>();\n    }\n\n    public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.post()\n                .uri(\"persons\")\n                .bodyValue(person)\n                .retrieve()\n                .bodyToMono(Person.class)\n                .onErrorStop()\n                .subscribe(newPerson -> {\n                    persons.add(newPerson);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.put()\n                .uri(\"persons/\" + person.getId())\n                .bodyValue(person)\n                .retrieve()\n                .bodyToMono(Person.class)\n                .onErrorStop()\n                .subscribe(newPerson -> {\n                    persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.delete()\n                .uri(\"persons/\" + person.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    persons.remove(person);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"persons\")\n                        .queryParam(\"sortField\", sortingOptions.getSortField())\n                        .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n                .onErrorStop()\n                .subscribe(newPersons -> {\n                    persons.clear();\n                    persons.addAll(newPersons);\n                    personsConsumer.accept(persons);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/PersonScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\nimport javafx.application.Platform;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Popup;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic class PersonScene extends Scene {\n    private final PersonController personController;\n    private final H05E01ClientApplication application;\n    private final PersonSortingOptions sortingOptions;\n    private final ObservableList<Person> personList;\n    private final TableView<Person> table;\n\n    public PersonScene(PersonController personController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.personController = personController;\n        this.application = application;\n        this.sortingOptions = new PersonSortingOptions();\n        this.personList = FXCollections.observableArrayList();\n\n        table = new TableView<>(personList);\n        table.setOnMousePressed(event -> {\n            if (event.isPrimaryButtonDown()) {\n                showPopup(table.getSelectionModel().getSelectedItem());\n            }\n        });\n\n        var idColumn = new TableColumn<Person, String>(\"ID\");\n        idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n        idColumn.setSortable(false);\n        idColumn.setPrefWidth(620 / 4D);\n        var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n        firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n        firstNameColumn.setSortable(false);\n        firstNameColumn.setPrefWidth(620 / 4D);\n        var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n        lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n        lastNameColumn.setSortable(false);\n        lastNameColumn.setPrefWidth(620 / 4D);\n        var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n        birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n        birthdayColumn.setSortable(false);\n        birthdayColumn.setPrefWidth(620 / 4D);\n        //noinspection unchecked\n        table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n\n        var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n\n        personController.getAllPersons(sortingOptions, this::setPeople);\n    }\n\n    private HBox createSortOptionBox() {\n        var sortFieldChoiceBox = new ChoiceBox<SortField>();\n        sortFieldChoiceBox.getItems().addAll(SortField.values());\n        sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n        sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortField(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n        sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n        sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n        sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortingOrder(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n        hBox.setAlignment(Pos.CENTER);\n        return hBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Person\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Person person) {\n        var popup = new Popup();\n        var firstNameTextField = new TextField();\n        firstNameTextField.setPromptText(\"First Name\");\n        firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n\n        var lastNameTextField = new TextField();\n        lastNameTextField.setPromptText(\"Last Name\");\n        lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n\n        var birthdayPicker = new DatePicker();\n        birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newPerson = person != null ? person : new Person();\n            newPerson.setFirstName(firstNameTextField.getText());\n            newPerson.setLastName(lastNameTextField.getText());\n            newPerson.setBirthday(birthdayPicker.getValue());\n            if (person == null) {\n                personController.addPerson(newPerson, this::setPeople);\n            } else {\n                personController.updatePerson(newPerson, this::setPeople);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            personController.deletePerson(person, this::setPeople);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (person != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(150);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n\n    private void setPeople(List<Person> people) {\n        Platform.runLater(() -> personList.setAll(people));\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/NoteScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.model.Note;\nimport javafx.application.Platform;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\nimport javafx.stage.Popup;\n\nimport java.util.List;\n\npublic class NoteScene extends Scene {\n    private final NoteController noteController;\n    private final H05E01ClientApplication application;\n    private final FlowPane flowPane;\n\n    public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.noteController = noteController;\n        this.application = application;\n\n        flowPane = new FlowPane(10, 10);\n        var scrollPane = new ScrollPane(flowPane);\n        scrollPane.setPrefHeight(450);\n        scrollPane.setFitToWidth(true);\n\n        var vBox = new VBox(10, scrollPane, createButtonBox());\n\n        noteController.getAllNotes(this::setNotes);\n        this.setRoot(vBox);\n    }\n\n    public void setNotes(List<Note> notes) {\n        Platform.runLater(() -> {\n            var children = flowPane.getChildren();\n            children.setAll(notes.stream().map(this::createNoteView).toList());\n        });\n    }\n\n    private Node createNoteView(Note note) {\n        var name = new Text(note.getName());\n        name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n\n        var spacer = new Region();\n        HBox.setHgrow(spacer, Priority.ALWAYS);\n\n        var deleteButton = new Button(\"E\");\n        deleteButton.setTextFill(Color.ORANGE);\n        deleteButton.setOnAction(event -> showPopup(note));\n\n        var titleBox = new HBox(name, spacer, deleteButton);\n\n        var content = new Text(note.getContent());\n        var contentScrollPane = new ScrollPane(content);\n        contentScrollPane.setFitToWidth(true);\n        contentScrollPane.setFitToHeight(true);\n        contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n        contentScrollPane.getStyleClass().clear();\n        content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n\n        var vBox = new VBox(10, titleBox, contentScrollPane);\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setStyle(\"-fx-background-color:white;\");\n        vBox.setPadding(new Insets(5));\n        return vBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Note\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Note note) {\n        var popup = new Popup();\n        var nameTextField = new TextField();\n        nameTextField.setPromptText(\"Name\");\n        nameTextField.setText(note == null ? \"\" : note.getName());\n\n        var contentTextArea = new TextArea();\n        contentTextArea.setPromptText(\"Content\");\n        contentTextArea.setText(note == null ? \"\" : note.getContent());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newNote = note != null ? note : new Note();\n            newNote.setName(nameTextField.getText());\n            newNote.setContent(contentTextArea.getText());\n            if (note == null) {\n                noteController.addNote(newNote, this::setNotes);\n            } else {\n                noteController.editNote(newNote, this::setNotes);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            noteController.deleteNote(note, this::setNotes);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (note != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/HomeScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.VBox;\n\npublic class HomeScene extends Scene {\n    public HomeScene(H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n\n        var noteButton = new Button(\"Notes\");\n        noteButton.setOnAction(event -> application.showNoteScene());\n\n        var personButton = new Button(\"Persons\");\n        personButton.setOnAction(event -> application.showPersonScene());\n\n        var vBox = new VBox(10, noteButton, personButton);\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java",
            "content": "package de.tum.in.ase.eist.util;\n\npublic class PersonSortingOptions {\n    private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n    private SortField sortField = SortField.ID;\n\n    public PersonSortingOptions() {}\n\n    public PersonSortingOptions(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n        this.sortingOrder = sortingOrder;\n        this.sortField = sortField;\n    }\n\n    public SortingOrder getSortingOrder() {\n        return sortingOrder;\n    }\n\n    public void setSortingOrder(SortingOrder sortingOrder) {\n        this.sortingOrder = sortingOrder;\n    }\n\n    public SortField getSortField() {\n        return sortField;\n    }\n\n    public void setSortField(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public enum SortingOrder {\n        ASCENDING, DESCENDING\n    }\n\n    public enum SortField {\n        ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n    }\n}"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Note.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.Instant;\nimport java.util.UUID;\n\npublic class Note {\n    private UUID id;\n    private String name;\n    private String content;\n    private Instant creationDate;\n\n    public Note() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    public Instant getCreationDate() {\n        return creationDate;\n    }\n\n    public void setCreationDate(Instant creationDate) {\n        this.creationDate = creationDate;\n    }\n\n    @Override\n    public String toString() {\n        return \"Note{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", content='\" + content + '\\'' +\n                \", creationDate=\" + creationDate +\n                '}';\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Person.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic class Person {\n    private UUID id;\n    private String firstName;\n    private String lastName;\n    private LocalDate birthday;\n\n    public Person() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public LocalDate getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(LocalDate birthday) {\n        this.birthday = birthday;\n    }\n}\n"
          },
          {
            "path": "src/server/resources/application.properties",
            "content": "logging.level.ROOT=DEBUG\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class H05E01ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(H05E01ServerApplication.class, args);\n    }\n\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/PersonService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.stereotype.Service;\n\nimport java.util.*;\n\nimport static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n\n@Service\npublic class PersonService {\n  \t// do not change this\n    private final List<Person> persons;\n\n    public PersonService() {\n        this.persons = new ArrayList<>();\n    }\n\n    public Person savePerson(Person person) {\n        var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n        if (optionalPerson.isEmpty()) {\n            person.setId(UUID.randomUUID());\n            persons.add(person);\n            return person;\n        } else {\n            var existingPerson = optionalPerson.get();\n            existingPerson.setFirstName(person.getFirstName());\n            existingPerson.setLastName(person.getLastName());\n            existingPerson.setBirthday(person.getBirthday());\n            return existingPerson;\n        }\n    }\n\n    public void deletePerson(UUID personId) {\n        this.persons.removeIf(person -> person.getId().equals(personId));\n    }\n\n    public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n        if (sortingOptions == null) {\n            return this.persons.stream();\n        }\n        Stream<Person> sortedStream = this.persons.stream();\n        sortedList.sort((p1, p2) -> {\n            Person person1;\n            Person person2;\n            if (sortingOptions.getSortingOrder() == ASCENDING) {\n                person1 = p1;\n                person2 = p2;\n            } else {\n                person1 = p2;\n                person2 = p1;\n            }\n\n            return switch (sortingOptions.getSortField()) {\n                case ID -> person1.getId().compareTo(person2.getId());\n                case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n                case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n                case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n            };\n        });\n        return sortedList;\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/NoteService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.stereotype.Service;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Service\npublic class NoteService {\n    private final List<Note> notes;\n\n    public NoteService() {\n        this.notes = new ArrayList<>();\n    }\n\n    public Note saveNote(Note note) {\n        var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n        if (optionalNote.isEmpty()) {\n            note.setId(UUID.randomUUID());\n            note.setCreationDate(Instant.now());\n            notes.add(note);\n            return note;\n        } else {\n            var existingNote = optionalNote.get();\n            existingNote.setName(note.getName());\n            existingNote.setContent(note.getContent());\n            return existingNote;\n        }\n    }\n\n    public void deleteNote(UUID noteId) {\n        this.notes.removeIf(note -> note.getId().equals(noteId));\n    }\n\n    public List<Note> getAllNotes() {\n        return Collections.unmodifiableList(this.notes);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/PersonResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.service.PersonService;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class PersonResource {\n\n    private final PersonService personService;\n\n    public PersonResource(PersonService personService) {\n        this.personService = personService;\n    }\n\n    @GetMapping(\"persons\")\n    public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n                                                      @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n        return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n    }\n\n    @PostMapping(\"persons\")\n    public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n        if (person.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(personService.savePerson(person));\n    }\n\n    @PutMapping(\"persons/{personId}\")\n    public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n        if (!updatedPerson.getId().equals(personId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(personService.savePerson(updatedPerson));\n    }\n\n    @DeleteMapping(\"persons/{personId}\")\n    public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n        personService.deletePerson(personId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/NoteResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Note;\nimport de.tum.in.ase.eist.service.NoteService;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class NoteResource {\n\n    private final NoteService noteService;\n\n    public NoteResource(NoteService noteService) {\n        this.noteService = noteService;\n    }\n\n    @GetMapping(\"notes\")\n    public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n        if (!\"SecretKey\".equals(secret)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.getAllNotes());\n    }\n\n    @PostMapping(\"notes\")\n    public ResponseEntity<Note> createNote(@RequestBody Note note) {\n        if (note.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(note));\n    }\n\n    @PutMapping(\"notes/{noteId}\")\n    public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n        if (!updatedNote.getId().equals(noteId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(updatedNote));\n    }\n\n    @DeleteMapping(\"notes/{noteId}\")\n    public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n        noteService.deleteNote(noteId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          }
        ],
        "test_repository": [
          {
            "path": "readme.md",
            "content": "## Test Repository instructions\n\n#### Test tool & command\nTests will be run using the command `./gradlew clean test`.\n\n#### Project structure\nMake sure that the package structure of your test classes is equivalent to the package structure of your base and solution repository.\nOtherwise during the test run Gradle will not be able to find the imported classes in your test files.\n\nIn order to use classes from the template or solution repository in a test case, you have to add the respective repository\nfiles as a dependency to the test project. Follow this description for IntelliJ:\n\n1. Open the Test-Project first\n2. Select `File` -> `New` -> `Module from Existing Source`. Then choose the template project\nroot folder. Select the option `Import module from external model` and `Gradle` and press `Finish`.\n3. Repeat the previous step for the Solution-Project.\n4. Add the following line to `settings.gradle` inside the Test-Project:\n`includeBuild '<template-project-root-path'>` or `includeBuild '<solution-project-root-path>'` depending on which project you\nwant to use the source files for executing the test cases.\n5. Inside the `plugin`-block in the `build.gradle` inside the Test-Project, add the following line:\n`testImplementation(':H05E01-Layered-Architecture-Spring-Exercise')` or\n`testImplementation(':H05E01-Layered-Architecture-Spring-Solution')` depending on which project you want to use the source files for executing\nthe test cases.\n\n**Note**: Changes made in step 4 and step 5 must not be pushed to the remote repository as it can only be used\nfor editing all three projects in the local IDE.\n\n#### Sequential test runs\nIf you have decided to use the sequential test runs feature for this exercise, read the following instructions:\nWe use the folder structure of the test repository to differentiate structural and behavior tests:\n1. Structural test files must be placed in the folder \"structural\"\n2. Behavior test files must be placed in the folder \"behavior\"\n\nFiles in other folders will not be executed!\n\n#### Static Code Analysis\nThe build.gradle contains dependencies for the execution of static code analysis, if the option is active for this programming exercise.\n"
          },
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'checkstyle'\n    id 'pmd'\n    id 'com.github.spotbugs' version '5.0.6'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id \"com.teamscale\" version \"23.0.0\"\n}\n\napply plugin: 'java'\ngroup = 'de.tum.in.ase.eist'\nsourceCompatibility = 17\nversion = '1.0.0'\ncompileJava.options.encoding = 'UTF-8'\ncompileTestJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    testImplementation 'de.tum.in.ase:artemis-java-test-sandbox:1.9.2'\n    testImplementation 'com.squareup.okhttp3:okhttp:4.10.0-RC1'\n    testImplementation 'com.squareup.okhttp3:mockwebserver:4.10.0-RC1'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test:2.6.7'\n\n    testImplementation 'com.fasterxml.jackson.core:jackson-databind:2.13.2.2'\n    testImplementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.13.2'\n\n    testImplementation 'org.springframework.boot:spring-boot-starter-web:2.6.7'\n    testImplementation 'org.springframework.boot:spring-boot-starter-webflux:2.6.7'\n\n    testImplementation 'org.mockito:mockito-core:4.5.1'\n    testImplementation 'net.bytebuddy:byte-buddy:1.12.10'\n\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web:2.6.7'\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux:2.6.7'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\ndef studentOutputDir = sourceSets.main.java.destinationDirectory.get()\ndef scaConfigDirectory = \"$projectDir/staticCodeAnalysisConfig\"\n\nsourceSets {\n    common {\n        java {\n            srcDir 'assignment/src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'assignment/src/server/java'\n        }\n        resources {\n            srcDir 'assignment/src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'assignment/src/client/java'\n        }\n        resources {\n            srcDir 'assignment/src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n\n    test {\n        java {\n            srcDir 'test'\n        }\n        resources {\n            srcDir 'test'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n        compileClasspath += server.output\n        runtimeClasspath += server.output\n        compileClasspath += client.output\n        runtimeClasspath += client.output\n    }\n}\n\ntest {\n    defaultCharacterEncoding = 'UTF-8'\n    useJUnitPlatform()\n}\n\n\ncheckstyle {\n    configFile = file(\"$scaConfigDirectory/checkstyle-configuration.xml\")\n    ignoreFailures = true\n    // exclude the test files\n    checkstyleTest.enabled = false\n    checkstyleServer.reports {\n        xml {\n            enabled = true\n            outputLocation = file('target/checkstyle-result.xml')\n        }\n        html.enabled = false\n    }\n}\n\nspotbugs {\n    excludeFilter = file(\"$scaConfigDirectory/spotbugs-exclusions.xml\")\n    ignoreFailures = true\n    // exclude the test files\n    spotbugsTest.enabled = false\n    spotbugsClient.reports {\n        add(spotbugsServer)\n        add(spotbugsCommon)\n        xml {\n            enabled = true\n            outputLocation = file('target/spotbugsXml.xml')\n        }\n        html.enabled = false\n    }\n}\n\npmd {\n    ruleSets = [\"$scaConfigDirectory/pmd-configuration.xml\"]\n    rulesMinimumPriority = 5\n    ignoreFailures = true\n    // exclude the test files\n    pmdTest.enabled = false\n    pmdServer.reports {\n        xml {\n            enabled = true\n            outputLocation = file('target/pmd.xml')\n        }\n    }\n}\n\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n\ntasks.register('tiaTests', com.teamscale.TestImpacted) {\n    systemProperty \"ares.security.trustedpackages\", \"okhttp3,com.teamscale,retrofit2,shadow,com.squareup,okio\"\n    useJUnitPlatform()\n    filter {\n        excludeTestsMatching \"AttributeTest\"\n        excludeTestsMatching \"ConstructorTest\"\n        excludeTestsMatching \"ClassTest\"\n        excludeTestsMatching \"MethodTest\"\n    }\n    jacoco {\n        includes = [\"de.tum.in.ase.eist.*\"]\n    }\n}\n\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Spring-Tests'\n"
          },
          {
            "path": "staticCodeAnalysisConfig/spotbugs-exclusions.xml",
            "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<FindBugsFilter>\n    <!--\n    Spotbugs uses filter files to configure the reporting of bugs. Add the path of the filter file to the configuration\n    of the Spotbugs Maven plugin in the Project Object Model (POM).\n    Use <includeFilterFile>/<excludeFilterFile> to include/exclude all bugs matching the criteria defined in such a file.\n    For more information about filters consult the official Spotbugs documentation https://spotbugs.readthedocs.io/en/stable/filter.html#.\n    The examples below show some filter options.\n    -->\n\n    <!-- In case of using Records from Java 16, the equals check should get disabled for that record\n    <Match>\n        <Class name=\"Package.NameOfRecord\" />\n        <Bug code=\"EQ_UNUSUAL\" />\n    </Match> -->\n\n    <!-- Matches a whole class\n    <Match>\n        <Class name=\"com.foobar.ClassNotToBeAnalyzed\" />\n    </Match> -->\n\n    <!-- Matches specific rules in a class\n    <Match>\n        <Class name=\"com.foobar.ClassWithSomeBugsMatched\" />\n        <Bug code=\"DE,UrF,SIC\" />\n    </Match> -->\n\n    <!-- Match all XYZ violations\n    <Match>\n        <Bug code=\"XYZ\" />\n    </Match>  -->\n\n    <!-- Match a method with a dead local store false positive (medium priority)\n    <Match>\n        <Class name=\"com.foobar.MyClass\" />\n        <Method name=\"someMethod\" />\n        <Bug pattern=\"DLS_DEAD_LOCAL_STORE\" />\n        <Priority value=\"2\" />\n    </Match> -->\n\n    <!-- All bugs in test classes, except for JUnit-specific bugs\n    <Match>\n        <Class name=\"~.*\\.*Test\" />\n        <Not>\n            <Bug code=\"IJU\" />\n        </Not>\n    </Match> -->\n    <Match>\n        <Bug code=\"EI\"/>\n    </Match>\n    <Match>\n        <Bug code=\"EI2\"/>\n    </Match>\n</FindBugsFilter>\n"
          },
          {
            "path": "staticCodeAnalysisConfig/pmd-configuration.xml",
            "content": "<ruleset name=\"Custom Rules\"\n         xmlns=\"http://pmd.sourceforge.net/ruleset/2.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd\">\n\n    <description>\n        Default PMD configuration for Artemis programming exercises based on the default PMD Maven configuration.\n        Consult https://pmd.github.io/latest/pmd_userdocs_making_rulesets.html for more information.\n    </description>\n\n    <!-- Use patterns to exclude/include files for this ruleset\n    <exclude-pattern>.*/some/package/.*</exclude-pattern>\n    <include-pattern>.*/some/package/ButNotThisClass.*</include-pattern>\n    -->\n\n    <!-- Bulk adding all rules of all categories. Does not add deprecated rules. Single rule exclusions are possible.\n    <rule ref=\"category/java/documentation.xml\">\n        <exclude name=\"RuleName\"/>\n    </rule> -->\n\n    <!-- Best Practices -->\n    <rule ref=\"category/java/bestpractices.xml/AvoidUsingHardCodedIP\"/>\n    <rule ref=\"category/java/bestpractices.xml/CheckResultSet\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedImports\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedFormalParameter\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedLocalVariable\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedPrivateField\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedPrivateMethod\"/>\n\n    <!-- Code Style -->\n    <rule ref=\"category/java/codestyle.xml/DontImportJavaLang\"/>\n    <rule ref=\"category/java/codestyle.xml/DuplicateImports\"/>\n    <rule ref=\"category/java/codestyle.xml/ExtendsObject\"/>\n    <rule ref=\"category/java/codestyle.xml/ForLoopShouldBeWhileLoop\"/>\n    <rule ref=\"category/java/codestyle.xml/TooManyStaticImports\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryFullyQualifiedName\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryModifier\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryReturn\"/>\n    <rule ref=\"category/java/codestyle.xml/UselessParentheses\"/>\n    <rule ref=\"category/java/codestyle.xml/UselessQualifiedThis\"/>\n\n    <!-- Design -->\n    <rule ref=\"category/java/design.xml/CollapsibleIfStatements\"/>\n    <rule ref=\"category/java/design.xml/SimplifiedTernary\"/>\n    <rule ref=\"category/java/design.xml/UselessOverridingMethod\"/>\n\n    <!-- Error Prone -->\n    <rule ref=\"category/java/errorprone.xml/AvoidBranchingStatementAsLastInLoop\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidDecimalLiteralsInBigDecimalConstructor\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidMultipleUnaryOperators\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidUsingOctalValues\"/>\n    <rule ref=\"category/java/errorprone.xml/BrokenNullCheck\"/>\n    <rule ref=\"category/java/errorprone.xml/CheckSkipResult\"/>\n    <rule ref=\"category/java/errorprone.xml/ClassCastExceptionWithToArray\"/>\n    <rule ref=\"category/java/errorprone.xml/DontUseFloatTypeForLoopIndices\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyCatchBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyFinallyBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyIfStmt\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyInitializer\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyStatementBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyStatementNotInLoop\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptySwitchStatements\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptySynchronizedBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyTryBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyWhileStmt\"/>\n    <rule ref=\"category/java/errorprone.xml/ImportFromSamePackage\"/>\n    <rule ref=\"category/java/errorprone.xml/JumbledIncrementer\"/>\n    <rule ref=\"category/java/errorprone.xml/MisplacedNullCheck\"/>\n    <rule ref=\"category/java/errorprone.xml/OverrideBothEqualsAndHashcode\"/>\n    <rule ref=\"category/java/errorprone.xml/ReturnFromFinallyBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/UnconditionalIfStatement\"/>\n    <rule ref=\"category/java/errorprone.xml/UnnecessaryConversionTemporary\"/>\n    <rule ref=\"category/java/errorprone.xml/UnusedNullCheckInEquals\"/>\n    <rule ref=\"category/java/errorprone.xml/UselessOperationOnImmutable\"/>\n\n    <!-- Multi Threading -->\n    <rule ref=\"category/java/multithreading.xml/AvoidThreadGroup\"/>\n    <rule ref=\"category/java/multithreading.xml/DontCallThreadRun\"/>\n    <rule ref=\"category/java/multithreading.xml/DoubleCheckedLocking\"/>\n\n    <!-- Performance -->\n    <rule ref=\"category/java/performance.xml/BigIntegerInstantiation\"/>\n    <rule ref=\"category/java/performance.xml/BooleanInstantiation\"/>\n\n    <!-- Security -->\n    <rule ref=\"category/java/security.xml\"/>\n\n    <!-- Documentation, already checked by CheckStyle -->\n\n\n</ruleset>\n"
          },
          {
            "path": "staticCodeAnalysisConfig/checkstyle-configuration.xml",
            "content": "<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n    \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n    \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n\n<!--\n  Artemis default Checkstyle configuration based on the sun coding conventions from:\n    - the Java Language Specification at\n      https://docs.oracle.com/javase/specs/jls/se11/html/index.html\n    - the Sun Code Conventions at https://www.oracle.com/java/technologies/javase/codeconventions-contents.html\n    - the Javadoc guidelines at\n      https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html\n    - the JDK Api documentation https://docs.oracle.com/en/java/javase/11/\n    - some best practices\n  Most Checks are configurable, be sure to consult the documentation.\n  To completely disable a check, just comment it out or delete it from the file.\n  Consult the docs for more information https://checkstyle.org.\n-->\n\n<module name=\"Checker\">\n    <property name=\"severity\" value=\"error\"/>\n\n    <property name=\"fileExtensions\" value=\"java, properties, xml\"/>\n\n    <!-- Excludes all 'module-info.java' files              -->\n    <!-- See https://checkstyle.org/config_filefilters.html -->\n    <module name=\"BeforeExecutionExclusionFileFilter\">\n        <property name=\"fileNamePattern\" value=\"module\\-info\\.java$\"/>\n    </module>\n\n    <!-- Checks that a package-info.java file exists for each package.     -->\n    <!-- See https://checkstyle.org/config_javadoc.html#JavadocPackage -->\n    <!-- <module name=\"JavadocPackage\"/> -->\n\n    <!-- Checks whether files end with a new line.                        -->\n    <!-- See https://checkstyle.org/config_misc.html#NewlineAtEndOfFile -->\n    <module name=\"NewlineAtEndOfFile\"/>\n\n    <!-- Checks that property files contain the same keys.         -->\n    <!-- See https://checkstyle.org/config_misc.html#Translation -->\n    <module name=\"Translation\"/>\n\n    <!-- Checks for Size Violations.                    -->\n    <!-- See https://checkstyle.org/config_sizes.html -->\n    <module name=\"FileLength\"/>\n    <module name=\"LineLength\">\n        <property name=\"fileExtensions\" value=\"java\"/>\n        <property name=\"max\" value=\"150\"/>\n        <property name=\"ignorePattern\" value=\"^package.*|^import.*|a href|href|http://|https://|ftp://\"/>\n    </module>\n\n    <!-- Miscellaneous other checks.                   -->\n    <!-- See https://checkstyle.org/config_misc.html -->\n    <module name=\"RegexpSingleline\">\n        <property name=\"format\" value=\"\\s+$\"/>\n        <property name=\"minimum\" value=\"0\"/>\n        <property name=\"maximum\" value=\"0\"/>\n        <property name=\"message\" value=\"Line has trailing spaces.\"/>\n    </module>\n\n    <!-- Checks for Headers                                -->\n    <!-- See https://checkstyle.org/config_header.html   -->\n    <!-- <module name=\"Header\"> -->\n    <!--   <property name=\"headerFile\" value=\"${checkstyle.header.file}\"/> -->\n    <!--   <property name=\"fileExtensions\" value=\"java\"/> -->\n    <!-- </module> -->\n\n    <module name=\"TreeWalker\">\n\n        <!-- Checks for Javadoc comments.                     -->\n        <!-- See https://checkstyle.org/config_javadoc.html -->\n        <module name=\"InvalidJavadocPosition\"/>\n        <module name=\"JavadocMethod\"/>\n        <module name=\"JavadocType\"/>\n        <!--<module name=\"JavadocVariable\"/> -->\n        <module name=\"JavadocStyle\"/>\n        <module name=\"MissingJavadocMethod\">\n            <property name=\"allowMissingPropertyJavadoc\" value=\"true\"/>\n            <property name=\"allowedAnnotations\" value=\"Override,Test\"/>\n            <property name=\"tokens\" value=\"METHOD_DEF,ANNOTATION_FIELD_DEF,COMPACT_CTOR_DEF\"/>\n        </module>\n\n        <!-- Checks for Naming Conventions.                  -->\n        <!-- See https://checkstyle.org/config_naming.html -->\n        <module name=\"ConstantName\"/>\n        <module name=\"LocalFinalVariableName\"/>\n        <module name=\"LocalVariableName\"/>\n        <module name=\"MemberName\"/>\n        <module name=\"MethodName\"/>\n        <!-- <module name=\"PackageName\"/> -->\n        <module name=\"ParameterName\"/>\n        <module name=\"StaticVariableName\"/>\n        <module name=\"TypeName\"/>\n\n        <!-- Checks for imports                              -->\n        <!-- See https://checkstyle.org/config_imports.html -->\n        <!-- <module name=\"AvoidStarImport\"/> -->\n        <module name=\"IllegalImport\"/> <!-- defaults to sun.* packages -->\n        <module name=\"RedundantImport\"/>\n        <module name=\"UnusedImports\">\n            <property name=\"processJavadoc\" value=\"false\"/>\n        </module>\n\n        <!-- Checks for Size Violations.                    -->\n        <!-- See https://checkstyle.org/config_sizes.html -->\n        <module name=\"MethodLength\"/>\n        <module name=\"ParameterNumber\"/>\n\n        <!-- Checks for whitespace                               -->\n        <!-- See https://checkstyle.org/config_whitespace.html -->\n        <module name=\"EmptyForIteratorPad\"/>\n        <module name=\"GenericWhitespace\"/>\n        <module name=\"MethodParamPad\"/>\n        <module name=\"NoWhitespaceAfter\"/>\n        <module name=\"NoWhitespaceBefore\"/>\n        <module name=\"OperatorWrap\"/>\n        <module name=\"ParenPad\"/>\n        <module name=\"TypecastParenPad\"/>\n        <module name=\"WhitespaceAfter\"/>\n        <module name=\"WhitespaceAround\"/>\n\n        <!-- Modifier Checks                                    -->\n        <!-- See https://checkstyle.org/config_modifiers.html -->\n        <module name=\"ModifierOrder\"/>\n        <module name=\"RedundantModifier\"/>\n\n        <!-- Checks for blocks. You know, those {}'s         -->\n        <!-- See https://checkstyle.org/config_blocks.html -->\n        <module name=\"AvoidNestedBlocks\"/>\n        <module name=\"EmptyBlock\"/>\n        <!-- <module name=\"LeftCurly\"/> -->\n        <module name=\"NeedBraces\"/>\n        <!-- <module name=\"RightCurly\"/> -->\n\n        <!-- Checks for common coding problems               -->\n        <!-- See https://checkstyle.org/config_coding.html -->\n        <module name=\"EmptyStatement\"/>\n        <module name=\"EqualsHashCode\"/>\n        <module name=\"HiddenField\">\n            <property name=\"ignoreConstructorParameter\" value=\"true\"/>\n            <property name=\"ignoreSetter\" value=\"true\"/>\n            <property name=\"setterCanReturnItsClass\" value=\"true\"/>\n        </module>\n        <module name=\"IllegalInstantiation\"/>\n        <module name=\"InnerAssignment\"/>\n        <module name=\"MagicNumber\"/>\n        <module name=\"MissingSwitchDefault\"/>\n        <module name=\"MultipleVariableDeclarations\"/>\n        <module name=\"SimplifyBooleanExpression\"/>\n        <module name=\"SimplifyBooleanReturn\"/>\n\n        <!-- Checks for class design                         -->\n        <!-- See https://checkstyle.org/config_design.html -->\n        <!--<module name=\"DesignForExtension\"/> -->\n        <module name=\"FinalClass\"/>\n        <module name=\"InterfaceIsType\"/>\n        <module name=\"VisibilityModifier\"/>\n\n        <!-- Miscellaneous other checks.                   -->\n        <!-- See https://checkstyle.org/config_misc.html -->\n        <module name=\"ArrayTypeStyle\"/>\n        <!-- <module name=\"FinalParameters\"/> -->\n        <!-- <module name=\"TodoComment\"/> -->\n        <module name=\"UpperEll\"/>\n\n    </module>\n\n</module>\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/PersonControllerTest.java",
            "content": "package de.tum.in.ase.eist;\n\nimport static de.tum.in.ase.eist.H05E01Client.*;\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport okhttp3.mockwebserver.MockResponse;\nimport okhttp3.mockwebserver.MockWebServer;\nimport okhttp3.mockwebserver.RecordedRequest;\nimport org.junit.jupiter.api.*;\nimport org.mockito.ArgumentCaptor;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\nimport java.util.function.Consumer;\nimport java.util.concurrent.TimeUnit;\n\n@H05E01\npublic class PersonControllerTest {\n\n    private static MockWebServer mockWebServer;\n    private static ObjectMapper objectMapper;\n\n    private Object personController;\n    private Person person1;\n    private Person person2;\n\n    @BeforeAll\n    static void setUp() {\n        objectMapper = new ObjectMapper();\n        objectMapper.findAndRegisterModules();\n    }\n\n    @BeforeEach\n    void initialize() throws Exception {\n        // restarting the server for every test is required because otherwise tests interfere with each other\n        mockWebServer = new MockWebServer();\n        mockWebServer.start(8080);\n        personController = createPersonController();\n\n        person1 = new Person();\n        var uuid1 = UUID.randomUUID();\n        person1.setId(uuid1);\n        person1.setFirstName(\"Max\");\n        person1.setLastName(\"Musterfrau\");\n        person1.setBirthday(LocalDate.ofYearDay(2000, 125));\n\n        person2 = new Person();\n        var uuid2 = UUID.randomUUID();\n        person2.setId(uuid2);\n        person2.setFirstName(\"Erika\");\n        person2.setLastName(\"Mustermann\");\n        person2.setBirthday(LocalDate.ofYearDay(1999, 80));\n    }\n\n    @AfterEach\n    void afterEach() throws Exception {\n        mockWebServer.shutdown();\n    }\n\n    @Test\n    @DisplayName(\"Add single valid persons (Client)\")\n    public void testAddSingleValidPerson() throws Exception {\n        testAddPerson(200, person1, List.of(person1));\n    }\n\n    @Test\n    @DisplayName(\"Add multiple valid persons (Client)\")\n    public void testAddMultipleValidPersons() throws Exception {\n        testAddPerson(200, person1, new ArrayList<>(List.of(person1)));\n        testAddPerson(200, person2, new ArrayList<>(List.of(person1, person2)));\n    }\n\n    @Test\n    @DisplayName(\"Add single invalid person (Client)\")\n    public void testAddInvalidPerson() throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(400)\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n\n        invokeAddPerson(personController, person1, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n        Thread.sleep(350);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::createPerson did not send a request.\");\n        }\n\n        verify(consumer, never()).accept(any());\n    }\n\n    @Test\n    @DisplayName(\"Edit single person (Client)\")\n    public void testEditSinglePerson() throws Exception {\n        Person updatedPerson = new Person();\n        updatedPerson.setId(person1.getId());\n        updatedPerson.setFirstName(person1.getFirstName());\n        updatedPerson.setLastName(\"Updated Last Name\");\n        updatedPerson.setBirthday(person1.getBirthday());\n\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1)));\n\n        testUpdatePerson(200, updatedPerson, List.of(updatedPerson));\n    }\n\n    @Test\n    @DisplayName(\"Edit single person for multiple existing persons (Client)\")\n    public void testEditSinglePersonForMultipleExistingPersons() throws Exception {\n        Person updatedPerson = new Person();\n        updatedPerson.setId(person1.getId());\n        updatedPerson.setFirstName(person1.getFirstName());\n        updatedPerson.setLastName(\"Updated Last Name\");\n        updatedPerson.setBirthday(person1.getBirthday());\n\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        testUpdatePerson(200, updatedPerson, List.of(updatedPerson, person2));\n    }\n\n    @Test\n    @DisplayName(\"Edit invalid person (Client)\")\n    public void testEditInvalidPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(400)\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n\n        invokeUpdatePerson(personController, person1, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n        Thread.sleep(350);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::updatePerson did not send a request.\");\n        }\n        verify(consumer, times(0));\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person 1 (Client)\")\n    public void testDeleteOnlyExistingPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1)));\n\n        testDeletePerson(200, person1, List.of());\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person 2 (Client)\")\n    public void testDeletePerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        testDeletePerson(200, person1, List.of(person2));\n    }\n\n    @Test\n    @DisplayName(\"Retrieve all persons 1 (Client)\")\n    public void testGetAllPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        var sortingOptions = new PersonSortingOptions();\n        sortingOptions.setSortField(PersonSortingOptions.SortField.ID);\n        sortingOptions.setSortingOrder(PersonSortingOptions.SortingOrder.ASCENDING);\n\n        testGetAllPersons(200, sortingOptions, List.of(person2, person1));\n    }\n\n    @Test\n    @DisplayName(\"Retrieve all persons 2 (Client)\")\n    public void testGetAllPersonsResetsSavedResult() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        var sortingOptions = new PersonSortingOptions();\n\n        sortingOptions.setSortField(PersonSortingOptions.SortField.ID);\n        sortingOptions.setSortingOrder(PersonSortingOptions.SortingOrder.ASCENDING);\n\n        testGetAllPersons(200, sortingOptions, List.of());\n    }\n\n    @Test\n    @DisplayName(\"Sort options for retrieving all persons (Client)\")\n    public void testSortingOptions() throws Exception {\n        for (var sortField : PersonSortingOptions.SortField.values()) {\n            for (var sortOrder: PersonSortingOptions.SortingOrder.values()) {\n                // this should not be required but leaving out may break some student's submission while this is the\n                // real-life behavior\n                mockWebServer.enqueue(new MockResponse()\n                        .setResponseCode(200)\n                        .setBody(objectMapper.writeValueAsString(List.of()))\n                        .setHeader(\"Content-Type\", \"application/json\"));\n\n                var sortOptions = new PersonSortingOptions();\n                sortOptions.setSortField(sortField);\n                sortOptions.setSortingOrder(sortOrder);\n                invokeGetAllPersons(personController, sortOptions, (res) -> {});\n\n\t            RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n\t            if(mockWebServer.getRequestCount() == 0) {\n                    fail(\"PersonController::createPerson did not send a request.\");\n                }\n\n\t\t\t\tThread.sleep(350);\n                assertGetAllPersonRequest(recordedRequest, sortOptions);\n            }\n        }\n    }\n\n    private void testAddPerson(int mockResponseCode, Person person, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(person))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeAddPerson(personController, person, consumer);\n\n        RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::createPerson did not send a request.\");\n        }\n        Thread.sleep(350);\n\n        verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"addPerson\");\n\n        assertEquals(\"POST\", recordedRequest.getMethod(), \"PersonController::createPerson did not send a message with the correct request type\");\n        assertEquals(\"/persons\", recordedRequest.getPath(), \"PersonController::createPerson send a message to the wrong correct endpoint path.\");\n        assertEquals(objectMapper.writeValueAsString(person), recordedRequest.getBody().readUtf8(), \"PersonController::createPerson send a message with the wrong response body.\");\n    }\n\n    private void testUpdatePerson(int mockResponseCode, Person updatedPerson, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(updatedPerson))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeUpdatePerson(personController, updatedPerson, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::updatePerson did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t    verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"updatePerson\");\n\n\n        assertEquals(\"PUT\", recordedRequest.getMethod(), \"PersonController::updatePerson did not send a message with the correct request type.\");\n        assertEquals(\"/persons/\" + updatedPerson.getId(), recordedRequest.getPath(),\"PersonController::updatePerson send a message to the wrong correct endpoint path.\");\n        assertEquals(objectMapper.writeValueAsString(updatedPerson), recordedRequest.getBody().readUtf8(), \"PersonController::createPerson send a message with the wrong response body.\");\n    }\n\n    private void testDeletePerson(int mockResponseCode, Person deletedPerson, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(deletedPerson))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeDeletePerson(personController, deletedPerson, consumer);\n\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::deletePerson did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t    verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"deletePerson\");\n\n        assertEquals(\"DELETE\", recordedRequest.getMethod(), \"PersonController::deletePerson did not send a message with the correct request type.\");\n        assertEquals(\"/persons/\" + deletedPerson.getId(), recordedRequest.getPath(),\"PersonController::deletePerson send a message to the wrong correct endpoint path.\");\n        assertEquals(\"\", recordedRequest.getBody().readUtf8(), \"PersonController::deletePerson send a message with the wrong response body.\");\n    }\n\n    private void testGetAllPersons(int mockResponseCode, PersonSortingOptions sortingOptions, List<Person> allPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(allPersons))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeGetAllPersons(personController, sortingOptions, consumer);\n\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::getAllPersons did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t\tverify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(allPersons, argument.getValue(), \"getAllPersons\");\n\n        assertGetAllPersonRequest(recordedRequest, null);\n    }\n\n    private void assertGetAllPersonRequest(RecordedRequest recordedRequest, PersonSortingOptions sortingOptions) {\n        assertEquals(\"GET\", recordedRequest.getMethod(), \"PersonController::getAllPersons did not send a message with the correct request type.\");\n        if (sortingOptions == null) {\n            if (!recordedRequest.getPath().startsWith(\"/persons\")) {\n                fail(\"PersonController::getAllPersons send a message to the wrong correct endpoint path.\");\n            }\n        } else {\n            if (!recordedRequest.getPath().startsWith(\"/persons\")) {\n                fail(\"PersonController::getAllPersons send a message to the wrong correct endpoint path.\");\n            }\n            if (recordedRequest.getRequestUrl().queryParameterNames().size() != 2 || !recordedRequest.getRequestUrl().queryParameterNames().containsAll(List.of(\"sortField\", \"sortingOrder\"))) {\n                fail(\"PersonController::getAllPersons send a message without the correct sorting options.\");\n            }\n        }\n        assertEquals(\"\", recordedRequest.getBody().readUtf8(), \"PersonController::getAllPersons send a message with the wrong response body.\");\n    }\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/H05E01.java",
            "content": "package de.tum.in.ase.eist;\n\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\n\nimport de.tum.in.test.api.*;\nimport de.tum.in.test.api.jupiter.JupiterIOExtension;\nimport de.tum.in.test.api.jupiter.JupiterStrictTimeoutExtension;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\n@ExtendWith(JupiterIOExtension.class)\n@ExtendWith(JupiterStrictTimeoutExtension.class)\n@StrictTimeout(6)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface H05E01 {\n    // marker\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/H05E01Client.java",
            "content": "package de.tum.in.ase.eist;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.assertj.core.api.Assertions.assertThat;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.test.api.util.ReflectionTestUtils;\n\nimport java.lang.reflect.Field;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.function.Consumer;\n\npublic class H05E01Client {\n\n    private static final String PERSON_CONTROLLER_FULL_NAME = \"de.tum.in.ase.eist.controller.PersonController\";\n\n    public static Object createPersonController() {\n        return ReflectionTestUtils.newInstance(ReflectionTestUtils.getConstructor(ReflectionTestUtils.getClazz(PERSON_CONTROLLER_FULL_NAME)));\n    }\n\n    public static void invokeAddPerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"addPerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeUpdatePerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"updatePerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeDeletePerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"deletePerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeGetAllPersons(Object personController, PersonSortingOptions sortingOptions, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"getAllPersons\", PersonSortingOptions.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, sortingOptions, personConsumer);\n    }\n\n    public static void assertPersonListEquals(List<Person> expectedList, List<Person> actualList, String methodName) {\n        assertNotNull(actualList, \"The resulting list of persons was null after invoking PersonController::\" + methodName + \".\");\n        assertEquals(expectedList.size(), actualList.size(), \"The resulting list of persons does not have the correct size after invoking PersonController::\" + methodName + \".\");\n\n        boolean wrongOrder = false;\n\n        for (int i=0; i<expectedList.size(); i++) {\n            if(!checkIfPersonEqual(expectedList.get(i), actualList.get(i), false)) {\n                wrongOrder = true;\n                break;\n            }\n        }\n\n        if(!wrongOrder) return;\n\n        var sortedExpectedList = expectedList.stream().sorted((a, b) -> {\n            if (a.getFirstName() == null) {\n                return -1;\n            } else if (b.getFirstName() == null) {\n                return 1;\n            } else {\n                return a.getFirstName().compareTo(b.getFirstName());\n            }\n        }).toList();\n\n        var sortedActualList = expectedList.stream().sorted((a, b) -> {\n            if (a.getFirstName() == null) {\n                return -1;\n            } else if (b.getFirstName() == null) {\n                return 1;\n            } else {\n                return a.getFirstName().compareTo(b.getFirstName());\n            }\n        }).toList();\n\n        for (int i = 0; i < sortedExpectedList.size(); i++) {\n            if(checkIfPersonEqual(sortedExpectedList.get(i), sortedActualList.get(i), false)) {\n                fail(\"The resulting list of persons is not sorted correctly after invoking PersonController::\" + methodName + \".\");\n            }\n        }\n\n        fail(\"The resulting list of persons does not contain the correct persons after invoking PersonController::\" + methodName + \".\");\n    }\n\n    public static void setPersonControllerPersons(Object personController, List<Person> personList) {\n        Field persons;\n        Object fieldValue;\n        List<Person> reflectedPersonList;\n        try {\n            persons = personController.getClass().getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            fieldValue = persons.get(personController);\n            assertThat(fieldValue).isInstanceOf(List.class);\n\n            reflectedPersonList = (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The implementation of the attribute 'persons' in class 'PersonController' is not correct.\");\n            return;\n        }\n        try {\n            reflectedPersonList.removeIf(p -> true);\n            reflectedPersonList.addAll(personList);\n        } catch (Exception e) {\n            fail(\"An unexpected error has occurred. Contact your tutor.\");\n        }\n    }\n\n    public static boolean checkIfPersonEqual(Person expectedPerson, Person actualPerson, boolean ignoreId) {\n        var res = ignoreId || Objects.equals(expectedPerson.getId(), actualPerson.getId());\n        return res && Objects.equals(expectedPerson.getFirstName(), actualPerson.getFirstName())\n                && Objects.equals(expectedPerson.getLastName(), actualPerson.getLastName())\n                && Objects.equals(expectedPerson.getBirthday(), actualPerson.getBirthday());\n    }\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/PersonResourceTest.java",
            "content": "package de.tum.in.ase.eist;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.rest.PersonResource;\nimport de.tum.in.ase.eist.service.PersonService;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.NoSuchBeanDefinitionException;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.test.annotation.DirtiesContext;\nimport org.springframework.test.web.servlet.MockMvc;\n\nimport java.lang.reflect.Field;\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\n\nimport static de.tum.in.ase.eist.H05E01Client.checkIfPersonEqual;\nimport static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.fail;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\n\n@H05E01\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\n// this is required to reset the persons saved in PersonService\n@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)\n@AutoConfigureMockMvc\npublic class PersonResourceTest {\n\n    @Autowired\n    private MockMvc mvc;\n\n    @Autowired\n    private ApplicationContext context;\n\n    private static ObjectMapper objectMapper;\n    private static Object personService;\n\n    private Person person1;\n    private Person person2;\n\n    @BeforeAll\n    static void setUp() {\n        objectMapper = new ObjectMapper();\n        objectMapper.findAndRegisterModules();\n    }\n\n    @BeforeEach\n    void initialize() {\n        try {\n            personService = context.getBean(PersonService.class);\n        } catch (NoSuchBeanDefinitionException e) {\n            fail(\"PersonService is not defined correctly as a Spring-Service.\");\n        }\n\n        try {\n            context.getBean(PersonResource.class);\n        } catch (NoSuchBeanDefinitionException e) {\n            fail(\"PersonResource is not defined correctly as a Spring-Controller.\");\n        }\n\n        person1 = new Person();\n        person1.setFirstName(\"Max\");\n        person1.setLastName(\"Musterfrau\");\n        person1.setBirthday(LocalDate.ofYearDay(2000, 125));\n\n        person2 = new Person();\n        person2.setFirstName(\"Erika\");\n        person2.setLastName(\"Mustermann\");\n        person2.setBirthday(LocalDate.ofYearDay(1999, 80));\n    }\n\n    @Test\n    @DisplayName(\"Create valid person (Server)\")\n    public void testAddSingleUser() throws Exception {\n        var response = this.mvc.perform(\n                post(\"/persons\")\n                        .content(objectMapper.writeValueAsString(person1))\n                        .contentType(\"application/json\")).andReturn().getResponse();\n\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint POST /persons has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::createPerson did not return the correct status code\");\n        assertEquals(\"application/json\", response.getContentType());\n\n        var personsInService = getAllPersonsByReflection();\n        if (personsInService == null || personsInService.size() != 1) {\n            fail(\"After calling PersonResource::createPerson, PersonResource::persons contain the wrong amount of persons.\");\n        }\n        var createdPerson = personsInService.get(0);\n\n        var responseEntity = objectMapper.readValue(response.getContentAsString(), Person.class);\n        if (!checkIfPersonEqual(createdPerson, responseEntity, true)) {\n            fail(\"PersonResource::createPerson did not return the correct person as response body.\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"Create invalid person (Server)\")\n    public void testAddInvalidPerson() throws Exception {\n        var uuid = UUID.randomUUID();\n        person1.setId(uuid);\n\n        var response = this.mvc.perform(\n                        post(\"/persons\")\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint POST /persons has not been implemented.\");\n        }\n        assertEquals(400, response.getStatus(), \"PersonResource::createPerson did not return the correct status code for an invalid request body.\");\n    }\n\n    @Test\n    @DisplayName(\"Update existing person (Server)\")\n    public void testUpdateExistingPerson() throws Exception {\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        person1.setFirstName(\"Changed\");\n        person1.setLastName(\"Name\");\n\n        var response = this.mvc.perform(\n                        put(\"/persons/\" + person1.getId())\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint PUT /persons/:personId has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::updatePerson did not return the correct status code.\");\n        assertEquals(\"application/json\", response.getContentType());\n\n        var personsInService = getAllPersonsByReflection();\n        if (personsInService == null || personsInService.size() != 1) {\n            fail(\"After calling PersonResource::updatePerson, PersonResource::persons contain the wrong amount of persons.\");\n        }\n        var updatedPerson = personsInService.get(0);\n\n        var responseEntity = objectMapper.readValue(response.getContentAsString(), Person.class);\n        if (!checkIfPersonEqual(updatedPerson, responseEntity, false)) {\n            fail(\"PersonResource::updatePerson did not return the correct person as response body.\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"Update person with mismatching IDs (Server)\")\n    public void testUpdatePersonWithIdMismatch() throws Exception {\n        var mismatchedId = UUID.randomUUID();\n\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        var response = this.mvc.perform(\n                        put(\"/persons/\" + mismatchedId)\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint PUT /persons/:personId has not been implemented.\");\n        }\n        assertEquals(400, response.getStatus(), \"PersonResource::updatePerson did not return the correct status code for an invalid response body.\");\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person (Server)\")\n    public void testDeleteExistingPerson() throws Exception {\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        var response = this.mvc.perform(\n                delete(\"/persons/\" + person1.getId())\n                        .content(objectMapper.writeValueAsString(person1))\n                        .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint DELETE /persons/:personId has not been implemented.\");\n        }\n        assertEquals(204, response.getStatus(), \"PersonResource::deletePerson did not return the correct status code.\");\n    }\n\n    @Test\n    @DisplayName(\"Get all persons with sorting options (Server)\")\n    public void testGetAllPersons() throws Exception {\n        var id1 = UUID.randomUUID();\n        var id2 = UUID.randomUUID();\n        person1.setId(id1);\n        person2.setId(id2);\n        setAllPersonsByReflection(List.of(person1, person2));\n\n        for (var fieldOption: PersonSortingOptions.SortField.values()) {\n            for (var orderOption: PersonSortingOptions.SortingOrder.values()) {\n                var sortedList = getSortedList(List.of(person1, person2), orderOption, fieldOption);\n                var response = this.mvc.perform(\n                                get(\"/persons\")\n                                        .param(\"sortField\", fieldOption.name())\n                                        .param(\"sortingOrder\", orderOption.name())\n                                        .contentType(\"application/json\")).andReturn().getResponse();\n\n                if (response.getStatus() == 404 || response.getStatus() == 405) {\n                    fail(\"The endpoint GET /persons has not been implemented.\");\n                }\n                assertEquals(200, response.getStatus(), \"PersonResource::getAllPersons did not return the correct status code.\");\n\n                var respondedPersons = objectMapper.readValue(response.getContentAsString(), Person[].class);\n                if (respondedPersons.length != 2) {\n                    fail(\"PersonResource::getAllPersons did not return the correct amount of persons.\");\n                }\n                for (int i = 0; i < respondedPersons.length; i++){\n                    if (!checkIfPersonEqual(sortedList.get(i), respondedPersons[i], false)) {\n                        fail(\"PersonResource::getAllPersons did not contain the correct person/correct order as response body for a request with sorting options.\");\n                    }\n                }\n            }\n        }\n    }\n\n    @Test\n    @DisplayName(\"Get all persons with default request parameters (Server)\")\n    public void testDefaultSortValues() throws Exception {\n        var id1 = UUID.randomUUID();\n        var id2 = UUID.randomUUID();\n        person1.setId(id1);\n        person2.setId(id2);\n        setAllPersonsByReflection(List.of(person1, person2));\n\n        var sortedList = getSortedList(List.of(person1, person2), ASCENDING, PersonSortingOptions.SortField.ID);\n        var response = this.mvc.perform(\n                        get(\"/persons\")\n                                .contentType(\"application/json\")).andReturn().getResponse();\n\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint GET /persons has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::getAllPersons did not return the correct status code.\");\n        var respondedPersons = objectMapper.readValue(response.getContentAsString(), Person[].class);\n        if (respondedPersons.length != 2) {\n            fail(\"PersonResource::getAllPersons did not return the correct amount of persons.\");\n        }\n\t    var sortedRespondedPersons = getSortedList(List.of(respondedPersons), ASCENDING, PersonSortingOptions.SortField.ID);\n\t    for (int i = 0; i < sortedRespondedPersons.size(); i++){\n            if (!checkIfPersonEqual(sortedList.get(i), sortedRespondedPersons.get(i), false)) {\n                fail(\"PersonResource::getAllPersons did not contain the correct person/correct order as response body when performing a request without sorting options.\");\n            }\n        }\n    }\n\n    private static List<Person> getSortedList(List<Person> persons, PersonSortingOptions.SortingOrder sortingOrder, PersonSortingOptions.SortField sortField) {\n        var sortedList = new ArrayList<>(persons);\n        sortedList.sort((p1, p2) -> {\n            Person person1;\n            Person person2;\n            if (sortingOrder == ASCENDING) {\n                person1 = p1;\n                person2 = p2;\n            } else {\n                person1 = p2;\n                person2 = p1;\n            }\n\n            return switch (sortField) {\n                case ID -> person1.getId().compareTo(person2.getId());\n                case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n                case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n                case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n            };\n        });\n\n        return sortedList;\n    }\n\n    public static void setAllPersonsByReflection(List<Person> personList) {\n        Field persons;\n        Object fieldValue;\n        List<Person> reflectedPersonList;\n        try {\n            persons = PersonService.class.getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            fieldValue = persons.get(personService);\n            if (!(fieldValue instanceof List)) {\n                fail(\"The attribute 'persons' in class 'PersonResource' has not the correct type.\");\n            }\n\n            reflectedPersonList = (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The attribute 'persons' in class 'PersonResource' has not been implemented as described.\");\n            return;\n        }\n        try {\n            reflectedPersonList.removeIf(p -> true);\n            reflectedPersonList.addAll(personList);\n        } catch (Exception e) {\n            fail(\"An unexpected error has occurred. Contact your tutor.\");\n        }\n    }\n\n    public static List<Person> getAllPersonsByReflection() {\n        try {\n            Field persons = PersonService.class.getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            Object fieldValue = persons.get(personService);\n\n            if (!(fieldValue instanceof List)) {\n                fail(\"The attribute 'persons' in class 'PersonService' has not the correct type.\");\n            }\n            return (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The attribute 'persons' in class 'PersonService' has not been implemented as described.\");\n            return null;\n        }\n    }\n}\n"
          }
        ]
      },
      "outputs": {
        "rendered_context": "\n===== Problem Statement =====\n--------------------------------------------------------------------------------\nproblem_statement.md:\n--------------------------------------------------------------------------------\n  1 | # REST Architectural Style\n  2 | \n  3 | The university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n  4 | \n  5 | This exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n  6 | \n  7 | ## Application Structure\n  8 | \n  9 | The following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n 10 | <br>\n 11 | #### Client-Side:\n 12 | - The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n 13 | - The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n 14 | - The `Network Layer` contains the functionality to send REST requests to the server.\n 15 | \n 16 | #### Server-Side:\n 17 | - The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n 18 | - The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n 19 | \n 20 | ### Layered Architecture\n 21 | @startuml\n 22 | \n 23 | namespace Client {\n 24 |     namespace NetworkLayer {}\n 25 |     \n 26 |     namespace PresentationLayer {}\n 27 |     \n 28 |     namespace ApplicationLayer {}\n 29 | }\n 30 | \n 31 | namespace Server {\n 32 |     namespace NetworkLayer {}\n 33 |     \n 34 |     namespace BusinessLayer {}\n 35 | }\n 36 | \n 37 | Client.PresentationLayer --> Client.ApplicationLayer\n 38 | Client.ApplicationLayer --> Client.NetworkLayer\n 39 | Client.NetworkLayer <---> Server.NetworkLayer\n 40 | Server.NetworkLayer --> Server.BusinessLayer\n 41 | Server.NetworkLayer -[hidden]> Client.NetworkLayer\n 42 | \n 43 | \n 44 | hide empty fields\n 45 | hide empty methods\n 46 | hide circle\n 47 | @enduml\n 48 | \n 49 | On the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n 50 | ### MVC Component Diagram\n 51 | @startuml\n 52 | \n 53 | namespace Common {\n 54 |     namespace Model {\n 55 |         class Common.Model.Note {\n 56 |             \n 57 |         }\n 58 |         class Common.Model.Person {\n 59 |             \n 60 |         }\n 61 |     }\n 62 | }\n 63 | \n 64 | namespace Client {\n 65 |     namespace Controller {\n 66 |         class Client.Controller.NoteController {\n 67 |             \n 68 |         }\n 69 |         class Client.Controller.PersonController {\n 70 |             \n 71 |         }\n 72 |     }\n 73 |     namespace View {\n 74 |         class Client.View.NoteScene {\n 75 |             \n 76 |         }\n 77 |         class Client.View.PersonScene {\n 78 |             \n 79 |         }\n 80 |     }\n 81 | }\n 82 | \n 83 | Client.Controller.NoteController <-- Client.View.NoteScene\n 84 | Client.Controller.PersonController <-- Client.View.PersonScene\n 85 | Common.Model.Note \"*\" --o Client.Controller.NoteController\n 86 | Common.Model.Person \"*\" --o Client.Controller.PersonController\n 87 | \n 88 | \n 89 | \n 90 | hide empty fields\n 91 | hide empty methods\n 92 | hide circle\n 93 | @enduml\n 94 | \n 95 | <br />\n 96 | \n 97 | ***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n 98 | \n 99 | \n100 | ## Application Functionality\n101 | This system has 2 sides.\n102 | - Client-side\n103 | - Server-side\n104 | \n105 | \n106 | The server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\n107 | The client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n108 | \n109 | The endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n110 | - `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n111 | - `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n112 | - `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n113 | - `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n114 | \n115 | *Note: There are TODOs in the code giving helpful hints*\n116 | \n117 | ***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n118 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n119 | *`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n120 | *`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n121 | *Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n122 | <br/>\n123 | <br/>\n124 | ##Part 1\n125 | In the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\n126 | You have to forward each action to the `PersonService` and add any additional checks before that.\n127 | \n128 | 1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n129 |     Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n130 | 2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n131 |     Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n132 | 3. [task][Endpoint to delete a person](Delete existing person (Server))\n133 |     Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n134 | 4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n135 |     Last but not the least, implement the method `getAllPersons`, which returns all persons.\n136 | \n137 | *Note: Feel free to get inspired by `NoteResource` for additional help.*\n138 | \n139 | \n140 | \n141 | ##Part 2\n142 | In the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\n143 | The Controller should work like this:\n144 | - There is a single `WebClient` instance that is used for all requests\n145 | - Each method should only send a single HTTP request\n146 | - The HTTP requests need to happen asynchronously\n147 | - It has an internal list of all persons\n148 |     - If a person is created, updated or deleted this has to be updated in the list\n149 |     - If all persons are retrieved from the server the list has to be updated accordingly\n150 | - Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n151 |     - This consumer takes the internal list of persons as a parameter\n152 | \n153 | ### UML Diagram\n154 | @startuml\n155 | \n156 | namespace Client {\n157 |     namespace Controller {\n158 |         class PersonController {\n159 |             - webClient: WebClient\n160 |             + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n161 |             + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n162 |             + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n163 |             + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n164 |         }\n165 |     }\n166 | }\n167 | \n168 | namespace Common {\n169 |     class Person {\n170 |         - id: UUID\n171 |         - firstName: String\n172 |         - lastName: String\n173 |         - birthday: LocalDate\n174 |     }\n175 | }\n176 | \n177 | Client.Controller.PersonController o-- \"*\" Common.Person : persons\n178 | \n179 | \n180 | hide empty fields\n181 | hide empty methods\n182 | hide circle\n183 | @enduml\n184 | \n185 | <br />\n186 | \n187 | 1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n188 |     Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n189 | 2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n190 |     Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n191 | 3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n192 |     Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n193 | 4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n194 |     Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n195 | \n196 | *Note: Don't forget the constructor of `PersonController`*\n197 | \n198 | ##Part 3\n199 | It has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n200 | \n201 | It is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\n202 | Some additional notes:\n203 | - The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n204 | - The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n205 | \n206 | [task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\n207 | Implement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\n208 | Then update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n209 | \n210 | *Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*\n\n\n===== Template Repository =====\ntemplate_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import java.util.List;\n 6 | import java.util.function.Consumer;\n 7 | \n 8 | public class PersonController {\n 9 | \n10 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n11 |         // TODO Part 2: Make an http post request to the server\n12 |     }\n13 | \n14 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n15 |         // TODO Part 2: Make an http put request to the server\n16 |     }\n17 | \n18 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n19 |         // TODO Part 2: Make an http delete request to the server\n20 |     }\n21 | \n22 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n23 |         // TODO Part 2: Make an https get request to the server\n24 |     }\n25 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.service.PersonService;\n 4 | import org.springframework.http.MediaType;\n 5 | import org.springframework.web.bind.annotation.RequestMapping;\n 6 | import org.springframework.web.bind.annotation.RestController;\n 7 | \n 8 | @RestController\n 9 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n10 | public class PersonResource {\n11 | \n12 |     private final PersonService personService;\n13 | \n14 |     public PersonResource(PersonService personService) {\n15 |         this.personService = personService;\n16 |     }\n17 | \n18 |     // TODO Part 1: Implement the specified endpoints here\n19 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\ntemplate_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class PersonService {\n11 |   \t// do not change this\n12 |     private final List<Person> persons;\n13 | \n14 |     public PersonService() {\n15 |         this.persons = new ArrayList<>();\n16 |     }\n17 | \n18 |     public Person savePerson(Person person) {\n19 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n20 |         if (optionalPerson.isEmpty()) {\n21 |             person.setId(UUID.randomUUID());\n22 |             persons.add(person);\n23 |             return person;\n24 |         } else {\n25 |             var existingPerson = optionalPerson.get();\n26 |             existingPerson.setFirstName(person.getFirstName());\n27 |             existingPerson.setLastName(person.getLastName());\n28 |             existingPerson.setBirthday(person.getBirthday());\n29 |             return existingPerson;\n30 |         }\n31 |     }\n32 | \n33 |     public void deletePerson(UUID personId) {\n34 |         this.persons.removeIf(person -> person.getId().equals(personId));\n35 |     }\n36 | \n37 |     public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n38 |         // TODO Part 3: Add sorting here\n39 |         return new ArrayList<>(this.persons);\n40 |     }\n41 | }\n\n\n===== Solution Repository =====\nsolution_repository\n└── src\n    ├── client\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── controller\n    │                           │   ├── NoteController.java\n    │                           │   └── PersonController.java\n    │                           ├── view\n    │                           │   ├── HomeScene.java\n    │                           │   ├── NoteScene.java\n    │                           │   └── PersonScene.java\n    │                           ├── H05E01ClientApplication.java\n    │                           └── Starter.java\n    ├── common\n    │   └── java\n    │       └── de\n    │           └── tum\n    │               └── in\n    │                   └── ase\n    │                       └── eist\n    │                           ├── model\n    │                           │   ├── Note.java\n    │                           │   └── Person.java\n    │                           └── util\n    │                               └── PersonSortingOptions.java\n    └── server\n        └── java\n            └── de\n                └── tum\n                    └── in\n                        └── ase\n                            └── eist\n                                ├── rest\n                                │   ├── NoteResource.java\n                                │   └── PersonResource.java\n                                ├── service\n                                │   ├── NoteService.java\n                                │   └── PersonService.java\n                                └── H05E01ServerApplication.java\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import de.tum.in.ase.eist.controller.NoteController;\n 4 | import de.tum.in.ase.eist.controller.PersonController;\n 5 | import de.tum.in.ase.eist.view.HomeScene;\n 6 | import de.tum.in.ase.eist.view.NoteScene;\n 7 | import de.tum.in.ase.eist.view.PersonScene;\n 8 | import javafx.application.Application;\n 9 | import javafx.stage.Stage;\n10 | \n11 | public class H05E01ClientApplication extends Application {\n12 |     private final NoteController noteController = new NoteController();\n13 |     private final PersonController personController = new PersonController();\n14 |     private Stage stage;\n15 | \n16 |     @Override\n17 |     public void start(Stage primaryStage) {\n18 |         this.stage = primaryStage;\n19 | \n20 |         primaryStage.setScene(new HomeScene(this));\n21 |         primaryStage.show();\n22 |     }\n23 | \n24 |     public void showHomeScene() {\n25 |         stage.setScene(new HomeScene(this));\n26 |     }\n27 | \n28 |     public void showNoteScene() {\n29 |         stage.setScene(new NoteScene(noteController, this));\n30 |     }\n31 | \n32 |     public void showPersonScene() {\n33 |         stage.setScene(new PersonScene(personController, this));\n34 |     }\n35 | \n36 |     public Stage getStage() {\n37 |         return stage;\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/Starter.java:\n--------------------------------------------------------------------------------\n1 | package de.tum.in.ase.eist;\n2 | \n3 | import javafx.application.Application;\n4 | \n5 | public class Starter {\n6 |     public static void main(String[] args) {\n7 |         Application.launch(H05E01ClientApplication.class);\n8 |     }\n9 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/NoteController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.core.ParameterizedTypeReference;\n 5 | import org.springframework.http.HttpHeaders;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.web.reactive.function.client.WebClient;\n 8 | \n 9 | import java.util.ArrayList;\n10 | import java.util.List;\n11 | import java.util.function.Consumer;\n12 | \n13 | public class NoteController {\n14 |     private final WebClient webClient;\n15 |     private final List<Note> notes;\n16 | \n17 |     public NoteController() {\n18 |         this.webClient = WebClient.builder()\n19 |                 .baseUrl(\"http://localhost:8080/\")\n20 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n21 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .build();\n23 |         this.notes = new ArrayList<>();\n24 |     }\n25 | \n26 |     public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n27 |         webClient.post()\n28 |                 .uri(\"notes\")\n29 |                 .bodyValue(note)\n30 |                 .retrieve()\n31 |                 .bodyToMono(Note.class)\n32 |                 .onErrorStop()\n33 |                 .subscribe(newNote -> {\n34 |                     notes.add(newNote);\n35 |                     notesConsumer.accept(notes);\n36 |                 });\n37 |     }\n38 | \n39 |     public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n40 |         webClient.put()\n41 |                 .uri(\"notes/\" + note.getId())\n42 |                 .bodyValue(note)\n43 |                 .retrieve()\n44 |                 .bodyToMono(Note.class)\n45 |                 .onErrorStop()\n46 |                 .subscribe(newNote -> {\n47 |                     notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n48 |                     notesConsumer.accept(notes);\n49 |                 });\n50 |     }\n51 | \n52 |     public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n53 |         webClient.delete()\n54 |                 .uri(\"notes/\" + note.getId())\n55 |                 .retrieve()\n56 |                 .toBodilessEntity()\n57 |                 .onErrorStop()\n58 |                 .subscribe(v -> {\n59 |                     notes.remove(note);\n60 |                     notesConsumer.accept(notes);\n61 |                 });\n62 |     }\n63 | \n64 |     public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n65 |         webClient.get()\n66 |                 .uri(uriBuilder -> uriBuilder\n67 |                         .path(\"notes\")\n68 |                         .queryParam(\"secret\", \"SecretKey\")\n69 |                         .build())\n70 |                 .retrieve()\n71 |                 .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n72 |                 .onErrorStop()\n73 |                 .subscribe(newNotes -> {\n74 |                     notes.clear();\n75 |                     notes.addAll(newNotes);\n76 |                     notesConsumer.accept(notes);\n77 |                 });\n78 |     }\n79 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/controller/PersonController.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.controller;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.core.ParameterizedTypeReference;\n 6 | import org.springframework.http.HttpHeaders;\n 7 | import org.springframework.http.MediaType;\n 8 | import org.springframework.web.reactive.function.client.WebClient;\n 9 | \n10 | import java.util.ArrayList;\n11 | import java.util.List;\n12 | import java.util.function.Consumer;\n13 | \n14 | public class PersonController {\n15 |     private final WebClient webClient;\n16 |     private final List<Person> persons;\n17 | \n18 |     public PersonController() {\n19 |         this.webClient = WebClient.builder()\n20 |                 .baseUrl(\"http://localhost:8080/\")\n21 |                 .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n22 |                 .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n23 |                 .build();\n24 |         this.persons = new ArrayList<>();\n25 |     }\n26 | \n27 |     public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n28 |         webClient.post()\n29 |                 .uri(\"persons\")\n30 |                 .bodyValue(person)\n31 |                 .retrieve()\n32 |                 .bodyToMono(Person.class)\n33 |                 .onErrorStop()\n34 |                 .subscribe(newPerson -> {\n35 |                     persons.add(newPerson);\n36 |                     personsConsumer.accept(persons);\n37 |                 });\n38 |     }\n39 | \n40 |     public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n41 |         webClient.put()\n42 |                 .uri(\"persons/\" + person.getId())\n43 |                 .bodyValue(person)\n44 |                 .retrieve()\n45 |                 .bodyToMono(Person.class)\n46 |                 .onErrorStop()\n47 |                 .subscribe(newPerson -> {\n48 |                     persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n49 |                     personsConsumer.accept(persons);\n50 |                 });\n51 |     }\n52 | \n53 |     public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n54 |         webClient.delete()\n55 |                 .uri(\"persons/\" + person.getId())\n56 |                 .retrieve()\n57 |                 .toBodilessEntity()\n58 |                 .onErrorStop()\n59 |                 .subscribe(v -> {\n60 |                     persons.remove(person);\n61 |                     personsConsumer.accept(persons);\n62 |                 });\n63 |     }\n64 | \n65 |     public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n66 |         webClient.get()\n67 |                 .uri(uriBuilder -> uriBuilder\n68 |                         .path(\"persons\")\n69 |                         .queryParam(\"sortField\", sortingOptions.getSortField())\n70 |                         .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n71 |                         .build())\n72 |                 .retrieve()\n73 |                 .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n74 |                 .onErrorStop()\n75 |                 .subscribe(newPersons -> {\n76 |                     persons.clear();\n77 |                     persons.addAll(newPersons);\n78 |                     personsConsumer.accept(persons);\n79 |                 });\n80 |     }\n81 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/HomeScene.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.view;\n 2 | \n 3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n 4 | import javafx.geometry.Pos;\n 5 | import javafx.scene.Scene;\n 6 | import javafx.scene.control.Button;\n 7 | import javafx.scene.layout.VBox;\n 8 | \n 9 | public class HomeScene extends Scene {\n10 |     public HomeScene(H05E01ClientApplication application) {\n11 |         super(new VBox(), 640, 500);\n12 | \n13 |         var noteButton = new Button(\"Notes\");\n14 |         noteButton.setOnAction(event -> application.showNoteScene());\n15 | \n16 |         var personButton = new Button(\"Persons\");\n17 |         personButton.setOnAction(event -> application.showPersonScene());\n18 | \n19 |         var vBox = new VBox(10, noteButton, personButton);\n20 |         vBox.setAlignment(Pos.CENTER);\n21 |         setRoot(vBox);\n22 |     }\n23 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/NoteScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.NoteController;\n  5 | import de.tum.in.ase.eist.model.Note;\n  6 | import javafx.application.Platform;\n  7 | import javafx.geometry.Insets;\n  8 | import javafx.geometry.Pos;\n  9 | import javafx.scene.Node;\n 10 | import javafx.scene.Scene;\n 11 | import javafx.scene.control.Button;\n 12 | import javafx.scene.control.ScrollPane;\n 13 | import javafx.scene.control.TextArea;\n 14 | import javafx.scene.control.TextField;\n 15 | import javafx.scene.layout.*;\n 16 | import javafx.scene.paint.Color;\n 17 | import javafx.scene.text.Font;\n 18 | import javafx.scene.text.FontWeight;\n 19 | import javafx.scene.text.Text;\n 20 | import javafx.stage.Popup;\n 21 | \n 22 | import java.util.List;\n 23 | \n 24 | public class NoteScene extends Scene {\n 25 |     private final NoteController noteController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final FlowPane flowPane;\n 28 | \n 29 |     public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n 30 |         super(new VBox(), 640, 500);\n 31 |         this.noteController = noteController;\n 32 |         this.application = application;\n 33 | \n 34 |         flowPane = new FlowPane(10, 10);\n 35 |         var scrollPane = new ScrollPane(flowPane);\n 36 |         scrollPane.setPrefHeight(450);\n 37 |         scrollPane.setFitToWidth(true);\n 38 | \n 39 |         var vBox = new VBox(10, scrollPane, createButtonBox());\n 40 | \n 41 |         noteController.getAllNotes(this::setNotes);\n 42 |         this.setRoot(vBox);\n 43 |     }\n 44 | \n 45 |     public void setNotes(List<Note> notes) {\n 46 |         Platform.runLater(() -> {\n 47 |             var children = flowPane.getChildren();\n 48 |             children.setAll(notes.stream().map(this::createNoteView).toList());\n 49 |         });\n 50 |     }\n 51 | \n 52 |     private Node createNoteView(Note note) {\n 53 |         var name = new Text(note.getName());\n 54 |         name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n 55 | \n 56 |         var spacer = new Region();\n 57 |         HBox.setHgrow(spacer, Priority.ALWAYS);\n 58 | \n 59 |         var deleteButton = new Button(\"E\");\n 60 |         deleteButton.setTextFill(Color.ORANGE);\n 61 |         deleteButton.setOnAction(event -> showPopup(note));\n 62 | \n 63 |         var titleBox = new HBox(name, spacer, deleteButton);\n 64 | \n 65 |         var content = new Text(note.getContent());\n 66 |         var contentScrollPane = new ScrollPane(content);\n 67 |         contentScrollPane.setFitToWidth(true);\n 68 |         contentScrollPane.setFitToHeight(true);\n 69 |         contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n 70 |         contentScrollPane.getStyleClass().clear();\n 71 |         content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n 72 | \n 73 |         var vBox = new VBox(10, titleBox, contentScrollPane);\n 74 |         vBox.setPrefWidth(200);\n 75 |         vBox.setPrefHeight(200);\n 76 |         vBox.setStyle(\"-fx-background-color:white;\");\n 77 |         vBox.setPadding(new Insets(5));\n 78 |         return vBox;\n 79 |     }\n 80 | \n 81 |     private HBox createButtonBox() {\n 82 |         var backButton = new Button(\"Back\");\n 83 |         backButton.setOnAction(event -> application.showHomeScene());\n 84 | \n 85 |         var addButton = new Button(\"Add Note\");\n 86 |         addButton.setOnAction(event -> showPopup(null));\n 87 | \n 88 |         var refreshButton = new Button(\"Refresh\");\n 89 |         refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n 90 | \n 91 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n 92 |         buttonBox.setAlignment(Pos.CENTER);\n 93 |         return buttonBox;\n 94 |     }\n 95 | \n 96 |     private void showPopup(Note note) {\n 97 |         var popup = new Popup();\n 98 |         var nameTextField = new TextField();\n 99 |         nameTextField.setPromptText(\"Name\");\n100 |         nameTextField.setText(note == null ? \"\" : note.getName());\n101 | \n102 |         var contentTextArea = new TextArea();\n103 |         contentTextArea.setPromptText(\"Content\");\n104 |         contentTextArea.setText(note == null ? \"\" : note.getContent());\n105 | \n106 |         var addButton = new Button(\"Save\");\n107 |         addButton.setOnAction(event -> {\n108 |             var newNote = note != null ? note : new Note();\n109 |             newNote.setName(nameTextField.getText());\n110 |             newNote.setContent(contentTextArea.getText());\n111 |             if (note == null) {\n112 |                 noteController.addNote(newNote, this::setNotes);\n113 |             } else {\n114 |                 noteController.editNote(newNote, this::setNotes);\n115 |             }\n116 |             popup.hide();\n117 |         });\n118 | \n119 |         var cancelButton = new Button(\"Cancel\");\n120 |         cancelButton.setOnAction(event -> popup.hide());\n121 | \n122 |         var deleteButton = new Button(\"Delete\");\n123 |         deleteButton.setTextFill(Color.RED);\n124 |         deleteButton.setOnAction(event -> {\n125 |             noteController.deleteNote(note, this::setNotes);\n126 |             popup.hide();\n127 |         });\n128 | \n129 |         var hBox = new HBox(10, addButton, cancelButton);\n130 |         hBox.setAlignment(Pos.CENTER);\n131 |         if (note != null) {\n132 |             hBox.getChildren().add(deleteButton);\n133 |         }\n134 | \n135 |         var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n136 |         vBox.setAlignment(Pos.TOP_CENTER);\n137 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n138 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n139 |         vBox.setPrefWidth(200);\n140 |         vBox.setPrefHeight(200);\n141 |         vBox.setPadding(new Insets(5));\n142 |         popup.getContent().add(vBox);\n143 |         popup.show(application.getStage());\n144 |         popup.centerOnScreen();\n145 |     }\n146 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/client/java/de/tum/in/ase/eist/view/PersonScene.java:\n--------------------------------------------------------------------------------\n  1 | package de.tum.in.ase.eist.view;\n  2 | \n  3 | import de.tum.in.ase.eist.H05E01ClientApplication;\n  4 | import de.tum.in.ase.eist.controller.PersonController;\n  5 | import de.tum.in.ase.eist.model.Person;\n  6 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n  7 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\n  8 | import de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\n  9 | import javafx.application.Platform;\n 10 | import javafx.collections.FXCollections;\n 11 | import javafx.collections.ObservableList;\n 12 | import javafx.geometry.Insets;\n 13 | import javafx.geometry.Pos;\n 14 | import javafx.scene.Scene;\n 15 | import javafx.scene.control.*;\n 16 | import javafx.scene.control.cell.PropertyValueFactory;\n 17 | import javafx.scene.layout.*;\n 18 | import javafx.scene.paint.Color;\n 19 | import javafx.stage.Popup;\n 20 | \n 21 | import java.time.LocalDate;\n 22 | import java.util.List;\n 23 | \n 24 | public class PersonScene extends Scene {\n 25 |     private final PersonController personController;\n 26 |     private final H05E01ClientApplication application;\n 27 |     private final PersonSortingOptions sortingOptions;\n 28 |     private final ObservableList<Person> personList;\n 29 |     private final TableView<Person> table;\n 30 | \n 31 |     public PersonScene(PersonController personController, H05E01ClientApplication application) {\n 32 |         super(new VBox(), 640, 500);\n 33 |         this.personController = personController;\n 34 |         this.application = application;\n 35 |         this.sortingOptions = new PersonSortingOptions();\n 36 |         this.personList = FXCollections.observableArrayList();\n 37 | \n 38 |         table = new TableView<>(personList);\n 39 |         table.setOnMousePressed(event -> {\n 40 |             if (event.isPrimaryButtonDown()) {\n 41 |                 showPopup(table.getSelectionModel().getSelectedItem());\n 42 |             }\n 43 |         });\n 44 | \n 45 |         var idColumn = new TableColumn<Person, String>(\"ID\");\n 46 |         idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n 47 |         idColumn.setSortable(false);\n 48 |         idColumn.setPrefWidth(620 / 4D);\n 49 |         var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n 50 |         firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n 51 |         firstNameColumn.setSortable(false);\n 52 |         firstNameColumn.setPrefWidth(620 / 4D);\n 53 |         var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n 54 |         lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n 55 |         lastNameColumn.setSortable(false);\n 56 |         lastNameColumn.setPrefWidth(620 / 4D);\n 57 |         var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n 58 |         birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n 59 |         birthdayColumn.setSortable(false);\n 60 |         birthdayColumn.setPrefWidth(620 / 4D);\n 61 |         //noinspection unchecked\n 62 |         table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n 63 | \n 64 |         var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n 65 |         vBox.setAlignment(Pos.CENTER);\n 66 |         setRoot(vBox);\n 67 | \n 68 |         personController.getAllPersons(sortingOptions, this::setPeople);\n 69 |     }\n 70 | \n 71 |     private HBox createSortOptionBox() {\n 72 |         var sortFieldChoiceBox = new ChoiceBox<SortField>();\n 73 |         sortFieldChoiceBox.getItems().addAll(SortField.values());\n 74 |         sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n 75 |         sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 76 |             sortingOptions.setSortField(newValue);\n 77 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 78 |         });\n 79 | \n 80 |         var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n 81 |         sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n 82 |         sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n 83 |         sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n 84 |             sortingOptions.setSortingOrder(newValue);\n 85 |             personController.getAllPersons(sortingOptions, this::setPeople);\n 86 |         });\n 87 | \n 88 |         var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n 89 |         hBox.setAlignment(Pos.CENTER);\n 90 |         return hBox;\n 91 |     }\n 92 | \n 93 |     private HBox createButtonBox() {\n 94 |         var backButton = new Button(\"Back\");\n 95 |         backButton.setOnAction(event -> application.showHomeScene());\n 96 | \n 97 |         var addButton = new Button(\"Add Person\");\n 98 |         addButton.setOnAction(event -> showPopup(null));\n 99 | \n100 |         var refreshButton = new Button(\"Refresh\");\n101 |         refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n102 | \n103 |         var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n104 |         buttonBox.setAlignment(Pos.CENTER);\n105 |         return buttonBox;\n106 |     }\n107 | \n108 |     private void showPopup(Person person) {\n109 |         var popup = new Popup();\n110 |         var firstNameTextField = new TextField();\n111 |         firstNameTextField.setPromptText(\"First Name\");\n112 |         firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n113 | \n114 |         var lastNameTextField = new TextField();\n115 |         lastNameTextField.setPromptText(\"Last Name\");\n116 |         lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n117 | \n118 |         var birthdayPicker = new DatePicker();\n119 |         birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n120 | \n121 |         var addButton = new Button(\"Save\");\n122 |         addButton.setOnAction(event -> {\n123 |             var newPerson = person != null ? person : new Person();\n124 |             newPerson.setFirstName(firstNameTextField.getText());\n125 |             newPerson.setLastName(lastNameTextField.getText());\n126 |             newPerson.setBirthday(birthdayPicker.getValue());\n127 |             if (person == null) {\n128 |                 personController.addPerson(newPerson, this::setPeople);\n129 |             } else {\n130 |                 personController.updatePerson(newPerson, this::setPeople);\n131 |             }\n132 |             popup.hide();\n133 |         });\n134 | \n135 |         var cancelButton = new Button(\"Cancel\");\n136 |         cancelButton.setOnAction(event -> popup.hide());\n137 | \n138 |         var deleteButton = new Button(\"Delete\");\n139 |         deleteButton.setTextFill(Color.RED);\n140 |         deleteButton.setOnAction(event -> {\n141 |             personController.deletePerson(person, this::setPeople);\n142 |             popup.hide();\n143 |         });\n144 | \n145 |         var hBox = new HBox(10, addButton, cancelButton);\n146 |         hBox.setAlignment(Pos.CENTER);\n147 |         if (person != null) {\n148 |             hBox.getChildren().add(deleteButton);\n149 |         }\n150 | \n151 |         var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n152 |         vBox.setAlignment(Pos.TOP_CENTER);\n153 |         vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n154 |         vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n155 |         vBox.setPrefWidth(200);\n156 |         vBox.setPrefHeight(150);\n157 |         vBox.setPadding(new Insets(5));\n158 |         popup.getContent().add(vBox);\n159 |         popup.show(application.getStage());\n160 |         popup.centerOnScreen();\n161 |     }\n162 | \n163 |     private void setPeople(List<Person> people) {\n164 |         Platform.runLater(() -> personList.setAll(people));\n165 |     }\n166 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Note.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.Instant;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Note {\n 7 |     private UUID id;\n 8 |     private String name;\n 9 |     private String content;\n10 |     private Instant creationDate;\n11 | \n12 |     public Note() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getName() {\n23 |         return name;\n24 |     }\n25 | \n26 |     public void setName(String name) {\n27 |         this.name = name;\n28 |     }\n29 | \n30 |     public String getContent() {\n31 |         return content;\n32 |     }\n33 | \n34 |     public void setContent(String content) {\n35 |         this.content = content;\n36 |     }\n37 | \n38 |     public Instant getCreationDate() {\n39 |         return creationDate;\n40 |     }\n41 | \n42 |     public void setCreationDate(Instant creationDate) {\n43 |         this.creationDate = creationDate;\n44 |     }\n45 | \n46 |     @Override\n47 |     public String toString() {\n48 |         return \"Note{\" +\n49 |                 \"id=\" + id +\n50 |                 \", name='\" + name + '\\'' +\n51 |                 \", content='\" + content + '\\'' +\n52 |                 \", creationDate=\" + creationDate +\n53 |                 '}';\n54 |     }\n55 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/model/Person.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.model;\n 2 | \n 3 | import java.time.LocalDate;\n 4 | import java.util.UUID;\n 5 | \n 6 | public class Person {\n 7 |     private UUID id;\n 8 |     private String firstName;\n 9 |     private String lastName;\n10 |     private LocalDate birthday;\n11 | \n12 |     public Person() {}\n13 | \n14 |     public UUID getId() {\n15 |         return id;\n16 |     }\n17 | \n18 |     public void setId(UUID id) {\n19 |         this.id = id;\n20 |     }\n21 | \n22 |     public String getFirstName() {\n23 |         return firstName;\n24 |     }\n25 | \n26 |     public void setFirstName(String firstName) {\n27 |         this.firstName = firstName;\n28 |     }\n29 | \n30 |     public String getLastName() {\n31 |         return lastName;\n32 |     }\n33 | \n34 |     public void setLastName(String lastName) {\n35 |         this.lastName = lastName;\n36 |     }\n37 | \n38 |     public LocalDate getBirthday() {\n39 |         return birthday;\n40 |     }\n41 | \n42 |     public void setBirthday(LocalDate birthday) {\n43 |         this.birthday = birthday;\n44 |     }\n45 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.util;\n 2 | \n 3 | public class PersonSortingOptions {\n 4 |     private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n 5 |     private SortField sortField = SortField.ID;\n 6 | \n 7 |     public PersonSortingOptions() {}\n 8 | \n 9 |     public PersonSortingOptions(SortField sortField) {\n10 |         this.sortField = sortField;\n11 |     }\n12 | \n13 |     public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n14 |         this.sortingOrder = sortingOrder;\n15 |         this.sortField = sortField;\n16 |     }\n17 | \n18 |     public SortingOrder getSortingOrder() {\n19 |         return sortingOrder;\n20 |     }\n21 | \n22 |     public void setSortingOrder(SortingOrder sortingOrder) {\n23 |         this.sortingOrder = sortingOrder;\n24 |     }\n25 | \n26 |     public SortField getSortField() {\n27 |         return sortField;\n28 |     }\n29 | \n30 |     public void setSortField(SortField sortField) {\n31 |         this.sortField = sortField;\n32 |     }\n33 | \n34 |     public enum SortingOrder {\n35 |         ASCENDING, DESCENDING\n36 |     }\n37 | \n38 |     public enum SortField {\n39 |         ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n40 |     }\n41 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist;\n 2 | \n 3 | import org.springframework.boot.SpringApplication;\n 4 | import org.springframework.boot.autoconfigure.SpringBootApplication;\n 5 | \n 6 | @SpringBootApplication\n 7 | public class H05E01ServerApplication {\n 8 | \n 9 |     public static void main(String[] args) {\n10 |         SpringApplication.run(H05E01ServerApplication.class, args);\n11 |     }\n12 | \n13 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/NoteResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import de.tum.in.ase.eist.service.NoteService;\n 5 | import org.springframework.http.MediaType;\n 6 | import org.springframework.http.ResponseEntity;\n 7 | import org.springframework.web.bind.annotation.*;\n 8 | \n 9 | import java.util.List;\n10 | import java.util.UUID;\n11 | \n12 | @RestController\n13 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n14 | public class NoteResource {\n15 | \n16 |     private final NoteService noteService;\n17 | \n18 |     public NoteResource(NoteService noteService) {\n19 |         this.noteService = noteService;\n20 |     }\n21 | \n22 |     @GetMapping(\"notes\")\n23 |     public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n24 |         if (!\"SecretKey\".equals(secret)) {\n25 |             return ResponseEntity.badRequest().build();\n26 |         }\n27 |         return ResponseEntity.ok(noteService.getAllNotes());\n28 |     }\n29 | \n30 |     @PostMapping(\"notes\")\n31 |     public ResponseEntity<Note> createNote(@RequestBody Note note) {\n32 |         if (note.getId() != null) {\n33 |             return ResponseEntity.badRequest().build();\n34 |         }\n35 |         return ResponseEntity.ok(noteService.saveNote(note));\n36 |     }\n37 | \n38 |     @PutMapping(\"notes/{noteId}\")\n39 |     public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n40 |         if (!updatedNote.getId().equals(noteId)) {\n41 |             return ResponseEntity.badRequest().build();\n42 |         }\n43 |         return ResponseEntity.ok(noteService.saveNote(updatedNote));\n44 |     }\n45 | \n46 |     @DeleteMapping(\"notes/{noteId}\")\n47 |     public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n48 |         noteService.deleteNote(noteId);\n49 |         return ResponseEntity.noContent().build();\n50 |     }\n51 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/rest/PersonResource.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.rest;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.service.PersonService;\n 5 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 6 | import org.springframework.http.MediaType;\n 7 | import org.springframework.http.ResponseEntity;\n 8 | import org.springframework.web.bind.annotation.*;\n 9 | \n10 | import java.util.List;\n11 | import java.util.UUID;\n12 | \n13 | @RestController\n14 | @RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\n15 | public class PersonResource {\n16 | \n17 |     private final PersonService personService;\n18 | \n19 |     public PersonResource(PersonService personService) {\n20 |         this.personService = personService;\n21 |     }\n22 | \n23 |     @GetMapping(\"persons\")\n24 |     public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n25 |                                                       @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n26 |         return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n27 |     }\n28 | \n29 |     @PostMapping(\"persons\")\n30 |     public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n31 |         if (person.getId() != null) {\n32 |             return ResponseEntity.badRequest().build();\n33 |         }\n34 |         return ResponseEntity.ok(personService.savePerson(person));\n35 |     }\n36 | \n37 |     @PutMapping(\"persons/{personId}\")\n38 |     public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n39 |         if (!updatedPerson.getId().equals(personId)) {\n40 |             return ResponseEntity.badRequest().build();\n41 |         }\n42 |         return ResponseEntity.ok(personService.savePerson(updatedPerson));\n43 |     }\n44 | \n45 |     @DeleteMapping(\"persons/{personId}\")\n46 |     public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n47 |         personService.deletePerson(personId);\n48 |         return ResponseEntity.noContent().build();\n49 |     }\n50 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/NoteService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Note;\n 4 | import org.springframework.stereotype.Service;\n 5 | \n 6 | import java.time.Instant;\n 7 | import java.util.*;\n 8 | \n 9 | @Service\n10 | public class NoteService {\n11 |     private final List<Note> notes;\n12 | \n13 |     public NoteService() {\n14 |         this.notes = new ArrayList<>();\n15 |     }\n16 | \n17 |     public Note saveNote(Note note) {\n18 |         var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n19 |         if (optionalNote.isEmpty()) {\n20 |             note.setId(UUID.randomUUID());\n21 |             note.setCreationDate(Instant.now());\n22 |             notes.add(note);\n23 |             return note;\n24 |         } else {\n25 |             var existingNote = optionalNote.get();\n26 |             existingNote.setName(note.getName());\n27 |             existingNote.setContent(note.getContent());\n28 |             return existingNote;\n29 |         }\n30 |     }\n31 | \n32 |     public void deleteNote(UUID noteId) {\n33 |         this.notes.removeIf(note -> note.getId().equals(noteId));\n34 |     }\n35 | \n36 |     public List<Note> getAllNotes() {\n37 |         return Collections.unmodifiableList(this.notes);\n38 |     }\n39 | }\n\n--------------------------------------------------------------------------------\nsolution_repository/src/server/java/de/tum/in/ase/eist/service/PersonService.java:\n--------------------------------------------------------------------------------\n 1 | package de.tum.in.ase.eist.service;\n 2 | \n 3 | import de.tum.in.ase.eist.model.Person;\n 4 | import de.tum.in.ase.eist.util.PersonSortingOptions;\n 5 | import org.springframework.stereotype.Service;\n 6 | \n 7 | import java.util.*;\n 8 | \n 9 | import static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n10 | \n11 | @Service\n12 | public class PersonService {\n13 |   \t// do not change this\n14 |     private final List<Person> persons;\n15 | \n16 |     public PersonService() {\n17 |         this.persons = new ArrayList<>();\n18 |     }\n19 | \n20 |     public Person savePerson(Person person) {\n21 |         var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n22 |         if (optionalPerson.isEmpty()) {\n23 |             person.setId(UUID.randomUUID());\n24 |             persons.add(person);\n25 |             return person;\n26 |         } else {\n27 |             var existingPerson = optionalPerson.get();\n28 |             existingPerson.setFirstName(person.getFirstName());\n29 |             existingPerson.setLastName(person.getLastName());\n30 |             existingPerson.setBirthday(person.getBirthday());\n31 |             return existingPerson;\n32 |         }\n33 |     }\n34 | \n35 |     public void deletePerson(UUID personId) {\n36 |         this.persons.removeIf(person -> person.getId().equals(personId));\n37 |     }\n38 | \n39 |     public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n40 |         if (sortingOptions == null) {\n41 |             return this.persons.stream();\n42 |         }\n43 |         Stream<Person> sortedStream = this.persons.stream();\n44 |         sortedList.sort((p1, p2) -> {\n45 |             Person person1;\n46 |             Person person2;\n47 |             if (sortingOptions.getSortingOrder() == ASCENDING) {\n48 |                 person1 = p1;\n49 |                 person2 = p2;\n50 |             } else {\n51 |                 person1 = p2;\n52 |                 person2 = p1;\n53 |             }\n54 | \n55 |             return switch (sortingOptions.getSortField()) {\n56 |                 case ID -> person1.getId().compareTo(person2.getId());\n57 |                 case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n58 |                 case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n59 |                 case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n60 |             };\n61 |         });\n62 |         return sortedList;\n63 |     }\n64 | }"
      },
      "tags": [
        "seq:step:1"
      ],
      "parent_run_id": "b24c9117-122d-41e4-abe8-975026ccf3a1",
      "trace_id": "2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "dotted_order": "20250723T144040524034Z2102d036-0bf8-4863-879f-f17bd2b1b9ca.20250723T144040588355Z426ee021-0ec1-40e6-bda0-4be115f42a34.20250723T144040592707Zb24c9117-122d-41e4-abe8-975026ccf3a1.20250723T144040596892Z8099bfbe-4aaa-45ce-977b-76004723f318",
      "session_id": "9165a489-2e1b-4cfc-a139-82686a2268ba",
      "extra": {
        "inputs_is_truthy": true,
        "runtime": {
          "sdk": "langsmith-py",
          "sdk_version": "0.3.42",
          "library": "langsmith",
          "platform": "macOS-15.3-arm64-arm-64bit-Mach-O",
          "runtime": "python",
          "py_implementation": "CPython",
          "runtime_version": "3.13.5",
          "langchain_version": "0.3.25",
          "langchain_core_version": "0.3.59"
        },
        "metadata": {
          "LANGSMITH_TRACING": "true",
          "LANGCHAIN_RUN_ID": "39eb4060",
          "revision_id": "v1.1.0-48-g1c4fbcca-dirty",
          "ls_run_depth": 3
        }
      },
      "events": [
        {
          "name": "start",
          "time": "2025-07-23T14:40:40.596892+00:00"
        },
        {
          "name": "end",
          "time": "2025-07-23T14:40:40.599671+00:00"
        }
      ]
    },
    {
      "id": "b24c9117-122d-41e4-abe8-975026ccf3a1",
      "name": "RunnableSequence",
      "run_type": "chain",
      "start_time": "2025-07-23T14:40:40.592707",
      "end_time": "2025-07-23T14:41:08.966298",
      "status": "success",
      "inputs": {
        "problem_statement": "# REST Architectural Style\n\nThe university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n\nThis exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n\n## Application Structure\n\nThe following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n<br>\n#### Client-Side:\n- The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n- The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n- The `Network Layer` contains the functionality to send REST requests to the server.\n\n#### Server-Side:\n- The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n- The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n\n### Layered Architecture\n@startuml\n\nnamespace Client {\n    namespace NetworkLayer {}\n    \n    namespace PresentationLayer {}\n    \n    namespace ApplicationLayer {}\n}\n\nnamespace Server {\n    namespace NetworkLayer {}\n    \n    namespace BusinessLayer {}\n}\n\nClient.PresentationLayer --> Client.ApplicationLayer\nClient.ApplicationLayer --> Client.NetworkLayer\nClient.NetworkLayer <---> Server.NetworkLayer\nServer.NetworkLayer --> Server.BusinessLayer\nServer.NetworkLayer -[hidden]> Client.NetworkLayer\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\nOn the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n### MVC Component Diagram\n@startuml\n\nnamespace Common {\n    namespace Model {\n        class Common.Model.Note {\n            \n        }\n        class Common.Model.Person {\n            \n        }\n    }\n}\n\nnamespace Client {\n    namespace Controller {\n        class Client.Controller.NoteController {\n            \n        }\n        class Client.Controller.PersonController {\n            \n        }\n    }\n    namespace View {\n        class Client.View.NoteScene {\n            \n        }\n        class Client.View.PersonScene {\n            \n        }\n    }\n}\n\nClient.Controller.NoteController <-- Client.View.NoteScene\nClient.Controller.PersonController <-- Client.View.PersonScene\nCommon.Model.Note \"*\" --o Client.Controller.NoteController\nCommon.Model.Person \"*\" --o Client.Controller.PersonController\n\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\n<br />\n\n***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n\n\n## Application Functionality\nThis system has 2 sides.\n- Client-side\n- Server-side\n\n\nThe server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\nThe client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n\nThe endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n- `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n- `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n- `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n- `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n\n*Note: There are TODOs in the code giving helpful hints*\n\n***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n*`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n*`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n*`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n*Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n<br/>\n<br/>\n##Part 1\nIn the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\nYou have to forward each action to the `PersonService` and add any additional checks before that.\n\n1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n    Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n    Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n3. [task][Endpoint to delete a person](Delete existing person (Server))\n    Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n    Last but not the least, implement the method `getAllPersons`, which returns all persons.\n\n*Note: Feel free to get inspired by `NoteResource` for additional help.*\n\n\n\n##Part 2\nIn the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\nThe Controller should work like this:\n- There is a single `WebClient` instance that is used for all requests\n- Each method should only send a single HTTP request\n- The HTTP requests need to happen asynchronously\n- It has an internal list of all persons\n    - If a person is created, updated or deleted this has to be updated in the list\n    - If all persons are retrieved from the server the list has to be updated accordingly\n- Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n    - This consumer takes the internal list of persons as a parameter\n\n### UML Diagram\n@startuml\n\nnamespace Client {\n    namespace Controller {\n        class PersonController {\n            - webClient: WebClient\n            + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n            + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n            + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n            + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n        }\n    }\n}\n\nnamespace Common {\n    class Person {\n        - id: UUID\n        - firstName: String\n        - lastName: String\n        - birthday: LocalDate\n    }\n}\n\nClient.Controller.PersonController o-- \"*\" Common.Person : persons\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\n<br />\n\n1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n    Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n    Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n    Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n    Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n\n*Note: Don't forget the constructor of `PersonController`*\n\n##Part 3\nIt has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n\nIt is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\nSome additional notes:\n- The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n- The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n\n[task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\nImplement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\nThen update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n\n*Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*",
        "programming_language": "java",
        "template_repository": [
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\ngroup = 'de.tum.in.ase.eist'\nversion = '1.0.0'\nsourceCompatibility = 17\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web'\n\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\nsourceSets {\n    common {\n        java {\n            srcDir 'src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'src/server/java'\n        }\n        resources {\n            srcDir 'src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'src/client/java'\n        }\n        resources {\n            srcDir 'src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n}\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Spring-Exercise'\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.view.HomeScene;\nimport de.tum.in.ase.eist.view.NoteScene;\nimport de.tum.in.ase.eist.view.PersonScene;\nimport javafx.application.Application;\nimport javafx.stage.Stage;\n\npublic class H05E01ClientApplication extends Application {\n    private final NoteController noteController = new NoteController();\n    private final PersonController personController = new PersonController();\n    private Stage stage;\n\n    @Override\n    public void start(Stage primaryStage) {\n        this.stage = primaryStage;\n\n        primaryStage.setScene(new HomeScene(this));\n        primaryStage.show();\n    }\n\n    public void showHomeScene() {\n        stage.setScene(new HomeScene(this));\n    }\n\n    public void showNoteScene() {\n        stage.setScene(new NoteScene(noteController, this));\n    }\n\n    public void showPersonScene() {\n        stage.setScene(new PersonScene(personController, this));\n    }\n\n    public Stage getStage() {\n        return stage;\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/Starter.java",
            "content": "package de.tum.in.ase.eist;\n\nimport javafx.application.Application;\n\npublic class Starter {\n    public static void main(String[] args) {\n        Application.launch(H05E01ClientApplication.class);\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/NoteController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class NoteController {\n    private final WebClient webClient;\n    private final List<Note> notes;\n\n    public NoteController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.notes = new ArrayList<>();\n    }\n\n    public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.post()\n                .uri(\"notes\")\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.add(newNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.put()\n                .uri(\"notes/\" + note.getId())\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.delete()\n                .uri(\"notes/\" + note.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    notes.remove(note);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"notes\")\n                        .queryParam(\"secret\", \"SecretKey\")\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n                .onErrorStop()\n                .subscribe(newNotes -> {\n                    notes.clear();\n                    notes.addAll(newNotes);\n                    notesConsumer.accept(notes);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/PersonController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class PersonController {\n\n    public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http post request to the server\n    }\n\n    public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http put request to the server\n    }\n\n    public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http delete request to the server\n    }\n\n    public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an https get request to the server\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/PersonScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\nimport javafx.application.Platform;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Popup;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic class PersonScene extends Scene {\n    private final PersonController personController;\n    private final H05E01ClientApplication application;\n    private final PersonSortingOptions sortingOptions;\n    private final ObservableList<Person> personList;\n    private final TableView<Person> table;\n\n    public PersonScene(PersonController personController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.personController = personController;\n        this.application = application;\n        this.sortingOptions = new PersonSortingOptions();\n        this.personList = FXCollections.observableArrayList();\n\n        table = new TableView<>(personList);\n        table.setOnMousePressed(event -> {\n            if (event.isPrimaryButtonDown()) {\n                showPopup(table.getSelectionModel().getSelectedItem());\n            }\n        });\n\n        var idColumn = new TableColumn<Person, String>(\"ID\");\n        idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n        idColumn.setSortable(false);\n        idColumn.setPrefWidth(620 / 4D);\n        var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n        firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n        firstNameColumn.setSortable(false);\n        firstNameColumn.setPrefWidth(620 / 4D);\n        var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n        lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n        lastNameColumn.setSortable(false);\n        lastNameColumn.setPrefWidth(620 / 4D);\n        var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n        birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n        birthdayColumn.setSortable(false);\n        birthdayColumn.setPrefWidth(620 / 4D);\n        //noinspection unchecked\n        table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n\n        var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n\n        personController.getAllPersons(sortingOptions, this::setPeople);\n    }\n\n    private HBox createSortOptionBox() {\n        var sortFieldChoiceBox = new ChoiceBox<SortField>();\n        sortFieldChoiceBox.getItems().addAll(SortField.values());\n        sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n        sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortField(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n        sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n        sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n        sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortingOrder(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n        hBox.setAlignment(Pos.CENTER);\n        return hBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Person\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Person person) {\n        var popup = new Popup();\n        var firstNameTextField = new TextField();\n        firstNameTextField.setPromptText(\"First Name\");\n        firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n\n        var lastNameTextField = new TextField();\n        lastNameTextField.setPromptText(\"Last Name\");\n        lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n\n        var birthdayPicker = new DatePicker();\n        birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newPerson = person != null ? person : new Person();\n            newPerson.setFirstName(firstNameTextField.getText());\n            newPerson.setLastName(lastNameTextField.getText());\n            newPerson.setBirthday(birthdayPicker.getValue());\n            if (person == null) {\n                personController.addPerson(newPerson, this::setPeople);\n            } else {\n                personController.updatePerson(newPerson, this::setPeople);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            personController.deletePerson(person, this::setPeople);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (person != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(150);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n\n    private void setPeople(List<Person> people) {\n        Platform.runLater(() -> personList.setAll(people));\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/NoteScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.model.Note;\nimport javafx.application.Platform;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\nimport javafx.stage.Popup;\n\nimport java.util.List;\n\npublic class NoteScene extends Scene {\n    private final NoteController noteController;\n    private final H05E01ClientApplication application;\n    private final FlowPane flowPane;\n\n    public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.noteController = noteController;\n        this.application = application;\n\n        flowPane = new FlowPane(10, 10);\n        var scrollPane = new ScrollPane(flowPane);\n        scrollPane.setPrefHeight(450);\n        scrollPane.setFitToWidth(true);\n\n        var vBox = new VBox(10, scrollPane, createButtonBox());\n\n        noteController.getAllNotes(this::setNotes);\n        this.setRoot(vBox);\n    }\n\n    public void setNotes(List<Note> notes) {\n        Platform.runLater(() -> {\n            var children = flowPane.getChildren();\n            children.setAll(notes.stream().map(this::createNoteView).toList());\n        });\n    }\n\n    private Node createNoteView(Note note) {\n        var name = new Text(note.getName());\n        name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n\n        var spacer = new Region();\n        HBox.setHgrow(spacer, Priority.ALWAYS);\n\n        var deleteButton = new Button(\"E\");\n        deleteButton.setTextFill(Color.ORANGE);\n        deleteButton.setOnAction(event -> showPopup(note));\n\n        var titleBox = new HBox(name, spacer, deleteButton);\n\n        var content = new Text(note.getContent());\n        var contentScrollPane = new ScrollPane(content);\n        contentScrollPane.setFitToWidth(true);\n        contentScrollPane.setFitToHeight(true);\n        contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n        contentScrollPane.getStyleClass().clear();\n        content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n\n        var vBox = new VBox(10, titleBox, contentScrollPane);\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setStyle(\"-fx-background-color:white;\");\n        vBox.setPadding(new Insets(5));\n        return vBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Note\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Note note) {\n        var popup = new Popup();\n        var nameTextField = new TextField();\n        nameTextField.setPromptText(\"Name\");\n        nameTextField.setText(note == null ? \"\" : note.getName());\n\n        var contentTextArea = new TextArea();\n        contentTextArea.setPromptText(\"Content\");\n        contentTextArea.setText(note == null ? \"\" : note.getContent());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newNote = note != null ? note : new Note();\n            newNote.setName(nameTextField.getText());\n            newNote.setContent(contentTextArea.getText());\n            if (note == null) {\n                noteController.addNote(newNote, this::setNotes);\n            } else {\n                noteController.editNote(newNote, this::setNotes);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            noteController.deleteNote(note, this::setNotes);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (note != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/HomeScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.VBox;\n\npublic class HomeScene extends Scene {\n    public HomeScene(H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n\n        var noteButton = new Button(\"Notes\");\n        noteButton.setOnAction(event -> application.showNoteScene());\n\n        var personButton = new Button(\"Persons\");\n        personButton.setOnAction(event -> application.showPersonScene());\n\n        var vBox = new VBox(10, noteButton, personButton);\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java",
            "content": "package de.tum.in.ase.eist.util;\n\npublic class PersonSortingOptions {\n    private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n    private SortField sortField = SortField.ID;\n\n    public PersonSortingOptions() {}\n\n    public PersonSortingOptions(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n        this.sortingOrder = sortingOrder;\n        this.sortField = sortField;\n    }\n\n    public SortingOrder getSortingOrder() {\n        return sortingOrder;\n    }\n\n    public void setSortingOrder(SortingOrder sortingOrder) {\n        this.sortingOrder = sortingOrder;\n    }\n\n    public SortField getSortField() {\n        return sortField;\n    }\n\n    public void setSortField(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public enum SortingOrder {\n        ASCENDING, DESCENDING\n    }\n\n    public enum SortField {\n        ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n    }\n}"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Note.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.Instant;\nimport java.util.UUID;\n\npublic class Note {\n    private UUID id;\n    private String name;\n    private String content;\n    private Instant creationDate;\n\n    public Note() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    public Instant getCreationDate() {\n        return creationDate;\n    }\n\n    public void setCreationDate(Instant creationDate) {\n        this.creationDate = creationDate;\n    }\n\n    @Override\n    public String toString() {\n        return \"Note{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", content='\" + content + '\\'' +\n                \", creationDate=\" + creationDate +\n                '}';\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Person.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic class Person {\n    private UUID id;\n    private String firstName;\n    private String lastName;\n    private LocalDate birthday;\n\n    public Person() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public LocalDate getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(LocalDate birthday) {\n        this.birthday = birthday;\n    }\n}\n"
          },
          {
            "path": "src/server/resources/application.properties",
            "content": "logging.level.ROOT=DEBUG\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class H05E01ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(H05E01ServerApplication.class, args);\n    }\n\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/PersonService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.stereotype.Service;\n\nimport java.util.*;\n\n@Service\npublic class PersonService {\n  \t// do not change this\n    private final List<Person> persons;\n\n    public PersonService() {\n        this.persons = new ArrayList<>();\n    }\n\n    public Person savePerson(Person person) {\n        var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n        if (optionalPerson.isEmpty()) {\n            person.setId(UUID.randomUUID());\n            persons.add(person);\n            return person;\n        } else {\n            var existingPerson = optionalPerson.get();\n            existingPerson.setFirstName(person.getFirstName());\n            existingPerson.setLastName(person.getLastName());\n            existingPerson.setBirthday(person.getBirthday());\n            return existingPerson;\n        }\n    }\n\n    public void deletePerson(UUID personId) {\n        this.persons.removeIf(person -> person.getId().equals(personId));\n    }\n\n    public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n        // TODO Part 3: Add sorting here\n        return new ArrayList<>(this.persons);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/NoteService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.stereotype.Service;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Service\npublic class NoteService {\n    private final List<Note> notes;\n\n    public NoteService() {\n        this.notes = new ArrayList<>();\n    }\n\n    public Note saveNote(Note note) {\n        var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n        if (optionalNote.isEmpty()) {\n            note.setId(UUID.randomUUID());\n            note.setCreationDate(Instant.now());\n            notes.add(note);\n            return note;\n        } else {\n            var existingNote = optionalNote.get();\n            existingNote.setName(note.getName());\n            existingNote.setContent(note.getContent());\n            return existingNote;\n        }\n    }\n\n    public void deleteNote(UUID noteId) {\n        this.notes.removeIf(note -> note.getId().equals(noteId));\n    }\n\n    public List<Note> getAllNotes() {\n        return Collections.unmodifiableList(this.notes);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/PersonResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.service.PersonService;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class PersonResource {\n\n    private final PersonService personService;\n\n    public PersonResource(PersonService personService) {\n        this.personService = personService;\n    }\n\n    // TODO Part 1: Implement the specified endpoints here\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/NoteResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Note;\nimport de.tum.in.ase.eist.service.NoteService;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class NoteResource {\n\n    private final NoteService noteService;\n\n    public NoteResource(NoteService noteService) {\n        this.noteService = noteService;\n    }\n\n    @GetMapping(\"notes\")\n    public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n        if (!\"SecretKey\".equals(secret)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.getAllNotes());\n    }\n\n    @PostMapping(\"notes\")\n    public ResponseEntity<Note> createNote(@RequestBody Note note) {\n        if (note.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(note));\n    }\n\n    @PutMapping(\"notes/{noteId}\")\n    public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n        if (!updatedNote.getId().equals(noteId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(updatedNote));\n    }\n\n    @DeleteMapping(\"notes/{noteId}\")\n    public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n        noteService.deleteNote(noteId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          }
        ],
        "solution_repository": [
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\ngroup = 'de.tum.in.ase.eist'\nversion = '1.0.0'\nsourceCompatibility = 17\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web'\n\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\nsourceSets {\n    common {\n        java {\n            srcDir 'src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'src/server/java'\n        }\n        resources {\n            srcDir 'src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'src/client/java'\n        }\n        resources {\n            srcDir 'src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n}\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Solution'\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.view.HomeScene;\nimport de.tum.in.ase.eist.view.NoteScene;\nimport de.tum.in.ase.eist.view.PersonScene;\nimport javafx.application.Application;\nimport javafx.stage.Stage;\n\npublic class H05E01ClientApplication extends Application {\n    private final NoteController noteController = new NoteController();\n    private final PersonController personController = new PersonController();\n    private Stage stage;\n\n    @Override\n    public void start(Stage primaryStage) {\n        this.stage = primaryStage;\n\n        primaryStage.setScene(new HomeScene(this));\n        primaryStage.show();\n    }\n\n    public void showHomeScene() {\n        stage.setScene(new HomeScene(this));\n    }\n\n    public void showNoteScene() {\n        stage.setScene(new NoteScene(noteController, this));\n    }\n\n    public void showPersonScene() {\n        stage.setScene(new PersonScene(personController, this));\n    }\n\n    public Stage getStage() {\n        return stage;\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/Starter.java",
            "content": "package de.tum.in.ase.eist;\n\nimport javafx.application.Application;\n\npublic class Starter {\n    public static void main(String[] args) {\n        Application.launch(H05E01ClientApplication.class);\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/NoteController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class NoteController {\n    private final WebClient webClient;\n    private final List<Note> notes;\n\n    public NoteController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.notes = new ArrayList<>();\n    }\n\n    public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.post()\n                .uri(\"notes\")\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.add(newNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.put()\n                .uri(\"notes/\" + note.getId())\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.delete()\n                .uri(\"notes/\" + note.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    notes.remove(note);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"notes\")\n                        .queryParam(\"secret\", \"SecretKey\")\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n                .onErrorStop()\n                .subscribe(newNotes -> {\n                    notes.clear();\n                    notes.addAll(newNotes);\n                    notesConsumer.accept(notes);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/PersonController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class PersonController {\n    private final WebClient webClient;\n    private final List<Person> persons;\n\n    public PersonController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.persons = new ArrayList<>();\n    }\n\n    public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.post()\n                .uri(\"persons\")\n                .bodyValue(person)\n                .retrieve()\n                .bodyToMono(Person.class)\n                .onErrorStop()\n                .subscribe(newPerson -> {\n                    persons.add(newPerson);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.put()\n                .uri(\"persons/\" + person.getId())\n                .bodyValue(person)\n                .retrieve()\n                .bodyToMono(Person.class)\n                .onErrorStop()\n                .subscribe(newPerson -> {\n                    persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.delete()\n                .uri(\"persons/\" + person.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    persons.remove(person);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"persons\")\n                        .queryParam(\"sortField\", sortingOptions.getSortField())\n                        .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n                .onErrorStop()\n                .subscribe(newPersons -> {\n                    persons.clear();\n                    persons.addAll(newPersons);\n                    personsConsumer.accept(persons);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/PersonScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\nimport javafx.application.Platform;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Popup;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic class PersonScene extends Scene {\n    private final PersonController personController;\n    private final H05E01ClientApplication application;\n    private final PersonSortingOptions sortingOptions;\n    private final ObservableList<Person> personList;\n    private final TableView<Person> table;\n\n    public PersonScene(PersonController personController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.personController = personController;\n        this.application = application;\n        this.sortingOptions = new PersonSortingOptions();\n        this.personList = FXCollections.observableArrayList();\n\n        table = new TableView<>(personList);\n        table.setOnMousePressed(event -> {\n            if (event.isPrimaryButtonDown()) {\n                showPopup(table.getSelectionModel().getSelectedItem());\n            }\n        });\n\n        var idColumn = new TableColumn<Person, String>(\"ID\");\n        idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n        idColumn.setSortable(false);\n        idColumn.setPrefWidth(620 / 4D);\n        var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n        firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n        firstNameColumn.setSortable(false);\n        firstNameColumn.setPrefWidth(620 / 4D);\n        var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n        lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n        lastNameColumn.setSortable(false);\n        lastNameColumn.setPrefWidth(620 / 4D);\n        var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n        birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n        birthdayColumn.setSortable(false);\n        birthdayColumn.setPrefWidth(620 / 4D);\n        //noinspection unchecked\n        table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n\n        var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n\n        personController.getAllPersons(sortingOptions, this::setPeople);\n    }\n\n    private HBox createSortOptionBox() {\n        var sortFieldChoiceBox = new ChoiceBox<SortField>();\n        sortFieldChoiceBox.getItems().addAll(SortField.values());\n        sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n        sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortField(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n        sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n        sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n        sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortingOrder(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n        hBox.setAlignment(Pos.CENTER);\n        return hBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Person\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Person person) {\n        var popup = new Popup();\n        var firstNameTextField = new TextField();\n        firstNameTextField.setPromptText(\"First Name\");\n        firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n\n        var lastNameTextField = new TextField();\n        lastNameTextField.setPromptText(\"Last Name\");\n        lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n\n        var birthdayPicker = new DatePicker();\n        birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newPerson = person != null ? person : new Person();\n            newPerson.setFirstName(firstNameTextField.getText());\n            newPerson.setLastName(lastNameTextField.getText());\n            newPerson.setBirthday(birthdayPicker.getValue());\n            if (person == null) {\n                personController.addPerson(newPerson, this::setPeople);\n            } else {\n                personController.updatePerson(newPerson, this::setPeople);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            personController.deletePerson(person, this::setPeople);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (person != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(150);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n\n    private void setPeople(List<Person> people) {\n        Platform.runLater(() -> personList.setAll(people));\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/NoteScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.model.Note;\nimport javafx.application.Platform;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\nimport javafx.stage.Popup;\n\nimport java.util.List;\n\npublic class NoteScene extends Scene {\n    private final NoteController noteController;\n    private final H05E01ClientApplication application;\n    private final FlowPane flowPane;\n\n    public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.noteController = noteController;\n        this.application = application;\n\n        flowPane = new FlowPane(10, 10);\n        var scrollPane = new ScrollPane(flowPane);\n        scrollPane.setPrefHeight(450);\n        scrollPane.setFitToWidth(true);\n\n        var vBox = new VBox(10, scrollPane, createButtonBox());\n\n        noteController.getAllNotes(this::setNotes);\n        this.setRoot(vBox);\n    }\n\n    public void setNotes(List<Note> notes) {\n        Platform.runLater(() -> {\n            var children = flowPane.getChildren();\n            children.setAll(notes.stream().map(this::createNoteView).toList());\n        });\n    }\n\n    private Node createNoteView(Note note) {\n        var name = new Text(note.getName());\n        name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n\n        var spacer = new Region();\n        HBox.setHgrow(spacer, Priority.ALWAYS);\n\n        var deleteButton = new Button(\"E\");\n        deleteButton.setTextFill(Color.ORANGE);\n        deleteButton.setOnAction(event -> showPopup(note));\n\n        var titleBox = new HBox(name, spacer, deleteButton);\n\n        var content = new Text(note.getContent());\n        var contentScrollPane = new ScrollPane(content);\n        contentScrollPane.setFitToWidth(true);\n        contentScrollPane.setFitToHeight(true);\n        contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n        contentScrollPane.getStyleClass().clear();\n        content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n\n        var vBox = new VBox(10, titleBox, contentScrollPane);\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setStyle(\"-fx-background-color:white;\");\n        vBox.setPadding(new Insets(5));\n        return vBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Note\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Note note) {\n        var popup = new Popup();\n        var nameTextField = new TextField();\n        nameTextField.setPromptText(\"Name\");\n        nameTextField.setText(note == null ? \"\" : note.getName());\n\n        var contentTextArea = new TextArea();\n        contentTextArea.setPromptText(\"Content\");\n        contentTextArea.setText(note == null ? \"\" : note.getContent());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newNote = note != null ? note : new Note();\n            newNote.setName(nameTextField.getText());\n            newNote.setContent(contentTextArea.getText());\n            if (note == null) {\n                noteController.addNote(newNote, this::setNotes);\n            } else {\n                noteController.editNote(newNote, this::setNotes);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            noteController.deleteNote(note, this::setNotes);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (note != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/HomeScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.VBox;\n\npublic class HomeScene extends Scene {\n    public HomeScene(H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n\n        var noteButton = new Button(\"Notes\");\n        noteButton.setOnAction(event -> application.showNoteScene());\n\n        var personButton = new Button(\"Persons\");\n        personButton.setOnAction(event -> application.showPersonScene());\n\n        var vBox = new VBox(10, noteButton, personButton);\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java",
            "content": "package de.tum.in.ase.eist.util;\n\npublic class PersonSortingOptions {\n    private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n    private SortField sortField = SortField.ID;\n\n    public PersonSortingOptions() {}\n\n    public PersonSortingOptions(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n        this.sortingOrder = sortingOrder;\n        this.sortField = sortField;\n    }\n\n    public SortingOrder getSortingOrder() {\n        return sortingOrder;\n    }\n\n    public void setSortingOrder(SortingOrder sortingOrder) {\n        this.sortingOrder = sortingOrder;\n    }\n\n    public SortField getSortField() {\n        return sortField;\n    }\n\n    public void setSortField(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public enum SortingOrder {\n        ASCENDING, DESCENDING\n    }\n\n    public enum SortField {\n        ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n    }\n}"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Note.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.Instant;\nimport java.util.UUID;\n\npublic class Note {\n    private UUID id;\n    private String name;\n    private String content;\n    private Instant creationDate;\n\n    public Note() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    public Instant getCreationDate() {\n        return creationDate;\n    }\n\n    public void setCreationDate(Instant creationDate) {\n        this.creationDate = creationDate;\n    }\n\n    @Override\n    public String toString() {\n        return \"Note{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", content='\" + content + '\\'' +\n                \", creationDate=\" + creationDate +\n                '}';\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Person.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic class Person {\n    private UUID id;\n    private String firstName;\n    private String lastName;\n    private LocalDate birthday;\n\n    public Person() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public LocalDate getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(LocalDate birthday) {\n        this.birthday = birthday;\n    }\n}\n"
          },
          {
            "path": "src/server/resources/application.properties",
            "content": "logging.level.ROOT=DEBUG\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class H05E01ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(H05E01ServerApplication.class, args);\n    }\n\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/PersonService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.stereotype.Service;\n\nimport java.util.*;\n\nimport static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n\n@Service\npublic class PersonService {\n  \t// do not change this\n    private final List<Person> persons;\n\n    public PersonService() {\n        this.persons = new ArrayList<>();\n    }\n\n    public Person savePerson(Person person) {\n        var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n        if (optionalPerson.isEmpty()) {\n            person.setId(UUID.randomUUID());\n            persons.add(person);\n            return person;\n        } else {\n            var existingPerson = optionalPerson.get();\n            existingPerson.setFirstName(person.getFirstName());\n            existingPerson.setLastName(person.getLastName());\n            existingPerson.setBirthday(person.getBirthday());\n            return existingPerson;\n        }\n    }\n\n    public void deletePerson(UUID personId) {\n        this.persons.removeIf(person -> person.getId().equals(personId));\n    }\n\n    public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n        if (sortingOptions == null) {\n            return this.persons.stream();\n        }\n        Stream<Person> sortedStream = this.persons.stream();\n        sortedList.sort((p1, p2) -> {\n            Person person1;\n            Person person2;\n            if (sortingOptions.getSortingOrder() == ASCENDING) {\n                person1 = p1;\n                person2 = p2;\n            } else {\n                person1 = p2;\n                person2 = p1;\n            }\n\n            return switch (sortingOptions.getSortField()) {\n                case ID -> person1.getId().compareTo(person2.getId());\n                case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n                case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n                case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n            };\n        });\n        return sortedList;\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/NoteService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.stereotype.Service;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Service\npublic class NoteService {\n    private final List<Note> notes;\n\n    public NoteService() {\n        this.notes = new ArrayList<>();\n    }\n\n    public Note saveNote(Note note) {\n        var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n        if (optionalNote.isEmpty()) {\n            note.setId(UUID.randomUUID());\n            note.setCreationDate(Instant.now());\n            notes.add(note);\n            return note;\n        } else {\n            var existingNote = optionalNote.get();\n            existingNote.setName(note.getName());\n            existingNote.setContent(note.getContent());\n            return existingNote;\n        }\n    }\n\n    public void deleteNote(UUID noteId) {\n        this.notes.removeIf(note -> note.getId().equals(noteId));\n    }\n\n    public List<Note> getAllNotes() {\n        return Collections.unmodifiableList(this.notes);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/PersonResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.service.PersonService;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class PersonResource {\n\n    private final PersonService personService;\n\n    public PersonResource(PersonService personService) {\n        this.personService = personService;\n    }\n\n    @GetMapping(\"persons\")\n    public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n                                                      @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n        return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n    }\n\n    @PostMapping(\"persons\")\n    public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n        if (person.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(personService.savePerson(person));\n    }\n\n    @PutMapping(\"persons/{personId}\")\n    public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n        if (!updatedPerson.getId().equals(personId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(personService.savePerson(updatedPerson));\n    }\n\n    @DeleteMapping(\"persons/{personId}\")\n    public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n        personService.deletePerson(personId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/NoteResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Note;\nimport de.tum.in.ase.eist.service.NoteService;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class NoteResource {\n\n    private final NoteService noteService;\n\n    public NoteResource(NoteService noteService) {\n        this.noteService = noteService;\n    }\n\n    @GetMapping(\"notes\")\n    public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n        if (!\"SecretKey\".equals(secret)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.getAllNotes());\n    }\n\n    @PostMapping(\"notes\")\n    public ResponseEntity<Note> createNote(@RequestBody Note note) {\n        if (note.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(note));\n    }\n\n    @PutMapping(\"notes/{noteId}\")\n    public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n        if (!updatedNote.getId().equals(noteId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(updatedNote));\n    }\n\n    @DeleteMapping(\"notes/{noteId}\")\n    public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n        noteService.deleteNote(noteId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          }
        ],
        "test_repository": [
          {
            "path": "readme.md",
            "content": "## Test Repository instructions\n\n#### Test tool & command\nTests will be run using the command `./gradlew clean test`.\n\n#### Project structure\nMake sure that the package structure of your test classes is equivalent to the package structure of your base and solution repository.\nOtherwise during the test run Gradle will not be able to find the imported classes in your test files.\n\nIn order to use classes from the template or solution repository in a test case, you have to add the respective repository\nfiles as a dependency to the test project. Follow this description for IntelliJ:\n\n1. Open the Test-Project first\n2. Select `File` -> `New` -> `Module from Existing Source`. Then choose the template project\nroot folder. Select the option `Import module from external model` and `Gradle` and press `Finish`.\n3. Repeat the previous step for the Solution-Project.\n4. Add the following line to `settings.gradle` inside the Test-Project:\n`includeBuild '<template-project-root-path'>` or `includeBuild '<solution-project-root-path>'` depending on which project you\nwant to use the source files for executing the test cases.\n5. Inside the `plugin`-block in the `build.gradle` inside the Test-Project, add the following line:\n`testImplementation(':H05E01-Layered-Architecture-Spring-Exercise')` or\n`testImplementation(':H05E01-Layered-Architecture-Spring-Solution')` depending on which project you want to use the source files for executing\nthe test cases.\n\n**Note**: Changes made in step 4 and step 5 must not be pushed to the remote repository as it can only be used\nfor editing all three projects in the local IDE.\n\n#### Sequential test runs\nIf you have decided to use the sequential test runs feature for this exercise, read the following instructions:\nWe use the folder structure of the test repository to differentiate structural and behavior tests:\n1. Structural test files must be placed in the folder \"structural\"\n2. Behavior test files must be placed in the folder \"behavior\"\n\nFiles in other folders will not be executed!\n\n#### Static Code Analysis\nThe build.gradle contains dependencies for the execution of static code analysis, if the option is active for this programming exercise.\n"
          },
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'checkstyle'\n    id 'pmd'\n    id 'com.github.spotbugs' version '5.0.6'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id \"com.teamscale\" version \"23.0.0\"\n}\n\napply plugin: 'java'\ngroup = 'de.tum.in.ase.eist'\nsourceCompatibility = 17\nversion = '1.0.0'\ncompileJava.options.encoding = 'UTF-8'\ncompileTestJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    testImplementation 'de.tum.in.ase:artemis-java-test-sandbox:1.9.2'\n    testImplementation 'com.squareup.okhttp3:okhttp:4.10.0-RC1'\n    testImplementation 'com.squareup.okhttp3:mockwebserver:4.10.0-RC1'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test:2.6.7'\n\n    testImplementation 'com.fasterxml.jackson.core:jackson-databind:2.13.2.2'\n    testImplementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.13.2'\n\n    testImplementation 'org.springframework.boot:spring-boot-starter-web:2.6.7'\n    testImplementation 'org.springframework.boot:spring-boot-starter-webflux:2.6.7'\n\n    testImplementation 'org.mockito:mockito-core:4.5.1'\n    testImplementation 'net.bytebuddy:byte-buddy:1.12.10'\n\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web:2.6.7'\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux:2.6.7'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\ndef studentOutputDir = sourceSets.main.java.destinationDirectory.get()\ndef scaConfigDirectory = \"$projectDir/staticCodeAnalysisConfig\"\n\nsourceSets {\n    common {\n        java {\n            srcDir 'assignment/src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'assignment/src/server/java'\n        }\n        resources {\n            srcDir 'assignment/src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'assignment/src/client/java'\n        }\n        resources {\n            srcDir 'assignment/src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n\n    test {\n        java {\n            srcDir 'test'\n        }\n        resources {\n            srcDir 'test'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n        compileClasspath += server.output\n        runtimeClasspath += server.output\n        compileClasspath += client.output\n        runtimeClasspath += client.output\n    }\n}\n\ntest {\n    defaultCharacterEncoding = 'UTF-8'\n    useJUnitPlatform()\n}\n\n\ncheckstyle {\n    configFile = file(\"$scaConfigDirectory/checkstyle-configuration.xml\")\n    ignoreFailures = true\n    // exclude the test files\n    checkstyleTest.enabled = false\n    checkstyleServer.reports {\n        xml {\n            enabled = true\n            outputLocation = file('target/checkstyle-result.xml')\n        }\n        html.enabled = false\n    }\n}\n\nspotbugs {\n    excludeFilter = file(\"$scaConfigDirectory/spotbugs-exclusions.xml\")\n    ignoreFailures = true\n    // exclude the test files\n    spotbugsTest.enabled = false\n    spotbugsClient.reports {\n        add(spotbugsServer)\n        add(spotbugsCommon)\n        xml {\n            enabled = true\n            outputLocation = file('target/spotbugsXml.xml')\n        }\n        html.enabled = false\n    }\n}\n\npmd {\n    ruleSets = [\"$scaConfigDirectory/pmd-configuration.xml\"]\n    rulesMinimumPriority = 5\n    ignoreFailures = true\n    // exclude the test files\n    pmdTest.enabled = false\n    pmdServer.reports {\n        xml {\n            enabled = true\n            outputLocation = file('target/pmd.xml')\n        }\n    }\n}\n\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n\ntasks.register('tiaTests', com.teamscale.TestImpacted) {\n    systemProperty \"ares.security.trustedpackages\", \"okhttp3,com.teamscale,retrofit2,shadow,com.squareup,okio\"\n    useJUnitPlatform()\n    filter {\n        excludeTestsMatching \"AttributeTest\"\n        excludeTestsMatching \"ConstructorTest\"\n        excludeTestsMatching \"ClassTest\"\n        excludeTestsMatching \"MethodTest\"\n    }\n    jacoco {\n        includes = [\"de.tum.in.ase.eist.*\"]\n    }\n}\n\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Spring-Tests'\n"
          },
          {
            "path": "staticCodeAnalysisConfig/spotbugs-exclusions.xml",
            "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<FindBugsFilter>\n    <!--\n    Spotbugs uses filter files to configure the reporting of bugs. Add the path of the filter file to the configuration\n    of the Spotbugs Maven plugin in the Project Object Model (POM).\n    Use <includeFilterFile>/<excludeFilterFile> to include/exclude all bugs matching the criteria defined in such a file.\n    For more information about filters consult the official Spotbugs documentation https://spotbugs.readthedocs.io/en/stable/filter.html#.\n    The examples below show some filter options.\n    -->\n\n    <!-- In case of using Records from Java 16, the equals check should get disabled for that record\n    <Match>\n        <Class name=\"Package.NameOfRecord\" />\n        <Bug code=\"EQ_UNUSUAL\" />\n    </Match> -->\n\n    <!-- Matches a whole class\n    <Match>\n        <Class name=\"com.foobar.ClassNotToBeAnalyzed\" />\n    </Match> -->\n\n    <!-- Matches specific rules in a class\n    <Match>\n        <Class name=\"com.foobar.ClassWithSomeBugsMatched\" />\n        <Bug code=\"DE,UrF,SIC\" />\n    </Match> -->\n\n    <!-- Match all XYZ violations\n    <Match>\n        <Bug code=\"XYZ\" />\n    </Match>  -->\n\n    <!-- Match a method with a dead local store false positive (medium priority)\n    <Match>\n        <Class name=\"com.foobar.MyClass\" />\n        <Method name=\"someMethod\" />\n        <Bug pattern=\"DLS_DEAD_LOCAL_STORE\" />\n        <Priority value=\"2\" />\n    </Match> -->\n\n    <!-- All bugs in test classes, except for JUnit-specific bugs\n    <Match>\n        <Class name=\"~.*\\.*Test\" />\n        <Not>\n            <Bug code=\"IJU\" />\n        </Not>\n    </Match> -->\n    <Match>\n        <Bug code=\"EI\"/>\n    </Match>\n    <Match>\n        <Bug code=\"EI2\"/>\n    </Match>\n</FindBugsFilter>\n"
          },
          {
            "path": "staticCodeAnalysisConfig/pmd-configuration.xml",
            "content": "<ruleset name=\"Custom Rules\"\n         xmlns=\"http://pmd.sourceforge.net/ruleset/2.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd\">\n\n    <description>\n        Default PMD configuration for Artemis programming exercises based on the default PMD Maven configuration.\n        Consult https://pmd.github.io/latest/pmd_userdocs_making_rulesets.html for more information.\n    </description>\n\n    <!-- Use patterns to exclude/include files for this ruleset\n    <exclude-pattern>.*/some/package/.*</exclude-pattern>\n    <include-pattern>.*/some/package/ButNotThisClass.*</include-pattern>\n    -->\n\n    <!-- Bulk adding all rules of all categories. Does not add deprecated rules. Single rule exclusions are possible.\n    <rule ref=\"category/java/documentation.xml\">\n        <exclude name=\"RuleName\"/>\n    </rule> -->\n\n    <!-- Best Practices -->\n    <rule ref=\"category/java/bestpractices.xml/AvoidUsingHardCodedIP\"/>\n    <rule ref=\"category/java/bestpractices.xml/CheckResultSet\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedImports\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedFormalParameter\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedLocalVariable\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedPrivateField\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedPrivateMethod\"/>\n\n    <!-- Code Style -->\n    <rule ref=\"category/java/codestyle.xml/DontImportJavaLang\"/>\n    <rule ref=\"category/java/codestyle.xml/DuplicateImports\"/>\n    <rule ref=\"category/java/codestyle.xml/ExtendsObject\"/>\n    <rule ref=\"category/java/codestyle.xml/ForLoopShouldBeWhileLoop\"/>\n    <rule ref=\"category/java/codestyle.xml/TooManyStaticImports\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryFullyQualifiedName\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryModifier\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryReturn\"/>\n    <rule ref=\"category/java/codestyle.xml/UselessParentheses\"/>\n    <rule ref=\"category/java/codestyle.xml/UselessQualifiedThis\"/>\n\n    <!-- Design -->\n    <rule ref=\"category/java/design.xml/CollapsibleIfStatements\"/>\n    <rule ref=\"category/java/design.xml/SimplifiedTernary\"/>\n    <rule ref=\"category/java/design.xml/UselessOverridingMethod\"/>\n\n    <!-- Error Prone -->\n    <rule ref=\"category/java/errorprone.xml/AvoidBranchingStatementAsLastInLoop\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidDecimalLiteralsInBigDecimalConstructor\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidMultipleUnaryOperators\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidUsingOctalValues\"/>\n    <rule ref=\"category/java/errorprone.xml/BrokenNullCheck\"/>\n    <rule ref=\"category/java/errorprone.xml/CheckSkipResult\"/>\n    <rule ref=\"category/java/errorprone.xml/ClassCastExceptionWithToArray\"/>\n    <rule ref=\"category/java/errorprone.xml/DontUseFloatTypeForLoopIndices\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyCatchBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyFinallyBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyIfStmt\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyInitializer\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyStatementBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyStatementNotInLoop\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptySwitchStatements\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptySynchronizedBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyTryBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyWhileStmt\"/>\n    <rule ref=\"category/java/errorprone.xml/ImportFromSamePackage\"/>\n    <rule ref=\"category/java/errorprone.xml/JumbledIncrementer\"/>\n    <rule ref=\"category/java/errorprone.xml/MisplacedNullCheck\"/>\n    <rule ref=\"category/java/errorprone.xml/OverrideBothEqualsAndHashcode\"/>\n    <rule ref=\"category/java/errorprone.xml/ReturnFromFinallyBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/UnconditionalIfStatement\"/>\n    <rule ref=\"category/java/errorprone.xml/UnnecessaryConversionTemporary\"/>\n    <rule ref=\"category/java/errorprone.xml/UnusedNullCheckInEquals\"/>\n    <rule ref=\"category/java/errorprone.xml/UselessOperationOnImmutable\"/>\n\n    <!-- Multi Threading -->\n    <rule ref=\"category/java/multithreading.xml/AvoidThreadGroup\"/>\n    <rule ref=\"category/java/multithreading.xml/DontCallThreadRun\"/>\n    <rule ref=\"category/java/multithreading.xml/DoubleCheckedLocking\"/>\n\n    <!-- Performance -->\n    <rule ref=\"category/java/performance.xml/BigIntegerInstantiation\"/>\n    <rule ref=\"category/java/performance.xml/BooleanInstantiation\"/>\n\n    <!-- Security -->\n    <rule ref=\"category/java/security.xml\"/>\n\n    <!-- Documentation, already checked by CheckStyle -->\n\n\n</ruleset>\n"
          },
          {
            "path": "staticCodeAnalysisConfig/checkstyle-configuration.xml",
            "content": "<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n    \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n    \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n\n<!--\n  Artemis default Checkstyle configuration based on the sun coding conventions from:\n    - the Java Language Specification at\n      https://docs.oracle.com/javase/specs/jls/se11/html/index.html\n    - the Sun Code Conventions at https://www.oracle.com/java/technologies/javase/codeconventions-contents.html\n    - the Javadoc guidelines at\n      https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html\n    - the JDK Api documentation https://docs.oracle.com/en/java/javase/11/\n    - some best practices\n  Most Checks are configurable, be sure to consult the documentation.\n  To completely disable a check, just comment it out or delete it from the file.\n  Consult the docs for more information https://checkstyle.org.\n-->\n\n<module name=\"Checker\">\n    <property name=\"severity\" value=\"error\"/>\n\n    <property name=\"fileExtensions\" value=\"java, properties, xml\"/>\n\n    <!-- Excludes all 'module-info.java' files              -->\n    <!-- See https://checkstyle.org/config_filefilters.html -->\n    <module name=\"BeforeExecutionExclusionFileFilter\">\n        <property name=\"fileNamePattern\" value=\"module\\-info\\.java$\"/>\n    </module>\n\n    <!-- Checks that a package-info.java file exists for each package.     -->\n    <!-- See https://checkstyle.org/config_javadoc.html#JavadocPackage -->\n    <!-- <module name=\"JavadocPackage\"/> -->\n\n    <!-- Checks whether files end with a new line.                        -->\n    <!-- See https://checkstyle.org/config_misc.html#NewlineAtEndOfFile -->\n    <module name=\"NewlineAtEndOfFile\"/>\n\n    <!-- Checks that property files contain the same keys.         -->\n    <!-- See https://checkstyle.org/config_misc.html#Translation -->\n    <module name=\"Translation\"/>\n\n    <!-- Checks for Size Violations.                    -->\n    <!-- See https://checkstyle.org/config_sizes.html -->\n    <module name=\"FileLength\"/>\n    <module name=\"LineLength\">\n        <property name=\"fileExtensions\" value=\"java\"/>\n        <property name=\"max\" value=\"150\"/>\n        <property name=\"ignorePattern\" value=\"^package.*|^import.*|a href|href|http://|https://|ftp://\"/>\n    </module>\n\n    <!-- Miscellaneous other checks.                   -->\n    <!-- See https://checkstyle.org/config_misc.html -->\n    <module name=\"RegexpSingleline\">\n        <property name=\"format\" value=\"\\s+$\"/>\n        <property name=\"minimum\" value=\"0\"/>\n        <property name=\"maximum\" value=\"0\"/>\n        <property name=\"message\" value=\"Line has trailing spaces.\"/>\n    </module>\n\n    <!-- Checks for Headers                                -->\n    <!-- See https://checkstyle.org/config_header.html   -->\n    <!-- <module name=\"Header\"> -->\n    <!--   <property name=\"headerFile\" value=\"${checkstyle.header.file}\"/> -->\n    <!--   <property name=\"fileExtensions\" value=\"java\"/> -->\n    <!-- </module> -->\n\n    <module name=\"TreeWalker\">\n\n        <!-- Checks for Javadoc comments.                     -->\n        <!-- See https://checkstyle.org/config_javadoc.html -->\n        <module name=\"InvalidJavadocPosition\"/>\n        <module name=\"JavadocMethod\"/>\n        <module name=\"JavadocType\"/>\n        <!--<module name=\"JavadocVariable\"/> -->\n        <module name=\"JavadocStyle\"/>\n        <module name=\"MissingJavadocMethod\">\n            <property name=\"allowMissingPropertyJavadoc\" value=\"true\"/>\n            <property name=\"allowedAnnotations\" value=\"Override,Test\"/>\n            <property name=\"tokens\" value=\"METHOD_DEF,ANNOTATION_FIELD_DEF,COMPACT_CTOR_DEF\"/>\n        </module>\n\n        <!-- Checks for Naming Conventions.                  -->\n        <!-- See https://checkstyle.org/config_naming.html -->\n        <module name=\"ConstantName\"/>\n        <module name=\"LocalFinalVariableName\"/>\n        <module name=\"LocalVariableName\"/>\n        <module name=\"MemberName\"/>\n        <module name=\"MethodName\"/>\n        <!-- <module name=\"PackageName\"/> -->\n        <module name=\"ParameterName\"/>\n        <module name=\"StaticVariableName\"/>\n        <module name=\"TypeName\"/>\n\n        <!-- Checks for imports                              -->\n        <!-- See https://checkstyle.org/config_imports.html -->\n        <!-- <module name=\"AvoidStarImport\"/> -->\n        <module name=\"IllegalImport\"/> <!-- defaults to sun.* packages -->\n        <module name=\"RedundantImport\"/>\n        <module name=\"UnusedImports\">\n            <property name=\"processJavadoc\" value=\"false\"/>\n        </module>\n\n        <!-- Checks for Size Violations.                    -->\n        <!-- See https://checkstyle.org/config_sizes.html -->\n        <module name=\"MethodLength\"/>\n        <module name=\"ParameterNumber\"/>\n\n        <!-- Checks for whitespace                               -->\n        <!-- See https://checkstyle.org/config_whitespace.html -->\n        <module name=\"EmptyForIteratorPad\"/>\n        <module name=\"GenericWhitespace\"/>\n        <module name=\"MethodParamPad\"/>\n        <module name=\"NoWhitespaceAfter\"/>\n        <module name=\"NoWhitespaceBefore\"/>\n        <module name=\"OperatorWrap\"/>\n        <module name=\"ParenPad\"/>\n        <module name=\"TypecastParenPad\"/>\n        <module name=\"WhitespaceAfter\"/>\n        <module name=\"WhitespaceAround\"/>\n\n        <!-- Modifier Checks                                    -->\n        <!-- See https://checkstyle.org/config_modifiers.html -->\n        <module name=\"ModifierOrder\"/>\n        <module name=\"RedundantModifier\"/>\n\n        <!-- Checks for blocks. You know, those {}'s         -->\n        <!-- See https://checkstyle.org/config_blocks.html -->\n        <module name=\"AvoidNestedBlocks\"/>\n        <module name=\"EmptyBlock\"/>\n        <!-- <module name=\"LeftCurly\"/> -->\n        <module name=\"NeedBraces\"/>\n        <!-- <module name=\"RightCurly\"/> -->\n\n        <!-- Checks for common coding problems               -->\n        <!-- See https://checkstyle.org/config_coding.html -->\n        <module name=\"EmptyStatement\"/>\n        <module name=\"EqualsHashCode\"/>\n        <module name=\"HiddenField\">\n            <property name=\"ignoreConstructorParameter\" value=\"true\"/>\n            <property name=\"ignoreSetter\" value=\"true\"/>\n            <property name=\"setterCanReturnItsClass\" value=\"true\"/>\n        </module>\n        <module name=\"IllegalInstantiation\"/>\n        <module name=\"InnerAssignment\"/>\n        <module name=\"MagicNumber\"/>\n        <module name=\"MissingSwitchDefault\"/>\n        <module name=\"MultipleVariableDeclarations\"/>\n        <module name=\"SimplifyBooleanExpression\"/>\n        <module name=\"SimplifyBooleanReturn\"/>\n\n        <!-- Checks for class design                         -->\n        <!-- See https://checkstyle.org/config_design.html -->\n        <!--<module name=\"DesignForExtension\"/> -->\n        <module name=\"FinalClass\"/>\n        <module name=\"InterfaceIsType\"/>\n        <module name=\"VisibilityModifier\"/>\n\n        <!-- Miscellaneous other checks.                   -->\n        <!-- See https://checkstyle.org/config_misc.html -->\n        <module name=\"ArrayTypeStyle\"/>\n        <!-- <module name=\"FinalParameters\"/> -->\n        <!-- <module name=\"TodoComment\"/> -->\n        <module name=\"UpperEll\"/>\n\n    </module>\n\n</module>\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/PersonControllerTest.java",
            "content": "package de.tum.in.ase.eist;\n\nimport static de.tum.in.ase.eist.H05E01Client.*;\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport okhttp3.mockwebserver.MockResponse;\nimport okhttp3.mockwebserver.MockWebServer;\nimport okhttp3.mockwebserver.RecordedRequest;\nimport org.junit.jupiter.api.*;\nimport org.mockito.ArgumentCaptor;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\nimport java.util.function.Consumer;\nimport java.util.concurrent.TimeUnit;\n\n@H05E01\npublic class PersonControllerTest {\n\n    private static MockWebServer mockWebServer;\n    private static ObjectMapper objectMapper;\n\n    private Object personController;\n    private Person person1;\n    private Person person2;\n\n    @BeforeAll\n    static void setUp() {\n        objectMapper = new ObjectMapper();\n        objectMapper.findAndRegisterModules();\n    }\n\n    @BeforeEach\n    void initialize() throws Exception {\n        // restarting the server for every test is required because otherwise tests interfere with each other\n        mockWebServer = new MockWebServer();\n        mockWebServer.start(8080);\n        personController = createPersonController();\n\n        person1 = new Person();\n        var uuid1 = UUID.randomUUID();\n        person1.setId(uuid1);\n        person1.setFirstName(\"Max\");\n        person1.setLastName(\"Musterfrau\");\n        person1.setBirthday(LocalDate.ofYearDay(2000, 125));\n\n        person2 = new Person();\n        var uuid2 = UUID.randomUUID();\n        person2.setId(uuid2);\n        person2.setFirstName(\"Erika\");\n        person2.setLastName(\"Mustermann\");\n        person2.setBirthday(LocalDate.ofYearDay(1999, 80));\n    }\n\n    @AfterEach\n    void afterEach() throws Exception {\n        mockWebServer.shutdown();\n    }\n\n    @Test\n    @DisplayName(\"Add single valid persons (Client)\")\n    public void testAddSingleValidPerson() throws Exception {\n        testAddPerson(200, person1, List.of(person1));\n    }\n\n    @Test\n    @DisplayName(\"Add multiple valid persons (Client)\")\n    public void testAddMultipleValidPersons() throws Exception {\n        testAddPerson(200, person1, new ArrayList<>(List.of(person1)));\n        testAddPerson(200, person2, new ArrayList<>(List.of(person1, person2)));\n    }\n\n    @Test\n    @DisplayName(\"Add single invalid person (Client)\")\n    public void testAddInvalidPerson() throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(400)\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n\n        invokeAddPerson(personController, person1, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n        Thread.sleep(350);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::createPerson did not send a request.\");\n        }\n\n        verify(consumer, never()).accept(any());\n    }\n\n    @Test\n    @DisplayName(\"Edit single person (Client)\")\n    public void testEditSinglePerson() throws Exception {\n        Person updatedPerson = new Person();\n        updatedPerson.setId(person1.getId());\n        updatedPerson.setFirstName(person1.getFirstName());\n        updatedPerson.setLastName(\"Updated Last Name\");\n        updatedPerson.setBirthday(person1.getBirthday());\n\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1)));\n\n        testUpdatePerson(200, updatedPerson, List.of(updatedPerson));\n    }\n\n    @Test\n    @DisplayName(\"Edit single person for multiple existing persons (Client)\")\n    public void testEditSinglePersonForMultipleExistingPersons() throws Exception {\n        Person updatedPerson = new Person();\n        updatedPerson.setId(person1.getId());\n        updatedPerson.setFirstName(person1.getFirstName());\n        updatedPerson.setLastName(\"Updated Last Name\");\n        updatedPerson.setBirthday(person1.getBirthday());\n\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        testUpdatePerson(200, updatedPerson, List.of(updatedPerson, person2));\n    }\n\n    @Test\n    @DisplayName(\"Edit invalid person (Client)\")\n    public void testEditInvalidPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(400)\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n\n        invokeUpdatePerson(personController, person1, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n        Thread.sleep(350);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::updatePerson did not send a request.\");\n        }\n        verify(consumer, times(0));\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person 1 (Client)\")\n    public void testDeleteOnlyExistingPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1)));\n\n        testDeletePerson(200, person1, List.of());\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person 2 (Client)\")\n    public void testDeletePerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        testDeletePerson(200, person1, List.of(person2));\n    }\n\n    @Test\n    @DisplayName(\"Retrieve all persons 1 (Client)\")\n    public void testGetAllPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        var sortingOptions = new PersonSortingOptions();\n        sortingOptions.setSortField(PersonSortingOptions.SortField.ID);\n        sortingOptions.setSortingOrder(PersonSortingOptions.SortingOrder.ASCENDING);\n\n        testGetAllPersons(200, sortingOptions, List.of(person2, person1));\n    }\n\n    @Test\n    @DisplayName(\"Retrieve all persons 2 (Client)\")\n    public void testGetAllPersonsResetsSavedResult() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        var sortingOptions = new PersonSortingOptions();\n\n        sortingOptions.setSortField(PersonSortingOptions.SortField.ID);\n        sortingOptions.setSortingOrder(PersonSortingOptions.SortingOrder.ASCENDING);\n\n        testGetAllPersons(200, sortingOptions, List.of());\n    }\n\n    @Test\n    @DisplayName(\"Sort options for retrieving all persons (Client)\")\n    public void testSortingOptions() throws Exception {\n        for (var sortField : PersonSortingOptions.SortField.values()) {\n            for (var sortOrder: PersonSortingOptions.SortingOrder.values()) {\n                // this should not be required but leaving out may break some student's submission while this is the\n                // real-life behavior\n                mockWebServer.enqueue(new MockResponse()\n                        .setResponseCode(200)\n                        .setBody(objectMapper.writeValueAsString(List.of()))\n                        .setHeader(\"Content-Type\", \"application/json\"));\n\n                var sortOptions = new PersonSortingOptions();\n                sortOptions.setSortField(sortField);\n                sortOptions.setSortingOrder(sortOrder);\n                invokeGetAllPersons(personController, sortOptions, (res) -> {});\n\n\t            RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n\t            if(mockWebServer.getRequestCount() == 0) {\n                    fail(\"PersonController::createPerson did not send a request.\");\n                }\n\n\t\t\t\tThread.sleep(350);\n                assertGetAllPersonRequest(recordedRequest, sortOptions);\n            }\n        }\n    }\n\n    private void testAddPerson(int mockResponseCode, Person person, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(person))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeAddPerson(personController, person, consumer);\n\n        RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::createPerson did not send a request.\");\n        }\n        Thread.sleep(350);\n\n        verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"addPerson\");\n\n        assertEquals(\"POST\", recordedRequest.getMethod(), \"PersonController::createPerson did not send a message with the correct request type\");\n        assertEquals(\"/persons\", recordedRequest.getPath(), \"PersonController::createPerson send a message to the wrong correct endpoint path.\");\n        assertEquals(objectMapper.writeValueAsString(person), recordedRequest.getBody().readUtf8(), \"PersonController::createPerson send a message with the wrong response body.\");\n    }\n\n    private void testUpdatePerson(int mockResponseCode, Person updatedPerson, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(updatedPerson))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeUpdatePerson(personController, updatedPerson, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::updatePerson did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t    verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"updatePerson\");\n\n\n        assertEquals(\"PUT\", recordedRequest.getMethod(), \"PersonController::updatePerson did not send a message with the correct request type.\");\n        assertEquals(\"/persons/\" + updatedPerson.getId(), recordedRequest.getPath(),\"PersonController::updatePerson send a message to the wrong correct endpoint path.\");\n        assertEquals(objectMapper.writeValueAsString(updatedPerson), recordedRequest.getBody().readUtf8(), \"PersonController::createPerson send a message with the wrong response body.\");\n    }\n\n    private void testDeletePerson(int mockResponseCode, Person deletedPerson, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(deletedPerson))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeDeletePerson(personController, deletedPerson, consumer);\n\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::deletePerson did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t    verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"deletePerson\");\n\n        assertEquals(\"DELETE\", recordedRequest.getMethod(), \"PersonController::deletePerson did not send a message with the correct request type.\");\n        assertEquals(\"/persons/\" + deletedPerson.getId(), recordedRequest.getPath(),\"PersonController::deletePerson send a message to the wrong correct endpoint path.\");\n        assertEquals(\"\", recordedRequest.getBody().readUtf8(), \"PersonController::deletePerson send a message with the wrong response body.\");\n    }\n\n    private void testGetAllPersons(int mockResponseCode, PersonSortingOptions sortingOptions, List<Person> allPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(allPersons))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeGetAllPersons(personController, sortingOptions, consumer);\n\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::getAllPersons did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t\tverify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(allPersons, argument.getValue(), \"getAllPersons\");\n\n        assertGetAllPersonRequest(recordedRequest, null);\n    }\n\n    private void assertGetAllPersonRequest(RecordedRequest recordedRequest, PersonSortingOptions sortingOptions) {\n        assertEquals(\"GET\", recordedRequest.getMethod(), \"PersonController::getAllPersons did not send a message with the correct request type.\");\n        if (sortingOptions == null) {\n            if (!recordedRequest.getPath().startsWith(\"/persons\")) {\n                fail(\"PersonController::getAllPersons send a message to the wrong correct endpoint path.\");\n            }\n        } else {\n            if (!recordedRequest.getPath().startsWith(\"/persons\")) {\n                fail(\"PersonController::getAllPersons send a message to the wrong correct endpoint path.\");\n            }\n            if (recordedRequest.getRequestUrl().queryParameterNames().size() != 2 || !recordedRequest.getRequestUrl().queryParameterNames().containsAll(List.of(\"sortField\", \"sortingOrder\"))) {\n                fail(\"PersonController::getAllPersons send a message without the correct sorting options.\");\n            }\n        }\n        assertEquals(\"\", recordedRequest.getBody().readUtf8(), \"PersonController::getAllPersons send a message with the wrong response body.\");\n    }\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/H05E01.java",
            "content": "package de.tum.in.ase.eist;\n\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\n\nimport de.tum.in.test.api.*;\nimport de.tum.in.test.api.jupiter.JupiterIOExtension;\nimport de.tum.in.test.api.jupiter.JupiterStrictTimeoutExtension;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\n@ExtendWith(JupiterIOExtension.class)\n@ExtendWith(JupiterStrictTimeoutExtension.class)\n@StrictTimeout(6)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface H05E01 {\n    // marker\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/H05E01Client.java",
            "content": "package de.tum.in.ase.eist;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.assertj.core.api.Assertions.assertThat;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.test.api.util.ReflectionTestUtils;\n\nimport java.lang.reflect.Field;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.function.Consumer;\n\npublic class H05E01Client {\n\n    private static final String PERSON_CONTROLLER_FULL_NAME = \"de.tum.in.ase.eist.controller.PersonController\";\n\n    public static Object createPersonController() {\n        return ReflectionTestUtils.newInstance(ReflectionTestUtils.getConstructor(ReflectionTestUtils.getClazz(PERSON_CONTROLLER_FULL_NAME)));\n    }\n\n    public static void invokeAddPerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"addPerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeUpdatePerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"updatePerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeDeletePerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"deletePerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeGetAllPersons(Object personController, PersonSortingOptions sortingOptions, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"getAllPersons\", PersonSortingOptions.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, sortingOptions, personConsumer);\n    }\n\n    public static void assertPersonListEquals(List<Person> expectedList, List<Person> actualList, String methodName) {\n        assertNotNull(actualList, \"The resulting list of persons was null after invoking PersonController::\" + methodName + \".\");\n        assertEquals(expectedList.size(), actualList.size(), \"The resulting list of persons does not have the correct size after invoking PersonController::\" + methodName + \".\");\n\n        boolean wrongOrder = false;\n\n        for (int i=0; i<expectedList.size(); i++) {\n            if(!checkIfPersonEqual(expectedList.get(i), actualList.get(i), false)) {\n                wrongOrder = true;\n                break;\n            }\n        }\n\n        if(!wrongOrder) return;\n\n        var sortedExpectedList = expectedList.stream().sorted((a, b) -> {\n            if (a.getFirstName() == null) {\n                return -1;\n            } else if (b.getFirstName() == null) {\n                return 1;\n            } else {\n                return a.getFirstName().compareTo(b.getFirstName());\n            }\n        }).toList();\n\n        var sortedActualList = expectedList.stream().sorted((a, b) -> {\n            if (a.getFirstName() == null) {\n                return -1;\n            } else if (b.getFirstName() == null) {\n                return 1;\n            } else {\n                return a.getFirstName().compareTo(b.getFirstName());\n            }\n        }).toList();\n\n        for (int i = 0; i < sortedExpectedList.size(); i++) {\n            if(checkIfPersonEqual(sortedExpectedList.get(i), sortedActualList.get(i), false)) {\n                fail(\"The resulting list of persons is not sorted correctly after invoking PersonController::\" + methodName + \".\");\n            }\n        }\n\n        fail(\"The resulting list of persons does not contain the correct persons after invoking PersonController::\" + methodName + \".\");\n    }\n\n    public static void setPersonControllerPersons(Object personController, List<Person> personList) {\n        Field persons;\n        Object fieldValue;\n        List<Person> reflectedPersonList;\n        try {\n            persons = personController.getClass().getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            fieldValue = persons.get(personController);\n            assertThat(fieldValue).isInstanceOf(List.class);\n\n            reflectedPersonList = (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The implementation of the attribute 'persons' in class 'PersonController' is not correct.\");\n            return;\n        }\n        try {\n            reflectedPersonList.removeIf(p -> true);\n            reflectedPersonList.addAll(personList);\n        } catch (Exception e) {\n            fail(\"An unexpected error has occurred. Contact your tutor.\");\n        }\n    }\n\n    public static boolean checkIfPersonEqual(Person expectedPerson, Person actualPerson, boolean ignoreId) {\n        var res = ignoreId || Objects.equals(expectedPerson.getId(), actualPerson.getId());\n        return res && Objects.equals(expectedPerson.getFirstName(), actualPerson.getFirstName())\n                && Objects.equals(expectedPerson.getLastName(), actualPerson.getLastName())\n                && Objects.equals(expectedPerson.getBirthday(), actualPerson.getBirthday());\n    }\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/PersonResourceTest.java",
            "content": "package de.tum.in.ase.eist;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.rest.PersonResource;\nimport de.tum.in.ase.eist.service.PersonService;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.NoSuchBeanDefinitionException;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.test.annotation.DirtiesContext;\nimport org.springframework.test.web.servlet.MockMvc;\n\nimport java.lang.reflect.Field;\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\n\nimport static de.tum.in.ase.eist.H05E01Client.checkIfPersonEqual;\nimport static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.fail;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\n\n@H05E01\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\n// this is required to reset the persons saved in PersonService\n@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)\n@AutoConfigureMockMvc\npublic class PersonResourceTest {\n\n    @Autowired\n    private MockMvc mvc;\n\n    @Autowired\n    private ApplicationContext context;\n\n    private static ObjectMapper objectMapper;\n    private static Object personService;\n\n    private Person person1;\n    private Person person2;\n\n    @BeforeAll\n    static void setUp() {\n        objectMapper = new ObjectMapper();\n        objectMapper.findAndRegisterModules();\n    }\n\n    @BeforeEach\n    void initialize() {\n        try {\n            personService = context.getBean(PersonService.class);\n        } catch (NoSuchBeanDefinitionException e) {\n            fail(\"PersonService is not defined correctly as a Spring-Service.\");\n        }\n\n        try {\n            context.getBean(PersonResource.class);\n        } catch (NoSuchBeanDefinitionException e) {\n            fail(\"PersonResource is not defined correctly as a Spring-Controller.\");\n        }\n\n        person1 = new Person();\n        person1.setFirstName(\"Max\");\n        person1.setLastName(\"Musterfrau\");\n        person1.setBirthday(LocalDate.ofYearDay(2000, 125));\n\n        person2 = new Person();\n        person2.setFirstName(\"Erika\");\n        person2.setLastName(\"Mustermann\");\n        person2.setBirthday(LocalDate.ofYearDay(1999, 80));\n    }\n\n    @Test\n    @DisplayName(\"Create valid person (Server)\")\n    public void testAddSingleUser() throws Exception {\n        var response = this.mvc.perform(\n                post(\"/persons\")\n                        .content(objectMapper.writeValueAsString(person1))\n                        .contentType(\"application/json\")).andReturn().getResponse();\n\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint POST /persons has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::createPerson did not return the correct status code\");\n        assertEquals(\"application/json\", response.getContentType());\n\n        var personsInService = getAllPersonsByReflection();\n        if (personsInService == null || personsInService.size() != 1) {\n            fail(\"After calling PersonResource::createPerson, PersonResource::persons contain the wrong amount of persons.\");\n        }\n        var createdPerson = personsInService.get(0);\n\n        var responseEntity = objectMapper.readValue(response.getContentAsString(), Person.class);\n        if (!checkIfPersonEqual(createdPerson, responseEntity, true)) {\n            fail(\"PersonResource::createPerson did not return the correct person as response body.\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"Create invalid person (Server)\")\n    public void testAddInvalidPerson() throws Exception {\n        var uuid = UUID.randomUUID();\n        person1.setId(uuid);\n\n        var response = this.mvc.perform(\n                        post(\"/persons\")\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint POST /persons has not been implemented.\");\n        }\n        assertEquals(400, response.getStatus(), \"PersonResource::createPerson did not return the correct status code for an invalid request body.\");\n    }\n\n    @Test\n    @DisplayName(\"Update existing person (Server)\")\n    public void testUpdateExistingPerson() throws Exception {\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        person1.setFirstName(\"Changed\");\n        person1.setLastName(\"Name\");\n\n        var response = this.mvc.perform(\n                        put(\"/persons/\" + person1.getId())\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint PUT /persons/:personId has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::updatePerson did not return the correct status code.\");\n        assertEquals(\"application/json\", response.getContentType());\n\n        var personsInService = getAllPersonsByReflection();\n        if (personsInService == null || personsInService.size() != 1) {\n            fail(\"After calling PersonResource::updatePerson, PersonResource::persons contain the wrong amount of persons.\");\n        }\n        var updatedPerson = personsInService.get(0);\n\n        var responseEntity = objectMapper.readValue(response.getContentAsString(), Person.class);\n        if (!checkIfPersonEqual(updatedPerson, responseEntity, false)) {\n            fail(\"PersonResource::updatePerson did not return the correct person as response body.\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"Update person with mismatching IDs (Server)\")\n    public void testUpdatePersonWithIdMismatch() throws Exception {\n        var mismatchedId = UUID.randomUUID();\n\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        var response = this.mvc.perform(\n                        put(\"/persons/\" + mismatchedId)\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint PUT /persons/:personId has not been implemented.\");\n        }\n        assertEquals(400, response.getStatus(), \"PersonResource::updatePerson did not return the correct status code for an invalid response body.\");\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person (Server)\")\n    public void testDeleteExistingPerson() throws Exception {\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        var response = this.mvc.perform(\n                delete(\"/persons/\" + person1.getId())\n                        .content(objectMapper.writeValueAsString(person1))\n                        .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint DELETE /persons/:personId has not been implemented.\");\n        }\n        assertEquals(204, response.getStatus(), \"PersonResource::deletePerson did not return the correct status code.\");\n    }\n\n    @Test\n    @DisplayName(\"Get all persons with sorting options (Server)\")\n    public void testGetAllPersons() throws Exception {\n        var id1 = UUID.randomUUID();\n        var id2 = UUID.randomUUID();\n        person1.setId(id1);\n        person2.setId(id2);\n        setAllPersonsByReflection(List.of(person1, person2));\n\n        for (var fieldOption: PersonSortingOptions.SortField.values()) {\n            for (var orderOption: PersonSortingOptions.SortingOrder.values()) {\n                var sortedList = getSortedList(List.of(person1, person2), orderOption, fieldOption);\n                var response = this.mvc.perform(\n                                get(\"/persons\")\n                                        .param(\"sortField\", fieldOption.name())\n                                        .param(\"sortingOrder\", orderOption.name())\n                                        .contentType(\"application/json\")).andReturn().getResponse();\n\n                if (response.getStatus() == 404 || response.getStatus() == 405) {\n                    fail(\"The endpoint GET /persons has not been implemented.\");\n                }\n                assertEquals(200, response.getStatus(), \"PersonResource::getAllPersons did not return the correct status code.\");\n\n                var respondedPersons = objectMapper.readValue(response.getContentAsString(), Person[].class);\n                if (respondedPersons.length != 2) {\n                    fail(\"PersonResource::getAllPersons did not return the correct amount of persons.\");\n                }\n                for (int i = 0; i < respondedPersons.length; i++){\n                    if (!checkIfPersonEqual(sortedList.get(i), respondedPersons[i], false)) {\n                        fail(\"PersonResource::getAllPersons did not contain the correct person/correct order as response body for a request with sorting options.\");\n                    }\n                }\n            }\n        }\n    }\n\n    @Test\n    @DisplayName(\"Get all persons with default request parameters (Server)\")\n    public void testDefaultSortValues() throws Exception {\n        var id1 = UUID.randomUUID();\n        var id2 = UUID.randomUUID();\n        person1.setId(id1);\n        person2.setId(id2);\n        setAllPersonsByReflection(List.of(person1, person2));\n\n        var sortedList = getSortedList(List.of(person1, person2), ASCENDING, PersonSortingOptions.SortField.ID);\n        var response = this.mvc.perform(\n                        get(\"/persons\")\n                                .contentType(\"application/json\")).andReturn().getResponse();\n\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint GET /persons has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::getAllPersons did not return the correct status code.\");\n        var respondedPersons = objectMapper.readValue(response.getContentAsString(), Person[].class);\n        if (respondedPersons.length != 2) {\n            fail(\"PersonResource::getAllPersons did not return the correct amount of persons.\");\n        }\n\t    var sortedRespondedPersons = getSortedList(List.of(respondedPersons), ASCENDING, PersonSortingOptions.SortField.ID);\n\t    for (int i = 0; i < sortedRespondedPersons.size(); i++){\n            if (!checkIfPersonEqual(sortedList.get(i), sortedRespondedPersons.get(i), false)) {\n                fail(\"PersonResource::getAllPersons did not contain the correct person/correct order as response body when performing a request without sorting options.\");\n            }\n        }\n    }\n\n    private static List<Person> getSortedList(List<Person> persons, PersonSortingOptions.SortingOrder sortingOrder, PersonSortingOptions.SortField sortField) {\n        var sortedList = new ArrayList<>(persons);\n        sortedList.sort((p1, p2) -> {\n            Person person1;\n            Person person2;\n            if (sortingOrder == ASCENDING) {\n                person1 = p1;\n                person2 = p2;\n            } else {\n                person1 = p2;\n                person2 = p1;\n            }\n\n            return switch (sortField) {\n                case ID -> person1.getId().compareTo(person2.getId());\n                case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n                case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n                case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n            };\n        });\n\n        return sortedList;\n    }\n\n    public static void setAllPersonsByReflection(List<Person> personList) {\n        Field persons;\n        Object fieldValue;\n        List<Person> reflectedPersonList;\n        try {\n            persons = PersonService.class.getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            fieldValue = persons.get(personService);\n            if (!(fieldValue instanceof List)) {\n                fail(\"The attribute 'persons' in class 'PersonResource' has not the correct type.\");\n            }\n\n            reflectedPersonList = (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The attribute 'persons' in class 'PersonResource' has not been implemented as described.\");\n            return;\n        }\n        try {\n            reflectedPersonList.removeIf(p -> true);\n            reflectedPersonList.addAll(personList);\n        } catch (Exception e) {\n            fail(\"An unexpected error has occurred. Contact your tutor.\");\n        }\n    }\n\n    public static List<Person> getAllPersonsByReflection() {\n        try {\n            Field persons = PersonService.class.getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            Object fieldValue = persons.get(personService);\n\n            if (!(fieldValue instanceof List)) {\n                fail(\"The attribute 'persons' in class 'PersonService' has not the correct type.\");\n            }\n            return (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The attribute 'persons' in class 'PersonService' has not been implemented as described.\");\n            return null;\n        }\n    }\n}\n"
          }
        ]
      },
      "outputs": {
        "output": {
          "issues": []
        }
      },
      "tags": [
        "map:key:semantic"
      ],
      "parent_run_id": "426ee021-0ec1-40e6-bda0-4be115f42a34",
      "trace_id": "2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "dotted_order": "20250723T144040524034Z2102d036-0bf8-4863-879f-f17bd2b1b9ca.20250723T144040588355Z426ee021-0ec1-40e6-bda0-4be115f42a34.20250723T144040592707Zb24c9117-122d-41e4-abe8-975026ccf3a1",
      "session_id": "9165a489-2e1b-4cfc-a139-82686a2268ba",
      "extra": {
        "inputs_is_truthy": true,
        "runtime": {
          "sdk": "langsmith-py",
          "sdk_version": "0.3.42",
          "library": "langsmith",
          "platform": "macOS-15.3-arm64-arm-64bit-Mach-O",
          "runtime": "python",
          "py_implementation": "CPython",
          "runtime_version": "3.13.5",
          "langchain_version": "0.3.25",
          "langchain_core_version": "0.3.59"
        },
        "metadata": {
          "LANGSMITH_TRACING": "true",
          "LANGCHAIN_RUN_ID": "39eb4060",
          "revision_id": "v1.1.0-48-g1c4fbcca-dirty",
          "ls_run_depth": 2
        }
      },
      "events": [
        {
          "name": "start",
          "time": "2025-07-23T14:40:40.592707+00:00"
        },
        {
          "name": "end",
          "time": "2025-07-23T14:41:08.966298+00:00"
        }
      ]
    },
    {
      "id": "426ee021-0ec1-40e6-bda0-4be115f42a34",
      "name": "RunnableParallel<structural,semantic>",
      "run_type": "chain",
      "start_time": "2025-07-23T14:40:40.588355",
      "end_time": null,
      "status": "pending",
      "inputs": {
        "problem_statement": "# REST Architectural Style\n\nThe university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n\nThis exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n\n## Application Structure\n\nThe following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n<br>\n#### Client-Side:\n- The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n- The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n- The `Network Layer` contains the functionality to send REST requests to the server.\n\n#### Server-Side:\n- The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n- The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n\n### Layered Architecture\n@startuml\n\nnamespace Client {\n    namespace NetworkLayer {}\n    \n    namespace PresentationLayer {}\n    \n    namespace ApplicationLayer {}\n}\n\nnamespace Server {\n    namespace NetworkLayer {}\n    \n    namespace BusinessLayer {}\n}\n\nClient.PresentationLayer --> Client.ApplicationLayer\nClient.ApplicationLayer --> Client.NetworkLayer\nClient.NetworkLayer <---> Server.NetworkLayer\nServer.NetworkLayer --> Server.BusinessLayer\nServer.NetworkLayer -[hidden]> Client.NetworkLayer\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\nOn the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n### MVC Component Diagram\n@startuml\n\nnamespace Common {\n    namespace Model {\n        class Common.Model.Note {\n            \n        }\n        class Common.Model.Person {\n            \n        }\n    }\n}\n\nnamespace Client {\n    namespace Controller {\n        class Client.Controller.NoteController {\n            \n        }\n        class Client.Controller.PersonController {\n            \n        }\n    }\n    namespace View {\n        class Client.View.NoteScene {\n            \n        }\n        class Client.View.PersonScene {\n            \n        }\n    }\n}\n\nClient.Controller.NoteController <-- Client.View.NoteScene\nClient.Controller.PersonController <-- Client.View.PersonScene\nCommon.Model.Note \"*\" --o Client.Controller.NoteController\nCommon.Model.Person \"*\" --o Client.Controller.PersonController\n\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\n<br />\n\n***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n\n\n## Application Functionality\nThis system has 2 sides.\n- Client-side\n- Server-side\n\n\nThe server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\nThe client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n\nThe endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n- `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n- `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n- `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n- `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n\n*Note: There are TODOs in the code giving helpful hints*\n\n***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n*`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n*`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n*`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n*Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n<br/>\n<br/>\n##Part 1\nIn the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\nYou have to forward each action to the `PersonService` and add any additional checks before that.\n\n1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n    Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n    Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n3. [task][Endpoint to delete a person](Delete existing person (Server))\n    Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n    Last but not the least, implement the method `getAllPersons`, which returns all persons.\n\n*Note: Feel free to get inspired by `NoteResource` for additional help.*\n\n\n\n##Part 2\nIn the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\nThe Controller should work like this:\n- There is a single `WebClient` instance that is used for all requests\n- Each method should only send a single HTTP request\n- The HTTP requests need to happen asynchronously\n- It has an internal list of all persons\n    - If a person is created, updated or deleted this has to be updated in the list\n    - If all persons are retrieved from the server the list has to be updated accordingly\n- Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n    - This consumer takes the internal list of persons as a parameter\n\n### UML Diagram\n@startuml\n\nnamespace Client {\n    namespace Controller {\n        class PersonController {\n            - webClient: WebClient\n            + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n            + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n            + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n            + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n        }\n    }\n}\n\nnamespace Common {\n    class Person {\n        - id: UUID\n        - firstName: String\n        - lastName: String\n        - birthday: LocalDate\n    }\n}\n\nClient.Controller.PersonController o-- \"*\" Common.Person : persons\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\n<br />\n\n1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n    Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n    Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n    Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n    Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n\n*Note: Don't forget the constructor of `PersonController`*\n\n##Part 3\nIt has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n\nIt is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\nSome additional notes:\n- The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n- The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n\n[task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\nImplement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\nThen update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n\n*Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*",
        "programming_language": "java",
        "template_repository": [
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\ngroup = 'de.tum.in.ase.eist'\nversion = '1.0.0'\nsourceCompatibility = 17\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web'\n\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\nsourceSets {\n    common {\n        java {\n            srcDir 'src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'src/server/java'\n        }\n        resources {\n            srcDir 'src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'src/client/java'\n        }\n        resources {\n            srcDir 'src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n}\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Spring-Exercise'\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.view.HomeScene;\nimport de.tum.in.ase.eist.view.NoteScene;\nimport de.tum.in.ase.eist.view.PersonScene;\nimport javafx.application.Application;\nimport javafx.stage.Stage;\n\npublic class H05E01ClientApplication extends Application {\n    private final NoteController noteController = new NoteController();\n    private final PersonController personController = new PersonController();\n    private Stage stage;\n\n    @Override\n    public void start(Stage primaryStage) {\n        this.stage = primaryStage;\n\n        primaryStage.setScene(new HomeScene(this));\n        primaryStage.show();\n    }\n\n    public void showHomeScene() {\n        stage.setScene(new HomeScene(this));\n    }\n\n    public void showNoteScene() {\n        stage.setScene(new NoteScene(noteController, this));\n    }\n\n    public void showPersonScene() {\n        stage.setScene(new PersonScene(personController, this));\n    }\n\n    public Stage getStage() {\n        return stage;\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/Starter.java",
            "content": "package de.tum.in.ase.eist;\n\nimport javafx.application.Application;\n\npublic class Starter {\n    public static void main(String[] args) {\n        Application.launch(H05E01ClientApplication.class);\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/NoteController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class NoteController {\n    private final WebClient webClient;\n    private final List<Note> notes;\n\n    public NoteController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.notes = new ArrayList<>();\n    }\n\n    public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.post()\n                .uri(\"notes\")\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.add(newNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.put()\n                .uri(\"notes/\" + note.getId())\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.delete()\n                .uri(\"notes/\" + note.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    notes.remove(note);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"notes\")\n                        .queryParam(\"secret\", \"SecretKey\")\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n                .onErrorStop()\n                .subscribe(newNotes -> {\n                    notes.clear();\n                    notes.addAll(newNotes);\n                    notesConsumer.accept(notes);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/PersonController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class PersonController {\n\n    public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http post request to the server\n    }\n\n    public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http put request to the server\n    }\n\n    public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http delete request to the server\n    }\n\n    public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an https get request to the server\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/PersonScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\nimport javafx.application.Platform;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Popup;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic class PersonScene extends Scene {\n    private final PersonController personController;\n    private final H05E01ClientApplication application;\n    private final PersonSortingOptions sortingOptions;\n    private final ObservableList<Person> personList;\n    private final TableView<Person> table;\n\n    public PersonScene(PersonController personController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.personController = personController;\n        this.application = application;\n        this.sortingOptions = new PersonSortingOptions();\n        this.personList = FXCollections.observableArrayList();\n\n        table = new TableView<>(personList);\n        table.setOnMousePressed(event -> {\n            if (event.isPrimaryButtonDown()) {\n                showPopup(table.getSelectionModel().getSelectedItem());\n            }\n        });\n\n        var idColumn = new TableColumn<Person, String>(\"ID\");\n        idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n        idColumn.setSortable(false);\n        idColumn.setPrefWidth(620 / 4D);\n        var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n        firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n        firstNameColumn.setSortable(false);\n        firstNameColumn.setPrefWidth(620 / 4D);\n        var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n        lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n        lastNameColumn.setSortable(false);\n        lastNameColumn.setPrefWidth(620 / 4D);\n        var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n        birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n        birthdayColumn.setSortable(false);\n        birthdayColumn.setPrefWidth(620 / 4D);\n        //noinspection unchecked\n        table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n\n        var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n\n        personController.getAllPersons(sortingOptions, this::setPeople);\n    }\n\n    private HBox createSortOptionBox() {\n        var sortFieldChoiceBox = new ChoiceBox<SortField>();\n        sortFieldChoiceBox.getItems().addAll(SortField.values());\n        sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n        sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortField(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n        sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n        sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n        sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortingOrder(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n        hBox.setAlignment(Pos.CENTER);\n        return hBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Person\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Person person) {\n        var popup = new Popup();\n        var firstNameTextField = new TextField();\n        firstNameTextField.setPromptText(\"First Name\");\n        firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n\n        var lastNameTextField = new TextField();\n        lastNameTextField.setPromptText(\"Last Name\");\n        lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n\n        var birthdayPicker = new DatePicker();\n        birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newPerson = person != null ? person : new Person();\n            newPerson.setFirstName(firstNameTextField.getText());\n            newPerson.setLastName(lastNameTextField.getText());\n            newPerson.setBirthday(birthdayPicker.getValue());\n            if (person == null) {\n                personController.addPerson(newPerson, this::setPeople);\n            } else {\n                personController.updatePerson(newPerson, this::setPeople);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            personController.deletePerson(person, this::setPeople);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (person != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(150);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n\n    private void setPeople(List<Person> people) {\n        Platform.runLater(() -> personList.setAll(people));\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/NoteScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.model.Note;\nimport javafx.application.Platform;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\nimport javafx.stage.Popup;\n\nimport java.util.List;\n\npublic class NoteScene extends Scene {\n    private final NoteController noteController;\n    private final H05E01ClientApplication application;\n    private final FlowPane flowPane;\n\n    public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.noteController = noteController;\n        this.application = application;\n\n        flowPane = new FlowPane(10, 10);\n        var scrollPane = new ScrollPane(flowPane);\n        scrollPane.setPrefHeight(450);\n        scrollPane.setFitToWidth(true);\n\n        var vBox = new VBox(10, scrollPane, createButtonBox());\n\n        noteController.getAllNotes(this::setNotes);\n        this.setRoot(vBox);\n    }\n\n    public void setNotes(List<Note> notes) {\n        Platform.runLater(() -> {\n            var children = flowPane.getChildren();\n            children.setAll(notes.stream().map(this::createNoteView).toList());\n        });\n    }\n\n    private Node createNoteView(Note note) {\n        var name = new Text(note.getName());\n        name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n\n        var spacer = new Region();\n        HBox.setHgrow(spacer, Priority.ALWAYS);\n\n        var deleteButton = new Button(\"E\");\n        deleteButton.setTextFill(Color.ORANGE);\n        deleteButton.setOnAction(event -> showPopup(note));\n\n        var titleBox = new HBox(name, spacer, deleteButton);\n\n        var content = new Text(note.getContent());\n        var contentScrollPane = new ScrollPane(content);\n        contentScrollPane.setFitToWidth(true);\n        contentScrollPane.setFitToHeight(true);\n        contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n        contentScrollPane.getStyleClass().clear();\n        content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n\n        var vBox = new VBox(10, titleBox, contentScrollPane);\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setStyle(\"-fx-background-color:white;\");\n        vBox.setPadding(new Insets(5));\n        return vBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Note\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Note note) {\n        var popup = new Popup();\n        var nameTextField = new TextField();\n        nameTextField.setPromptText(\"Name\");\n        nameTextField.setText(note == null ? \"\" : note.getName());\n\n        var contentTextArea = new TextArea();\n        contentTextArea.setPromptText(\"Content\");\n        contentTextArea.setText(note == null ? \"\" : note.getContent());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newNote = note != null ? note : new Note();\n            newNote.setName(nameTextField.getText());\n            newNote.setContent(contentTextArea.getText());\n            if (note == null) {\n                noteController.addNote(newNote, this::setNotes);\n            } else {\n                noteController.editNote(newNote, this::setNotes);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            noteController.deleteNote(note, this::setNotes);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (note != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/HomeScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.VBox;\n\npublic class HomeScene extends Scene {\n    public HomeScene(H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n\n        var noteButton = new Button(\"Notes\");\n        noteButton.setOnAction(event -> application.showNoteScene());\n\n        var personButton = new Button(\"Persons\");\n        personButton.setOnAction(event -> application.showPersonScene());\n\n        var vBox = new VBox(10, noteButton, personButton);\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java",
            "content": "package de.tum.in.ase.eist.util;\n\npublic class PersonSortingOptions {\n    private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n    private SortField sortField = SortField.ID;\n\n    public PersonSortingOptions() {}\n\n    public PersonSortingOptions(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n        this.sortingOrder = sortingOrder;\n        this.sortField = sortField;\n    }\n\n    public SortingOrder getSortingOrder() {\n        return sortingOrder;\n    }\n\n    public void setSortingOrder(SortingOrder sortingOrder) {\n        this.sortingOrder = sortingOrder;\n    }\n\n    public SortField getSortField() {\n        return sortField;\n    }\n\n    public void setSortField(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public enum SortingOrder {\n        ASCENDING, DESCENDING\n    }\n\n    public enum SortField {\n        ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n    }\n}"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Note.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.Instant;\nimport java.util.UUID;\n\npublic class Note {\n    private UUID id;\n    private String name;\n    private String content;\n    private Instant creationDate;\n\n    public Note() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    public Instant getCreationDate() {\n        return creationDate;\n    }\n\n    public void setCreationDate(Instant creationDate) {\n        this.creationDate = creationDate;\n    }\n\n    @Override\n    public String toString() {\n        return \"Note{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", content='\" + content + '\\'' +\n                \", creationDate=\" + creationDate +\n                '}';\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Person.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic class Person {\n    private UUID id;\n    private String firstName;\n    private String lastName;\n    private LocalDate birthday;\n\n    public Person() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public LocalDate getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(LocalDate birthday) {\n        this.birthday = birthday;\n    }\n}\n"
          },
          {
            "path": "src/server/resources/application.properties",
            "content": "logging.level.ROOT=DEBUG\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class H05E01ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(H05E01ServerApplication.class, args);\n    }\n\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/PersonService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.stereotype.Service;\n\nimport java.util.*;\n\n@Service\npublic class PersonService {\n  \t// do not change this\n    private final List<Person> persons;\n\n    public PersonService() {\n        this.persons = new ArrayList<>();\n    }\n\n    public Person savePerson(Person person) {\n        var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n        if (optionalPerson.isEmpty()) {\n            person.setId(UUID.randomUUID());\n            persons.add(person);\n            return person;\n        } else {\n            var existingPerson = optionalPerson.get();\n            existingPerson.setFirstName(person.getFirstName());\n            existingPerson.setLastName(person.getLastName());\n            existingPerson.setBirthday(person.getBirthday());\n            return existingPerson;\n        }\n    }\n\n    public void deletePerson(UUID personId) {\n        this.persons.removeIf(person -> person.getId().equals(personId));\n    }\n\n    public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n        // TODO Part 3: Add sorting here\n        return new ArrayList<>(this.persons);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/NoteService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.stereotype.Service;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Service\npublic class NoteService {\n    private final List<Note> notes;\n\n    public NoteService() {\n        this.notes = new ArrayList<>();\n    }\n\n    public Note saveNote(Note note) {\n        var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n        if (optionalNote.isEmpty()) {\n            note.setId(UUID.randomUUID());\n            note.setCreationDate(Instant.now());\n            notes.add(note);\n            return note;\n        } else {\n            var existingNote = optionalNote.get();\n            existingNote.setName(note.getName());\n            existingNote.setContent(note.getContent());\n            return existingNote;\n        }\n    }\n\n    public void deleteNote(UUID noteId) {\n        this.notes.removeIf(note -> note.getId().equals(noteId));\n    }\n\n    public List<Note> getAllNotes() {\n        return Collections.unmodifiableList(this.notes);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/PersonResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.service.PersonService;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class PersonResource {\n\n    private final PersonService personService;\n\n    public PersonResource(PersonService personService) {\n        this.personService = personService;\n    }\n\n    // TODO Part 1: Implement the specified endpoints here\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/NoteResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Note;\nimport de.tum.in.ase.eist.service.NoteService;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class NoteResource {\n\n    private final NoteService noteService;\n\n    public NoteResource(NoteService noteService) {\n        this.noteService = noteService;\n    }\n\n    @GetMapping(\"notes\")\n    public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n        if (!\"SecretKey\".equals(secret)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.getAllNotes());\n    }\n\n    @PostMapping(\"notes\")\n    public ResponseEntity<Note> createNote(@RequestBody Note note) {\n        if (note.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(note));\n    }\n\n    @PutMapping(\"notes/{noteId}\")\n    public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n        if (!updatedNote.getId().equals(noteId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(updatedNote));\n    }\n\n    @DeleteMapping(\"notes/{noteId}\")\n    public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n        noteService.deleteNote(noteId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          }
        ],
        "solution_repository": [
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\ngroup = 'de.tum.in.ase.eist'\nversion = '1.0.0'\nsourceCompatibility = 17\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web'\n\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\nsourceSets {\n    common {\n        java {\n            srcDir 'src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'src/server/java'\n        }\n        resources {\n            srcDir 'src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'src/client/java'\n        }\n        resources {\n            srcDir 'src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n}\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Solution'\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.view.HomeScene;\nimport de.tum.in.ase.eist.view.NoteScene;\nimport de.tum.in.ase.eist.view.PersonScene;\nimport javafx.application.Application;\nimport javafx.stage.Stage;\n\npublic class H05E01ClientApplication extends Application {\n    private final NoteController noteController = new NoteController();\n    private final PersonController personController = new PersonController();\n    private Stage stage;\n\n    @Override\n    public void start(Stage primaryStage) {\n        this.stage = primaryStage;\n\n        primaryStage.setScene(new HomeScene(this));\n        primaryStage.show();\n    }\n\n    public void showHomeScene() {\n        stage.setScene(new HomeScene(this));\n    }\n\n    public void showNoteScene() {\n        stage.setScene(new NoteScene(noteController, this));\n    }\n\n    public void showPersonScene() {\n        stage.setScene(new PersonScene(personController, this));\n    }\n\n    public Stage getStage() {\n        return stage;\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/Starter.java",
            "content": "package de.tum.in.ase.eist;\n\nimport javafx.application.Application;\n\npublic class Starter {\n    public static void main(String[] args) {\n        Application.launch(H05E01ClientApplication.class);\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/NoteController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class NoteController {\n    private final WebClient webClient;\n    private final List<Note> notes;\n\n    public NoteController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.notes = new ArrayList<>();\n    }\n\n    public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.post()\n                .uri(\"notes\")\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.add(newNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.put()\n                .uri(\"notes/\" + note.getId())\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.delete()\n                .uri(\"notes/\" + note.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    notes.remove(note);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"notes\")\n                        .queryParam(\"secret\", \"SecretKey\")\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n                .onErrorStop()\n                .subscribe(newNotes -> {\n                    notes.clear();\n                    notes.addAll(newNotes);\n                    notesConsumer.accept(notes);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/PersonController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class PersonController {\n    private final WebClient webClient;\n    private final List<Person> persons;\n\n    public PersonController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.persons = new ArrayList<>();\n    }\n\n    public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.post()\n                .uri(\"persons\")\n                .bodyValue(person)\n                .retrieve()\n                .bodyToMono(Person.class)\n                .onErrorStop()\n                .subscribe(newPerson -> {\n                    persons.add(newPerson);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.put()\n                .uri(\"persons/\" + person.getId())\n                .bodyValue(person)\n                .retrieve()\n                .bodyToMono(Person.class)\n                .onErrorStop()\n                .subscribe(newPerson -> {\n                    persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.delete()\n                .uri(\"persons/\" + person.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    persons.remove(person);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"persons\")\n                        .queryParam(\"sortField\", sortingOptions.getSortField())\n                        .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n                .onErrorStop()\n                .subscribe(newPersons -> {\n                    persons.clear();\n                    persons.addAll(newPersons);\n                    personsConsumer.accept(persons);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/PersonScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\nimport javafx.application.Platform;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Popup;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic class PersonScene extends Scene {\n    private final PersonController personController;\n    private final H05E01ClientApplication application;\n    private final PersonSortingOptions sortingOptions;\n    private final ObservableList<Person> personList;\n    private final TableView<Person> table;\n\n    public PersonScene(PersonController personController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.personController = personController;\n        this.application = application;\n        this.sortingOptions = new PersonSortingOptions();\n        this.personList = FXCollections.observableArrayList();\n\n        table = new TableView<>(personList);\n        table.setOnMousePressed(event -> {\n            if (event.isPrimaryButtonDown()) {\n                showPopup(table.getSelectionModel().getSelectedItem());\n            }\n        });\n\n        var idColumn = new TableColumn<Person, String>(\"ID\");\n        idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n        idColumn.setSortable(false);\n        idColumn.setPrefWidth(620 / 4D);\n        var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n        firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n        firstNameColumn.setSortable(false);\n        firstNameColumn.setPrefWidth(620 / 4D);\n        var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n        lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n        lastNameColumn.setSortable(false);\n        lastNameColumn.setPrefWidth(620 / 4D);\n        var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n        birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n        birthdayColumn.setSortable(false);\n        birthdayColumn.setPrefWidth(620 / 4D);\n        //noinspection unchecked\n        table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n\n        var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n\n        personController.getAllPersons(sortingOptions, this::setPeople);\n    }\n\n    private HBox createSortOptionBox() {\n        var sortFieldChoiceBox = new ChoiceBox<SortField>();\n        sortFieldChoiceBox.getItems().addAll(SortField.values());\n        sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n        sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortField(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n        sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n        sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n        sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortingOrder(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n        hBox.setAlignment(Pos.CENTER);\n        return hBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Person\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Person person) {\n        var popup = new Popup();\n        var firstNameTextField = new TextField();\n        firstNameTextField.setPromptText(\"First Name\");\n        firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n\n        var lastNameTextField = new TextField();\n        lastNameTextField.setPromptText(\"Last Name\");\n        lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n\n        var birthdayPicker = new DatePicker();\n        birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newPerson = person != null ? person : new Person();\n            newPerson.setFirstName(firstNameTextField.getText());\n            newPerson.setLastName(lastNameTextField.getText());\n            newPerson.setBirthday(birthdayPicker.getValue());\n            if (person == null) {\n                personController.addPerson(newPerson, this::setPeople);\n            } else {\n                personController.updatePerson(newPerson, this::setPeople);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            personController.deletePerson(person, this::setPeople);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (person != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(150);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n\n    private void setPeople(List<Person> people) {\n        Platform.runLater(() -> personList.setAll(people));\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/NoteScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.model.Note;\nimport javafx.application.Platform;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\nimport javafx.stage.Popup;\n\nimport java.util.List;\n\npublic class NoteScene extends Scene {\n    private final NoteController noteController;\n    private final H05E01ClientApplication application;\n    private final FlowPane flowPane;\n\n    public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.noteController = noteController;\n        this.application = application;\n\n        flowPane = new FlowPane(10, 10);\n        var scrollPane = new ScrollPane(flowPane);\n        scrollPane.setPrefHeight(450);\n        scrollPane.setFitToWidth(true);\n\n        var vBox = new VBox(10, scrollPane, createButtonBox());\n\n        noteController.getAllNotes(this::setNotes);\n        this.setRoot(vBox);\n    }\n\n    public void setNotes(List<Note> notes) {\n        Platform.runLater(() -> {\n            var children = flowPane.getChildren();\n            children.setAll(notes.stream().map(this::createNoteView).toList());\n        });\n    }\n\n    private Node createNoteView(Note note) {\n        var name = new Text(note.getName());\n        name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n\n        var spacer = new Region();\n        HBox.setHgrow(spacer, Priority.ALWAYS);\n\n        var deleteButton = new Button(\"E\");\n        deleteButton.setTextFill(Color.ORANGE);\n        deleteButton.setOnAction(event -> showPopup(note));\n\n        var titleBox = new HBox(name, spacer, deleteButton);\n\n        var content = new Text(note.getContent());\n        var contentScrollPane = new ScrollPane(content);\n        contentScrollPane.setFitToWidth(true);\n        contentScrollPane.setFitToHeight(true);\n        contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n        contentScrollPane.getStyleClass().clear();\n        content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n\n        var vBox = new VBox(10, titleBox, contentScrollPane);\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setStyle(\"-fx-background-color:white;\");\n        vBox.setPadding(new Insets(5));\n        return vBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Note\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Note note) {\n        var popup = new Popup();\n        var nameTextField = new TextField();\n        nameTextField.setPromptText(\"Name\");\n        nameTextField.setText(note == null ? \"\" : note.getName());\n\n        var contentTextArea = new TextArea();\n        contentTextArea.setPromptText(\"Content\");\n        contentTextArea.setText(note == null ? \"\" : note.getContent());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newNote = note != null ? note : new Note();\n            newNote.setName(nameTextField.getText());\n            newNote.setContent(contentTextArea.getText());\n            if (note == null) {\n                noteController.addNote(newNote, this::setNotes);\n            } else {\n                noteController.editNote(newNote, this::setNotes);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            noteController.deleteNote(note, this::setNotes);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (note != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/HomeScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.VBox;\n\npublic class HomeScene extends Scene {\n    public HomeScene(H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n\n        var noteButton = new Button(\"Notes\");\n        noteButton.setOnAction(event -> application.showNoteScene());\n\n        var personButton = new Button(\"Persons\");\n        personButton.setOnAction(event -> application.showPersonScene());\n\n        var vBox = new VBox(10, noteButton, personButton);\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java",
            "content": "package de.tum.in.ase.eist.util;\n\npublic class PersonSortingOptions {\n    private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n    private SortField sortField = SortField.ID;\n\n    public PersonSortingOptions() {}\n\n    public PersonSortingOptions(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n        this.sortingOrder = sortingOrder;\n        this.sortField = sortField;\n    }\n\n    public SortingOrder getSortingOrder() {\n        return sortingOrder;\n    }\n\n    public void setSortingOrder(SortingOrder sortingOrder) {\n        this.sortingOrder = sortingOrder;\n    }\n\n    public SortField getSortField() {\n        return sortField;\n    }\n\n    public void setSortField(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public enum SortingOrder {\n        ASCENDING, DESCENDING\n    }\n\n    public enum SortField {\n        ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n    }\n}"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Note.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.Instant;\nimport java.util.UUID;\n\npublic class Note {\n    private UUID id;\n    private String name;\n    private String content;\n    private Instant creationDate;\n\n    public Note() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    public Instant getCreationDate() {\n        return creationDate;\n    }\n\n    public void setCreationDate(Instant creationDate) {\n        this.creationDate = creationDate;\n    }\n\n    @Override\n    public String toString() {\n        return \"Note{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", content='\" + content + '\\'' +\n                \", creationDate=\" + creationDate +\n                '}';\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Person.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic class Person {\n    private UUID id;\n    private String firstName;\n    private String lastName;\n    private LocalDate birthday;\n\n    public Person() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public LocalDate getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(LocalDate birthday) {\n        this.birthday = birthday;\n    }\n}\n"
          },
          {
            "path": "src/server/resources/application.properties",
            "content": "logging.level.ROOT=DEBUG\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class H05E01ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(H05E01ServerApplication.class, args);\n    }\n\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/PersonService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.stereotype.Service;\n\nimport java.util.*;\n\nimport static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n\n@Service\npublic class PersonService {\n  \t// do not change this\n    private final List<Person> persons;\n\n    public PersonService() {\n        this.persons = new ArrayList<>();\n    }\n\n    public Person savePerson(Person person) {\n        var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n        if (optionalPerson.isEmpty()) {\n            person.setId(UUID.randomUUID());\n            persons.add(person);\n            return person;\n        } else {\n            var existingPerson = optionalPerson.get();\n            existingPerson.setFirstName(person.getFirstName());\n            existingPerson.setLastName(person.getLastName());\n            existingPerson.setBirthday(person.getBirthday());\n            return existingPerson;\n        }\n    }\n\n    public void deletePerson(UUID personId) {\n        this.persons.removeIf(person -> person.getId().equals(personId));\n    }\n\n    public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n        if (sortingOptions == null) {\n            return this.persons.stream();\n        }\n        Stream<Person> sortedStream = this.persons.stream();\n        sortedList.sort((p1, p2) -> {\n            Person person1;\n            Person person2;\n            if (sortingOptions.getSortingOrder() == ASCENDING) {\n                person1 = p1;\n                person2 = p2;\n            } else {\n                person1 = p2;\n                person2 = p1;\n            }\n\n            return switch (sortingOptions.getSortField()) {\n                case ID -> person1.getId().compareTo(person2.getId());\n                case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n                case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n                case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n            };\n        });\n        return sortedList;\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/NoteService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.stereotype.Service;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Service\npublic class NoteService {\n    private final List<Note> notes;\n\n    public NoteService() {\n        this.notes = new ArrayList<>();\n    }\n\n    public Note saveNote(Note note) {\n        var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n        if (optionalNote.isEmpty()) {\n            note.setId(UUID.randomUUID());\n            note.setCreationDate(Instant.now());\n            notes.add(note);\n            return note;\n        } else {\n            var existingNote = optionalNote.get();\n            existingNote.setName(note.getName());\n            existingNote.setContent(note.getContent());\n            return existingNote;\n        }\n    }\n\n    public void deleteNote(UUID noteId) {\n        this.notes.removeIf(note -> note.getId().equals(noteId));\n    }\n\n    public List<Note> getAllNotes() {\n        return Collections.unmodifiableList(this.notes);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/PersonResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.service.PersonService;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class PersonResource {\n\n    private final PersonService personService;\n\n    public PersonResource(PersonService personService) {\n        this.personService = personService;\n    }\n\n    @GetMapping(\"persons\")\n    public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n                                                      @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n        return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n    }\n\n    @PostMapping(\"persons\")\n    public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n        if (person.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(personService.savePerson(person));\n    }\n\n    @PutMapping(\"persons/{personId}\")\n    public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n        if (!updatedPerson.getId().equals(personId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(personService.savePerson(updatedPerson));\n    }\n\n    @DeleteMapping(\"persons/{personId}\")\n    public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n        personService.deletePerson(personId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/NoteResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Note;\nimport de.tum.in.ase.eist.service.NoteService;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class NoteResource {\n\n    private final NoteService noteService;\n\n    public NoteResource(NoteService noteService) {\n        this.noteService = noteService;\n    }\n\n    @GetMapping(\"notes\")\n    public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n        if (!\"SecretKey\".equals(secret)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.getAllNotes());\n    }\n\n    @PostMapping(\"notes\")\n    public ResponseEntity<Note> createNote(@RequestBody Note note) {\n        if (note.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(note));\n    }\n\n    @PutMapping(\"notes/{noteId}\")\n    public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n        if (!updatedNote.getId().equals(noteId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(updatedNote));\n    }\n\n    @DeleteMapping(\"notes/{noteId}\")\n    public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n        noteService.deleteNote(noteId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          }
        ],
        "test_repository": [
          {
            "path": "readme.md",
            "content": "## Test Repository instructions\n\n#### Test tool & command\nTests will be run using the command `./gradlew clean test`.\n\n#### Project structure\nMake sure that the package structure of your test classes is equivalent to the package structure of your base and solution repository.\nOtherwise during the test run Gradle will not be able to find the imported classes in your test files.\n\nIn order to use classes from the template or solution repository in a test case, you have to add the respective repository\nfiles as a dependency to the test project. Follow this description for IntelliJ:\n\n1. Open the Test-Project first\n2. Select `File` -> `New` -> `Module from Existing Source`. Then choose the template project\nroot folder. Select the option `Import module from external model` and `Gradle` and press `Finish`.\n3. Repeat the previous step for the Solution-Project.\n4. Add the following line to `settings.gradle` inside the Test-Project:\n`includeBuild '<template-project-root-path'>` or `includeBuild '<solution-project-root-path>'` depending on which project you\nwant to use the source files for executing the test cases.\n5. Inside the `plugin`-block in the `build.gradle` inside the Test-Project, add the following line:\n`testImplementation(':H05E01-Layered-Architecture-Spring-Exercise')` or\n`testImplementation(':H05E01-Layered-Architecture-Spring-Solution')` depending on which project you want to use the source files for executing\nthe test cases.\n\n**Note**: Changes made in step 4 and step 5 must not be pushed to the remote repository as it can only be used\nfor editing all three projects in the local IDE.\n\n#### Sequential test runs\nIf you have decided to use the sequential test runs feature for this exercise, read the following instructions:\nWe use the folder structure of the test repository to differentiate structural and behavior tests:\n1. Structural test files must be placed in the folder \"structural\"\n2. Behavior test files must be placed in the folder \"behavior\"\n\nFiles in other folders will not be executed!\n\n#### Static Code Analysis\nThe build.gradle contains dependencies for the execution of static code analysis, if the option is active for this programming exercise.\n"
          },
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'checkstyle'\n    id 'pmd'\n    id 'com.github.spotbugs' version '5.0.6'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id \"com.teamscale\" version \"23.0.0\"\n}\n\napply plugin: 'java'\ngroup = 'de.tum.in.ase.eist'\nsourceCompatibility = 17\nversion = '1.0.0'\ncompileJava.options.encoding = 'UTF-8'\ncompileTestJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    testImplementation 'de.tum.in.ase:artemis-java-test-sandbox:1.9.2'\n    testImplementation 'com.squareup.okhttp3:okhttp:4.10.0-RC1'\n    testImplementation 'com.squareup.okhttp3:mockwebserver:4.10.0-RC1'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test:2.6.7'\n\n    testImplementation 'com.fasterxml.jackson.core:jackson-databind:2.13.2.2'\n    testImplementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.13.2'\n\n    testImplementation 'org.springframework.boot:spring-boot-starter-web:2.6.7'\n    testImplementation 'org.springframework.boot:spring-boot-starter-webflux:2.6.7'\n\n    testImplementation 'org.mockito:mockito-core:4.5.1'\n    testImplementation 'net.bytebuddy:byte-buddy:1.12.10'\n\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web:2.6.7'\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux:2.6.7'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\ndef studentOutputDir = sourceSets.main.java.destinationDirectory.get()\ndef scaConfigDirectory = \"$projectDir/staticCodeAnalysisConfig\"\n\nsourceSets {\n    common {\n        java {\n            srcDir 'assignment/src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'assignment/src/server/java'\n        }\n        resources {\n            srcDir 'assignment/src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'assignment/src/client/java'\n        }\n        resources {\n            srcDir 'assignment/src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n\n    test {\n        java {\n            srcDir 'test'\n        }\n        resources {\n            srcDir 'test'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n        compileClasspath += server.output\n        runtimeClasspath += server.output\n        compileClasspath += client.output\n        runtimeClasspath += client.output\n    }\n}\n\ntest {\n    defaultCharacterEncoding = 'UTF-8'\n    useJUnitPlatform()\n}\n\n\ncheckstyle {\n    configFile = file(\"$scaConfigDirectory/checkstyle-configuration.xml\")\n    ignoreFailures = true\n    // exclude the test files\n    checkstyleTest.enabled = false\n    checkstyleServer.reports {\n        xml {\n            enabled = true\n            outputLocation = file('target/checkstyle-result.xml')\n        }\n        html.enabled = false\n    }\n}\n\nspotbugs {\n    excludeFilter = file(\"$scaConfigDirectory/spotbugs-exclusions.xml\")\n    ignoreFailures = true\n    // exclude the test files\n    spotbugsTest.enabled = false\n    spotbugsClient.reports {\n        add(spotbugsServer)\n        add(spotbugsCommon)\n        xml {\n            enabled = true\n            outputLocation = file('target/spotbugsXml.xml')\n        }\n        html.enabled = false\n    }\n}\n\npmd {\n    ruleSets = [\"$scaConfigDirectory/pmd-configuration.xml\"]\n    rulesMinimumPriority = 5\n    ignoreFailures = true\n    // exclude the test files\n    pmdTest.enabled = false\n    pmdServer.reports {\n        xml {\n            enabled = true\n            outputLocation = file('target/pmd.xml')\n        }\n    }\n}\n\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n\ntasks.register('tiaTests', com.teamscale.TestImpacted) {\n    systemProperty \"ares.security.trustedpackages\", \"okhttp3,com.teamscale,retrofit2,shadow,com.squareup,okio\"\n    useJUnitPlatform()\n    filter {\n        excludeTestsMatching \"AttributeTest\"\n        excludeTestsMatching \"ConstructorTest\"\n        excludeTestsMatching \"ClassTest\"\n        excludeTestsMatching \"MethodTest\"\n    }\n    jacoco {\n        includes = [\"de.tum.in.ase.eist.*\"]\n    }\n}\n\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Spring-Tests'\n"
          },
          {
            "path": "staticCodeAnalysisConfig/spotbugs-exclusions.xml",
            "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<FindBugsFilter>\n    <!--\n    Spotbugs uses filter files to configure the reporting of bugs. Add the path of the filter file to the configuration\n    of the Spotbugs Maven plugin in the Project Object Model (POM).\n    Use <includeFilterFile>/<excludeFilterFile> to include/exclude all bugs matching the criteria defined in such a file.\n    For more information about filters consult the official Spotbugs documentation https://spotbugs.readthedocs.io/en/stable/filter.html#.\n    The examples below show some filter options.\n    -->\n\n    <!-- In case of using Records from Java 16, the equals check should get disabled for that record\n    <Match>\n        <Class name=\"Package.NameOfRecord\" />\n        <Bug code=\"EQ_UNUSUAL\" />\n    </Match> -->\n\n    <!-- Matches a whole class\n    <Match>\n        <Class name=\"com.foobar.ClassNotToBeAnalyzed\" />\n    </Match> -->\n\n    <!-- Matches specific rules in a class\n    <Match>\n        <Class name=\"com.foobar.ClassWithSomeBugsMatched\" />\n        <Bug code=\"DE,UrF,SIC\" />\n    </Match> -->\n\n    <!-- Match all XYZ violations\n    <Match>\n        <Bug code=\"XYZ\" />\n    </Match>  -->\n\n    <!-- Match a method with a dead local store false positive (medium priority)\n    <Match>\n        <Class name=\"com.foobar.MyClass\" />\n        <Method name=\"someMethod\" />\n        <Bug pattern=\"DLS_DEAD_LOCAL_STORE\" />\n        <Priority value=\"2\" />\n    </Match> -->\n\n    <!-- All bugs in test classes, except for JUnit-specific bugs\n    <Match>\n        <Class name=\"~.*\\.*Test\" />\n        <Not>\n            <Bug code=\"IJU\" />\n        </Not>\n    </Match> -->\n    <Match>\n        <Bug code=\"EI\"/>\n    </Match>\n    <Match>\n        <Bug code=\"EI2\"/>\n    </Match>\n</FindBugsFilter>\n"
          },
          {
            "path": "staticCodeAnalysisConfig/pmd-configuration.xml",
            "content": "<ruleset name=\"Custom Rules\"\n         xmlns=\"http://pmd.sourceforge.net/ruleset/2.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd\">\n\n    <description>\n        Default PMD configuration for Artemis programming exercises based on the default PMD Maven configuration.\n        Consult https://pmd.github.io/latest/pmd_userdocs_making_rulesets.html for more information.\n    </description>\n\n    <!-- Use patterns to exclude/include files for this ruleset\n    <exclude-pattern>.*/some/package/.*</exclude-pattern>\n    <include-pattern>.*/some/package/ButNotThisClass.*</include-pattern>\n    -->\n\n    <!-- Bulk adding all rules of all categories. Does not add deprecated rules. Single rule exclusions are possible.\n    <rule ref=\"category/java/documentation.xml\">\n        <exclude name=\"RuleName\"/>\n    </rule> -->\n\n    <!-- Best Practices -->\n    <rule ref=\"category/java/bestpractices.xml/AvoidUsingHardCodedIP\"/>\n    <rule ref=\"category/java/bestpractices.xml/CheckResultSet\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedImports\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedFormalParameter\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedLocalVariable\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedPrivateField\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedPrivateMethod\"/>\n\n    <!-- Code Style -->\n    <rule ref=\"category/java/codestyle.xml/DontImportJavaLang\"/>\n    <rule ref=\"category/java/codestyle.xml/DuplicateImports\"/>\n    <rule ref=\"category/java/codestyle.xml/ExtendsObject\"/>\n    <rule ref=\"category/java/codestyle.xml/ForLoopShouldBeWhileLoop\"/>\n    <rule ref=\"category/java/codestyle.xml/TooManyStaticImports\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryFullyQualifiedName\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryModifier\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryReturn\"/>\n    <rule ref=\"category/java/codestyle.xml/UselessParentheses\"/>\n    <rule ref=\"category/java/codestyle.xml/UselessQualifiedThis\"/>\n\n    <!-- Design -->\n    <rule ref=\"category/java/design.xml/CollapsibleIfStatements\"/>\n    <rule ref=\"category/java/design.xml/SimplifiedTernary\"/>\n    <rule ref=\"category/java/design.xml/UselessOverridingMethod\"/>\n\n    <!-- Error Prone -->\n    <rule ref=\"category/java/errorprone.xml/AvoidBranchingStatementAsLastInLoop\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidDecimalLiteralsInBigDecimalConstructor\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidMultipleUnaryOperators\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidUsingOctalValues\"/>\n    <rule ref=\"category/java/errorprone.xml/BrokenNullCheck\"/>\n    <rule ref=\"category/java/errorprone.xml/CheckSkipResult\"/>\n    <rule ref=\"category/java/errorprone.xml/ClassCastExceptionWithToArray\"/>\n    <rule ref=\"category/java/errorprone.xml/DontUseFloatTypeForLoopIndices\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyCatchBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyFinallyBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyIfStmt\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyInitializer\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyStatementBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyStatementNotInLoop\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptySwitchStatements\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptySynchronizedBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyTryBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyWhileStmt\"/>\n    <rule ref=\"category/java/errorprone.xml/ImportFromSamePackage\"/>\n    <rule ref=\"category/java/errorprone.xml/JumbledIncrementer\"/>\n    <rule ref=\"category/java/errorprone.xml/MisplacedNullCheck\"/>\n    <rule ref=\"category/java/errorprone.xml/OverrideBothEqualsAndHashcode\"/>\n    <rule ref=\"category/java/errorprone.xml/ReturnFromFinallyBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/UnconditionalIfStatement\"/>\n    <rule ref=\"category/java/errorprone.xml/UnnecessaryConversionTemporary\"/>\n    <rule ref=\"category/java/errorprone.xml/UnusedNullCheckInEquals\"/>\n    <rule ref=\"category/java/errorprone.xml/UselessOperationOnImmutable\"/>\n\n    <!-- Multi Threading -->\n    <rule ref=\"category/java/multithreading.xml/AvoidThreadGroup\"/>\n    <rule ref=\"category/java/multithreading.xml/DontCallThreadRun\"/>\n    <rule ref=\"category/java/multithreading.xml/DoubleCheckedLocking\"/>\n\n    <!-- Performance -->\n    <rule ref=\"category/java/performance.xml/BigIntegerInstantiation\"/>\n    <rule ref=\"category/java/performance.xml/BooleanInstantiation\"/>\n\n    <!-- Security -->\n    <rule ref=\"category/java/security.xml\"/>\n\n    <!-- Documentation, already checked by CheckStyle -->\n\n\n</ruleset>\n"
          },
          {
            "path": "staticCodeAnalysisConfig/checkstyle-configuration.xml",
            "content": "<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n    \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n    \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n\n<!--\n  Artemis default Checkstyle configuration based on the sun coding conventions from:\n    - the Java Language Specification at\n      https://docs.oracle.com/javase/specs/jls/se11/html/index.html\n    - the Sun Code Conventions at https://www.oracle.com/java/technologies/javase/codeconventions-contents.html\n    - the Javadoc guidelines at\n      https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html\n    - the JDK Api documentation https://docs.oracle.com/en/java/javase/11/\n    - some best practices\n  Most Checks are configurable, be sure to consult the documentation.\n  To completely disable a check, just comment it out or delete it from the file.\n  Consult the docs for more information https://checkstyle.org.\n-->\n\n<module name=\"Checker\">\n    <property name=\"severity\" value=\"error\"/>\n\n    <property name=\"fileExtensions\" value=\"java, properties, xml\"/>\n\n    <!-- Excludes all 'module-info.java' files              -->\n    <!-- See https://checkstyle.org/config_filefilters.html -->\n    <module name=\"BeforeExecutionExclusionFileFilter\">\n        <property name=\"fileNamePattern\" value=\"module\\-info\\.java$\"/>\n    </module>\n\n    <!-- Checks that a package-info.java file exists for each package.     -->\n    <!-- See https://checkstyle.org/config_javadoc.html#JavadocPackage -->\n    <!-- <module name=\"JavadocPackage\"/> -->\n\n    <!-- Checks whether files end with a new line.                        -->\n    <!-- See https://checkstyle.org/config_misc.html#NewlineAtEndOfFile -->\n    <module name=\"NewlineAtEndOfFile\"/>\n\n    <!-- Checks that property files contain the same keys.         -->\n    <!-- See https://checkstyle.org/config_misc.html#Translation -->\n    <module name=\"Translation\"/>\n\n    <!-- Checks for Size Violations.                    -->\n    <!-- See https://checkstyle.org/config_sizes.html -->\n    <module name=\"FileLength\"/>\n    <module name=\"LineLength\">\n        <property name=\"fileExtensions\" value=\"java\"/>\n        <property name=\"max\" value=\"150\"/>\n        <property name=\"ignorePattern\" value=\"^package.*|^import.*|a href|href|http://|https://|ftp://\"/>\n    </module>\n\n    <!-- Miscellaneous other checks.                   -->\n    <!-- See https://checkstyle.org/config_misc.html -->\n    <module name=\"RegexpSingleline\">\n        <property name=\"format\" value=\"\\s+$\"/>\n        <property name=\"minimum\" value=\"0\"/>\n        <property name=\"maximum\" value=\"0\"/>\n        <property name=\"message\" value=\"Line has trailing spaces.\"/>\n    </module>\n\n    <!-- Checks for Headers                                -->\n    <!-- See https://checkstyle.org/config_header.html   -->\n    <!-- <module name=\"Header\"> -->\n    <!--   <property name=\"headerFile\" value=\"${checkstyle.header.file}\"/> -->\n    <!--   <property name=\"fileExtensions\" value=\"java\"/> -->\n    <!-- </module> -->\n\n    <module name=\"TreeWalker\">\n\n        <!-- Checks for Javadoc comments.                     -->\n        <!-- See https://checkstyle.org/config_javadoc.html -->\n        <module name=\"InvalidJavadocPosition\"/>\n        <module name=\"JavadocMethod\"/>\n        <module name=\"JavadocType\"/>\n        <!--<module name=\"JavadocVariable\"/> -->\n        <module name=\"JavadocStyle\"/>\n        <module name=\"MissingJavadocMethod\">\n            <property name=\"allowMissingPropertyJavadoc\" value=\"true\"/>\n            <property name=\"allowedAnnotations\" value=\"Override,Test\"/>\n            <property name=\"tokens\" value=\"METHOD_DEF,ANNOTATION_FIELD_DEF,COMPACT_CTOR_DEF\"/>\n        </module>\n\n        <!-- Checks for Naming Conventions.                  -->\n        <!-- See https://checkstyle.org/config_naming.html -->\n        <module name=\"ConstantName\"/>\n        <module name=\"LocalFinalVariableName\"/>\n        <module name=\"LocalVariableName\"/>\n        <module name=\"MemberName\"/>\n        <module name=\"MethodName\"/>\n        <!-- <module name=\"PackageName\"/> -->\n        <module name=\"ParameterName\"/>\n        <module name=\"StaticVariableName\"/>\n        <module name=\"TypeName\"/>\n\n        <!-- Checks for imports                              -->\n        <!-- See https://checkstyle.org/config_imports.html -->\n        <!-- <module name=\"AvoidStarImport\"/> -->\n        <module name=\"IllegalImport\"/> <!-- defaults to sun.* packages -->\n        <module name=\"RedundantImport\"/>\n        <module name=\"UnusedImports\">\n            <property name=\"processJavadoc\" value=\"false\"/>\n        </module>\n\n        <!-- Checks for Size Violations.                    -->\n        <!-- See https://checkstyle.org/config_sizes.html -->\n        <module name=\"MethodLength\"/>\n        <module name=\"ParameterNumber\"/>\n\n        <!-- Checks for whitespace                               -->\n        <!-- See https://checkstyle.org/config_whitespace.html -->\n        <module name=\"EmptyForIteratorPad\"/>\n        <module name=\"GenericWhitespace\"/>\n        <module name=\"MethodParamPad\"/>\n        <module name=\"NoWhitespaceAfter\"/>\n        <module name=\"NoWhitespaceBefore\"/>\n        <module name=\"OperatorWrap\"/>\n        <module name=\"ParenPad\"/>\n        <module name=\"TypecastParenPad\"/>\n        <module name=\"WhitespaceAfter\"/>\n        <module name=\"WhitespaceAround\"/>\n\n        <!-- Modifier Checks                                    -->\n        <!-- See https://checkstyle.org/config_modifiers.html -->\n        <module name=\"ModifierOrder\"/>\n        <module name=\"RedundantModifier\"/>\n\n        <!-- Checks for blocks. You know, those {}'s         -->\n        <!-- See https://checkstyle.org/config_blocks.html -->\n        <module name=\"AvoidNestedBlocks\"/>\n        <module name=\"EmptyBlock\"/>\n        <!-- <module name=\"LeftCurly\"/> -->\n        <module name=\"NeedBraces\"/>\n        <!-- <module name=\"RightCurly\"/> -->\n\n        <!-- Checks for common coding problems               -->\n        <!-- See https://checkstyle.org/config_coding.html -->\n        <module name=\"EmptyStatement\"/>\n        <module name=\"EqualsHashCode\"/>\n        <module name=\"HiddenField\">\n            <property name=\"ignoreConstructorParameter\" value=\"true\"/>\n            <property name=\"ignoreSetter\" value=\"true\"/>\n            <property name=\"setterCanReturnItsClass\" value=\"true\"/>\n        </module>\n        <module name=\"IllegalInstantiation\"/>\n        <module name=\"InnerAssignment\"/>\n        <module name=\"MagicNumber\"/>\n        <module name=\"MissingSwitchDefault\"/>\n        <module name=\"MultipleVariableDeclarations\"/>\n        <module name=\"SimplifyBooleanExpression\"/>\n        <module name=\"SimplifyBooleanReturn\"/>\n\n        <!-- Checks for class design                         -->\n        <!-- See https://checkstyle.org/config_design.html -->\n        <!--<module name=\"DesignForExtension\"/> -->\n        <module name=\"FinalClass\"/>\n        <module name=\"InterfaceIsType\"/>\n        <module name=\"VisibilityModifier\"/>\n\n        <!-- Miscellaneous other checks.                   -->\n        <!-- See https://checkstyle.org/config_misc.html -->\n        <module name=\"ArrayTypeStyle\"/>\n        <!-- <module name=\"FinalParameters\"/> -->\n        <!-- <module name=\"TodoComment\"/> -->\n        <module name=\"UpperEll\"/>\n\n    </module>\n\n</module>\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/PersonControllerTest.java",
            "content": "package de.tum.in.ase.eist;\n\nimport static de.tum.in.ase.eist.H05E01Client.*;\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport okhttp3.mockwebserver.MockResponse;\nimport okhttp3.mockwebserver.MockWebServer;\nimport okhttp3.mockwebserver.RecordedRequest;\nimport org.junit.jupiter.api.*;\nimport org.mockito.ArgumentCaptor;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\nimport java.util.function.Consumer;\nimport java.util.concurrent.TimeUnit;\n\n@H05E01\npublic class PersonControllerTest {\n\n    private static MockWebServer mockWebServer;\n    private static ObjectMapper objectMapper;\n\n    private Object personController;\n    private Person person1;\n    private Person person2;\n\n    @BeforeAll\n    static void setUp() {\n        objectMapper = new ObjectMapper();\n        objectMapper.findAndRegisterModules();\n    }\n\n    @BeforeEach\n    void initialize() throws Exception {\n        // restarting the server for every test is required because otherwise tests interfere with each other\n        mockWebServer = new MockWebServer();\n        mockWebServer.start(8080);\n        personController = createPersonController();\n\n        person1 = new Person();\n        var uuid1 = UUID.randomUUID();\n        person1.setId(uuid1);\n        person1.setFirstName(\"Max\");\n        person1.setLastName(\"Musterfrau\");\n        person1.setBirthday(LocalDate.ofYearDay(2000, 125));\n\n        person2 = new Person();\n        var uuid2 = UUID.randomUUID();\n        person2.setId(uuid2);\n        person2.setFirstName(\"Erika\");\n        person2.setLastName(\"Mustermann\");\n        person2.setBirthday(LocalDate.ofYearDay(1999, 80));\n    }\n\n    @AfterEach\n    void afterEach() throws Exception {\n        mockWebServer.shutdown();\n    }\n\n    @Test\n    @DisplayName(\"Add single valid persons (Client)\")\n    public void testAddSingleValidPerson() throws Exception {\n        testAddPerson(200, person1, List.of(person1));\n    }\n\n    @Test\n    @DisplayName(\"Add multiple valid persons (Client)\")\n    public void testAddMultipleValidPersons() throws Exception {\n        testAddPerson(200, person1, new ArrayList<>(List.of(person1)));\n        testAddPerson(200, person2, new ArrayList<>(List.of(person1, person2)));\n    }\n\n    @Test\n    @DisplayName(\"Add single invalid person (Client)\")\n    public void testAddInvalidPerson() throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(400)\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n\n        invokeAddPerson(personController, person1, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n        Thread.sleep(350);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::createPerson did not send a request.\");\n        }\n\n        verify(consumer, never()).accept(any());\n    }\n\n    @Test\n    @DisplayName(\"Edit single person (Client)\")\n    public void testEditSinglePerson() throws Exception {\n        Person updatedPerson = new Person();\n        updatedPerson.setId(person1.getId());\n        updatedPerson.setFirstName(person1.getFirstName());\n        updatedPerson.setLastName(\"Updated Last Name\");\n        updatedPerson.setBirthday(person1.getBirthday());\n\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1)));\n\n        testUpdatePerson(200, updatedPerson, List.of(updatedPerson));\n    }\n\n    @Test\n    @DisplayName(\"Edit single person for multiple existing persons (Client)\")\n    public void testEditSinglePersonForMultipleExistingPersons() throws Exception {\n        Person updatedPerson = new Person();\n        updatedPerson.setId(person1.getId());\n        updatedPerson.setFirstName(person1.getFirstName());\n        updatedPerson.setLastName(\"Updated Last Name\");\n        updatedPerson.setBirthday(person1.getBirthday());\n\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        testUpdatePerson(200, updatedPerson, List.of(updatedPerson, person2));\n    }\n\n    @Test\n    @DisplayName(\"Edit invalid person (Client)\")\n    public void testEditInvalidPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(400)\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n\n        invokeUpdatePerson(personController, person1, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n        Thread.sleep(350);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::updatePerson did not send a request.\");\n        }\n        verify(consumer, times(0));\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person 1 (Client)\")\n    public void testDeleteOnlyExistingPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1)));\n\n        testDeletePerson(200, person1, List.of());\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person 2 (Client)\")\n    public void testDeletePerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        testDeletePerson(200, person1, List.of(person2));\n    }\n\n    @Test\n    @DisplayName(\"Retrieve all persons 1 (Client)\")\n    public void testGetAllPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        var sortingOptions = new PersonSortingOptions();\n        sortingOptions.setSortField(PersonSortingOptions.SortField.ID);\n        sortingOptions.setSortingOrder(PersonSortingOptions.SortingOrder.ASCENDING);\n\n        testGetAllPersons(200, sortingOptions, List.of(person2, person1));\n    }\n\n    @Test\n    @DisplayName(\"Retrieve all persons 2 (Client)\")\n    public void testGetAllPersonsResetsSavedResult() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        var sortingOptions = new PersonSortingOptions();\n\n        sortingOptions.setSortField(PersonSortingOptions.SortField.ID);\n        sortingOptions.setSortingOrder(PersonSortingOptions.SortingOrder.ASCENDING);\n\n        testGetAllPersons(200, sortingOptions, List.of());\n    }\n\n    @Test\n    @DisplayName(\"Sort options for retrieving all persons (Client)\")\n    public void testSortingOptions() throws Exception {\n        for (var sortField : PersonSortingOptions.SortField.values()) {\n            for (var sortOrder: PersonSortingOptions.SortingOrder.values()) {\n                // this should not be required but leaving out may break some student's submission while this is the\n                // real-life behavior\n                mockWebServer.enqueue(new MockResponse()\n                        .setResponseCode(200)\n                        .setBody(objectMapper.writeValueAsString(List.of()))\n                        .setHeader(\"Content-Type\", \"application/json\"));\n\n                var sortOptions = new PersonSortingOptions();\n                sortOptions.setSortField(sortField);\n                sortOptions.setSortingOrder(sortOrder);\n                invokeGetAllPersons(personController, sortOptions, (res) -> {});\n\n\t            RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n\t            if(mockWebServer.getRequestCount() == 0) {\n                    fail(\"PersonController::createPerson did not send a request.\");\n                }\n\n\t\t\t\tThread.sleep(350);\n                assertGetAllPersonRequest(recordedRequest, sortOptions);\n            }\n        }\n    }\n\n    private void testAddPerson(int mockResponseCode, Person person, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(person))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeAddPerson(personController, person, consumer);\n\n        RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::createPerson did not send a request.\");\n        }\n        Thread.sleep(350);\n\n        verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"addPerson\");\n\n        assertEquals(\"POST\", recordedRequest.getMethod(), \"PersonController::createPerson did not send a message with the correct request type\");\n        assertEquals(\"/persons\", recordedRequest.getPath(), \"PersonController::createPerson send a message to the wrong correct endpoint path.\");\n        assertEquals(objectMapper.writeValueAsString(person), recordedRequest.getBody().readUtf8(), \"PersonController::createPerson send a message with the wrong response body.\");\n    }\n\n    private void testUpdatePerson(int mockResponseCode, Person updatedPerson, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(updatedPerson))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeUpdatePerson(personController, updatedPerson, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::updatePerson did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t    verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"updatePerson\");\n\n\n        assertEquals(\"PUT\", recordedRequest.getMethod(), \"PersonController::updatePerson did not send a message with the correct request type.\");\n        assertEquals(\"/persons/\" + updatedPerson.getId(), recordedRequest.getPath(),\"PersonController::updatePerson send a message to the wrong correct endpoint path.\");\n        assertEquals(objectMapper.writeValueAsString(updatedPerson), recordedRequest.getBody().readUtf8(), \"PersonController::createPerson send a message with the wrong response body.\");\n    }\n\n    private void testDeletePerson(int mockResponseCode, Person deletedPerson, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(deletedPerson))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeDeletePerson(personController, deletedPerson, consumer);\n\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::deletePerson did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t    verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"deletePerson\");\n\n        assertEquals(\"DELETE\", recordedRequest.getMethod(), \"PersonController::deletePerson did not send a message with the correct request type.\");\n        assertEquals(\"/persons/\" + deletedPerson.getId(), recordedRequest.getPath(),\"PersonController::deletePerson send a message to the wrong correct endpoint path.\");\n        assertEquals(\"\", recordedRequest.getBody().readUtf8(), \"PersonController::deletePerson send a message with the wrong response body.\");\n    }\n\n    private void testGetAllPersons(int mockResponseCode, PersonSortingOptions sortingOptions, List<Person> allPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(allPersons))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeGetAllPersons(personController, sortingOptions, consumer);\n\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::getAllPersons did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t\tverify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(allPersons, argument.getValue(), \"getAllPersons\");\n\n        assertGetAllPersonRequest(recordedRequest, null);\n    }\n\n    private void assertGetAllPersonRequest(RecordedRequest recordedRequest, PersonSortingOptions sortingOptions) {\n        assertEquals(\"GET\", recordedRequest.getMethod(), \"PersonController::getAllPersons did not send a message with the correct request type.\");\n        if (sortingOptions == null) {\n            if (!recordedRequest.getPath().startsWith(\"/persons\")) {\n                fail(\"PersonController::getAllPersons send a message to the wrong correct endpoint path.\");\n            }\n        } else {\n            if (!recordedRequest.getPath().startsWith(\"/persons\")) {\n                fail(\"PersonController::getAllPersons send a message to the wrong correct endpoint path.\");\n            }\n            if (recordedRequest.getRequestUrl().queryParameterNames().size() != 2 || !recordedRequest.getRequestUrl().queryParameterNames().containsAll(List.of(\"sortField\", \"sortingOrder\"))) {\n                fail(\"PersonController::getAllPersons send a message without the correct sorting options.\");\n            }\n        }\n        assertEquals(\"\", recordedRequest.getBody().readUtf8(), \"PersonController::getAllPersons send a message with the wrong response body.\");\n    }\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/H05E01.java",
            "content": "package de.tum.in.ase.eist;\n\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\n\nimport de.tum.in.test.api.*;\nimport de.tum.in.test.api.jupiter.JupiterIOExtension;\nimport de.tum.in.test.api.jupiter.JupiterStrictTimeoutExtension;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\n@ExtendWith(JupiterIOExtension.class)\n@ExtendWith(JupiterStrictTimeoutExtension.class)\n@StrictTimeout(6)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface H05E01 {\n    // marker\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/H05E01Client.java",
            "content": "package de.tum.in.ase.eist;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.assertj.core.api.Assertions.assertThat;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.test.api.util.ReflectionTestUtils;\n\nimport java.lang.reflect.Field;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.function.Consumer;\n\npublic class H05E01Client {\n\n    private static final String PERSON_CONTROLLER_FULL_NAME = \"de.tum.in.ase.eist.controller.PersonController\";\n\n    public static Object createPersonController() {\n        return ReflectionTestUtils.newInstance(ReflectionTestUtils.getConstructor(ReflectionTestUtils.getClazz(PERSON_CONTROLLER_FULL_NAME)));\n    }\n\n    public static void invokeAddPerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"addPerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeUpdatePerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"updatePerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeDeletePerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"deletePerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeGetAllPersons(Object personController, PersonSortingOptions sortingOptions, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"getAllPersons\", PersonSortingOptions.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, sortingOptions, personConsumer);\n    }\n\n    public static void assertPersonListEquals(List<Person> expectedList, List<Person> actualList, String methodName) {\n        assertNotNull(actualList, \"The resulting list of persons was null after invoking PersonController::\" + methodName + \".\");\n        assertEquals(expectedList.size(), actualList.size(), \"The resulting list of persons does not have the correct size after invoking PersonController::\" + methodName + \".\");\n\n        boolean wrongOrder = false;\n\n        for (int i=0; i<expectedList.size(); i++) {\n            if(!checkIfPersonEqual(expectedList.get(i), actualList.get(i), false)) {\n                wrongOrder = true;\n                break;\n            }\n        }\n\n        if(!wrongOrder) return;\n\n        var sortedExpectedList = expectedList.stream().sorted((a, b) -> {\n            if (a.getFirstName() == null) {\n                return -1;\n            } else if (b.getFirstName() == null) {\n                return 1;\n            } else {\n                return a.getFirstName().compareTo(b.getFirstName());\n            }\n        }).toList();\n\n        var sortedActualList = expectedList.stream().sorted((a, b) -> {\n            if (a.getFirstName() == null) {\n                return -1;\n            } else if (b.getFirstName() == null) {\n                return 1;\n            } else {\n                return a.getFirstName().compareTo(b.getFirstName());\n            }\n        }).toList();\n\n        for (int i = 0; i < sortedExpectedList.size(); i++) {\n            if(checkIfPersonEqual(sortedExpectedList.get(i), sortedActualList.get(i), false)) {\n                fail(\"The resulting list of persons is not sorted correctly after invoking PersonController::\" + methodName + \".\");\n            }\n        }\n\n        fail(\"The resulting list of persons does not contain the correct persons after invoking PersonController::\" + methodName + \".\");\n    }\n\n    public static void setPersonControllerPersons(Object personController, List<Person> personList) {\n        Field persons;\n        Object fieldValue;\n        List<Person> reflectedPersonList;\n        try {\n            persons = personController.getClass().getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            fieldValue = persons.get(personController);\n            assertThat(fieldValue).isInstanceOf(List.class);\n\n            reflectedPersonList = (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The implementation of the attribute 'persons' in class 'PersonController' is not correct.\");\n            return;\n        }\n        try {\n            reflectedPersonList.removeIf(p -> true);\n            reflectedPersonList.addAll(personList);\n        } catch (Exception e) {\n            fail(\"An unexpected error has occurred. Contact your tutor.\");\n        }\n    }\n\n    public static boolean checkIfPersonEqual(Person expectedPerson, Person actualPerson, boolean ignoreId) {\n        var res = ignoreId || Objects.equals(expectedPerson.getId(), actualPerson.getId());\n        return res && Objects.equals(expectedPerson.getFirstName(), actualPerson.getFirstName())\n                && Objects.equals(expectedPerson.getLastName(), actualPerson.getLastName())\n                && Objects.equals(expectedPerson.getBirthday(), actualPerson.getBirthday());\n    }\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/PersonResourceTest.java",
            "content": "package de.tum.in.ase.eist;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.rest.PersonResource;\nimport de.tum.in.ase.eist.service.PersonService;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.NoSuchBeanDefinitionException;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.test.annotation.DirtiesContext;\nimport org.springframework.test.web.servlet.MockMvc;\n\nimport java.lang.reflect.Field;\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\n\nimport static de.tum.in.ase.eist.H05E01Client.checkIfPersonEqual;\nimport static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.fail;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\n\n@H05E01\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\n// this is required to reset the persons saved in PersonService\n@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)\n@AutoConfigureMockMvc\npublic class PersonResourceTest {\n\n    @Autowired\n    private MockMvc mvc;\n\n    @Autowired\n    private ApplicationContext context;\n\n    private static ObjectMapper objectMapper;\n    private static Object personService;\n\n    private Person person1;\n    private Person person2;\n\n    @BeforeAll\n    static void setUp() {\n        objectMapper = new ObjectMapper();\n        objectMapper.findAndRegisterModules();\n    }\n\n    @BeforeEach\n    void initialize() {\n        try {\n            personService = context.getBean(PersonService.class);\n        } catch (NoSuchBeanDefinitionException e) {\n            fail(\"PersonService is not defined correctly as a Spring-Service.\");\n        }\n\n        try {\n            context.getBean(PersonResource.class);\n        } catch (NoSuchBeanDefinitionException e) {\n            fail(\"PersonResource is not defined correctly as a Spring-Controller.\");\n        }\n\n        person1 = new Person();\n        person1.setFirstName(\"Max\");\n        person1.setLastName(\"Musterfrau\");\n        person1.setBirthday(LocalDate.ofYearDay(2000, 125));\n\n        person2 = new Person();\n        person2.setFirstName(\"Erika\");\n        person2.setLastName(\"Mustermann\");\n        person2.setBirthday(LocalDate.ofYearDay(1999, 80));\n    }\n\n    @Test\n    @DisplayName(\"Create valid person (Server)\")\n    public void testAddSingleUser() throws Exception {\n        var response = this.mvc.perform(\n                post(\"/persons\")\n                        .content(objectMapper.writeValueAsString(person1))\n                        .contentType(\"application/json\")).andReturn().getResponse();\n\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint POST /persons has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::createPerson did not return the correct status code\");\n        assertEquals(\"application/json\", response.getContentType());\n\n        var personsInService = getAllPersonsByReflection();\n        if (personsInService == null || personsInService.size() != 1) {\n            fail(\"After calling PersonResource::createPerson, PersonResource::persons contain the wrong amount of persons.\");\n        }\n        var createdPerson = personsInService.get(0);\n\n        var responseEntity = objectMapper.readValue(response.getContentAsString(), Person.class);\n        if (!checkIfPersonEqual(createdPerson, responseEntity, true)) {\n            fail(\"PersonResource::createPerson did not return the correct person as response body.\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"Create invalid person (Server)\")\n    public void testAddInvalidPerson() throws Exception {\n        var uuid = UUID.randomUUID();\n        person1.setId(uuid);\n\n        var response = this.mvc.perform(\n                        post(\"/persons\")\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint POST /persons has not been implemented.\");\n        }\n        assertEquals(400, response.getStatus(), \"PersonResource::createPerson did not return the correct status code for an invalid request body.\");\n    }\n\n    @Test\n    @DisplayName(\"Update existing person (Server)\")\n    public void testUpdateExistingPerson() throws Exception {\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        person1.setFirstName(\"Changed\");\n        person1.setLastName(\"Name\");\n\n        var response = this.mvc.perform(\n                        put(\"/persons/\" + person1.getId())\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint PUT /persons/:personId has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::updatePerson did not return the correct status code.\");\n        assertEquals(\"application/json\", response.getContentType());\n\n        var personsInService = getAllPersonsByReflection();\n        if (personsInService == null || personsInService.size() != 1) {\n            fail(\"After calling PersonResource::updatePerson, PersonResource::persons contain the wrong amount of persons.\");\n        }\n        var updatedPerson = personsInService.get(0);\n\n        var responseEntity = objectMapper.readValue(response.getContentAsString(), Person.class);\n        if (!checkIfPersonEqual(updatedPerson, responseEntity, false)) {\n            fail(\"PersonResource::updatePerson did not return the correct person as response body.\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"Update person with mismatching IDs (Server)\")\n    public void testUpdatePersonWithIdMismatch() throws Exception {\n        var mismatchedId = UUID.randomUUID();\n\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        var response = this.mvc.perform(\n                        put(\"/persons/\" + mismatchedId)\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint PUT /persons/:personId has not been implemented.\");\n        }\n        assertEquals(400, response.getStatus(), \"PersonResource::updatePerson did not return the correct status code for an invalid response body.\");\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person (Server)\")\n    public void testDeleteExistingPerson() throws Exception {\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        var response = this.mvc.perform(\n                delete(\"/persons/\" + person1.getId())\n                        .content(objectMapper.writeValueAsString(person1))\n                        .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint DELETE /persons/:personId has not been implemented.\");\n        }\n        assertEquals(204, response.getStatus(), \"PersonResource::deletePerson did not return the correct status code.\");\n    }\n\n    @Test\n    @DisplayName(\"Get all persons with sorting options (Server)\")\n    public void testGetAllPersons() throws Exception {\n        var id1 = UUID.randomUUID();\n        var id2 = UUID.randomUUID();\n        person1.setId(id1);\n        person2.setId(id2);\n        setAllPersonsByReflection(List.of(person1, person2));\n\n        for (var fieldOption: PersonSortingOptions.SortField.values()) {\n            for (var orderOption: PersonSortingOptions.SortingOrder.values()) {\n                var sortedList = getSortedList(List.of(person1, person2), orderOption, fieldOption);\n                var response = this.mvc.perform(\n                                get(\"/persons\")\n                                        .param(\"sortField\", fieldOption.name())\n                                        .param(\"sortingOrder\", orderOption.name())\n                                        .contentType(\"application/json\")).andReturn().getResponse();\n\n                if (response.getStatus() == 404 || response.getStatus() == 405) {\n                    fail(\"The endpoint GET /persons has not been implemented.\");\n                }\n                assertEquals(200, response.getStatus(), \"PersonResource::getAllPersons did not return the correct status code.\");\n\n                var respondedPersons = objectMapper.readValue(response.getContentAsString(), Person[].class);\n                if (respondedPersons.length != 2) {\n                    fail(\"PersonResource::getAllPersons did not return the correct amount of persons.\");\n                }\n                for (int i = 0; i < respondedPersons.length; i++){\n                    if (!checkIfPersonEqual(sortedList.get(i), respondedPersons[i], false)) {\n                        fail(\"PersonResource::getAllPersons did not contain the correct person/correct order as response body for a request with sorting options.\");\n                    }\n                }\n            }\n        }\n    }\n\n    @Test\n    @DisplayName(\"Get all persons with default request parameters (Server)\")\n    public void testDefaultSortValues() throws Exception {\n        var id1 = UUID.randomUUID();\n        var id2 = UUID.randomUUID();\n        person1.setId(id1);\n        person2.setId(id2);\n        setAllPersonsByReflection(List.of(person1, person2));\n\n        var sortedList = getSortedList(List.of(person1, person2), ASCENDING, PersonSortingOptions.SortField.ID);\n        var response = this.mvc.perform(\n                        get(\"/persons\")\n                                .contentType(\"application/json\")).andReturn().getResponse();\n\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint GET /persons has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::getAllPersons did not return the correct status code.\");\n        var respondedPersons = objectMapper.readValue(response.getContentAsString(), Person[].class);\n        if (respondedPersons.length != 2) {\n            fail(\"PersonResource::getAllPersons did not return the correct amount of persons.\");\n        }\n\t    var sortedRespondedPersons = getSortedList(List.of(respondedPersons), ASCENDING, PersonSortingOptions.SortField.ID);\n\t    for (int i = 0; i < sortedRespondedPersons.size(); i++){\n            if (!checkIfPersonEqual(sortedList.get(i), sortedRespondedPersons.get(i), false)) {\n                fail(\"PersonResource::getAllPersons did not contain the correct person/correct order as response body when performing a request without sorting options.\");\n            }\n        }\n    }\n\n    private static List<Person> getSortedList(List<Person> persons, PersonSortingOptions.SortingOrder sortingOrder, PersonSortingOptions.SortField sortField) {\n        var sortedList = new ArrayList<>(persons);\n        sortedList.sort((p1, p2) -> {\n            Person person1;\n            Person person2;\n            if (sortingOrder == ASCENDING) {\n                person1 = p1;\n                person2 = p2;\n            } else {\n                person1 = p2;\n                person2 = p1;\n            }\n\n            return switch (sortField) {\n                case ID -> person1.getId().compareTo(person2.getId());\n                case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n                case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n                case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n            };\n        });\n\n        return sortedList;\n    }\n\n    public static void setAllPersonsByReflection(List<Person> personList) {\n        Field persons;\n        Object fieldValue;\n        List<Person> reflectedPersonList;\n        try {\n            persons = PersonService.class.getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            fieldValue = persons.get(personService);\n            if (!(fieldValue instanceof List)) {\n                fail(\"The attribute 'persons' in class 'PersonResource' has not the correct type.\");\n            }\n\n            reflectedPersonList = (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The attribute 'persons' in class 'PersonResource' has not been implemented as described.\");\n            return;\n        }\n        try {\n            reflectedPersonList.removeIf(p -> true);\n            reflectedPersonList.addAll(personList);\n        } catch (Exception e) {\n            fail(\"An unexpected error has occurred. Contact your tutor.\");\n        }\n    }\n\n    public static List<Person> getAllPersonsByReflection() {\n        try {\n            Field persons = PersonService.class.getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            Object fieldValue = persons.get(personService);\n\n            if (!(fieldValue instanceof List)) {\n                fail(\"The attribute 'persons' in class 'PersonService' has not the correct type.\");\n            }\n            return (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The attribute 'persons' in class 'PersonService' has not been implemented as described.\");\n            return null;\n        }\n    }\n}\n"
          }
        ]
      },
      "outputs": null,
      "tags": [
        "seq:step:1"
      ],
      "parent_run_id": "2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "trace_id": "2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "dotted_order": "20250723T144040524034Z2102d036-0bf8-4863-879f-f17bd2b1b9ca.20250723T144040588355Z426ee021-0ec1-40e6-bda0-4be115f42a34",
      "session_id": "9165a489-2e1b-4cfc-a139-82686a2268ba",
      "extra": {
        "runtime": {
          "sdk": "langsmith-py",
          "sdk_version": "0.3.42",
          "library": "langchain-core",
          "platform": "macOS-15.3-arm64-arm-64bit-Mach-O",
          "runtime": "python",
          "py_implementation": "CPython",
          "runtime_version": "3.13.5",
          "langchain_version": "0.3.25",
          "langchain_core_version": "0.3.59",
          "library_version": "0.3.59"
        },
        "metadata": {
          "LANGSMITH_TRACING": "true",
          "LANGCHAIN_RUN_ID": "39eb4060",
          "revision_id": "v1.1.0-48-g1c4fbcca-dirty",
          "ls_run_depth": 1
        }
      },
      "events": [
        {
          "name": "start",
          "time": "2025-07-23T14:40:40.588355+00:00"
        }
      ]
    },
    {
      "id": "2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "name": "consistency_check",
      "run_type": "chain",
      "start_time": "2025-07-23T14:40:40.524034",
      "end_time": null,
      "status": "pending",
      "inputs": {
        "problem_statement": "# REST Architectural Style\n\nThe university has finally decided to use real-world examples for learning purposes as opposed to mystical penguins. However, the previous developers were not happy with that decision and waddled off having deleted parts of the project they didn't like. The Project is a simple [REST API](https://www.geeksforgeeks.org/rest-api-introduction/) based on `Spring Boot`. Your task is to apply the layered architectural pattern on top of an MVC design pattern and to write an API.\n\nThis exercise uses [Spring Web](https://www.tutorialspoint.com/spring/spring_web_mvc_framework.htm) on the server-side to process and reply to REST requests that the client-side sends using [Spring WebFlux](https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/). The provided links provide a preview of how the frameworks work. It isn't necessary to know in detail the workings of the framework but it's definitely worth a go.\n\n## Application Structure\n\nThe following model describes the `Layered Architecture` that is used for this exercise to separate the implemented functionality into different layers.\n<br>\n#### Client-Side:\n- The `Presentation Layer` contains functionality that the user directly interacts with (such as a GUI).\n- The `Application Layer` contains the actual application logic. This layer receives the entities (Person and Note) from the `Network Layer`, processes it and passes the data over to the `Presentation Layer`. In addition, this layer receives events from the `Presentation Layer` (such as invoking updating the name of an entity) and forwards the events in terms of method calls to the `Network Layer`.\n- The `Network Layer` contains the functionality to send REST requests to the server.\n\n#### Server-Side:\n- The `Network Layer` contains the functionality to receive, validate and respond to REST request from the client.\n- The `Business Layer` contains the functionality to process the entities received from the client. In this exercise, this layer is also responsible for persisting (saving, updating and deleting) the entities.\n\n### Layered Architecture\n@startuml\n\nnamespace Client {\n    namespace NetworkLayer {}\n    \n    namespace PresentationLayer {}\n    \n    namespace ApplicationLayer {}\n}\n\nnamespace Server {\n    namespace NetworkLayer {}\n    \n    namespace BusinessLayer {}\n}\n\nClient.PresentationLayer --> Client.ApplicationLayer\nClient.ApplicationLayer --> Client.NetworkLayer\nClient.NetworkLayer <---> Server.NetworkLayer\nServer.NetworkLayer --> Server.BusinessLayer\nServer.NetworkLayer -[hidden]> Client.NetworkLayer\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\nOn the client-side the `Model View Controller Pattern` has been applied. The following component model describes the implementation in detail.\n### MVC Component Diagram\n@startuml\n\nnamespace Common {\n    namespace Model {\n        class Common.Model.Note {\n            \n        }\n        class Common.Model.Person {\n            \n        }\n    }\n}\n\nnamespace Client {\n    namespace Controller {\n        class Client.Controller.NoteController {\n            \n        }\n        class Client.Controller.PersonController {\n            \n        }\n    }\n    namespace View {\n        class Client.View.NoteScene {\n            \n        }\n        class Client.View.PersonScene {\n            \n        }\n    }\n}\n\nClient.Controller.NoteController <-- Client.View.NoteScene\nClient.Controller.PersonController <-- Client.View.PersonScene\nCommon.Model.Note \"*\" --o Client.Controller.NoteController\nCommon.Model.Person \"*\" --o Client.Controller.PersonController\n\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\n<br />\n\n***Note: Important! In order to run the application to try it locally, please run `H05E01ServerApplication` for the server side and `Starter` for the client side. Do not run H05E01ClientApplication!***\n\n\n## Application Functionality\nThis system has 2 sides.\n- Client-side\n- Server-side\n\n\nThe server-side has an open endpoint listening on port `8080` for HTTP Requests. For every respective HTTP Request, a specific action is carried out to fulfill the task and return the result.\nThe client-side has a JavaFX GUI, to spare the clients the rather scary looking naked REST Calls and have it run behind closed doors instead. For every respective action, it generates the required HTTP Request and sends it to the server and gets back an HTTP response which is then used to update the UI.\n\nThe endpoints you'll have to implement should allow to Create, Read, Update and Delete (CRUD) persons. In detail these are:\n- `POST /persons`: Creates a new person. The person is passed via the body of the HTTP request. The response contains the saved person in the body of the HTTP response\n- `GET /persons`: Reads all persons. The persons are returned as a list in the body of the HTTP response\n- `PUT /persons/{personId}`: Updates the person with the given ID. The updated person is passed via the body of the HTTP request. The response contains the updated person in the body of the HTTP response\n- `DELETE /persons/{personId}`: Deletes the person with the given ID. It returns an HTTP `204 No Content` response if successful\n\n*Note: There are TODOs in the code giving helpful hints*\n\n***Side note*** : If you want to try out these new REST Requests directly without the client, run the server side by running H05E01ServerApplication, and use the following curl-commands to see REST in action. <br/>\n*`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* should return `[]` as nothing has been stored. <br/> \n*`curl -X POST -H \"Content-Type: application/json\" -d '{\"name\":\"nice\",\"content\":\"this is how you save a nice note\",\"creationDate\":\"2001-06-19T04:12:00.12345Z\"}' \"localhost:8080/notes\"`* to save a nice note. It'll return the saved data as json to acknowledge what was saved <br/>\n*`curl -X GET -H \"Content-Type: application/json\" \"localhost:8080/notes?secret=SecretKey\"`* would then return the same note. <br/>\n*Note*: The `creationDate` gets overwritten as that is generated by the server. You can cross check if the data got saved by running `Starter` and then checking out `Notes`\n<br/>\n<br/>\n##Part 1\nIn the first part, we want to get basic functionality up and running on the server-side. Specify the endpoints in the server in `PersonResource`.\nYou have to forward each action to the `PersonService` and add any additional checks before that.\n\n1. [task][Endpoint to create a person](Create valid person (Server),Create invalid person (Server))\n    Implement the method `createPerson`, which saves a valid `Person`. You need to ensure that it is actually a new Person that does not have an ID yet.\n2. [task][Endpoint to update a person](Update existing person (Server),Update person with mismatching IDs (Server))\n    Implement the method `updatePerson`, which updates a valid `Person` based on the UUID. You need to ensure that the modified Person has personId as its ID.\n3. [task][Endpoint to delete a person](Delete existing person (Server))\n    Implement the method `deletePerson`, which deletes a `Person` based on the UUID.\n4. [task][Endpoint to get all persons](Get all persons with default request parameters (Server))\n    Last but not the least, implement the method `getAllPersons`, which returns all persons.\n\n*Note: Feel free to get inspired by `NoteResource` for additional help.*\n\n\n\n##Part 2\nIn the second part, we will now be writing the RESTFUL Requests to the server on the client-side. But first, we need to set up `PersonController` properly according to this UML Diagram.\nThe Controller should work like this:\n- There is a single `WebClient` instance that is used for all requests\n- Each method should only send a single HTTP request\n- The HTTP requests need to happen asynchronously\n- It has an internal list of all persons\n    - If a person is created, updated or deleted this has to be updated in the list\n    - If all persons are retrieved from the server the list has to be updated accordingly\n- Each method takes a `Consumer<List<Note>>` parameter, which has to be called after a response is received\n    - This consumer takes the internal list of persons as a parameter\n\n### UML Diagram\n@startuml\n\nnamespace Client {\n    namespace Controller {\n        class PersonController {\n            - webClient: WebClient\n            + <color:testsColor(testMethods[testAddSingleValidPerson], testMethods[testAddMultipleValidPersons], testMethods[testAddInvalidPerson])>addPerson(...)</color>\n            + <color:testsColor(testMethods[testEditSinglePerson], testMethods[testEditSinglePersonForMultipleExistingPersons], testMethods[testEditInvalidPerson])>updatePerson(...)</color>\n            + <color:testsColor(testMethods[testDeleteOnlyExistingPerson], testMethods[testDeletePerson])>deletePerson(...)</color>\n            + <color:testsColor(testMethods[testGetAllPerson], testMethods[testGetAllPersonsResetsSavedResult])>getAllPersons(...)</color>\n        }\n    }\n}\n\nnamespace Common {\n    class Person {\n        - id: UUID\n        - firstName: String\n        - lastName: String\n        - birthday: LocalDate\n    }\n}\n\nClient.Controller.PersonController o-- \"*\" Common.Person : persons\n\n\nhide empty fields\nhide empty methods\nhide circle\n@enduml\n\n<br />\n\n1. [task][Request to create a person](Add single valid persons (Client),Add single invalid person (Client),Add multiple valid persons (Client))\n    Implement the method `addPerson` which sends a POST Request to our server to add a `Person`.\n2. [task][Request to update a person](Edit single person (Client),Edit single person for multiple existing persons (Client),Edit invalid person (Client))\n    Implement the method `updatePerson` which sends a PUT Request to our server to change the attributes of the old `Person` according to the UUID.\n3. [task][Request to delete a person](Delete existing person 1 (Client),Delete existing person 2 (Client))\n    Implement the method `deletePerson` which sends a DELETE Request to our server to delete a `Person` based on the UUID.\n4. [task][Request to get all persons](Retrieve all persons 1 (Client),Retrieve all persons 2 (Client))\n    Last but not the least, implement the method `getAllPersons` which sends a GET Request to our server to get a list of `Person` objects.\n\n*Note: Don't forget the constructor of `PersonController`*\n\n##Part 3\nIt has been determined that the server should now also support the sorting of persons. The functionality for this has already been implemented in the client UI. The user can sort the persons by their ID, first name, last name, and birthday in either ascending or descending order. These options are stored in `PersonSortingOptions` for convenience.\n\nIt is now your job to implement this feature. The sorting itself should happen in the `PersonService`. The `GET /persons` endpoint has to be adapated to accept the sorting options and pass them to the `PersonService`. The client request also has to be adapated to send the sorting options to the server.\nSome additional notes:\n- The sorting options have to be passed as the query parameters `sortField` and `sortingOrder`. You can look at the `GET /notes` endpoint to see an example using query parameters.\n- The server endpoint should still work without specified sorting options. In this case it should default to `ID` and `ASCENDING` as the sorting options. Hint: Look at the JavaDoc of `RequestParam`.\n\n[task][Add the sorting functionality](Sort options for retrieving all persons (Client),Get all persons with sorting options (Server))\nImplement the method `getAllPersons` in `PersonService` which sorts the list of `Person` according to the `PersonSortingOptions` parameter.\nThen update the `getAllPersons` methods in `PersonResource` and `PersonController` to pass the `PersonSortingOptions` in the HTTP request.\n\n*Note: Do not change the attributes of PersonService, this will lead to Artemis tests failing*",
        "programming_language": "java",
        "template_repository": [
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\ngroup = 'de.tum.in.ase.eist'\nversion = '1.0.0'\nsourceCompatibility = 17\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web'\n\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\nsourceSets {\n    common {\n        java {\n            srcDir 'src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'src/server/java'\n        }\n        resources {\n            srcDir 'src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'src/client/java'\n        }\n        resources {\n            srcDir 'src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n}\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Spring-Exercise'\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.view.HomeScene;\nimport de.tum.in.ase.eist.view.NoteScene;\nimport de.tum.in.ase.eist.view.PersonScene;\nimport javafx.application.Application;\nimport javafx.stage.Stage;\n\npublic class H05E01ClientApplication extends Application {\n    private final NoteController noteController = new NoteController();\n    private final PersonController personController = new PersonController();\n    private Stage stage;\n\n    @Override\n    public void start(Stage primaryStage) {\n        this.stage = primaryStage;\n\n        primaryStage.setScene(new HomeScene(this));\n        primaryStage.show();\n    }\n\n    public void showHomeScene() {\n        stage.setScene(new HomeScene(this));\n    }\n\n    public void showNoteScene() {\n        stage.setScene(new NoteScene(noteController, this));\n    }\n\n    public void showPersonScene() {\n        stage.setScene(new PersonScene(personController, this));\n    }\n\n    public Stage getStage() {\n        return stage;\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/Starter.java",
            "content": "package de.tum.in.ase.eist;\n\nimport javafx.application.Application;\n\npublic class Starter {\n    public static void main(String[] args) {\n        Application.launch(H05E01ClientApplication.class);\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/NoteController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class NoteController {\n    private final WebClient webClient;\n    private final List<Note> notes;\n\n    public NoteController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.notes = new ArrayList<>();\n    }\n\n    public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.post()\n                .uri(\"notes\")\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.add(newNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.put()\n                .uri(\"notes/\" + note.getId())\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.delete()\n                .uri(\"notes/\" + note.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    notes.remove(note);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"notes\")\n                        .queryParam(\"secret\", \"SecretKey\")\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n                .onErrorStop()\n                .subscribe(newNotes -> {\n                    notes.clear();\n                    notes.addAll(newNotes);\n                    notesConsumer.accept(notes);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/PersonController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class PersonController {\n\n    public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http post request to the server\n    }\n\n    public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http put request to the server\n    }\n\n    public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an http delete request to the server\n    }\n\n    public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n        // TODO Part 2: Make an https get request to the server\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/PersonScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\nimport javafx.application.Platform;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Popup;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic class PersonScene extends Scene {\n    private final PersonController personController;\n    private final H05E01ClientApplication application;\n    private final PersonSortingOptions sortingOptions;\n    private final ObservableList<Person> personList;\n    private final TableView<Person> table;\n\n    public PersonScene(PersonController personController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.personController = personController;\n        this.application = application;\n        this.sortingOptions = new PersonSortingOptions();\n        this.personList = FXCollections.observableArrayList();\n\n        table = new TableView<>(personList);\n        table.setOnMousePressed(event -> {\n            if (event.isPrimaryButtonDown()) {\n                showPopup(table.getSelectionModel().getSelectedItem());\n            }\n        });\n\n        var idColumn = new TableColumn<Person, String>(\"ID\");\n        idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n        idColumn.setSortable(false);\n        idColumn.setPrefWidth(620 / 4D);\n        var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n        firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n        firstNameColumn.setSortable(false);\n        firstNameColumn.setPrefWidth(620 / 4D);\n        var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n        lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n        lastNameColumn.setSortable(false);\n        lastNameColumn.setPrefWidth(620 / 4D);\n        var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n        birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n        birthdayColumn.setSortable(false);\n        birthdayColumn.setPrefWidth(620 / 4D);\n        //noinspection unchecked\n        table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n\n        var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n\n        personController.getAllPersons(sortingOptions, this::setPeople);\n    }\n\n    private HBox createSortOptionBox() {\n        var sortFieldChoiceBox = new ChoiceBox<SortField>();\n        sortFieldChoiceBox.getItems().addAll(SortField.values());\n        sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n        sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortField(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n        sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n        sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n        sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortingOrder(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n        hBox.setAlignment(Pos.CENTER);\n        return hBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Person\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Person person) {\n        var popup = new Popup();\n        var firstNameTextField = new TextField();\n        firstNameTextField.setPromptText(\"First Name\");\n        firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n\n        var lastNameTextField = new TextField();\n        lastNameTextField.setPromptText(\"Last Name\");\n        lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n\n        var birthdayPicker = new DatePicker();\n        birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newPerson = person != null ? person : new Person();\n            newPerson.setFirstName(firstNameTextField.getText());\n            newPerson.setLastName(lastNameTextField.getText());\n            newPerson.setBirthday(birthdayPicker.getValue());\n            if (person == null) {\n                personController.addPerson(newPerson, this::setPeople);\n            } else {\n                personController.updatePerson(newPerson, this::setPeople);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            personController.deletePerson(person, this::setPeople);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (person != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(150);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n\n    private void setPeople(List<Person> people) {\n        Platform.runLater(() -> personList.setAll(people));\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/NoteScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.model.Note;\nimport javafx.application.Platform;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\nimport javafx.stage.Popup;\n\nimport java.util.List;\n\npublic class NoteScene extends Scene {\n    private final NoteController noteController;\n    private final H05E01ClientApplication application;\n    private final FlowPane flowPane;\n\n    public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.noteController = noteController;\n        this.application = application;\n\n        flowPane = new FlowPane(10, 10);\n        var scrollPane = new ScrollPane(flowPane);\n        scrollPane.setPrefHeight(450);\n        scrollPane.setFitToWidth(true);\n\n        var vBox = new VBox(10, scrollPane, createButtonBox());\n\n        noteController.getAllNotes(this::setNotes);\n        this.setRoot(vBox);\n    }\n\n    public void setNotes(List<Note> notes) {\n        Platform.runLater(() -> {\n            var children = flowPane.getChildren();\n            children.setAll(notes.stream().map(this::createNoteView).toList());\n        });\n    }\n\n    private Node createNoteView(Note note) {\n        var name = new Text(note.getName());\n        name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n\n        var spacer = new Region();\n        HBox.setHgrow(spacer, Priority.ALWAYS);\n\n        var deleteButton = new Button(\"E\");\n        deleteButton.setTextFill(Color.ORANGE);\n        deleteButton.setOnAction(event -> showPopup(note));\n\n        var titleBox = new HBox(name, spacer, deleteButton);\n\n        var content = new Text(note.getContent());\n        var contentScrollPane = new ScrollPane(content);\n        contentScrollPane.setFitToWidth(true);\n        contentScrollPane.setFitToHeight(true);\n        contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n        contentScrollPane.getStyleClass().clear();\n        content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n\n        var vBox = new VBox(10, titleBox, contentScrollPane);\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setStyle(\"-fx-background-color:white;\");\n        vBox.setPadding(new Insets(5));\n        return vBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Note\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Note note) {\n        var popup = new Popup();\n        var nameTextField = new TextField();\n        nameTextField.setPromptText(\"Name\");\n        nameTextField.setText(note == null ? \"\" : note.getName());\n\n        var contentTextArea = new TextArea();\n        contentTextArea.setPromptText(\"Content\");\n        contentTextArea.setText(note == null ? \"\" : note.getContent());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newNote = note != null ? note : new Note();\n            newNote.setName(nameTextField.getText());\n            newNote.setContent(contentTextArea.getText());\n            if (note == null) {\n                noteController.addNote(newNote, this::setNotes);\n            } else {\n                noteController.editNote(newNote, this::setNotes);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            noteController.deleteNote(note, this::setNotes);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (note != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/HomeScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.VBox;\n\npublic class HomeScene extends Scene {\n    public HomeScene(H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n\n        var noteButton = new Button(\"Notes\");\n        noteButton.setOnAction(event -> application.showNoteScene());\n\n        var personButton = new Button(\"Persons\");\n        personButton.setOnAction(event -> application.showPersonScene());\n\n        var vBox = new VBox(10, noteButton, personButton);\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java",
            "content": "package de.tum.in.ase.eist.util;\n\npublic class PersonSortingOptions {\n    private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n    private SortField sortField = SortField.ID;\n\n    public PersonSortingOptions() {}\n\n    public PersonSortingOptions(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n        this.sortingOrder = sortingOrder;\n        this.sortField = sortField;\n    }\n\n    public SortingOrder getSortingOrder() {\n        return sortingOrder;\n    }\n\n    public void setSortingOrder(SortingOrder sortingOrder) {\n        this.sortingOrder = sortingOrder;\n    }\n\n    public SortField getSortField() {\n        return sortField;\n    }\n\n    public void setSortField(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public enum SortingOrder {\n        ASCENDING, DESCENDING\n    }\n\n    public enum SortField {\n        ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n    }\n}"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Note.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.Instant;\nimport java.util.UUID;\n\npublic class Note {\n    private UUID id;\n    private String name;\n    private String content;\n    private Instant creationDate;\n\n    public Note() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    public Instant getCreationDate() {\n        return creationDate;\n    }\n\n    public void setCreationDate(Instant creationDate) {\n        this.creationDate = creationDate;\n    }\n\n    @Override\n    public String toString() {\n        return \"Note{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", content='\" + content + '\\'' +\n                \", creationDate=\" + creationDate +\n                '}';\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Person.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic class Person {\n    private UUID id;\n    private String firstName;\n    private String lastName;\n    private LocalDate birthday;\n\n    public Person() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public LocalDate getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(LocalDate birthday) {\n        this.birthday = birthday;\n    }\n}\n"
          },
          {
            "path": "src/server/resources/application.properties",
            "content": "logging.level.ROOT=DEBUG\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class H05E01ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(H05E01ServerApplication.class, args);\n    }\n\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/PersonService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.stereotype.Service;\n\nimport java.util.*;\n\n@Service\npublic class PersonService {\n  \t// do not change this\n    private final List<Person> persons;\n\n    public PersonService() {\n        this.persons = new ArrayList<>();\n    }\n\n    public Person savePerson(Person person) {\n        var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n        if (optionalPerson.isEmpty()) {\n            person.setId(UUID.randomUUID());\n            persons.add(person);\n            return person;\n        } else {\n            var existingPerson = optionalPerson.get();\n            existingPerson.setFirstName(person.getFirstName());\n            existingPerson.setLastName(person.getLastName());\n            existingPerson.setBirthday(person.getBirthday());\n            return existingPerson;\n        }\n    }\n\n    public void deletePerson(UUID personId) {\n        this.persons.removeIf(person -> person.getId().equals(personId));\n    }\n\n    public List<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n        // TODO Part 3: Add sorting here\n        return new ArrayList<>(this.persons);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/NoteService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.stereotype.Service;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Service\npublic class NoteService {\n    private final List<Note> notes;\n\n    public NoteService() {\n        this.notes = new ArrayList<>();\n    }\n\n    public Note saveNote(Note note) {\n        var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n        if (optionalNote.isEmpty()) {\n            note.setId(UUID.randomUUID());\n            note.setCreationDate(Instant.now());\n            notes.add(note);\n            return note;\n        } else {\n            var existingNote = optionalNote.get();\n            existingNote.setName(note.getName());\n            existingNote.setContent(note.getContent());\n            return existingNote;\n        }\n    }\n\n    public void deleteNote(UUID noteId) {\n        this.notes.removeIf(note -> note.getId().equals(noteId));\n    }\n\n    public List<Note> getAllNotes() {\n        return Collections.unmodifiableList(this.notes);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/PersonResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.service.PersonService;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class PersonResource {\n\n    private final PersonService personService;\n\n    public PersonResource(PersonService personService) {\n        this.personService = personService;\n    }\n\n    // TODO Part 1: Implement the specified endpoints here\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/NoteResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Note;\nimport de.tum.in.ase.eist.service.NoteService;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class NoteResource {\n\n    private final NoteService noteService;\n\n    public NoteResource(NoteService noteService) {\n        this.noteService = noteService;\n    }\n\n    @GetMapping(\"notes\")\n    public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n        if (!\"SecretKey\".equals(secret)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.getAllNotes());\n    }\n\n    @PostMapping(\"notes\")\n    public ResponseEntity<Note> createNote(@RequestBody Note note) {\n        if (note.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(note));\n    }\n\n    @PutMapping(\"notes/{noteId}\")\n    public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n        if (!updatedNote.getId().equals(noteId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(updatedNote));\n    }\n\n    @DeleteMapping(\"notes/{noteId}\")\n    public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n        noteService.deleteNote(noteId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          }
        ],
        "solution_repository": [
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\ngroup = 'de.tum.in.ase.eist'\nversion = '1.0.0'\nsourceCompatibility = 17\ncompileJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web'\n\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\nsourceSets {\n    common {\n        java {\n            srcDir 'src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'src/server/java'\n        }\n        resources {\n            srcDir 'src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'src/client/java'\n        }\n        resources {\n            srcDir 'src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n}\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Solution'\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/H05E01ClientApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.view.HomeScene;\nimport de.tum.in.ase.eist.view.NoteScene;\nimport de.tum.in.ase.eist.view.PersonScene;\nimport javafx.application.Application;\nimport javafx.stage.Stage;\n\npublic class H05E01ClientApplication extends Application {\n    private final NoteController noteController = new NoteController();\n    private final PersonController personController = new PersonController();\n    private Stage stage;\n\n    @Override\n    public void start(Stage primaryStage) {\n        this.stage = primaryStage;\n\n        primaryStage.setScene(new HomeScene(this));\n        primaryStage.show();\n    }\n\n    public void showHomeScene() {\n        stage.setScene(new HomeScene(this));\n    }\n\n    public void showNoteScene() {\n        stage.setScene(new NoteScene(noteController, this));\n    }\n\n    public void showPersonScene() {\n        stage.setScene(new PersonScene(personController, this));\n    }\n\n    public Stage getStage() {\n        return stage;\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/Starter.java",
            "content": "package de.tum.in.ase.eist;\n\nimport javafx.application.Application;\n\npublic class Starter {\n    public static void main(String[] args) {\n        Application.launch(H05E01ClientApplication.class);\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/NoteController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class NoteController {\n    private final WebClient webClient;\n    private final List<Note> notes;\n\n    public NoteController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.notes = new ArrayList<>();\n    }\n\n    public void addNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.post()\n                .uri(\"notes\")\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.add(newNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void editNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.put()\n                .uri(\"notes/\" + note.getId())\n                .bodyValue(note)\n                .retrieve()\n                .bodyToMono(Note.class)\n                .onErrorStop()\n                .subscribe(newNote -> {\n                    notes.replaceAll(oldNote -> oldNote.getId().equals(newNote.getId()) ? newNote : oldNote);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void deleteNote(Note note, Consumer<List<Note>> notesConsumer) {\n        webClient.delete()\n                .uri(\"notes/\" + note.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    notes.remove(note);\n                    notesConsumer.accept(notes);\n                });\n    }\n\n    public void getAllNotes(Consumer<List<Note>> notesConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"notes\")\n                        .queryParam(\"secret\", \"SecretKey\")\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Note>>() {})\n                .onErrorStop()\n                .subscribe(newNotes -> {\n                    notes.clear();\n                    notes.addAll(newNotes);\n                    notesConsumer.accept(notes);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/controller/PersonController.java",
            "content": "package de.tum.in.ase.eist.controller;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.core.ParameterizedTypeReference;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Consumer;\n\npublic class PersonController {\n    private final WebClient webClient;\n    private final List<Person> persons;\n\n    public PersonController() {\n        this.webClient = WebClient.builder()\n                .baseUrl(\"http://localhost:8080/\")\n                .defaultHeader(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                .build();\n        this.persons = new ArrayList<>();\n    }\n\n    public void addPerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.post()\n                .uri(\"persons\")\n                .bodyValue(person)\n                .retrieve()\n                .bodyToMono(Person.class)\n                .onErrorStop()\n                .subscribe(newPerson -> {\n                    persons.add(newPerson);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void updatePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.put()\n                .uri(\"persons/\" + person.getId())\n                .bodyValue(person)\n                .retrieve()\n                .bodyToMono(Person.class)\n                .onErrorStop()\n                .subscribe(newPerson -> {\n                    persons.replaceAll(oldPerson -> oldPerson.getId().equals(newPerson.getId()) ? newPerson : oldPerson);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void deletePerson(Person person, Consumer<List<Person>> personsConsumer) {\n        webClient.delete()\n                .uri(\"persons/\" + person.getId())\n                .retrieve()\n                .toBodilessEntity()\n                .onErrorStop()\n                .subscribe(v -> {\n                    persons.remove(person);\n                    personsConsumer.accept(persons);\n                });\n    }\n\n    public void getAllPersons(PersonSortingOptions sortingOptions, Consumer<List<Person>> personsConsumer) {\n        webClient.get()\n                .uri(uriBuilder -> uriBuilder\n                        .path(\"persons\")\n                        .queryParam(\"sortField\", sortingOptions.getSortField())\n                        .queryParam(\"sortingOrder\", sortingOptions.getSortingOrder())\n                        .build())\n                .retrieve()\n                .bodyToMono(new ParameterizedTypeReference<List<Person>>() {})\n                .onErrorStop()\n                .subscribe(newPersons -> {\n                    persons.clear();\n                    persons.addAll(newPersons);\n                    personsConsumer.accept(persons);\n                });\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/PersonScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.PersonController;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortField;\nimport de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder;\nimport javafx.application.Platform;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Popup;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\npublic class PersonScene extends Scene {\n    private final PersonController personController;\n    private final H05E01ClientApplication application;\n    private final PersonSortingOptions sortingOptions;\n    private final ObservableList<Person> personList;\n    private final TableView<Person> table;\n\n    public PersonScene(PersonController personController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.personController = personController;\n        this.application = application;\n        this.sortingOptions = new PersonSortingOptions();\n        this.personList = FXCollections.observableArrayList();\n\n        table = new TableView<>(personList);\n        table.setOnMousePressed(event -> {\n            if (event.isPrimaryButtonDown()) {\n                showPopup(table.getSelectionModel().getSelectedItem());\n            }\n        });\n\n        var idColumn = new TableColumn<Person, String>(\"ID\");\n        idColumn.setCellValueFactory(new PropertyValueFactory<>(\"id\"));\n        idColumn.setSortable(false);\n        idColumn.setPrefWidth(620 / 4D);\n        var firstNameColumn = new TableColumn<Person, String>(\"First Name\");\n        firstNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"firstName\"));\n        firstNameColumn.setSortable(false);\n        firstNameColumn.setPrefWidth(620 / 4D);\n        var lastNameColumn = new TableColumn<Person, String>(\"Last Name\");\n        lastNameColumn.setCellValueFactory(new PropertyValueFactory<>(\"lastName\"));\n        lastNameColumn.setSortable(false);\n        lastNameColumn.setPrefWidth(620 / 4D);\n        var birthdayColumn = new TableColumn<Person, String>(\"Birthday\");\n        birthdayColumn.setCellValueFactory(new PropertyValueFactory<>(\"birthday\"));\n        birthdayColumn.setSortable(false);\n        birthdayColumn.setPrefWidth(620 / 4D);\n        //noinspection unchecked\n        table.getColumns().addAll(idColumn, firstNameColumn, lastNameColumn, birthdayColumn);\n\n        var vBox = new VBox(10, createSortOptionBox(), table, createButtonBox());\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n\n        personController.getAllPersons(sortingOptions, this::setPeople);\n    }\n\n    private HBox createSortOptionBox() {\n        var sortFieldChoiceBox = new ChoiceBox<SortField>();\n        sortFieldChoiceBox.getItems().addAll(SortField.values());\n        sortFieldChoiceBox.setValue(sortingOptions.getSortField());\n        sortFieldChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortField(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var sortingOrderChoiceBox = new ChoiceBox<SortingOrder>();\n        sortingOrderChoiceBox.getItems().addAll(SortingOrder.values());\n        sortingOrderChoiceBox.setValue(sortingOptions.getSortingOrder());\n        sortingOrderChoiceBox.valueProperty().addListener((observable, oldValue, newValue) -> {\n            sortingOptions.setSortingOrder(newValue);\n            personController.getAllPersons(sortingOptions, this::setPeople);\n        });\n\n        var hBox = new HBox(10, sortFieldChoiceBox, sortingOrderChoiceBox);\n        hBox.setAlignment(Pos.CENTER);\n        return hBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Person\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> personController.getAllPersons(sortingOptions, this::setPeople));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Person person) {\n        var popup = new Popup();\n        var firstNameTextField = new TextField();\n        firstNameTextField.setPromptText(\"First Name\");\n        firstNameTextField.setText(person == null ? \"\" : person.getFirstName());\n\n        var lastNameTextField = new TextField();\n        lastNameTextField.setPromptText(\"Last Name\");\n        lastNameTextField.setText(person == null ? \"\" : person.getLastName());\n\n        var birthdayPicker = new DatePicker();\n        birthdayPicker.setValue(person == null ? LocalDate.now() : person.getBirthday());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newPerson = person != null ? person : new Person();\n            newPerson.setFirstName(firstNameTextField.getText());\n            newPerson.setLastName(lastNameTextField.getText());\n            newPerson.setBirthday(birthdayPicker.getValue());\n            if (person == null) {\n                personController.addPerson(newPerson, this::setPeople);\n            } else {\n                personController.updatePerson(newPerson, this::setPeople);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            personController.deletePerson(person, this::setPeople);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (person != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, firstNameTextField, lastNameTextField, birthdayPicker, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(150);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n\n    private void setPeople(List<Person> people) {\n        Platform.runLater(() -> personList.setAll(people));\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/NoteScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport de.tum.in.ase.eist.controller.NoteController;\nimport de.tum.in.ase.eist.model.Note;\nimport javafx.application.Platform;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.scene.text.FontWeight;\nimport javafx.scene.text.Text;\nimport javafx.stage.Popup;\n\nimport java.util.List;\n\npublic class NoteScene extends Scene {\n    private final NoteController noteController;\n    private final H05E01ClientApplication application;\n    private final FlowPane flowPane;\n\n    public NoteScene(NoteController noteController, H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n        this.noteController = noteController;\n        this.application = application;\n\n        flowPane = new FlowPane(10, 10);\n        var scrollPane = new ScrollPane(flowPane);\n        scrollPane.setPrefHeight(450);\n        scrollPane.setFitToWidth(true);\n\n        var vBox = new VBox(10, scrollPane, createButtonBox());\n\n        noteController.getAllNotes(this::setNotes);\n        this.setRoot(vBox);\n    }\n\n    public void setNotes(List<Note> notes) {\n        Platform.runLater(() -> {\n            var children = flowPane.getChildren();\n            children.setAll(notes.stream().map(this::createNoteView).toList());\n        });\n    }\n\n    private Node createNoteView(Note note) {\n        var name = new Text(note.getName());\n        name.setFont(Font.font(Font.getDefault().getFamily(), FontWeight.EXTRA_BOLD, 20));\n\n        var spacer = new Region();\n        HBox.setHgrow(spacer, Priority.ALWAYS);\n\n        var deleteButton = new Button(\"E\");\n        deleteButton.setTextFill(Color.ORANGE);\n        deleteButton.setOnAction(event -> showPopup(note));\n\n        var titleBox = new HBox(name, spacer, deleteButton);\n\n        var content = new Text(note.getContent());\n        var contentScrollPane = new ScrollPane(content);\n        contentScrollPane.setFitToWidth(true);\n        contentScrollPane.setFitToHeight(true);\n        contentScrollPane.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\n        contentScrollPane.getStyleClass().clear();\n        content.wrappingWidthProperty().bind(contentScrollPane.widthProperty());\n\n        var vBox = new VBox(10, titleBox, contentScrollPane);\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setStyle(\"-fx-background-color:white;\");\n        vBox.setPadding(new Insets(5));\n        return vBox;\n    }\n\n    private HBox createButtonBox() {\n        var backButton = new Button(\"Back\");\n        backButton.setOnAction(event -> application.showHomeScene());\n\n        var addButton = new Button(\"Add Note\");\n        addButton.setOnAction(event -> showPopup(null));\n\n        var refreshButton = new Button(\"Refresh\");\n        refreshButton.setOnAction(event -> noteController.getAllNotes(this::setNotes));\n\n        var buttonBox = new HBox(10, backButton, addButton, refreshButton);\n        buttonBox.setAlignment(Pos.CENTER);\n        return buttonBox;\n    }\n\n    private void showPopup(Note note) {\n        var popup = new Popup();\n        var nameTextField = new TextField();\n        nameTextField.setPromptText(\"Name\");\n        nameTextField.setText(note == null ? \"\" : note.getName());\n\n        var contentTextArea = new TextArea();\n        contentTextArea.setPromptText(\"Content\");\n        contentTextArea.setText(note == null ? \"\" : note.getContent());\n\n        var addButton = new Button(\"Save\");\n        addButton.setOnAction(event -> {\n            var newNote = note != null ? note : new Note();\n            newNote.setName(nameTextField.getText());\n            newNote.setContent(contentTextArea.getText());\n            if (note == null) {\n                noteController.addNote(newNote, this::setNotes);\n            } else {\n                noteController.editNote(newNote, this::setNotes);\n            }\n            popup.hide();\n        });\n\n        var cancelButton = new Button(\"Cancel\");\n        cancelButton.setOnAction(event -> popup.hide());\n\n        var deleteButton = new Button(\"Delete\");\n        deleteButton.setTextFill(Color.RED);\n        deleteButton.setOnAction(event -> {\n            noteController.deleteNote(note, this::setNotes);\n            popup.hide();\n        });\n\n        var hBox = new HBox(10, addButton, cancelButton);\n        hBox.setAlignment(Pos.CENTER);\n        if (note != null) {\n            hBox.getChildren().add(deleteButton);\n        }\n\n        var vBox = new VBox(10, nameTextField, contentTextArea, hBox);\n        vBox.setAlignment(Pos.TOP_CENTER);\n        vBox.setBackground(new Background(new BackgroundFill(Color.WHITE, null, null)));\n        vBox.setBorder(new Border(new BorderStroke(Color.BLACK, BorderStrokeStyle.SOLID, null, new BorderWidths(1))));\n        vBox.setPrefWidth(200);\n        vBox.setPrefHeight(200);\n        vBox.setPadding(new Insets(5));\n        popup.getContent().add(vBox);\n        popup.show(application.getStage());\n        popup.centerOnScreen();\n    }\n}\n"
          },
          {
            "path": "src/client/java/de/tum/in/ase/eist/view/HomeScene.java",
            "content": "package de.tum.in.ase.eist.view;\n\nimport de.tum.in.ase.eist.H05E01ClientApplication;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.VBox;\n\npublic class HomeScene extends Scene {\n    public HomeScene(H05E01ClientApplication application) {\n        super(new VBox(), 640, 500);\n\n        var noteButton = new Button(\"Notes\");\n        noteButton.setOnAction(event -> application.showNoteScene());\n\n        var personButton = new Button(\"Persons\");\n        personButton.setOnAction(event -> application.showPersonScene());\n\n        var vBox = new VBox(10, noteButton, personButton);\n        vBox.setAlignment(Pos.CENTER);\n        setRoot(vBox);\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/util/PersonSortingOptions.java",
            "content": "package de.tum.in.ase.eist.util;\n\npublic class PersonSortingOptions {\n    private SortingOrder sortingOrder = SortingOrder.ASCENDING;\n    private SortField sortField = SortField.ID;\n\n    public PersonSortingOptions() {}\n\n    public PersonSortingOptions(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public PersonSortingOptions(SortingOrder sortingOrder, SortField sortField) {\n        this.sortingOrder = sortingOrder;\n        this.sortField = sortField;\n    }\n\n    public SortingOrder getSortingOrder() {\n        return sortingOrder;\n    }\n\n    public void setSortingOrder(SortingOrder sortingOrder) {\n        this.sortingOrder = sortingOrder;\n    }\n\n    public SortField getSortField() {\n        return sortField;\n    }\n\n    public void setSortField(SortField sortField) {\n        this.sortField = sortField;\n    }\n\n    public enum SortingOrder {\n        ASCENDING, DESCENDING\n    }\n\n    public enum SortField {\n        ID, FIRST_NAME, LAST_NAME, BIRTHDAY\n    }\n}"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Note.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.Instant;\nimport java.util.UUID;\n\npublic class Note {\n    private UUID id;\n    private String name;\n    private String content;\n    private Instant creationDate;\n\n    public Note() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    public Instant getCreationDate() {\n        return creationDate;\n    }\n\n    public void setCreationDate(Instant creationDate) {\n        this.creationDate = creationDate;\n    }\n\n    @Override\n    public String toString() {\n        return \"Note{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", content='\" + content + '\\'' +\n                \", creationDate=\" + creationDate +\n                '}';\n    }\n}\n"
          },
          {
            "path": "src/common/java/de/tum/in/ase/eist/model/Person.java",
            "content": "package de.tum.in.ase.eist.model;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic class Person {\n    private UUID id;\n    private String firstName;\n    private String lastName;\n    private LocalDate birthday;\n\n    public Person() {}\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public LocalDate getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(LocalDate birthday) {\n        this.birthday = birthday;\n    }\n}\n"
          },
          {
            "path": "src/server/resources/application.properties",
            "content": "logging.level.ROOT=DEBUG\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/H05E01ServerApplication.java",
            "content": "package de.tum.in.ase.eist;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class H05E01ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(H05E01ServerApplication.class, args);\n    }\n\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/PersonService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.stereotype.Service;\n\nimport java.util.*;\n\nimport static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\n\n@Service\npublic class PersonService {\n  \t// do not change this\n    private final List<Person> persons;\n\n    public PersonService() {\n        this.persons = new ArrayList<>();\n    }\n\n    public Person savePerson(Person person) {\n        var optionalPerson = persons.stream().filter(existingPerson -> existingPerson.getId().equals(person.getId())).findFirst();\n        if (optionalPerson.isEmpty()) {\n            person.setId(UUID.randomUUID());\n            persons.add(person);\n            return person;\n        } else {\n            var existingPerson = optionalPerson.get();\n            existingPerson.setFirstName(person.getFirstName());\n            existingPerson.setLastName(person.getLastName());\n            existingPerson.setBirthday(person.getBirthday());\n            return existingPerson;\n        }\n    }\n\n    public void deletePerson(UUID personId) {\n        this.persons.removeIf(person -> person.getId().equals(personId));\n    }\n\n    public Stream<Person> getAllPersons(PersonSortingOptions sortingOptions) {\n        if (sortingOptions == null) {\n            return this.persons.stream();\n        }\n        Stream<Person> sortedStream = this.persons.stream();\n        sortedList.sort((p1, p2) -> {\n            Person person1;\n            Person person2;\n            if (sortingOptions.getSortingOrder() == ASCENDING) {\n                person1 = p1;\n                person2 = p2;\n            } else {\n                person1 = p2;\n                person2 = p1;\n            }\n\n            return switch (sortingOptions.getSortField()) {\n                case ID -> person1.getId().compareTo(person2.getId());\n                case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n                case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n                case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n            };\n        });\n        return sortedList;\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/service/NoteService.java",
            "content": "package de.tum.in.ase.eist.service;\n\nimport de.tum.in.ase.eist.model.Note;\nimport org.springframework.stereotype.Service;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Service\npublic class NoteService {\n    private final List<Note> notes;\n\n    public NoteService() {\n        this.notes = new ArrayList<>();\n    }\n\n    public Note saveNote(Note note) {\n        var optionalNote = notes.stream().filter(existingNote -> existingNote.getId().equals(note.getId())).findFirst();\n        if (optionalNote.isEmpty()) {\n            note.setId(UUID.randomUUID());\n            note.setCreationDate(Instant.now());\n            notes.add(note);\n            return note;\n        } else {\n            var existingNote = optionalNote.get();\n            existingNote.setName(note.getName());\n            existingNote.setContent(note.getContent());\n            return existingNote;\n        }\n    }\n\n    public void deleteNote(UUID noteId) {\n        this.notes.removeIf(note -> note.getId().equals(noteId));\n    }\n\n    public List<Note> getAllNotes() {\n        return Collections.unmodifiableList(this.notes);\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/PersonResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.service.PersonService;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class PersonResource {\n\n    private final PersonService personService;\n\n    public PersonResource(PersonService personService) {\n        this.personService = personService;\n    }\n\n    @GetMapping(\"persons\")\n    public ResponseEntity<List<Person>> getAllPersons(@RequestParam(value = \"sortField\", defaultValue = \"ID\") PersonSortingOptions.SortField sortField,\n                                                      @RequestParam(value = \"sortingOrder\", defaultValue = \"ASCENDING\") PersonSortingOptions.SortingOrder sortingOrder) {\n        return ResponseEntity.ok(personService.getAllPersons(new PersonSortingOptions(sortingOrder, sortField)));\n    }\n\n    @PostMapping(\"persons\")\n    public ResponseEntity<Person> createPerson(@RequestBody Person person) {\n        if (person.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(personService.savePerson(person));\n    }\n\n    @PutMapping(\"persons/{personId}\")\n    public ResponseEntity<Person> updatePerson(@RequestBody Person updatedPerson, @PathVariable(\"personId\") UUID personId) {\n        if (!updatedPerson.getId().equals(personId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(personService.savePerson(updatedPerson));\n    }\n\n    @DeleteMapping(\"persons/{personId}\")\n    public ResponseEntity<Void> deletePerson(@PathVariable(\"personId\") UUID personId) {\n        personService.deletePerson(personId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": "src/server/java/de/tum/in/ase/eist/rest/NoteResource.java",
            "content": "package de.tum.in.ase.eist.rest;\n\nimport de.tum.in.ase.eist.model.Note;\nimport de.tum.in.ase.eist.service.NoteService;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\nimport java.util.UUID;\n\n@RestController\n@RequestMapping(consumes = {MediaType.APPLICATION_JSON_VALUE}, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic class NoteResource {\n\n    private final NoteService noteService;\n\n    public NoteResource(NoteService noteService) {\n        this.noteService = noteService;\n    }\n\n    @GetMapping(\"notes\")\n    public ResponseEntity<List<Note>> getAllNotes(@RequestParam(\"secret\") String secret) {\n        if (!\"SecretKey\".equals(secret)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.getAllNotes());\n    }\n\n    @PostMapping(\"notes\")\n    public ResponseEntity<Note> createNote(@RequestBody Note note) {\n        if (note.getId() != null) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(note));\n    }\n\n    @PutMapping(\"notes/{noteId}\")\n    public ResponseEntity<Note> updateNote(@RequestBody Note updatedNote, @PathVariable(\"noteId\") UUID noteId) {\n        if (!updatedNote.getId().equals(noteId)) {\n            return ResponseEntity.badRequest().build();\n        }\n        return ResponseEntity.ok(noteService.saveNote(updatedNote));\n    }\n\n    @DeleteMapping(\"notes/{noteId}\")\n    public ResponseEntity<Void> deleteNote(@PathVariable(\"noteId\") UUID noteId) {\n        noteService.deleteNote(noteId);\n        return ResponseEntity.noContent().build();\n    }\n}\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          }
        ],
        "test_repository": [
          {
            "path": "readme.md",
            "content": "## Test Repository instructions\n\n#### Test tool & command\nTests will be run using the command `./gradlew clean test`.\n\n#### Project structure\nMake sure that the package structure of your test classes is equivalent to the package structure of your base and solution repository.\nOtherwise during the test run Gradle will not be able to find the imported classes in your test files.\n\nIn order to use classes from the template or solution repository in a test case, you have to add the respective repository\nfiles as a dependency to the test project. Follow this description for IntelliJ:\n\n1. Open the Test-Project first\n2. Select `File` -> `New` -> `Module from Existing Source`. Then choose the template project\nroot folder. Select the option `Import module from external model` and `Gradle` and press `Finish`.\n3. Repeat the previous step for the Solution-Project.\n4. Add the following line to `settings.gradle` inside the Test-Project:\n`includeBuild '<template-project-root-path'>` or `includeBuild '<solution-project-root-path>'` depending on which project you\nwant to use the source files for executing the test cases.\n5. Inside the `plugin`-block in the `build.gradle` inside the Test-Project, add the following line:\n`testImplementation(':H05E01-Layered-Architecture-Spring-Exercise')` or\n`testImplementation(':H05E01-Layered-Architecture-Spring-Solution')` depending on which project you want to use the source files for executing\nthe test cases.\n\n**Note**: Changes made in step 4 and step 5 must not be pushed to the remote repository as it can only be used\nfor editing all three projects in the local IDE.\n\n#### Sequential test runs\nIf you have decided to use the sequential test runs feature for this exercise, read the following instructions:\nWe use the folder structure of the test repository to differentiate structural and behavior tests:\n1. Structural test files must be placed in the folder \"structural\"\n2. Behavior test files must be placed in the folder \"behavior\"\n\nFiles in other folders will not be executed!\n\n#### Static Code Analysis\nThe build.gradle contains dependencies for the execution of static code analysis, if the option is active for this programming exercise.\n"
          },
          {
            "path": "gradlew",
            "content": "#!/bin/sh\n\n#\n# Copyright © 2015-2021 the original authors.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      https://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n\n##############################################################################\n#\n#   Gradle start up script for POSIX generated by Gradle.\n#\n#   Important for running:\n#\n#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is\n#       noncompliant, but you have some other compliant shell such as ksh or\n#       bash, then to run this script, type that shell name before the whole\n#       command line, like:\n#\n#           ksh Gradle\n#\n#       Busybox and similar reduced shells will NOT work, because this script\n#       requires all of these POSIX shell features:\n#         * functions;\n#         * expansions «$var», «${var}», «${var:-default}», «${var+SET}»,\n#           «${var#prefix}», «${var%suffix}», and «$( cmd )»;\n#         * compound commands having a testable exit status, especially «case»;\n#         * various built-in commands including «command», «set», and «ulimit».\n#\n#   Important for patching:\n#\n#   (2) This script targets any POSIX shell, so it avoids extensions provided\n#       by Bash, Ksh, etc; in particular arrays are avoided.\n#\n#       The \"traditional\" practice of packing multiple parameters into a\n#       space-separated string is a well documented source of bugs and security\n#       problems, so this is (mostly) avoided, by progressively accumulating\n#       options in \"$@\", and eventually passing that to Java.\n#\n#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,\n#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;\n#       see the in-line comments for details.\n#\n#       There are tweaks for specific operating systems such as AIX, CygWin,\n#       Darwin, MinGW, and NonStop.\n#\n#   (3) This script is generated from the Groovy template\n#       https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\n#       within the Gradle project.\n#\n#       You can find Gradle at https://github.com/gradle/gradle/.\n#\n##############################################################################\n\n# Attempt to set APP_HOME\n\n# Resolve links: $0 may be a link\napp_path=$0\n\n# Need this for daisy-chained symlinks.\nwhile\n    APP_HOME=${app_path%\"${app_path##*/}\"}  # leaves a trailing /; empty if no leading path\n    [ -h \"$app_path\" ]\ndo\n    ls=$( ls -ld \"$app_path\" )\n    link=${ls#*' -> '}\n    case $link in             #(\n      /*)   app_path=$link ;; #(\n      *)    app_path=$APP_HOME$link ;;\n    esac\ndone\n\nAPP_HOME=$( cd \"${APP_HOME:-./}\" && pwd -P ) || exit\n\nAPP_NAME=\"Gradle\"\nAPP_BASE_NAME=${0##*/}\n\n# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nDEFAULT_JVM_OPTS='\"-Xmx64m\" \"-Xms64m\"'\n\n# Use the maximum available, or set MAX_FD != -1 to use that value.\nMAX_FD=maximum\n\nwarn () {\n    echo \"$*\"\n} >&2\n\ndie () {\n    echo\n    echo \"$*\"\n    echo\n    exit 1\n} >&2\n\n# OS specific support (must be 'true' or 'false').\ncygwin=false\nmsys=false\ndarwin=false\nnonstop=false\ncase \"$( uname )\" in                #(\n  CYGWIN* )         cygwin=true  ;; #(\n  Darwin* )         darwin=true  ;; #(\n  MSYS* | MINGW* )  msys=true    ;; #(\n  NONSTOP* )        nonstop=true ;;\nesac\n\nCLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar\n\n\n# Determine the Java command to use to start the JVM.\nif [ -n \"$JAVA_HOME\" ] ; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ] ; then\n        # IBM's JDK on AIX uses strange locations for the executables\n        JAVACMD=$JAVA_HOME/jre/sh/java\n    else\n        JAVACMD=$JAVA_HOME/bin/java\n    fi\n    if [ ! -x \"$JAVACMD\" ] ; then\n        die \"ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\n    fi\nelse\n    JAVACMD=java\n    which java >/dev/null 2>&1 || die \"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\n\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\"\nfi\n\n# Increase the maximum file descriptors if we can.\nif ! \"$cygwin\" && ! \"$darwin\" && ! \"$nonstop\" ; then\n    case $MAX_FD in #(\n      max*)\n        MAX_FD=$( ulimit -H -n ) ||\n            warn \"Could not query maximum file descriptor limit\"\n    esac\n    case $MAX_FD in  #(\n      '' | soft) :;; #(\n      *)\n        ulimit -n \"$MAX_FD\" ||\n            warn \"Could not set maximum file descriptor limit to $MAX_FD\"\n    esac\nfi\n\n# Collect all arguments for the java command, stacking in reverse order:\n#   * args from the command line\n#   * the main class name\n#   * -classpath\n#   * -D...appname settings\n#   * --module-path (only if needed)\n#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.\n\n# For Cygwin or MSYS, switch paths to Windows format before running java\nif \"$cygwin\" || \"$msys\" ; then\n    APP_HOME=$( cygpath --path --mixed \"$APP_HOME\" )\n    CLASSPATH=$( cygpath --path --mixed \"$CLASSPATH\" )\n\n    JAVACMD=$( cygpath --unix \"$JAVACMD\" )\n\n    # Now convert the arguments - kludge to limit ourselves to /bin/sh\n    for arg do\n        if\n            case $arg in                                #(\n              -*)   false ;;                            # don't mess with options #(\n              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath\n                    [ -e \"$t\" ] ;;                      #(\n              *)    false ;;\n            esac\n        then\n            arg=$( cygpath --path --ignore --mixed \"$arg\" )\n        fi\n        # Roll the args list around exactly as many times as the number of\n        # args, so each arg winds up back in the position where it started, but\n        # possibly modified.\n        #\n        # NB: a `for` loop captures its iteration list before it begins, so\n        # changing the positional parameters here affects neither the number of\n        # iterations, nor the values presented in `arg`.\n        shift                   # remove old arg\n        set -- \"$@\" \"$arg\"      # push replacement arg\n    done\nfi\n\n# Collect all arguments for the java command;\n#   * $DEFAULT_JVM_OPTS, $JAVA_OPTS, and $GRADLE_OPTS can contain fragments of\n#     shell script including quotes and variable substitutions, so put them in\n#     double quotes to make sure that they get re-expanded; and\n#   * put everything else in single quotes, so that it's not re-expanded.\n\nset -- \\\n        \"-Dorg.gradle.appname=$APP_BASE_NAME\" \\\n        -classpath \"$CLASSPATH\" \\\n        org.gradle.wrapper.GradleWrapperMain \\\n        \"$@\"\n\n# Use \"xargs\" to parse quoted args.\n#\n# With -n1 it outputs one arg per line, with the quotes and backslashes removed.\n#\n# In Bash we could simply go:\n#\n#   readarray ARGS < <( xargs -n1 <<<\"$var\" ) &&\n#   set -- \"${ARGS[@]}\" \"$@\"\n#\n# but POSIX shell has neither arrays nor command substitution, so instead we\n# post-process each arg (as a line of input to sed) to backslash-escape any\n# character that might be a shell metacharacter, then use eval to reverse\n# that process (while maintaining the separation between arguments), and wrap\n# the whole thing up as a single \"set\" statement.\n#\n# This will of course break if any of these variables contains a newline or\n# an unmatched quote.\n#\n\neval \"set -- $(\n        printf '%s\\n' \"$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS\" |\n        xargs -n1 |\n        sed ' s~[^-[:alnum:]+,./:=@_]~\\\\&~g; ' |\n        tr '\\n' ' '\n    )\" '\"$@\"'\n\nexec \"$JAVACMD\" \"$@\"\n"
          },
          {
            "path": "build.gradle",
            "content": "plugins {\n    id 'checkstyle'\n    id 'pmd'\n    id 'com.github.spotbugs' version '5.0.6'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.12'\n    id 'org.springframework.boot' version '2.6.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id \"com.teamscale\" version \"23.0.0\"\n}\n\napply plugin: 'java'\ngroup = 'de.tum.in.ase.eist'\nsourceCompatibility = 17\nversion = '1.0.0'\ncompileJava.options.encoding = 'UTF-8'\ncompileTestJava.options.encoding = 'UTF-8'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    serverImplementation.extendsFrom(implementation)\n    clientImplementation.extendsFrom(implementation)\n}\n\ndependencies {\n    testImplementation 'de.tum.in.ase:artemis-java-test-sandbox:1.9.2'\n    testImplementation 'com.squareup.okhttp3:okhttp:4.10.0-RC1'\n    testImplementation 'com.squareup.okhttp3:mockwebserver:4.10.0-RC1'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test:2.6.7'\n\n    testImplementation 'com.fasterxml.jackson.core:jackson-databind:2.13.2.2'\n    testImplementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.13.2'\n\n    testImplementation 'org.springframework.boot:spring-boot-starter-web:2.6.7'\n    testImplementation 'org.springframework.boot:spring-boot-starter-webflux:2.6.7'\n\n    testImplementation 'org.mockito:mockito-core:4.5.1'\n    testImplementation 'net.bytebuddy:byte-buddy:1.12.10'\n\n    serverImplementation 'org.springframework.boot:spring-boot-starter-web:2.6.7'\n    clientImplementation 'org.springframework.boot:spring-boot-starter-webflux:2.6.7'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml', 'javafx.media' ]\n    configuration = 'clientImplementation'\n}\n\ndef studentOutputDir = sourceSets.main.java.destinationDirectory.get()\ndef scaConfigDirectory = \"$projectDir/staticCodeAnalysisConfig\"\n\nsourceSets {\n    common {\n        java {\n            srcDir 'assignment/src/common/java'\n        }\n    }\n    server {\n        java {\n            srcDir 'assignment/src/server/java'\n        }\n        resources {\n            srcDir 'assignment/src/server/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n    client {\n        java {\n            srcDir 'assignment/src/client/java'\n        }\n        resources {\n            srcDir 'assignment/src/client/resources'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n    }\n\n    test {\n        java {\n            srcDir 'test'\n        }\n        resources {\n            srcDir 'test'\n        }\n        compileClasspath += common.output\n        runtimeClasspath += common.output\n        compileClasspath += server.output\n        runtimeClasspath += server.output\n        compileClasspath += client.output\n        runtimeClasspath += client.output\n    }\n}\n\ntest {\n    defaultCharacterEncoding = 'UTF-8'\n    useJUnitPlatform()\n}\n\n\ncheckstyle {\n    configFile = file(\"$scaConfigDirectory/checkstyle-configuration.xml\")\n    ignoreFailures = true\n    // exclude the test files\n    checkstyleTest.enabled = false\n    checkstyleServer.reports {\n        xml {\n            enabled = true\n            outputLocation = file('target/checkstyle-result.xml')\n        }\n        html.enabled = false\n    }\n}\n\nspotbugs {\n    excludeFilter = file(\"$scaConfigDirectory/spotbugs-exclusions.xml\")\n    ignoreFailures = true\n    // exclude the test files\n    spotbugsTest.enabled = false\n    spotbugsClient.reports {\n        add(spotbugsServer)\n        add(spotbugsCommon)\n        xml {\n            enabled = true\n            outputLocation = file('target/spotbugsXml.xml')\n        }\n        html.enabled = false\n    }\n}\n\npmd {\n    ruleSets = [\"$scaConfigDirectory/pmd-configuration.xml\"]\n    rulesMinimumPriority = 5\n    ignoreFailures = true\n    // exclude the test files\n    pmdTest.enabled = false\n    pmdServer.reports {\n        xml {\n            enabled = true\n            outputLocation = file('target/pmd.xml')\n        }\n    }\n}\n\n\nprocessServerResources {\n    duplicatesStrategy = DuplicatesStrategy.INCLUDE\n}\n\ntasks.register('tiaTests', com.teamscale.TestImpacted) {\n    systemProperty \"ares.security.trustedpackages\", \"okhttp3,com.teamscale,retrofit2,shadow,com.squareup,okio\"\n    useJUnitPlatform()\n    filter {\n        excludeTestsMatching \"AttributeTest\"\n        excludeTestsMatching \"ConstructorTest\"\n        excludeTestsMatching \"ClassTest\"\n        excludeTestsMatching \"MethodTest\"\n    }\n    jacoco {\n        includes = [\"de.tum.in.ase.eist.*\"]\n    }\n}\n\n"
          },
          {
            "path": "gradlew.bat",
            "content": "@rem\n@rem Copyright 2015 the original author or authors.\n@rem\n@rem Licensed under the Apache License, Version 2.0 (the \"License\");\n@rem you may not use this file except in compliance with the License.\n@rem You may obtain a copy of the License at\n@rem\n@rem      https://www.apache.org/licenses/LICENSE-2.0\n@rem\n@rem Unless required by applicable law or agreed to in writing, software\n@rem distributed under the License is distributed on an \"AS IS\" BASIS,\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n@rem See the License for the specific language governing permissions and\n@rem limitations under the License.\n@rem\n\n@if \"%DEBUG%\" == \"\" @echo off\n@rem ##########################################################################\n@rem\n@rem  Gradle startup script for Windows\n@rem\n@rem ##########################################################################\n\n@rem Set local scope for the variables with windows NT shell\nif \"%OS%\"==\"Windows_NT\" setlocal\n\nset DIRNAME=%~dp0\nif \"%DIRNAME%\" == \"\" set DIRNAME=.\nset APP_BASE_NAME=%~n0\nset APP_HOME=%DIRNAME%\n\n@rem Resolve any \".\" and \"..\" in APP_HOME to make it shorter.\nfor %%i in (\"%APP_HOME%\") do set APP_HOME=%%~fi\n\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\nset DEFAULT_JVM_OPTS=\"-Xmx64m\" \"-Xms64m\"\n\n@rem Find java.exe\nif defined JAVA_HOME goto findJavaFromJavaHome\n\nset JAVA_EXE=java.exe\n%JAVA_EXE% -version >NUL 2>&1\nif \"%ERRORLEVEL%\" == \"0\" goto execute\n\necho.\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\n\nif exist \"%JAVA_EXE%\" goto execute\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n\ngoto fail\n\n:execute\n@rem Setup the command line\n\nset CLASSPATH=%APP_HOME%\\gradle\\wrapper\\gradle-wrapper.jar\n\n\n@rem Execute Gradle\n\"%JAVA_EXE%\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \"-Dorg.gradle.appname=%APP_BASE_NAME%\" -classpath \"%CLASSPATH%\" org.gradle.wrapper.GradleWrapperMain %*\n\n:end\n@rem End local scope for the variables with windows NT shell\nif \"%ERRORLEVEL%\"==\"0\" goto mainEnd\n\n:fail\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\nrem the _cmd.exe /c_ return code!\nif  not \"\" == \"%GRADLE_EXIT_CONSOLE%\" exit 1\nexit /b 1\n\n:mainEnd\nif \"%OS%\"==\"Windows_NT\" endlocal\n\n:omega\n"
          },
          {
            "path": "settings.gradle",
            "content": "rootProject.name = 'H05E01-Layered-Architecture-Spring-Tests'\n"
          },
          {
            "path": "staticCodeAnalysisConfig/spotbugs-exclusions.xml",
            "content": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<FindBugsFilter>\n    <!--\n    Spotbugs uses filter files to configure the reporting of bugs. Add the path of the filter file to the configuration\n    of the Spotbugs Maven plugin in the Project Object Model (POM).\n    Use <includeFilterFile>/<excludeFilterFile> to include/exclude all bugs matching the criteria defined in such a file.\n    For more information about filters consult the official Spotbugs documentation https://spotbugs.readthedocs.io/en/stable/filter.html#.\n    The examples below show some filter options.\n    -->\n\n    <!-- In case of using Records from Java 16, the equals check should get disabled for that record\n    <Match>\n        <Class name=\"Package.NameOfRecord\" />\n        <Bug code=\"EQ_UNUSUAL\" />\n    </Match> -->\n\n    <!-- Matches a whole class\n    <Match>\n        <Class name=\"com.foobar.ClassNotToBeAnalyzed\" />\n    </Match> -->\n\n    <!-- Matches specific rules in a class\n    <Match>\n        <Class name=\"com.foobar.ClassWithSomeBugsMatched\" />\n        <Bug code=\"DE,UrF,SIC\" />\n    </Match> -->\n\n    <!-- Match all XYZ violations\n    <Match>\n        <Bug code=\"XYZ\" />\n    </Match>  -->\n\n    <!-- Match a method with a dead local store false positive (medium priority)\n    <Match>\n        <Class name=\"com.foobar.MyClass\" />\n        <Method name=\"someMethod\" />\n        <Bug pattern=\"DLS_DEAD_LOCAL_STORE\" />\n        <Priority value=\"2\" />\n    </Match> -->\n\n    <!-- All bugs in test classes, except for JUnit-specific bugs\n    <Match>\n        <Class name=\"~.*\\.*Test\" />\n        <Not>\n            <Bug code=\"IJU\" />\n        </Not>\n    </Match> -->\n    <Match>\n        <Bug code=\"EI\"/>\n    </Match>\n    <Match>\n        <Bug code=\"EI2\"/>\n    </Match>\n</FindBugsFilter>\n"
          },
          {
            "path": "staticCodeAnalysisConfig/pmd-configuration.xml",
            "content": "<ruleset name=\"Custom Rules\"\n         xmlns=\"http://pmd.sourceforge.net/ruleset/2.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd\">\n\n    <description>\n        Default PMD configuration for Artemis programming exercises based on the default PMD Maven configuration.\n        Consult https://pmd.github.io/latest/pmd_userdocs_making_rulesets.html for more information.\n    </description>\n\n    <!-- Use patterns to exclude/include files for this ruleset\n    <exclude-pattern>.*/some/package/.*</exclude-pattern>\n    <include-pattern>.*/some/package/ButNotThisClass.*</include-pattern>\n    -->\n\n    <!-- Bulk adding all rules of all categories. Does not add deprecated rules. Single rule exclusions are possible.\n    <rule ref=\"category/java/documentation.xml\">\n        <exclude name=\"RuleName\"/>\n    </rule> -->\n\n    <!-- Best Practices -->\n    <rule ref=\"category/java/bestpractices.xml/AvoidUsingHardCodedIP\"/>\n    <rule ref=\"category/java/bestpractices.xml/CheckResultSet\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedImports\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedFormalParameter\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedLocalVariable\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedPrivateField\"/>\n    <rule ref=\"category/java/bestpractices.xml/UnusedPrivateMethod\"/>\n\n    <!-- Code Style -->\n    <rule ref=\"category/java/codestyle.xml/DontImportJavaLang\"/>\n    <rule ref=\"category/java/codestyle.xml/DuplicateImports\"/>\n    <rule ref=\"category/java/codestyle.xml/ExtendsObject\"/>\n    <rule ref=\"category/java/codestyle.xml/ForLoopShouldBeWhileLoop\"/>\n    <rule ref=\"category/java/codestyle.xml/TooManyStaticImports\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryFullyQualifiedName\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryModifier\"/>\n    <rule ref=\"category/java/codestyle.xml/UnnecessaryReturn\"/>\n    <rule ref=\"category/java/codestyle.xml/UselessParentheses\"/>\n    <rule ref=\"category/java/codestyle.xml/UselessQualifiedThis\"/>\n\n    <!-- Design -->\n    <rule ref=\"category/java/design.xml/CollapsibleIfStatements\"/>\n    <rule ref=\"category/java/design.xml/SimplifiedTernary\"/>\n    <rule ref=\"category/java/design.xml/UselessOverridingMethod\"/>\n\n    <!-- Error Prone -->\n    <rule ref=\"category/java/errorprone.xml/AvoidBranchingStatementAsLastInLoop\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidDecimalLiteralsInBigDecimalConstructor\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidMultipleUnaryOperators\"/>\n    <rule ref=\"category/java/errorprone.xml/AvoidUsingOctalValues\"/>\n    <rule ref=\"category/java/errorprone.xml/BrokenNullCheck\"/>\n    <rule ref=\"category/java/errorprone.xml/CheckSkipResult\"/>\n    <rule ref=\"category/java/errorprone.xml/ClassCastExceptionWithToArray\"/>\n    <rule ref=\"category/java/errorprone.xml/DontUseFloatTypeForLoopIndices\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyCatchBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyFinallyBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyIfStmt\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyInitializer\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyStatementBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyStatementNotInLoop\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptySwitchStatements\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptySynchronizedBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyTryBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/EmptyWhileStmt\"/>\n    <rule ref=\"category/java/errorprone.xml/ImportFromSamePackage\"/>\n    <rule ref=\"category/java/errorprone.xml/JumbledIncrementer\"/>\n    <rule ref=\"category/java/errorprone.xml/MisplacedNullCheck\"/>\n    <rule ref=\"category/java/errorprone.xml/OverrideBothEqualsAndHashcode\"/>\n    <rule ref=\"category/java/errorprone.xml/ReturnFromFinallyBlock\"/>\n    <rule ref=\"category/java/errorprone.xml/UnconditionalIfStatement\"/>\n    <rule ref=\"category/java/errorprone.xml/UnnecessaryConversionTemporary\"/>\n    <rule ref=\"category/java/errorprone.xml/UnusedNullCheckInEquals\"/>\n    <rule ref=\"category/java/errorprone.xml/UselessOperationOnImmutable\"/>\n\n    <!-- Multi Threading -->\n    <rule ref=\"category/java/multithreading.xml/AvoidThreadGroup\"/>\n    <rule ref=\"category/java/multithreading.xml/DontCallThreadRun\"/>\n    <rule ref=\"category/java/multithreading.xml/DoubleCheckedLocking\"/>\n\n    <!-- Performance -->\n    <rule ref=\"category/java/performance.xml/BigIntegerInstantiation\"/>\n    <rule ref=\"category/java/performance.xml/BooleanInstantiation\"/>\n\n    <!-- Security -->\n    <rule ref=\"category/java/security.xml\"/>\n\n    <!-- Documentation, already checked by CheckStyle -->\n\n\n</ruleset>\n"
          },
          {
            "path": "staticCodeAnalysisConfig/checkstyle-configuration.xml",
            "content": "<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n    \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n    \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n\n<!--\n  Artemis default Checkstyle configuration based on the sun coding conventions from:\n    - the Java Language Specification at\n      https://docs.oracle.com/javase/specs/jls/se11/html/index.html\n    - the Sun Code Conventions at https://www.oracle.com/java/technologies/javase/codeconventions-contents.html\n    - the Javadoc guidelines at\n      https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html\n    - the JDK Api documentation https://docs.oracle.com/en/java/javase/11/\n    - some best practices\n  Most Checks are configurable, be sure to consult the documentation.\n  To completely disable a check, just comment it out or delete it from the file.\n  Consult the docs for more information https://checkstyle.org.\n-->\n\n<module name=\"Checker\">\n    <property name=\"severity\" value=\"error\"/>\n\n    <property name=\"fileExtensions\" value=\"java, properties, xml\"/>\n\n    <!-- Excludes all 'module-info.java' files              -->\n    <!-- See https://checkstyle.org/config_filefilters.html -->\n    <module name=\"BeforeExecutionExclusionFileFilter\">\n        <property name=\"fileNamePattern\" value=\"module\\-info\\.java$\"/>\n    </module>\n\n    <!-- Checks that a package-info.java file exists for each package.     -->\n    <!-- See https://checkstyle.org/config_javadoc.html#JavadocPackage -->\n    <!-- <module name=\"JavadocPackage\"/> -->\n\n    <!-- Checks whether files end with a new line.                        -->\n    <!-- See https://checkstyle.org/config_misc.html#NewlineAtEndOfFile -->\n    <module name=\"NewlineAtEndOfFile\"/>\n\n    <!-- Checks that property files contain the same keys.         -->\n    <!-- See https://checkstyle.org/config_misc.html#Translation -->\n    <module name=\"Translation\"/>\n\n    <!-- Checks for Size Violations.                    -->\n    <!-- See https://checkstyle.org/config_sizes.html -->\n    <module name=\"FileLength\"/>\n    <module name=\"LineLength\">\n        <property name=\"fileExtensions\" value=\"java\"/>\n        <property name=\"max\" value=\"150\"/>\n        <property name=\"ignorePattern\" value=\"^package.*|^import.*|a href|href|http://|https://|ftp://\"/>\n    </module>\n\n    <!-- Miscellaneous other checks.                   -->\n    <!-- See https://checkstyle.org/config_misc.html -->\n    <module name=\"RegexpSingleline\">\n        <property name=\"format\" value=\"\\s+$\"/>\n        <property name=\"minimum\" value=\"0\"/>\n        <property name=\"maximum\" value=\"0\"/>\n        <property name=\"message\" value=\"Line has trailing spaces.\"/>\n    </module>\n\n    <!-- Checks for Headers                                -->\n    <!-- See https://checkstyle.org/config_header.html   -->\n    <!-- <module name=\"Header\"> -->\n    <!--   <property name=\"headerFile\" value=\"${checkstyle.header.file}\"/> -->\n    <!--   <property name=\"fileExtensions\" value=\"java\"/> -->\n    <!-- </module> -->\n\n    <module name=\"TreeWalker\">\n\n        <!-- Checks for Javadoc comments.                     -->\n        <!-- See https://checkstyle.org/config_javadoc.html -->\n        <module name=\"InvalidJavadocPosition\"/>\n        <module name=\"JavadocMethod\"/>\n        <module name=\"JavadocType\"/>\n        <!--<module name=\"JavadocVariable\"/> -->\n        <module name=\"JavadocStyle\"/>\n        <module name=\"MissingJavadocMethod\">\n            <property name=\"allowMissingPropertyJavadoc\" value=\"true\"/>\n            <property name=\"allowedAnnotations\" value=\"Override,Test\"/>\n            <property name=\"tokens\" value=\"METHOD_DEF,ANNOTATION_FIELD_DEF,COMPACT_CTOR_DEF\"/>\n        </module>\n\n        <!-- Checks for Naming Conventions.                  -->\n        <!-- See https://checkstyle.org/config_naming.html -->\n        <module name=\"ConstantName\"/>\n        <module name=\"LocalFinalVariableName\"/>\n        <module name=\"LocalVariableName\"/>\n        <module name=\"MemberName\"/>\n        <module name=\"MethodName\"/>\n        <!-- <module name=\"PackageName\"/> -->\n        <module name=\"ParameterName\"/>\n        <module name=\"StaticVariableName\"/>\n        <module name=\"TypeName\"/>\n\n        <!-- Checks for imports                              -->\n        <!-- See https://checkstyle.org/config_imports.html -->\n        <!-- <module name=\"AvoidStarImport\"/> -->\n        <module name=\"IllegalImport\"/> <!-- defaults to sun.* packages -->\n        <module name=\"RedundantImport\"/>\n        <module name=\"UnusedImports\">\n            <property name=\"processJavadoc\" value=\"false\"/>\n        </module>\n\n        <!-- Checks for Size Violations.                    -->\n        <!-- See https://checkstyle.org/config_sizes.html -->\n        <module name=\"MethodLength\"/>\n        <module name=\"ParameterNumber\"/>\n\n        <!-- Checks for whitespace                               -->\n        <!-- See https://checkstyle.org/config_whitespace.html -->\n        <module name=\"EmptyForIteratorPad\"/>\n        <module name=\"GenericWhitespace\"/>\n        <module name=\"MethodParamPad\"/>\n        <module name=\"NoWhitespaceAfter\"/>\n        <module name=\"NoWhitespaceBefore\"/>\n        <module name=\"OperatorWrap\"/>\n        <module name=\"ParenPad\"/>\n        <module name=\"TypecastParenPad\"/>\n        <module name=\"WhitespaceAfter\"/>\n        <module name=\"WhitespaceAround\"/>\n\n        <!-- Modifier Checks                                    -->\n        <!-- See https://checkstyle.org/config_modifiers.html -->\n        <module name=\"ModifierOrder\"/>\n        <module name=\"RedundantModifier\"/>\n\n        <!-- Checks for blocks. You know, those {}'s         -->\n        <!-- See https://checkstyle.org/config_blocks.html -->\n        <module name=\"AvoidNestedBlocks\"/>\n        <module name=\"EmptyBlock\"/>\n        <!-- <module name=\"LeftCurly\"/> -->\n        <module name=\"NeedBraces\"/>\n        <!-- <module name=\"RightCurly\"/> -->\n\n        <!-- Checks for common coding problems               -->\n        <!-- See https://checkstyle.org/config_coding.html -->\n        <module name=\"EmptyStatement\"/>\n        <module name=\"EqualsHashCode\"/>\n        <module name=\"HiddenField\">\n            <property name=\"ignoreConstructorParameter\" value=\"true\"/>\n            <property name=\"ignoreSetter\" value=\"true\"/>\n            <property name=\"setterCanReturnItsClass\" value=\"true\"/>\n        </module>\n        <module name=\"IllegalInstantiation\"/>\n        <module name=\"InnerAssignment\"/>\n        <module name=\"MagicNumber\"/>\n        <module name=\"MissingSwitchDefault\"/>\n        <module name=\"MultipleVariableDeclarations\"/>\n        <module name=\"SimplifyBooleanExpression\"/>\n        <module name=\"SimplifyBooleanReturn\"/>\n\n        <!-- Checks for class design                         -->\n        <!-- See https://checkstyle.org/config_design.html -->\n        <!--<module name=\"DesignForExtension\"/> -->\n        <module name=\"FinalClass\"/>\n        <module name=\"InterfaceIsType\"/>\n        <module name=\"VisibilityModifier\"/>\n\n        <!-- Miscellaneous other checks.                   -->\n        <!-- See https://checkstyle.org/config_misc.html -->\n        <module name=\"ArrayTypeStyle\"/>\n        <!-- <module name=\"FinalParameters\"/> -->\n        <!-- <module name=\"TodoComment\"/> -->\n        <module name=\"UpperEll\"/>\n\n    </module>\n\n</module>\n"
          },
          {
            "path": ".gradle/vcs-1/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/gc.properties",
            "content": ""
          },
          {
            "path": ".gradle/7.4.2/fileChanges/last-build.bin",
            "content": "\u0000"
          },
          {
            "path": "gradle/wrapper/gradle-wrapper.properties",
            "content": "distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.4.2-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/PersonControllerTest.java",
            "content": "package de.tum.in.ase.eist;\n\nimport static de.tum.in.ase.eist.H05E01Client.*;\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport okhttp3.mockwebserver.MockResponse;\nimport okhttp3.mockwebserver.MockWebServer;\nimport okhttp3.mockwebserver.RecordedRequest;\nimport org.junit.jupiter.api.*;\nimport org.mockito.ArgumentCaptor;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\nimport java.util.function.Consumer;\nimport java.util.concurrent.TimeUnit;\n\n@H05E01\npublic class PersonControllerTest {\n\n    private static MockWebServer mockWebServer;\n    private static ObjectMapper objectMapper;\n\n    private Object personController;\n    private Person person1;\n    private Person person2;\n\n    @BeforeAll\n    static void setUp() {\n        objectMapper = new ObjectMapper();\n        objectMapper.findAndRegisterModules();\n    }\n\n    @BeforeEach\n    void initialize() throws Exception {\n        // restarting the server for every test is required because otherwise tests interfere with each other\n        mockWebServer = new MockWebServer();\n        mockWebServer.start(8080);\n        personController = createPersonController();\n\n        person1 = new Person();\n        var uuid1 = UUID.randomUUID();\n        person1.setId(uuid1);\n        person1.setFirstName(\"Max\");\n        person1.setLastName(\"Musterfrau\");\n        person1.setBirthday(LocalDate.ofYearDay(2000, 125));\n\n        person2 = new Person();\n        var uuid2 = UUID.randomUUID();\n        person2.setId(uuid2);\n        person2.setFirstName(\"Erika\");\n        person2.setLastName(\"Mustermann\");\n        person2.setBirthday(LocalDate.ofYearDay(1999, 80));\n    }\n\n    @AfterEach\n    void afterEach() throws Exception {\n        mockWebServer.shutdown();\n    }\n\n    @Test\n    @DisplayName(\"Add single valid persons (Client)\")\n    public void testAddSingleValidPerson() throws Exception {\n        testAddPerson(200, person1, List.of(person1));\n    }\n\n    @Test\n    @DisplayName(\"Add multiple valid persons (Client)\")\n    public void testAddMultipleValidPersons() throws Exception {\n        testAddPerson(200, person1, new ArrayList<>(List.of(person1)));\n        testAddPerson(200, person2, new ArrayList<>(List.of(person1, person2)));\n    }\n\n    @Test\n    @DisplayName(\"Add single invalid person (Client)\")\n    public void testAddInvalidPerson() throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(400)\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n\n        invokeAddPerson(personController, person1, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n        Thread.sleep(350);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::createPerson did not send a request.\");\n        }\n\n        verify(consumer, never()).accept(any());\n    }\n\n    @Test\n    @DisplayName(\"Edit single person (Client)\")\n    public void testEditSinglePerson() throws Exception {\n        Person updatedPerson = new Person();\n        updatedPerson.setId(person1.getId());\n        updatedPerson.setFirstName(person1.getFirstName());\n        updatedPerson.setLastName(\"Updated Last Name\");\n        updatedPerson.setBirthday(person1.getBirthday());\n\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1)));\n\n        testUpdatePerson(200, updatedPerson, List.of(updatedPerson));\n    }\n\n    @Test\n    @DisplayName(\"Edit single person for multiple existing persons (Client)\")\n    public void testEditSinglePersonForMultipleExistingPersons() throws Exception {\n        Person updatedPerson = new Person();\n        updatedPerson.setId(person1.getId());\n        updatedPerson.setFirstName(person1.getFirstName());\n        updatedPerson.setLastName(\"Updated Last Name\");\n        updatedPerson.setBirthday(person1.getBirthday());\n\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        testUpdatePerson(200, updatedPerson, List.of(updatedPerson, person2));\n    }\n\n    @Test\n    @DisplayName(\"Edit invalid person (Client)\")\n    public void testEditInvalidPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(400)\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n\n        invokeUpdatePerson(personController, person1, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n        Thread.sleep(350);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::updatePerson did not send a request.\");\n        }\n        verify(consumer, times(0));\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person 1 (Client)\")\n    public void testDeleteOnlyExistingPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1)));\n\n        testDeletePerson(200, person1, List.of());\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person 2 (Client)\")\n    public void testDeletePerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        testDeletePerson(200, person1, List.of(person2));\n    }\n\n    @Test\n    @DisplayName(\"Retrieve all persons 1 (Client)\")\n    public void testGetAllPerson() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        var sortingOptions = new PersonSortingOptions();\n        sortingOptions.setSortField(PersonSortingOptions.SortField.ID);\n        sortingOptions.setSortingOrder(PersonSortingOptions.SortingOrder.ASCENDING);\n\n        testGetAllPersons(200, sortingOptions, List.of(person2, person1));\n    }\n\n    @Test\n    @DisplayName(\"Retrieve all persons 2 (Client)\")\n    public void testGetAllPersonsResetsSavedResult() throws Exception {\n        setPersonControllerPersons(personController, new ArrayList<>(List.of(person1, person2)));\n\n        var sortingOptions = new PersonSortingOptions();\n\n        sortingOptions.setSortField(PersonSortingOptions.SortField.ID);\n        sortingOptions.setSortingOrder(PersonSortingOptions.SortingOrder.ASCENDING);\n\n        testGetAllPersons(200, sortingOptions, List.of());\n    }\n\n    @Test\n    @DisplayName(\"Sort options for retrieving all persons (Client)\")\n    public void testSortingOptions() throws Exception {\n        for (var sortField : PersonSortingOptions.SortField.values()) {\n            for (var sortOrder: PersonSortingOptions.SortingOrder.values()) {\n                // this should not be required but leaving out may break some student's submission while this is the\n                // real-life behavior\n                mockWebServer.enqueue(new MockResponse()\n                        .setResponseCode(200)\n                        .setBody(objectMapper.writeValueAsString(List.of()))\n                        .setHeader(\"Content-Type\", \"application/json\"));\n\n                var sortOptions = new PersonSortingOptions();\n                sortOptions.setSortField(sortField);\n                sortOptions.setSortingOrder(sortOrder);\n                invokeGetAllPersons(personController, sortOptions, (res) -> {});\n\n\t            RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n\t            if(mockWebServer.getRequestCount() == 0) {\n                    fail(\"PersonController::createPerson did not send a request.\");\n                }\n\n\t\t\t\tThread.sleep(350);\n                assertGetAllPersonRequest(recordedRequest, sortOptions);\n            }\n        }\n    }\n\n    private void testAddPerson(int mockResponseCode, Person person, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(person))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeAddPerson(personController, person, consumer);\n\n        RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n            fail(\"PersonController::createPerson did not send a request.\");\n        }\n        Thread.sleep(350);\n\n        verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"addPerson\");\n\n        assertEquals(\"POST\", recordedRequest.getMethod(), \"PersonController::createPerson did not send a message with the correct request type\");\n        assertEquals(\"/persons\", recordedRequest.getPath(), \"PersonController::createPerson send a message to the wrong correct endpoint path.\");\n        assertEquals(objectMapper.writeValueAsString(person), recordedRequest.getBody().readUtf8(), \"PersonController::createPerson send a message with the wrong response body.\");\n    }\n\n    private void testUpdatePerson(int mockResponseCode, Person updatedPerson, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(updatedPerson))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeUpdatePerson(personController, updatedPerson, consumer);\n\n        // wait until the result has been processed by the client (100ms should be enough, just to be sure)\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::updatePerson did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t    verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"updatePerson\");\n\n\n        assertEquals(\"PUT\", recordedRequest.getMethod(), \"PersonController::updatePerson did not send a message with the correct request type.\");\n        assertEquals(\"/persons/\" + updatedPerson.getId(), recordedRequest.getPath(),\"PersonController::updatePerson send a message to the wrong correct endpoint path.\");\n        assertEquals(objectMapper.writeValueAsString(updatedPerson), recordedRequest.getBody().readUtf8(), \"PersonController::createPerson send a message with the wrong response body.\");\n    }\n\n    private void testDeletePerson(int mockResponseCode, Person deletedPerson, List<Person> expectedPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(deletedPerson))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeDeletePerson(personController, deletedPerson, consumer);\n\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::deletePerson did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t    verify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(expectedPersons, argument.getValue(), \"deletePerson\");\n\n        assertEquals(\"DELETE\", recordedRequest.getMethod(), \"PersonController::deletePerson did not send a message with the correct request type.\");\n        assertEquals(\"/persons/\" + deletedPerson.getId(), recordedRequest.getPath(),\"PersonController::deletePerson send a message to the wrong correct endpoint path.\");\n        assertEquals(\"\", recordedRequest.getBody().readUtf8(), \"PersonController::deletePerson send a message with the wrong response body.\");\n    }\n\n    private void testGetAllPersons(int mockResponseCode, PersonSortingOptions sortingOptions, List<Person> allPersons) throws Exception {\n        mockWebServer.enqueue(new MockResponse()\n                .setResponseCode(mockResponseCode)\n                .setBody(objectMapper.writeValueAsString(allPersons))\n                .setHeader(\"Content-Type\", \"application/json\"));\n        Consumer<List<Person>> consumer = mock(Consumer.class);\n        ArgumentCaptor<List<Person>> argument = ArgumentCaptor.forClass(List.class);\n\n        invokeGetAllPersons(personController, sortingOptions, consumer);\n\n\t    RecordedRequest recordedRequest = mockWebServer.takeRequest(2000, TimeUnit.MILLISECONDS);\n        if(mockWebServer.getRequestCount() == 0) {\n\t        fail(\"PersonController::getAllPersons did not send a request.\");\n        }\n\t    Thread.sleep(350);\n\n\t\tverify(consumer, times(1)).accept(argument.capture());\n        assertPersonListEquals(allPersons, argument.getValue(), \"getAllPersons\");\n\n        assertGetAllPersonRequest(recordedRequest, null);\n    }\n\n    private void assertGetAllPersonRequest(RecordedRequest recordedRequest, PersonSortingOptions sortingOptions) {\n        assertEquals(\"GET\", recordedRequest.getMethod(), \"PersonController::getAllPersons did not send a message with the correct request type.\");\n        if (sortingOptions == null) {\n            if (!recordedRequest.getPath().startsWith(\"/persons\")) {\n                fail(\"PersonController::getAllPersons send a message to the wrong correct endpoint path.\");\n            }\n        } else {\n            if (!recordedRequest.getPath().startsWith(\"/persons\")) {\n                fail(\"PersonController::getAllPersons send a message to the wrong correct endpoint path.\");\n            }\n            if (recordedRequest.getRequestUrl().queryParameterNames().size() != 2 || !recordedRequest.getRequestUrl().queryParameterNames().containsAll(List.of(\"sortField\", \"sortingOrder\"))) {\n                fail(\"PersonController::getAllPersons send a message without the correct sorting options.\");\n            }\n        }\n        assertEquals(\"\", recordedRequest.getBody().readUtf8(), \"PersonController::getAllPersons send a message with the wrong response body.\");\n    }\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/H05E01.java",
            "content": "package de.tum.in.ase.eist;\n\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\n\nimport de.tum.in.test.api.*;\nimport de.tum.in.test.api.jupiter.JupiterIOExtension;\nimport de.tum.in.test.api.jupiter.JupiterStrictTimeoutExtension;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\n@ExtendWith(JupiterIOExtension.class)\n@ExtendWith(JupiterStrictTimeoutExtension.class)\n@StrictTimeout(6)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface H05E01 {\n    // marker\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/H05E01Client.java",
            "content": "package de.tum.in.ase.eist;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.assertj.core.api.Assertions.assertThat;\n\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport de.tum.in.test.api.util.ReflectionTestUtils;\n\nimport java.lang.reflect.Field;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.function.Consumer;\n\npublic class H05E01Client {\n\n    private static final String PERSON_CONTROLLER_FULL_NAME = \"de.tum.in.ase.eist.controller.PersonController\";\n\n    public static Object createPersonController() {\n        return ReflectionTestUtils.newInstance(ReflectionTestUtils.getConstructor(ReflectionTestUtils.getClazz(PERSON_CONTROLLER_FULL_NAME)));\n    }\n\n    public static void invokeAddPerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"addPerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeUpdatePerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"updatePerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeDeletePerson(Object personController, Person person, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"deletePerson\", Person.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, person, personConsumer);\n    }\n\n    public static void invokeGetAllPersons(Object personController, PersonSortingOptions sortingOptions, Consumer<List<Person>> personConsumer) {\n        var method = ReflectionTestUtils.getMethod(personController, \"getAllPersons\", PersonSortingOptions.class, Consumer.class);\n        ReflectionTestUtils.invokeMethod(personController, method, sortingOptions, personConsumer);\n    }\n\n    public static void assertPersonListEquals(List<Person> expectedList, List<Person> actualList, String methodName) {\n        assertNotNull(actualList, \"The resulting list of persons was null after invoking PersonController::\" + methodName + \".\");\n        assertEquals(expectedList.size(), actualList.size(), \"The resulting list of persons does not have the correct size after invoking PersonController::\" + methodName + \".\");\n\n        boolean wrongOrder = false;\n\n        for (int i=0; i<expectedList.size(); i++) {\n            if(!checkIfPersonEqual(expectedList.get(i), actualList.get(i), false)) {\n                wrongOrder = true;\n                break;\n            }\n        }\n\n        if(!wrongOrder) return;\n\n        var sortedExpectedList = expectedList.stream().sorted((a, b) -> {\n            if (a.getFirstName() == null) {\n                return -1;\n            } else if (b.getFirstName() == null) {\n                return 1;\n            } else {\n                return a.getFirstName().compareTo(b.getFirstName());\n            }\n        }).toList();\n\n        var sortedActualList = expectedList.stream().sorted((a, b) -> {\n            if (a.getFirstName() == null) {\n                return -1;\n            } else if (b.getFirstName() == null) {\n                return 1;\n            } else {\n                return a.getFirstName().compareTo(b.getFirstName());\n            }\n        }).toList();\n\n        for (int i = 0; i < sortedExpectedList.size(); i++) {\n            if(checkIfPersonEqual(sortedExpectedList.get(i), sortedActualList.get(i), false)) {\n                fail(\"The resulting list of persons is not sorted correctly after invoking PersonController::\" + methodName + \".\");\n            }\n        }\n\n        fail(\"The resulting list of persons does not contain the correct persons after invoking PersonController::\" + methodName + \".\");\n    }\n\n    public static void setPersonControllerPersons(Object personController, List<Person> personList) {\n        Field persons;\n        Object fieldValue;\n        List<Person> reflectedPersonList;\n        try {\n            persons = personController.getClass().getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            fieldValue = persons.get(personController);\n            assertThat(fieldValue).isInstanceOf(List.class);\n\n            reflectedPersonList = (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The implementation of the attribute 'persons' in class 'PersonController' is not correct.\");\n            return;\n        }\n        try {\n            reflectedPersonList.removeIf(p -> true);\n            reflectedPersonList.addAll(personList);\n        } catch (Exception e) {\n            fail(\"An unexpected error has occurred. Contact your tutor.\");\n        }\n    }\n\n    public static boolean checkIfPersonEqual(Person expectedPerson, Person actualPerson, boolean ignoreId) {\n        var res = ignoreId || Objects.equals(expectedPerson.getId(), actualPerson.getId());\n        return res && Objects.equals(expectedPerson.getFirstName(), actualPerson.getFirstName())\n                && Objects.equals(expectedPerson.getLastName(), actualPerson.getLastName())\n                && Objects.equals(expectedPerson.getBirthday(), actualPerson.getBirthday());\n    }\n}\n"
          },
          {
            "path": "test/de/tum/in/ase/eist/PersonResourceTest.java",
            "content": "package de.tum.in.ase.eist;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport de.tum.in.ase.eist.model.Person;\nimport de.tum.in.ase.eist.rest.PersonResource;\nimport de.tum.in.ase.eist.service.PersonService;\nimport de.tum.in.ase.eist.util.PersonSortingOptions;\nimport org.junit.jupiter.api.*;\nimport org.springframework.beans.factory.NoSuchBeanDefinitionException;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.test.annotation.DirtiesContext;\nimport org.springframework.test.web.servlet.MockMvc;\n\nimport java.lang.reflect.Field;\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\n\nimport static de.tum.in.ase.eist.H05E01Client.checkIfPersonEqual;\nimport static de.tum.in.ase.eist.util.PersonSortingOptions.SortingOrder.ASCENDING;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.fail;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\n\n@H05E01\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\n// this is required to reset the persons saved in PersonService\n@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)\n@AutoConfigureMockMvc\npublic class PersonResourceTest {\n\n    @Autowired\n    private MockMvc mvc;\n\n    @Autowired\n    private ApplicationContext context;\n\n    private static ObjectMapper objectMapper;\n    private static Object personService;\n\n    private Person person1;\n    private Person person2;\n\n    @BeforeAll\n    static void setUp() {\n        objectMapper = new ObjectMapper();\n        objectMapper.findAndRegisterModules();\n    }\n\n    @BeforeEach\n    void initialize() {\n        try {\n            personService = context.getBean(PersonService.class);\n        } catch (NoSuchBeanDefinitionException e) {\n            fail(\"PersonService is not defined correctly as a Spring-Service.\");\n        }\n\n        try {\n            context.getBean(PersonResource.class);\n        } catch (NoSuchBeanDefinitionException e) {\n            fail(\"PersonResource is not defined correctly as a Spring-Controller.\");\n        }\n\n        person1 = new Person();\n        person1.setFirstName(\"Max\");\n        person1.setLastName(\"Musterfrau\");\n        person1.setBirthday(LocalDate.ofYearDay(2000, 125));\n\n        person2 = new Person();\n        person2.setFirstName(\"Erika\");\n        person2.setLastName(\"Mustermann\");\n        person2.setBirthday(LocalDate.ofYearDay(1999, 80));\n    }\n\n    @Test\n    @DisplayName(\"Create valid person (Server)\")\n    public void testAddSingleUser() throws Exception {\n        var response = this.mvc.perform(\n                post(\"/persons\")\n                        .content(objectMapper.writeValueAsString(person1))\n                        .contentType(\"application/json\")).andReturn().getResponse();\n\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint POST /persons has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::createPerson did not return the correct status code\");\n        assertEquals(\"application/json\", response.getContentType());\n\n        var personsInService = getAllPersonsByReflection();\n        if (personsInService == null || personsInService.size() != 1) {\n            fail(\"After calling PersonResource::createPerson, PersonResource::persons contain the wrong amount of persons.\");\n        }\n        var createdPerson = personsInService.get(0);\n\n        var responseEntity = objectMapper.readValue(response.getContentAsString(), Person.class);\n        if (!checkIfPersonEqual(createdPerson, responseEntity, true)) {\n            fail(\"PersonResource::createPerson did not return the correct person as response body.\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"Create invalid person (Server)\")\n    public void testAddInvalidPerson() throws Exception {\n        var uuid = UUID.randomUUID();\n        person1.setId(uuid);\n\n        var response = this.mvc.perform(\n                        post(\"/persons\")\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint POST /persons has not been implemented.\");\n        }\n        assertEquals(400, response.getStatus(), \"PersonResource::createPerson did not return the correct status code for an invalid request body.\");\n    }\n\n    @Test\n    @DisplayName(\"Update existing person (Server)\")\n    public void testUpdateExistingPerson() throws Exception {\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        person1.setFirstName(\"Changed\");\n        person1.setLastName(\"Name\");\n\n        var response = this.mvc.perform(\n                        put(\"/persons/\" + person1.getId())\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint PUT /persons/:personId has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::updatePerson did not return the correct status code.\");\n        assertEquals(\"application/json\", response.getContentType());\n\n        var personsInService = getAllPersonsByReflection();\n        if (personsInService == null || personsInService.size() != 1) {\n            fail(\"After calling PersonResource::updatePerson, PersonResource::persons contain the wrong amount of persons.\");\n        }\n        var updatedPerson = personsInService.get(0);\n\n        var responseEntity = objectMapper.readValue(response.getContentAsString(), Person.class);\n        if (!checkIfPersonEqual(updatedPerson, responseEntity, false)) {\n            fail(\"PersonResource::updatePerson did not return the correct person as response body.\");\n        }\n    }\n\n    @Test\n    @DisplayName(\"Update person with mismatching IDs (Server)\")\n    public void testUpdatePersonWithIdMismatch() throws Exception {\n        var mismatchedId = UUID.randomUUID();\n\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        var response = this.mvc.perform(\n                        put(\"/persons/\" + mismatchedId)\n                                .content(objectMapper.writeValueAsString(person1))\n                                .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint PUT /persons/:personId has not been implemented.\");\n        }\n        assertEquals(400, response.getStatus(), \"PersonResource::updatePerson did not return the correct status code for an invalid response body.\");\n    }\n\n    @Test\n    @DisplayName(\"Delete existing person (Server)\")\n    public void testDeleteExistingPerson() throws Exception {\n        var id = UUID.randomUUID();\n        person1.setId(id);\n        setAllPersonsByReflection(List.of(person1));\n\n        var response = this.mvc.perform(\n                delete(\"/persons/\" + person1.getId())\n                        .content(objectMapper.writeValueAsString(person1))\n                        .contentType(\"application/json\")).andReturn().getResponse();\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint DELETE /persons/:personId has not been implemented.\");\n        }\n        assertEquals(204, response.getStatus(), \"PersonResource::deletePerson did not return the correct status code.\");\n    }\n\n    @Test\n    @DisplayName(\"Get all persons with sorting options (Server)\")\n    public void testGetAllPersons() throws Exception {\n        var id1 = UUID.randomUUID();\n        var id2 = UUID.randomUUID();\n        person1.setId(id1);\n        person2.setId(id2);\n        setAllPersonsByReflection(List.of(person1, person2));\n\n        for (var fieldOption: PersonSortingOptions.SortField.values()) {\n            for (var orderOption: PersonSortingOptions.SortingOrder.values()) {\n                var sortedList = getSortedList(List.of(person1, person2), orderOption, fieldOption);\n                var response = this.mvc.perform(\n                                get(\"/persons\")\n                                        .param(\"sortField\", fieldOption.name())\n                                        .param(\"sortingOrder\", orderOption.name())\n                                        .contentType(\"application/json\")).andReturn().getResponse();\n\n                if (response.getStatus() == 404 || response.getStatus() == 405) {\n                    fail(\"The endpoint GET /persons has not been implemented.\");\n                }\n                assertEquals(200, response.getStatus(), \"PersonResource::getAllPersons did not return the correct status code.\");\n\n                var respondedPersons = objectMapper.readValue(response.getContentAsString(), Person[].class);\n                if (respondedPersons.length != 2) {\n                    fail(\"PersonResource::getAllPersons did not return the correct amount of persons.\");\n                }\n                for (int i = 0; i < respondedPersons.length; i++){\n                    if (!checkIfPersonEqual(sortedList.get(i), respondedPersons[i], false)) {\n                        fail(\"PersonResource::getAllPersons did not contain the correct person/correct order as response body for a request with sorting options.\");\n                    }\n                }\n            }\n        }\n    }\n\n    @Test\n    @DisplayName(\"Get all persons with default request parameters (Server)\")\n    public void testDefaultSortValues() throws Exception {\n        var id1 = UUID.randomUUID();\n        var id2 = UUID.randomUUID();\n        person1.setId(id1);\n        person2.setId(id2);\n        setAllPersonsByReflection(List.of(person1, person2));\n\n        var sortedList = getSortedList(List.of(person1, person2), ASCENDING, PersonSortingOptions.SortField.ID);\n        var response = this.mvc.perform(\n                        get(\"/persons\")\n                                .contentType(\"application/json\")).andReturn().getResponse();\n\n        if (response.getStatus() == 404 || response.getStatus() == 405) {\n            fail(\"The endpoint GET /persons has not been implemented.\");\n        }\n        assertEquals(200, response.getStatus(), \"PersonResource::getAllPersons did not return the correct status code.\");\n        var respondedPersons = objectMapper.readValue(response.getContentAsString(), Person[].class);\n        if (respondedPersons.length != 2) {\n            fail(\"PersonResource::getAllPersons did not return the correct amount of persons.\");\n        }\n\t    var sortedRespondedPersons = getSortedList(List.of(respondedPersons), ASCENDING, PersonSortingOptions.SortField.ID);\n\t    for (int i = 0; i < sortedRespondedPersons.size(); i++){\n            if (!checkIfPersonEqual(sortedList.get(i), sortedRespondedPersons.get(i), false)) {\n                fail(\"PersonResource::getAllPersons did not contain the correct person/correct order as response body when performing a request without sorting options.\");\n            }\n        }\n    }\n\n    private static List<Person> getSortedList(List<Person> persons, PersonSortingOptions.SortingOrder sortingOrder, PersonSortingOptions.SortField sortField) {\n        var sortedList = new ArrayList<>(persons);\n        sortedList.sort((p1, p2) -> {\n            Person person1;\n            Person person2;\n            if (sortingOrder == ASCENDING) {\n                person1 = p1;\n                person2 = p2;\n            } else {\n                person1 = p2;\n                person2 = p1;\n            }\n\n            return switch (sortField) {\n                case ID -> person1.getId().compareTo(person2.getId());\n                case FIRST_NAME -> person1.getFirstName().compareTo(person2.getFirstName());\n                case LAST_NAME -> person1.getLastName().compareTo(person2.getLastName());\n                case BIRTHDAY -> person1.getBirthday().compareTo(person2.getBirthday());\n            };\n        });\n\n        return sortedList;\n    }\n\n    public static void setAllPersonsByReflection(List<Person> personList) {\n        Field persons;\n        Object fieldValue;\n        List<Person> reflectedPersonList;\n        try {\n            persons = PersonService.class.getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            fieldValue = persons.get(personService);\n            if (!(fieldValue instanceof List)) {\n                fail(\"The attribute 'persons' in class 'PersonResource' has not the correct type.\");\n            }\n\n            reflectedPersonList = (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The attribute 'persons' in class 'PersonResource' has not been implemented as described.\");\n            return;\n        }\n        try {\n            reflectedPersonList.removeIf(p -> true);\n            reflectedPersonList.addAll(personList);\n        } catch (Exception e) {\n            fail(\"An unexpected error has occurred. Contact your tutor.\");\n        }\n    }\n\n    public static List<Person> getAllPersonsByReflection() {\n        try {\n            Field persons = PersonService.class.getDeclaredField(\"persons\");\n            persons.setAccessible(true);\n\n            Object fieldValue = persons.get(personService);\n\n            if (!(fieldValue instanceof List)) {\n                fail(\"The attribute 'persons' in class 'PersonService' has not the correct type.\");\n            }\n            return (List<Person>) fieldValue;\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            fail(\"The attribute 'persons' in class 'PersonService' has not been implemented as described.\");\n            return null;\n        }\n    }\n}\n"
          }
        ]
      },
      "outputs": null,
      "tags": [],
      "parent_run_id": null,
      "trace_id": "2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "dotted_order": "20250723T144040524034Z2102d036-0bf8-4863-879f-f17bd2b1b9ca",
      "session_id": "9165a489-2e1b-4cfc-a139-82686a2268ba",
      "extra": {
        "runtime": {
          "sdk": "langsmith-py",
          "sdk_version": "0.3.42",
          "library": "langchain-core",
          "platform": "macOS-15.3-arm64-arm-64bit-Mach-O",
          "runtime": "python",
          "py_implementation": "CPython",
          "runtime_version": "3.13.5",
          "langchain_version": "0.3.25",
          "langchain_core_version": "0.3.59",
          "library_version": "0.3.59"
        },
        "metadata": {
          "LANGSMITH_TRACING": "true",
          "LANGCHAIN_RUN_ID": "39eb4060",
          "revision_id": "v1.1.0-48-g1c4fbcca-dirty",
          "ls_run_depth": 0
        }
      },
      "events": [
        {
          "name": "start",
          "time": "2025-07-23T14:40:40.524034+00:00"
        }
      ]
    }
  ]
}