{
  "case_id": "newData/MTG26-SQL_Basics/003",
  "issues": [
    {
      "description": "The reference solution for Aufgabe 06 uses a threshold of 150000 for both einwohner_m and einwohner_w (WHERE einwohner_m > 150000 AND einwohner_w > 150000), but the problem statement requires municipalities with more than 100000 male and more than 100000 female inhabitants. The solution therefore contradicts the task specification and would produce different results than expected by the exercise description or automatic tests.",
      "severity": "HIGH",
      "category": "ATTRIBUTE_TYPE_MISMATCH",
      "related_locations": [
        {
          "type": "PROBLEM_STATEMENT",
          "file_path": "problem_statement.md",
          "start_line": 131,
          "end_line": 134
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/aufgabe06.sql",
          "start_line": 1,
          "end_line": 3
        }
      ],
      "suggested_fix": "Adjust the WHERE clause in the solution to match the problem statement: change the numeric thresholds to 100000 (WHERE einwohner_m > 100000 AND einwohner_w > 100000) so the solution implements the requested criterion."
    },
    {
      "description": "Table name capitalization for the Gemeinde table is inconsistent across the solution files (e.g. 'gemeinde' in aufgabe04.sql vs 'Gemeinde' in aufgabe05.sql and aufgabe09.sql). On case-sensitive SQL deployments this will cause errors or confusion because the same table is referred to with different identifiers.",
      "severity": "MEDIUM",
      "category": "ATTRIBUTE_TYPE_MISMATCH",
      "related_locations": [
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/aufgabe04.sql",
          "start_line": 2,
          "end_line": 2
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/aufgabe05.sql",
          "start_line": 2,
          "end_line": 2
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/aufgabe09.sql",
          "start_line": 2,
          "end_line": 2
        }
      ],
      "suggested_fix": "Use a single canonical table identifier consistently across all queries (e.g. 'Gemeinde' if that is the schema's table name). If the target DB is case-sensitive, make sure all solution files reference the exact same capitalization used in the database schema."
    },
    {
      "description": "The solution SQL uses double quotes for string literals (e.g. WHERE art=\"Freibad\", WHERE regierungsbezirk=\"Oberbayern\", gemeindeschluessel = \"09162000\"). In standard SQL string literals must use single quotes; double quotes denote identifiers in many SQL dialects. This can cause queries to fail or behave unexpectedly depending on the SQL engine.",
      "severity": "MEDIUM",
      "category": "ATTRIBUTE_TYPE_MISMATCH",
      "related_locations": [
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/aufgabe01.sql",
          "start_line": 3,
          "end_line": 3
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/aufgabe02.sql",
          "start_line": 3,
          "end_line": 3
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/aufgabe03.sql",
          "start_line": 3,
          "end_line": 3
        }
      ],
      "suggested_fix": "Replace double quotes with single quotes for string literals in the solution files (e.g. WHERE art = 'Freibad', WHERE regierungsbezirk = 'Oberbayern', gemeindeschluessel = '09162000') so the queries are portable and follow standard SQL string literal syntax."
    },
    {
      "description": "The concept/table 'Gemeinde' is referenced with inconsistent capitalization across artifacts: the problem statement and most solution files use 'Gemeinde' (capital G), while solution_repository/aufgabe04.sql uses 'gemeinde' (lowercase g). Although SQL is case-insensitive in many setups, some DBMS or exercise checkers can be case-sensitive for identifiers. This inconsistency can create unnecessary confusion or lead to errors for students (e.g., when copying queries into a case-sensitive environment) and increases extraneous cognitive load when mapping the problem description to the provided solution.",
      "severity": "LOW",
      "category": "IDENTIFIER_NAMING_INCONSISTENCY",
      "related_locations": [
        {
          "type": "PROBLEM_STATEMENT",
          "file_path": "problem_statement.md",
          "start_line": 111,
          "end_line": 126
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/aufgabe04.sql",
          "start_line": 1,
          "end_line": 3
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/aufgabe05.sql",
          "start_line": 1,
          "end_line": 3
        }
      ],
      "suggested_fix": "Use a single, consistent identifier for the table across all artifacts. Prefer matching the problem statement casing (e.g., 'Gemeinde'). Concretely, update solution_repository/aufgabe04.sql to use 'FROM Gemeinde' (capitalize G) and verify other solution and template files use the same form. Alternatively, include a short note in the problem statement that identifiers in the SQL schema are case-insensitive for the exercises if that is intended."
    }
  ]
}
