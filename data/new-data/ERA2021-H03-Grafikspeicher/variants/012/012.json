{
  "case_id": "new-data/ERA2021-H03-Grafikspeicher/012",
  "issues": [
    {
      "description": "Calling-convention / register-preservation guidance is inconsistent between the problem statement and the template comments and may confuse students. The problem statement (Teilaufgabe b) explicitly requires that set_pixel may not modify any registers except EAX (register contract / calling convention). The template's TODO comment where students are to calculate the position in main instructs: \"Attention: save all registers you modify except eax,ebx and esi\" (i.e. suggesting that EBX and ESI need not be preserved). That phrasing is ambiguous and could be read as permitting EBX/ESI to be clobbered by student code. This conflicts with the explicit restriction in the problem statement about set_pixel and may mislead students about which registers they must preserve when implementing set_pixel. The provided solution implements set_pixel while preserving registers other than EAX (push/pop of EBX,ESI,EDX), which matches the problem statement â€” showing the template comment is the outlier and likely to cause confusion.",
      "severity": "MEDIUM",
      "category": "METHOD_PARAMETER_MISMATCH",
      "related_locations": [
        {
          "type": "PROBLEM_STATEMENT",
          "file_path": "problem_statement.md",
          "start_line": 30,
          "end_line": 33
        },
        {
          "type": "TEMPLATE_REPOSITORY",
          "file_path": "template_repository/pixel.asm",
          "start_line": 100,
          "end_line": 102
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/pixel.asm",
          "start_line": 153,
          "end_line": 168
        }
      ],
      "suggested_fix": "Unify and clarify the register-preservation guidance in the template to match the problem statement. For example, update the template comment at the position-calculation TODO to something like: \"Attention: save any registers you modify. The set_pixel subroutine must preserve all registers except EAX (only EAX may be clobbered). In the main-position calculation you may use/modify EAX and EBX while computing the address, but restore registers you change if main relies on them.\" This removes ambiguity and aligns the template with the problem's requirement and the solution's approach."
    },
    {
      "description": "The buffer declaration in the template and the solution differ in size/type which is a structural mismatch that can confuse students about the intended data layout. The template declares 'buf resd 2' (reserve 2 doublewords = 8 bytes). The solution declares 'buf resw 2' (reserve 2 words = 4 bytes). The rest of the code assumes space for multiple dword writes/clears (e.g. mov dword [buf], 0 and mov dword [buf + 4], 0), which matches the template's resd 2 but is inconsistent with the solution's resw declaration. This inconsistency in the reserved buffer size/type is structural and may cause confusion or unexpected assembler behavior.",
      "severity": "LOW",
      "category": "ATTRIBUTE_TYPE_MISMATCH",
      "related_locations": [
        {
          "type": "TEMPLATE_REPOSITORY",
          "file_path": "template_repository/pixel.asm",
          "start_line": 20,
          "end_line": 22
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/pixel.asm",
          "start_line": 4,
          "end_line": 6
        }
      ],
      "suggested_fix": "Make the buffer declaration consistent across template and solution. Prefer the larger allocation used by the code (resd 2) since the code uses dword operations and offsets of +4. Either change the solution's 'buf resw 2' to 'buf resd 2' or change the template and all code to consistently use a 4-byte word layout and adjust the code offsets accordingly. The least intrusive fix: change solution_repository/pixel.asm line declaring buf to 'buf resd 2' so it matches template usage and the dword accesses."
    }
  ]
}
