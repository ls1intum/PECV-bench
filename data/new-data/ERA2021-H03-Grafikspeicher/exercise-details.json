{"type":"programming","id":2104,"title":"H03 - Grafikspeicher","shortName":"H03","maxPoints":1.0,"bonusPoints":0.0,"assessmentType":"SEMI_AUTOMATIC","releaseDate":"2020-11-22T23:00:27Z","dueDate":"2020-11-30T23:00:55Z","assessmentDueDate":"2020-12-05T19:00:44Z","difficulty":"MEDIUM","mode":"INDIVIDUAL","allowComplaintsForAutomaticAssessments":false,"allowFeedbackRequests":false,"includedInOverallScore":"INCLUDED_COMPLETELY","problemStatement":"\n[task][Erfolgreiches Kompilieren](Compile)\n*Die Aufgabe muss kompilieren um korrigiert und bewertet zu werden!*\n\n\n##<span class=\"red\">Achtung:</span>\n\nUm das mitgelieferte Template verwenden zu können müssen Sie an zusätzlichen mit <span class=\"red\">TODO</span> gekennzeichneten Stellen den Code verändern. Was genau dort zu tun ist wird hier und im Template beschrieben.\n\nVerändern Sie im Template nur die mit <span class=\"red\">TODO</span> gekennzeichneten Bereiche.\n\nWie das Template verwendet werden kann wird in den Kommentaren im Code beschrieben (Achtung: Die Verwendung unter SASM kann sich zu der normalen mit NASM unterscheiden).\n\n\n## Hausaufgabe 3: Zugriff auf Grafikspeicher\n\nGrafikkarten mit 8 Bit pro Farbintensität (Rot/Grün/Blau, d. h. true color) benötigen mindestens 24 Bit pro Pixel.\nDiese werden inzwischen fast immer, wie in dieser Aufgabe auch, auf 32 Bit aufgerundet.\n\n### Teilaufgabe a)\nMit welcher Formel kann man allgemein die Speicheradresse eines bestimmten RGB-\nBildpunkts (x, y) aus den Werten Bildschirmspeicherstart, Breite und Höhe berechnen? Die (Zeilen-)Pixel sollen hierbei konsekutiv im Arbeitsspeicher entlang der x Koordinate\nliegen.\nSetzen Sie diese beim ersten TODO im Code für X ein. \nZusätzlich müssen Sie im dritten TODO nun Assembler-Code einfügen um aus den gegebenen Werten x (in EAX), y (in EBX), beginnend mit 0 und der Auflösung aus b) (1920 × 1080) die Speicherposition (Ergebnis nach ESI) zu berechen.\nSchreiben Sie dann den Wert des Pixels nach ecx (mov ecx, [esi]). ecx muss natürlich nicht gesichert werden.\nAchten Sie darauf Register, welche Sie verändern, davor zu sichern.\n\n### Teilaufgabe b)\nDer Start des Bildschirmspeichers mit der Auflösung 1920 × 1080 stehe an der Speicherstelle display\\_start. Die Pixelkoordinaten x und y werden in den Registern eax und\nebx übergeben, der zu setzende RGB-Wert im Register ecx. Schreiben Sie das Unterprogramm set\\_pixel, das das Pixel auf den Farbwert setzt. Außer dem Register eax dürfen\nkeine anderen Registerinhalte verändert werden. Der Wertebereich von x und y soll nicht\nüberprüft werden.\n\nVersuchen Sie so wenig wie möglich Multiplikationen zu verwenden, indem Sie von der\nindirekten Adressierung Gebrauch machen.","gradingInstructions":"Lösungen zu den Teilen die korrigiert werden müssen:\n\n    Formel: Basis + 4 * 1920 * y + 4 * x\n    \n    set_pixel:\n        push ebx\n        push esi\n        push edx\n        mov edx, 4\n        mul edx ; eax = x*4\n        mov esi, eax ; eax zwischenspeichern\n        mov eax,7680 \n        mul ebx ; eax = 7680 * y\n        add eax, esi ; eax += x * 4\n        add eax, display_start ; basis Adresse addieren\n        mov [eax], ecx ; rbg in berechnete Adresse schreiben\n        pop edx\n        pop esi\n        pop ebx\n        ret\n    \n    3. TODO:\n        mov esi, display_start\n        mov edi, 4\n        mul edi\n        add esi, eax\n        mov eax, 7680\n        mul ebx\n        add esi, eax\n        mov ecx, [esi]","categories":["{\"category\":\"asm\",\"color\":\"#ad5658\"}"],"presentationScoreEnabled":false,"secondCorrectionEnabled":false,"course":{"id":86,"title":"Einführung in die Rechnerarchitektur (WS20/21)","shortName":"era2021","studentGroupName":"artemis-era2021-students","teachingAssistantGroupName":"artemis-era2021-tutors","instructorGroupName":"artemis-era2021-instructors","startDate":"2020-11-02T08:00:00Z","endDate":"2021-04-30T10:33:00Z","semester":"WS20/21","testCourse":false,"onlineCourse":false,"courseInformationSharingConfiguration":"COMMUNICATION_AND_MESSAGING","maxComplaints":4,"maxTeamComplaints":3,"maxComplaintTimeDays":7,"maxRequestMoreFeedbackTimeDays":0,"maxComplaintTextLimit":2000,"maxComplaintResponseTextLimit":2000,"color":"#691b0b","enrollmentEnabled":true,"unenrollmentEnabled":false,"faqEnabled":false,"presentationScore":0,"accuracyOfScores":1,"restrictedAthenaModulesAccess":false,"learningPathsEnabled":false,"studentCourseAnalyticsDashboardEnabled":false,"requestMoreFeedbackEnabled":false,"complaintsEnabled":true,"trainingEnabled":false},"plagiarismDetectionConfig":{"continuousPlagiarismControlEnabled":false,"continuousPlagiarismControlPostDueDateChecksEnabled":false,"continuousPlagiarismControlPlagiarismCaseStudentResponsePeriod":7,"similarityThreshold":90,"minimumScore":0,"minimumSize":50},"testRepositoryUri":"https://artemis.cit.tum.de/git/ERA2021H03/era2021h03-tests.git","allowOnlineEditor":true,"allowOfflineIde":true,"allowOnlineIde":false,"staticCodeAnalysisEnabled":false,"programmingLanguage":"C","showTestNamesToStudents":false,"testCasesChanged":false,"projectKey":"ERA2021H03","projectType":"GCC","releaseTestsWithExampleSolution":false,"buildConfig":{"id":2104,"sequentialTestRuns":false,"branch":"main","buildPlanConfiguration":"{\"api\":\"v0.0.1\",\"metadata\":{\"docker\":{\"image\":\"tizianleonhardt/era-artemis-assembler\",\"volumes\":[\"${WORKDIR}:${WORKDIR}\",\"${TMPDIR}:${TMPDIR}\"],\"parameters\":[]}},\"actions\":[{\"script\":\"#!/bin/bash\\n\\necho \\\"--------------------Python versions--------------------\\\"\\npython3 --version\\npip3 --version\\n\\necho \\\"--------------------Contents of tests repository--------------------\\\"\\nls -la tests\\necho \\\"---------------------------------------------\\\"\\necho \\\"--------------------Contents of assignment repository--------------------\\\"\\nls -la assignment\\necho \\\"---------------------------------------------\\\"\\n\\n#Fallback in case Docker does not work as intended\\nREQ_FILE\\u003dtests/requirements.txt\\nif [ -f \\\"$REQ_FILE\\\" ]; then\\n    pip3 install --user -r tests/requirements.txt\\nelse\\n    echo \\\"$REQ_FILE does not exist\\\"\\nfi\\n\\nexit 0\",\"name\":\"provide_information_about_environment_and_setup_python_requirements\",\"runAlways\":false},{\"script\":\"#!/usr/bin/env bash\\n\\nrm -f assignment/{GNUmakefile, Makefile, makefile}\\nrm -f assignment/io.inc\\n\\ncp -f tests/Makefile assignment/Makefile || exit 2\\ncp -f tests/io.inc assignment/io.inc || exit 2\",\"name\":\"prepare_makefile\",\"runAlways\":false},{\"script\":\"cd tests\\n\\npython3 compileTest.py ../assignment/\\nrm compileTest.py\\ncp result.xml ../assignment/result.xml\\n\\nexit 0\",\"name\":\"run_compile_test\",\"runAlways\":false},{\"script\":\"#empty script action, just for the results\",\"name\":\"junit\",\"results\":[{\"name\":\"junit_**/result.xml\",\"path\":\"**/result.xml\",\"type\":\"junit\",\"before\":true}],\"runAlways\":true}]}","buildScript":"#!/usr/bin/env bash\nset -e\nexport AEOLUS_INITIAL_DIRECTORY=${PWD}\nprovide_information_about_environment_and_setup_python_requirements () {\n  echo '⚙️ executing provide_information_about_environment_and_setup_python_requirements'\n  #!/bin/bash\n\n  echo \"--------------------Python versions--------------------\"\n  python3 --version\n  pip3 --version\n\n  echo \"--------------------Contents of tests repository--------------------\"\n  ls -la tests\n  echo \"---------------------------------------------\"\n  echo \"--------------------Contents of assignment repository--------------------\"\n  ls -la assignment\n  echo \"---------------------------------------------\"\n\n  #Fallback in case Docker does not work as intended\n  REQ_FILE=tests/requirements.txt\n  if [ -f \"$REQ_FILE\" ]; then\n      pip3 install --user -r tests/requirements.txt\n  else\n      echo \"$REQ_FILE does not exist\"\n  fi\n\n  exit 0\n}\n\nprepare_makefile () {\n  echo '⚙️ executing prepare_makefile'\n  #!/usr/bin/env bash\n\n  rm -f assignment/{GNUmakefile, Makefile, makefile}\n  rm -f assignment/io.inc\n\n  cp -f tests/Makefile assignment/Makefile || exit 2\n  cp -f tests/io.inc assignment/io.inc || exit 2\n}\n\nrun_compile_test () {\n  echo '⚙️ executing run_compile_test'\n  cd tests\n\n  python3 compileTest.py ../assignment/\n  rm compileTest.py\n  cp result.xml ../assignment/result.xml\n\n  exit 0\n}\n\njunit () {\n  echo '⚙️ executing junit'\n  #empty script action, just for the results\n}\n\nfinal_aeolus_post_action () {\n  set +e # from now on, we don't exit on errors\n  echo '⚙️ executing final_aeolus_post_action'\n  cd \"${AEOLUS_INITIAL_DIRECTORY}\"\n  junit\n}\n\nmain () {\n  if [[ \"${1}\" == \"aeolus_sourcing\" ]]; then\n    return 0 # just source to use the methods in the subshell, no execution\n  fi\n  local _script_name\n  _script_name=${BASH_SOURCE[0]:-$0}\n  trap final_aeolus_post_action EXIT\n\n  cd \"${AEOLUS_INITIAL_DIRECTORY}\"\n  bash -c \"source ${_script_name} aeolus_sourcing; provide_information_about_environment_and_setup_python_requirements\"\n  cd \"${AEOLUS_INITIAL_DIRECTORY}\"\n  bash -c \"source ${_script_name} aeolus_sourcing; prepare_makefile\"\n  cd \"${AEOLUS_INITIAL_DIRECTORY}\"\n  bash -c \"source ${_script_name} aeolus_sourcing; run_compile_test\"\n}\n\nmain \"${@}\"","checkoutSolutionRepository":false,"timeoutSeconds":0,"allowBranching":false,"windfile":{"api":"v0.0.1","metadata":{"docker":{"image":"tizianleonhardt/era-artemis-assembler","volumes":["${WORKDIR}:${WORKDIR}","${TMPDIR}:${TMPDIR}"]}},"actions":[{"name":"provide_information_about_environment_and_setup_python_requirements","runAlways":false,"script":"#!/bin/bash\n\necho \"--------------------Python versions--------------------\"\npython3 --version\npip3 --version\n\necho \"--------------------Contents of tests repository--------------------\"\nls -la tests\necho \"---------------------------------------------\"\necho \"--------------------Contents of assignment repository--------------------\"\nls -la assignment\necho \"---------------------------------------------\"\n\n#Fallback in case Docker does not work as intended\nREQ_FILE=tests/requirements.txt\nif [ -f \"$REQ_FILE\" ]; then\n    pip3 install --user -r tests/requirements.txt\nelse\n    echo \"$REQ_FILE does not exist\"\nfi\n\nexit 0"},{"name":"prepare_makefile","runAlways":false,"script":"#!/usr/bin/env bash\n\nrm -f assignment/{GNUmakefile, Makefile, makefile}\nrm -f assignment/io.inc\n\ncp -f tests/Makefile assignment/Makefile || exit 2\ncp -f tests/io.inc assignment/io.inc || exit 2"},{"name":"run_compile_test","runAlways":false,"script":"cd tests\n\npython3 compileTest.py ../assignment/\nrm compileTest.py\ncp result.xml ../assignment/result.xml\n\nexit 0"},{"name":"junit","results":[{"name":"junit_**/result.xml","path":"**/result.xml","type":"junit","before":true}],"runAlways":true,"script":"#empty script action, just for the results"}]}},"type":"programming","defaultTestCaseVisibility":"ALWAYS","exerciseType":"programming","studentAssignedTeamIdComputed":false,"gradingInstructionFeedbackUsed":false,"visibleToStudents":true,"teamMode":false}