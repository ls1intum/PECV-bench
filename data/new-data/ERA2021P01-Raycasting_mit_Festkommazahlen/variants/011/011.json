{
  "case_id": "new-data/ERA2021-P01-Raycasting-mit-Festkommazahlen/011",
  "issues": [
    {
      "description": "The problem statement requires the Bitmap 'data' attribute to be a pointer to int (int *data) to handle 32-bit color channels (Memory Layout). However, both the template and the solution implement Bitmap24::data as char *data and allocate/use it as a byte buffer (new char[width*height*3], indexing by bytes in set(), save(), resize_buffer(), destructor, etc.). This is a cross-artifact attribute type mismatch: the specification expects an int* buffer but the provided template (and reference solution) use char*. Students following the problem statement will expect an int* member and integer-based indexing/packing, but the template will not compile or behave as expected if they change types without also updating allocation, indexing, and save logic. This inconsistency can confuse students and block correct implementation of the intended memory layout.",
      "severity": "HIGH",
      "category": "ATTRIBUTE_TYPE_MISMATCH",
      "related_locations": [
        {
          "type": "PROBLEM_STATEMENT",
          "file_path": "problem_statement.md",
          "start_line": 25,
          "end_line": 26
        },
        {
          "type": "TEMPLATE_REPOSITORY",
          "file_path": "template_repository/example_program/src/Bitmap24.hpp",
          "start_line": 33,
          "end_line": 36
        },
        {
          "type": "TEMPLATE_REPOSITORY",
          "file_path": "template_repository/example_program/src/Bitmap24.cpp",
          "start_line": 26,
          "end_line": 31
        },
        {
          "type": "TEMPLATE_REPOSITORY",
          "file_path": "template_repository/example_program/src/Bitmap24.cpp",
          "start_line": 68,
          "end_line": 71
        },
        {
          "type": "TEMPLATE_REPOSITORY",
          "file_path": "template_repository/example_program/src/Bitmap24.cpp",
          "start_line": 165,
          "end_line": 169
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/example_program/src/Bitmap24.hpp",
          "start_line": 33,
          "end_line": 36
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/example_program/src/Bitmap24.cpp",
          "start_line": 26,
          "end_line": 31
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/example_program/src/Bitmap24.cpp",
          "start_line": 68,
          "end_line": 71
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "solution_repository/example_program/src/Bitmap24.cpp",
          "start_line": 165,
          "end_line": 169
        }
      ],
      "suggested_fix": "Make the code and the specification consistent. Either (A) update the problem statement to reflect that Bitmap24::data is a byte buffer (char *data) if that was intended, or (B) change the template and solution code to use int *data as specified. If choosing (B), apply the following concrete changes: 1) In Bitmap24.hpp change 'char *data;' to 'int *data;'. 2) In constructors and resize_buffer allocate as 'data = new int[width * height * 3];' (or other intended layout such as one packed 32-bit int per pixel — then adjust the multiplier accordingly). 3) Update Bitmap24::set() to write into the int buffer (either store packed 32-bit pixel values or store 32-bit per-channel ints), and update Bitmap24::save() to extract bytes correctly when writing the BMP file (cast/pack/unpack with attention to endianness). 4) Update delete [] data and any memcpy/writes to match the new int* type. Document the intended layout in the problem statement (e.g., 'data is int * with 3 ints per pixel (R,G,B) or with one packed 32-bit ARGB per pixel') so students know how to index and implement set()/save() consistently."
    },
    {
      "description": "Problem statement requires a Bitmap class whose `data` attribute is an int* (\"The `data` attribute of the Bitmap class must be a pointer to `int` (int *data) ...\"). The provided code (both template and solution) implements a class named Bitmap24 with a `data` member declared as `char *data` and uses it as a byte buffer (allocations, indexing, fwrite, set(...) taking char channels). There are two coupled inconsistencies that will confuse students: (1) the problem text talks about a `Bitmap` class while the code exposes `Bitmap24` (class-name mismatch), and (2) the expected type in the problem (int *) differs from the actual type in code (char *). Students will be uncertain which class to modify and what type the `data` member should have — this directly affects allocations, pixel packing, and the set/save implementations and therefore is a high-impact mismatch between requirements and code.",
      "severity": "HIGH",
      "category": "IDENTIFIER_NAMING_INCONSISTENCY",
      "related_locations": [
        {
          "type": "PROBLEM_STATEMENT",
          "file_path": "problem_statement.md",
          "start_line": 25,
          "end_line": 26
        },
        {
          "type": "TEMPLATE_REPOSITORY",
          "file_path": "example_program/src/Bitmap24.hpp",
          "start_line": 33,
          "end_line": 36
        },
        {
          "type": "TEMPLATE_REPOSITORY",
          "file_path": "example_program/src/Bitmap24.cpp",
          "start_line": 26,
          "end_line": 31
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "example_program/src/Bitmap24.hpp",
          "start_line": 33,
          "end_line": 36
        },
        {
          "type": "SOLUTION_REPOSITORY",
          "file_path": "example_program/src/Bitmap24.cpp",
          "start_line": 26,
          "end_line": 31
        }
      ],
      "suggested_fix": "Align problem text and code. Choose one of the two consistent options: \n\nOption A (minimally invasive): Update the problem statement to refer to the existing class and representation used in the code (Bitmap24) and remove or change the requirement that `data` be an `int *`. For example, state that Bitmap24 stores pixel bytes in a `char *data` buffer (24-bit RGB) so students know to use the provided Bitmap24 implementation.\n\nOption B (follow the problem requirement): Update the template and solution code to expose the class named and typed as specified in the problem. Concretely, rename or add the intended class (e.g., `Bitmap` or change `Bitmap24` to `Bitmap`) and change the member declaration to `int *data;`. Then update all related implementations (constructors, resize_buffer, set, save, destructor, allocation/free sites, and any code that writes/read pixels) to allocate and manipulate 32-bit pixel values consistently (and adjust set() signature/usage accordingly). \n\nRecommendation: If the exercise intends students to work with 32-bit packed pixels, adopt Option B and provide a clear example in the template. If the 24-bit byte-per-channel representation is intended, adopt Option A and remove the contradictory line from the problem statement."
    }
  ]
}
